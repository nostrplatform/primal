{"version":3,"file":"FeedsTest-fcba2f70.js","sources":["../../src/pages/FeedsTest.tsx"],"sourcesContent":["import { A } from '@solidjs/router';\nimport { Component, For, onMount, Show } from 'solid-js';\nimport { createStore } from 'solid-js/store';\nimport { APP_ID } from '../App';\nimport PageCaption from '../components/PageCaption/PageCaption';\nimport PageTitle from '../components/PageTitle/PageTitle';\nimport Search from '../components/Search/Search';\nimport Wormhole from '../components/Wormhole/Wormhole';\nimport { getAdvancedFeeds } from '../lib/search';\nimport { subsTo } from '../sockets';\nimport styles from './FeedsTest.module.scss';\n\nexport type SearchFeed = {\n  id: string,\n  name: string,\n  description: string,\n  specification: any,\n  category: string\n};\n\nconst FeedsTest: Component = () => {\n\n  const [noteFeeds, setNoteFeeds] = createStore<SearchFeed[]>([]);\n  const [articleFeeds, setArticleFeeds] = createStore<SearchFeed[]>([]);\n\n  onMount(() => {\n    fetchAdvancedFeeds();\n  })\n\n  const fetchAdvancedFeeds = () => {\n    const subId = `advanced_feeds_${APP_ID}`;\n\n    const unsub = subsTo(subId, {\n      onEvent: (_, content) => {\n        const feeds = JSON.parse(content.content || '[]') as SearchFeed[];\n\n        let notes = feeds.filter(f => f.category === 'notes');\n        let articles = feeds.filter(f => f.category === 'reads');\n\n        setNoteFeeds(() => [...notes]);\n        setArticleFeeds(() => [...articles]);\n      },\n      onEose: () =>{\n        unsub();\n      },\n    });\n\n    getAdvancedFeeds(subId);\n  }\n\n  return (\n    <>\n      <PageTitle title=\"Feeds\" />\n      <Wormhole\n        to=\"search_section\"\n      >\n        <Search />\n      </Wormhole>\n      <PageCaption title=\"Feeds\" />\n\n      <div class={styles.page}>\n        <Show when={noteFeeds.length > 0}>\n          <div class={styles.section}>\n            <div class={styles.caption}>Notes</div>\n            <div class={styles.list}>\n              <For each={noteFeeds}>\n                {feed => (\n                  <div class={styles.feed}>\n                    <div class={styles.label}>\n                      <A href={`/feeds/${encodeURIComponent(feed.id)}`} >{feed.name}</A>\n                    </div>\n                    <div class={styles.description}>\n                      {feed.description}\n                    </div>\n                  </div>\n                )}\n              </For>\n            </div>\n          </div>\n        </Show>\n\n        <Show when={articleFeeds.length > 0}>\n          <div class={styles.section}>\n            <div class={styles.caption}>Reads</div>\n            <div class={styles.list}>\n              <For each={articleFeeds}>\n                {feed => (\n                  <div class={styles.feed}>\n                    <div class={styles.label}>\n                      <A href={`/feeds/${encodeURIComponent(feed.id)}`} >{feed.name}</A>\n                    </div>\n                    <div class={styles.description}>\n                      {feed.description}\n                    </div>\n                  </div>\n                )}\n              </For>\n            </div>\n          </div>\n        </Show>\n      </div>\n    </>\n  );\n}\n\nexport default FeedsTest;\n"],"names":["FeedsTest","noteFeeds","setNoteFeeds","createStore","articleFeeds","setArticleFeeds","onMount","fetchAdvancedFeeds","subId","APP_ID","unsub","subsTo","onEvent","_","content","feeds","JSON","parse","notes","filter","f","category","articles","onEose","getAdvancedFeeds","_$createComponent","PageTitle","title","Wormhole","to","children","Search","PageCaption","_el$","_tmpl$3","_$insert","Show","when","length","_el$2","_tmpl$","_el$3","firstChild","_el$4","nextSibling","For","each","feed","_el$8","_tmpl$4","_el$9","_el$10","A","href","encodeURIComponent","id","name","description","_$effect","_p$","_v$7","styles","_v$8","label","_v$9","_$className","undefined","_v$","section","_v$2","caption","_v$3","list","_el$5","_tmpl$2","_el$6","_el$7","_el$11","_el$12","_el$13","_v$10","_v$11","_v$12","_v$4","_v$5","_v$6","page"],"mappings":"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"}