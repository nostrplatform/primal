var G=Object.defineProperty;var a=(t,$)=>G(t,"name",{value:$,configurable:!0});import{h as K,e as X,ad as Y,bs as Z,I as ee,g as te,aD as ne,B as se,C as z,E as re,j as g,c as i,S as k,bD as I,l as u,m as l,d as C,w as oe,J as ae,k as ie,F as le,p as ce,s as Q,t as D,b6 as j,bu as de,x as ue}from"./index-64dc6460.js";import{L as he}from"./Loader-1ac7e304.js";import{S as x}from"./SearchOption-a7f2ab4a.js";const fe="_search_onjll_1",_e="_searchIcon_onjll_15",ve="_wide_onjll_50",ge="_searchIconDark_onjll_57",$e="_searchHolder_onjll_66",me="_focused_onjll_73",Se="_wideHolder_onjll_76",be="_searchSuggestions_onjll_80",we="_hidden_onjll_86",ye="_loadingOverlay_onjll_96",n={search:fe,searchIcon:_e,wide:ve,searchIconDark:ge,searchHolder:$e,focused:me,wideHolder:Se,searchSuggestions:be,hidden:we,loadingOverlay:ye},ke=D("<div><div>"),Ie=D('<div><form autocomplete="off"><div></div><input type="text" name="searchQuery"></form><div></div><div>'),q=D("<div>"),Ce=a(t=>{const $=Y(),d=Z(),B=ee(),h=te(),H=ne(),T=se(),[c,L]=z(""),[m,S]=z(!1),R=a(()=>j.sanitize(c().replaceAll("#","%23")),"queryUrl");let f;const J=a(s=>{s.preventDefault();const o=s.target,_=new FormData(o),r=j.sanitize(_.get("searchQuery")||"");return r.length>0?(t.onInputConfirm?t.onInputConfirm(r):B(`/search/${r.replaceAll("#","%23")}`),U(),b()):$?.sendInfo(h.formatMessage(I.invalid)),!1},"onSearch"),P=a(s=>{S(!0),de(()=>{const o=s.target?.value;if(o.startsWith("npub")||o.startsWith("nprofile")){d?.actions.findUserByNupub(o);return}L(j.sanitize(o)||"")},500)},"onInput"),F=a(s=>{S(!0)},"onFocus"),U=a(s=>{setTimeout(()=>{S(!1)},200)},"onBlur"),b=a(()=>{L(""),f&&(f.value="")},"resetQuery"),V=a(s=>{t.onUserSelect&&t.onUserSelect(s),b()},"selectUser");return re(()=>{if(c().length===0){d?.actions.getRecomendedUsers(H?.profileHistory.profiles||[]);return}d?.actions.findUsers(c())}),(()=>{const s=Ie(),o=s.firstChild,_=o.firstChild,r=_.nextSibling,w=o.nextSibling,y=w.nextSibling;o.addEventListener("submit",J),r.$$click=F,r.addEventListener("blur",U),r.addEventListener("focus",F),r.$$input=P;const p=f;return typeof p=="function"?ue(p,r):f=r,g(w,i(k,{get when(){return!t.hideDefault},get children(){return i(k,{get when(){return c().length>0},get fallback(){return i(x,{get title(){return h.formatMessage(I.searchNostr)},narrow:!0,darkTitle:!0,get icon(){return(()=>{const e=q();return u(()=>l(e,n.searchIconDark)),e})()}})},get children(){return i(x,{get href(){return C(()=>!!t.noLinks)()?void 0:`/search/${R()}`},get title(){return c()},get icon(){return(()=>{const e=q();return u(()=>l(e,n.searchIcon)),e})()},onClick:b})}})}})),g(y,i(k,{get when(){return C(()=>!!d?.isFetchingUsers)()&&c().length>0},get children(){const e=ke(),v=e.firstChild;return g(v,i(he,{})),u(()=>l(e,n.loadingOverlay)),e}}),null),g(y,i(le,{get each(){return d?.users},children:e=>i(x,{get href(){return C(()=>!!t.noLinks)()?void 0:T?.actions.profileLink(e.npub)||""},get title(){return oe(e)},get description(){return ae(e)},get icon(){return i(ie,{user:e,size:"vvs"})},get statNumber(){return H?.profileHistory.stats[e.pubkey]?.followers_count||d?.scores[e.pubkey]},get statLabel(){return h.formatMessage(I.followers)},onClick:()=>V(e)})}),null),u(e=>{const v=t.id,E=`${n.searchHolder} ${m()?n.focused:""} ${t.fullWidth?n.wideHolder:""}`,N=`${n.search} ${t.fullWidth?n.wide:""}`,W=n.searchIcon,A=t.placeholder??h.formatMessage(ce.search),M=`${n.searchSuggestions} ${m()?"":n.hidden} ${t.fullWidth?n.wide:""}`,O=`${n.searchSuggestions} ${m()?"":n.hidden} ${t.fullWidth?n.wide:""}`;return v!==e._v$&&Q(s,"id",e._v$=v),E!==e._v$2&&l(s,e._v$2=E),N!==e._v$3&&l(o,e._v$3=N),W!==e._v$4&&l(_,e._v$4=W),A!==e._v$5&&Q(r,"placeholder",e._v$5=A),M!==e._v$6&&l(w,e._v$6=M),O!==e._v$7&&l(y,e._v$7=O),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0}),u(()=>r.value=c()),s})()},"Search"),Le=K(Ce);X(["input","click"]);export{Le as S};
//# sourceMappingURL=Search-c8ce1e29.js.map
