var rt=Object.defineProperty;var w=(l,g)=>rt(l,"name",{value:g,configurable:!0});import{g as st,u as dt,b as lt,bs as ot,B as vt,C as at,D as ut,E as ge,N as he,a2 as me,aR as be,bl as Ce,d1 as qe,j as n,c as r,cN as u,A as P,l as I,m as i,S as B,k as Z,w as Me,s as A,F as ee,V as ct,J as $t,a3 as Je,q as _t,p as Ge,e as ft,t as F,b5 as gt,dE as ht,dF as mt,T as ke,x as Oe}from"./index-64dc6460.js";import{C as R}from"./Checkbox-6410fe71.js";import{H as X}from"./HelpTip-4eefb44b.js";import{P as bt}from"./PageCaption-27eb7f4c.js";import{P as Ct}from"./PageTitle-3d0a9832.js";import{s as t}from"./Settings.module-7ae8ff86.js";import"./Checkbox.module-81b9bd85.js";const xe=F("<div>"),W=F("<span>"),Mt=F("<div>This npub is included in:"),kt=F('<div><div><div><span></span></div><div></div></div><div><div><div></div><div></div><div></div></div><div><div><div></div><div></div><div></div></div></div><div><div></div><div></div><div></div></div><div></div></div><div><div></div><div></div><div><div><input type="text"><button><div></div></button></div></div><div></div><div></div><div><div><input type="text"><button><div></div></button></div></div><div>'),xt=F("<div><div></div><div></div><div>"),yt=F("<div><div><div></div></div><div></div><div>"),St=F("<div>This npub is not included in any of your filter lists."),Lt=F("<div><div><div>"),It=F("<div><div><span>"),wt=F("<button><div><div><div></div><div><div><span></span></div><div></div></div></div></div><div><div></div> "),Pt=w(()=>{const l=st(),g=dt(),T=lt(),te=ot(),ye=vt();let ne,ie;const[Qe,Se]=at(!1),Le=w(()=>{const s=ne?.value||"";if(s.startsWith("npub")||s.startsWith("nprofile")){Se(!0),te?.actions.findFilteredUserByNpub(s);return}Se(!1)},"onSearchFilteredAccount"),Ie=w(()=>{const s=ie?.value||"";(s.startsWith("npub")||s.startsWith("nprofile"))&&g?.actions.addToAllowlist(gt(s))},"onAddToAllowlist"),Xe=w(s=>{g?.actions.removeFromAllowlist(s)},"onRemoveFromAllowlist"),we=w(()=>g?.publicKey,"pubkey"),Ye=w(()=>g?.mutelists.filter(s=>s.pubkey&&s.pubkey!==we()),"mutelists"),Ze=w(()=>T?.contentModeration.filter(s=>s.name!=="my").map(s=>({name:s.name,content:s.scopes.includes(ht),trending:s.scopes.includes(mt)})),"algorithms"),k=w(()=>g?.mutelists.find(s=>s.pubkey===we()),"my"),[x,re]=ut({}),Fe=w(()=>te?.filteringReasons||[],"reasons");return ge(()=>{const s=g?.mutelists||[],y=Math.floor(Math.random()*1e4);if(s.length>0){const h=`user_mutelist_${y}_${ke}`,p=he(h,{onEvent:(H,_)=>{if(_?.kind===me.Metadata){const S=be(_,_.pubkey);re(()=>({[S.pubkey]:{...S}}))}},onEose:()=>{p()}});Ce(s.map(H=>H.pubkey||""),h)}}),ge(()=>{const s=g?.allowlist||[],y=Math.floor(Math.random()*1e4);if(s.length>0){const h=`user_allowlist_${y}_${ke}`,p=he(h,{onEvent:(H,_)=>{if(_&&_.kind===me.Metadata){const S=be(_,_.pubkey);re(()=>({[S.pubkey]:{...S}}))}},onEose:()=>{p()}});Ce(s||[],h)}}),ge(()=>{const s=te?.filteringReasons.filter(h=>!qe.includes(h))||[],y=Math.floor(Math.random()*1e4);if(s.length>0){const h=`user_reasons_${y}_${ke}`,p=he(h,{onEvent:(H,_)=>{if(_&&_.kind===me.Metadata){const S=be(_,_.pubkey);re(()=>({[S.pubkey]:{...S}}));return}},onEose:()=>{p()}});Ce(s,h)}}),(()=>{const s=kt(),y=s.firstChild,h=y.firstChild,p=h.firstChild,H=h.nextSibling,_=y.nextSibling,D=_.firstChild,S=D.firstChild,se=S.nextSibling,Ae=se.nextSibling,de=D.nextSibling,pe=de.firstChild,K=pe.firstChild,le=K.nextSibling,Ee=le.nextSibling,oe=de.nextSibling,Ne=oe.firstChild,ve=Ne.nextSibling,Te=ve.nextSibling,et=oe.nextSibling,ae=_.nextSibling,ue=ae.firstChild,ce=ue.nextSibling,$e=ce.nextSibling,He=$e.firstChild,U=He.firstChild,De=U.nextSibling,tt=De.firstChild,Y=$e.nextSibling,_e=Y.nextSibling,fe=_e.nextSibling,Pe=fe.firstChild,z=Pe.firstChild,Re=z.nextSibling,nt=Re.firstChild,it=fe.nextSibling;n(s,r(Ct,{get title(){return`${l.formatMessage(u.moderation.title)} ${l.formatMessage(u.title)}`}}),y),n(s,r(bt,{get children(){return[r(P,{href:"/settings",get children(){return l.formatMessage(u.index.title)}}),":Â ",(()=>{const e=xe();return n(e,()=>l.formatMessage(u.moderation.title)),e})()]}}),y),n(h,r(R,{id:"applyFiltering",label:"",onChange:()=>{T?.actions.setApplyContentModeration(!T.applyContentModeration)},get checked(){return T?.applyContentModeration}}),p),n(p,()=>l.formatMessage(u.moderation.applyFiltering)),n(h,r(X,{zIndex:1e3,get children(){const e=W();return n(e,()=>l.formatMessage(u.moderation.description)),e}}),null),n(H,()=>l.formatMessage(u.moderation.shortDescription)),n(_,r(B,{get when(){return!T?.applyContentModeration},get children(){const e=xe();return I(()=>i(e,t.veil)),e}}),D),n(S,()=>l.formatMessage(u.moderation.table.mutelists)),n(se,()=>l.formatMessage(u.moderation.table.content),null),n(se,r(X,{get children(){const e=W();return n(e,()=>l.formatMessage(u.moderation.table.contentHelp)),e}}),null),n(Ae,()=>l.formatMessage(u.moderation.table.trending),null),n(Ae,r(X,{get children(){const e=W();return n(e,()=>l.formatMessage(u.moderation.table.trendingHelp)),e}}),null),n(K,r(P,{href:"/p",get class(){return t.avatar},get children(){return r(Z,{get user(){return g?.activeUser},size:"xs"})}}),null),n(K,r(P,{href:"/settings/muted",get children(){return l.formatMessage(u.moderation.algos.my)}}),null),n(le,r(R,{get id(){return`${k()?.pubkey}_content`},onChange:()=>g?.actions.updateFilterList(k()?.pubkey,!k()?.content,k()?.trending),get checked(){return k()?.content},disabled:!0})),n(Ee,r(R,{get id(){return`${k()?.pubkey}_trending`},onChange:()=>g?.actions.updateFilterList(k()?.pubkey,k()?.content,!k()?.trending),get checked(){return k()?.trending},disabled:!0})),n(de,r(ee,{get each(){return Ye()},children:e=>(()=>{const a=xt(),c=a.firstChild,$=c.nextSibling,f=$.nextSibling;return n(c,r(P,{get href(){return ye?.actions.profileLink(e.pubkey)||""},get class(){return t.avatar},get children(){return r(Z,{get user(){return x[e.pubkey||""]},size:"xs"})}}),null),n(c,r(P,{get href(){return`/mutelist/${x[e.pubkey||""]?.npub}`},get children(){return l.formatMessage(u.moderation.moderationItem,{name:Me(x[e.pubkey||""])})}}),null),n($,r(R,{get id(){return`${e.pubkey}_content`},onChange:()=>g?.actions.updateFilterList(e.pubkey,!e.content,e.trending),get checked(){return e.content}})),n(f,r(R,{get id(){return`${e.pubkey}_trending`},onChange:()=>g?.actions.updateFilterList(e.pubkey,e.content,!e.trending),get checked(){return e.trending}})),I(d=>{const v=t.filterListItem,m=t.filterListName,b=e.pubkey,M=t.filterListCheck,L=t.filterListCheck;return v!==d._v$27&&i(a,d._v$27=v),m!==d._v$28&&i(c,d._v$28=m),b!==d._v$29&&A(c,"title",d._v$29=b),M!==d._v$30&&i($,d._v$30=M),L!==d._v$31&&i(f,d._v$31=L),d},{_v$27:void 0,_v$28:void 0,_v$29:void 0,_v$30:void 0,_v$31:void 0}),a})()}),null),n(Ne,()=>l.formatMessage(u.moderation.table.algos)),n(ve,()=>l.formatMessage(u.moderation.table.content),null),n(ve,r(X,{get children(){const e=W();return n(e,()=>l.formatMessage(u.moderation.table.contentHelp)),e}}),null),n(Te,()=>l.formatMessage(u.moderation.table.trending),null),n(Te,r(X,{get children(){const e=W();return n(e,()=>l.formatMessage(u.moderation.table.trendingHelp)),e}}),null),n(et,r(ee,{get each(){return Ze()},children:e=>(()=>{const a=yt(),c=a.firstChild,$=c.firstChild,f=c.nextSibling,d=f.nextSibling;return n(c,r(P,{get href(){return`/mutelist/${e.name}`},get children(){return l.formatMessage(u.moderation.algos[e.name])}}),null),n(f,r(R,{get id(){return`${e.name}_content`},onChange:()=>T?.actions.modifyContentModeration(e.name,!e.content,e.trending),get checked(){return e.content}})),n(d,r(R,{get id(){return`${e.name}_trending`},onChange:()=>T?.actions.modifyContentModeration(e.name,e.content,!e.trending),get checked(){return e.trending}})),I(v=>{const m=t.filterListItem,b=t.filterListName,M=e.name,L=t.algoLogo,o=t.filterListCheck,C=t.filterListCheck;return m!==v._v$32&&i(a,v._v$32=m),b!==v._v$33&&i(c,v._v$33=b),M!==v._v$34&&A(c,"title",v._v$34=M),L!==v._v$35&&i($,v._v$35=L),o!==v._v$36&&i(f,v._v$36=o),C!==v._v$37&&i(d,v._v$37=C),v},{_v$32:void 0,_v$33:void 0,_v$34:void 0,_v$35:void 0,_v$36:void 0,_v$37:void 0}),a})()})),n(ue,()=>l.formatMessage(u.moderation.searchFilteredAccount)),n(ce,()=>l.formatMessage(u.moderation.searchForFiltered)),U.addEventListener("change",()=>Le());const Ue=ne;typeof Ue=="function"?Oe(Ue,U):ne=U,De.$$click=()=>Le(),n(ae,r(B,{get when(){return Qe()},get children(){return[r(B,{get when(){return Fe().length>0},get children(){const e=Mt();return I(()=>i(e,t.fiterSearchCaption)),e}}),(()=>{const e=xe();return n(e,r(ee,{get each(){return Fe()},get fallback(){return(()=>{const a=St();return I(()=>i(a,t.fiterSearchCaption)),a})()},children:a=>r(B,{get when(){return qe.includes(a)},get fallback(){return(()=>{const c=It(),$=c.firstChild,f=$.firstChild;return A($,"title",a),n($,r(P,{get href(){return ye?.actions.profileLink(a)||""},get class(){return t.avatar},get children(){return r(Z,{get user(){return x[a||""]},size:"xs"})}}),f),n(f,r(B,{get when(){return a!==g?.publicKey},get fallback(){return l.formatMessage(u.moderation.algos.my)},get children(){return l.formatMessage(u.moderation.moderationItem,{name:Me(x[a||""])})}})),I(d=>{const v=t.filterListItem,m=t.filterListName;return v!==d._v$41&&i(c,d._v$41=v),m!==d._v$42&&i($,d._v$42=m),d},{_v$41:void 0,_v$42:void 0}),c})()},get children(){const c=Lt(),$=c.firstChild,f=$.firstChild;return A($,"title",a),n($,()=>l.formatMessage(u.moderation.algos[a]),null),I(d=>{const v=t.filterListItem,m=t.filterListName,b=t.algoLogo;return v!==d._v$38&&i(c,d._v$38=v),m!==d._v$39&&i($,d._v$39=m),b!==d._v$40&&i(f,d._v$40=b),d},{_v$38:void 0,_v$39:void 0,_v$40:void 0}),c}})})),I(()=>i(e,t.filterListTable)),e})()]}}),Y),n(Y,()=>l.formatMessage(u.moderation.allowList)),n(_e,()=>l.formatMessage(u.moderation.allowListsDescription)),z.addEventListener("change",()=>Ie());const ze=ie;return typeof ze=="function"?Oe(ze,z):ie=z,Re.$$click=()=>Ie(),n(it,r(ee,{get each(){return g?.allowlist},children:e=>(()=>{const a=wt(),c=a.firstChild,$=c.firstChild,f=$.firstChild,d=f.nextSibling,v=d.firstChild,m=v.firstChild,b=v.nextSibling,M=c.nextSibling,L=M.firstChild;return L.nextSibling,a.$$click=()=>Xe(e),n(f,r(Z,{get user(){return x[e||""]},size:"xs"})),n(m,()=>Me(x[e||""])),n(v,r(ct,{get user(){return x[e||""]}}),null),n(v,r(B,{get when(){return x[e||""]?.nip05},get children(){const o=W();return n(o,()=>$t(x[e||""])),I(C=>{const E=t.verification,N=x[e||""]?.nip05;return E!==C._v$43&&i(o,C._v$43=E),N!==C._v$44&&A(o,"title",C._v$44=N),C},{_v$43:void 0,_v$44:void 0}),o}}),null),n(b,()=>Je(e)),n(M,()=>l.formatMessage(_t.removeRelay),null),I(o=>{const C=t.allowlistItem,E=t.allowlistEntry,N=t.allowlistInfo,V=Je(e),j=t.avatar,q=t.allowlistUserInfo,J=t.firstLine,G=t.npub,O=t.remove,Q=t.closeIcon;return C!==o._v$45&&i(a,o._v$45=C),E!==o._v$46&&i(c,o._v$46=E),N!==o._v$47&&i($,o._v$47=N),V!==o._v$48&&A($,"title",o._v$48=V),j!==o._v$49&&i(f,o._v$49=j),q!==o._v$50&&i(d,o._v$50=q),J!==o._v$51&&i(v,o._v$51=J),G!==o._v$52&&i(b,o._v$52=G),O!==o._v$53&&i(M,o._v$53=O),Q!==o._v$54&&i(L,o._v$54=Q),o},{_v$45:void 0,_v$46:void 0,_v$47:void 0,_v$48:void 0,_v$49:void 0,_v$50:void 0,_v$51:void 0,_v$52:void 0,_v$53:void 0,_v$54:void 0}),a})()})),I(e=>{const a=t.settingsContent,c=t.settingsCaption,$=t.moderationDescription,f=t.filterListTable,d=t.filterListHeader,v=t.filterListItem,m=t.filterListName,b=k()?.pubkey,M=t.filterListCheck,L=t.filterListCheck,o=`${t.filterListHeader} ${t.secondFilter}`,C=t.settingsContentBorderless,E=t.settingsCaption,N=t.moderationDescription,V=t.searchFilteredAccount,j=t.npubInput,q=l.formatMessage(Ge.searchByNpub),J=t.noIcon,G=t.searchIcon,O=t.settingsCaption,Q=t.moderationDescription,Be=t.searchFilteredAccount,We=t.npubInput,Ke=l.formatMessage(Ge.addNpub),Ve=t.noIcon,je=t.addIconBig;return a!==e._v$&&i(y,e._v$=a),c!==e._v$2&&i(h,e._v$2=c),$!==e._v$3&&i(H,e._v$3=$),f!==e._v$4&&i(_,e._v$4=f),d!==e._v$5&&i(D,e._v$5=d),v!==e._v$6&&i(pe,e._v$6=v),m!==e._v$7&&i(K,e._v$7=m),b!==e._v$8&&A(K,"title",e._v$8=b),M!==e._v$9&&i(le,e._v$9=M),L!==e._v$10&&i(Ee,e._v$10=L),o!==e._v$11&&i(oe,e._v$11=o),C!==e._v$12&&i(ae,e._v$12=C),E!==e._v$13&&i(ue,e._v$13=E),N!==e._v$14&&i(ce,e._v$14=N),V!==e._v$15&&i($e,e._v$15=V),j!==e._v$16&&i(He,e._v$16=j),q!==e._v$17&&A(U,"placeholder",e._v$17=q),J!==e._v$18&&i(U,e._v$18=J),G!==e._v$19&&i(tt,e._v$19=G),O!==e._v$20&&i(Y,e._v$20=O),Q!==e._v$21&&i(_e,e._v$21=Q),Be!==e._v$22&&i(fe,e._v$22=Be),We!==e._v$23&&i(Pe,e._v$23=We),Ke!==e._v$24&&A(z,"placeholder",e._v$24=Ke),Ve!==e._v$25&&i(z,e._v$25=Ve),je!==e._v$26&&i(nt,e._v$26=je),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0,_v$13:void 0,_v$14:void 0,_v$15:void 0,_v$16:void 0,_v$17:void 0,_v$18:void 0,_v$19:void 0,_v$20:void 0,_v$21:void 0,_v$22:void 0,_v$23:void 0,_v$24:void 0,_v$25:void 0,_v$26:void 0}),s})()},"Moderation");ft(["click"]);export{Pt as default};
//# sourceMappingURL=Moderation-1034bda0.js.map
