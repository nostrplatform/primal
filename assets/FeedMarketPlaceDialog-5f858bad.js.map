{"version":3,"file":"FeedMarketPlaceDialog-5f858bad.js","sources":["../../src/components/FeedSorter/FeedSorter.tsx","../../src/components/FeedMarketplace/FeedMarketPlaceDialog.tsx"],"sourcesContent":["import { Component, createEffect, createSignal, For, Show } from 'solid-js';\nimport { useAccountContext } from '../../contexts/AccountContext';\nimport { FeedType } from '../../contexts/SettingsContext';\nimport { hookForDev } from '../../lib/devTools';\nimport { PrimalArticleFeed } from '../../types/primal';\nimport Checkbox from '../Checkbox/Checkbox';\nimport CheckBox2 from '../Checkbox/CheckBox2';\n\nimport styles from './FeedSorter.module.scss';\n\nconst lockedFeeds = ['primal'];\n\nexport type FeedSorterActions = {\n  remove?: (feed: PrimalArticleFeed, feedType: FeedType) => void,\n  move?: (from: number, to: number, feedType: FeedType) => void,\n  rename?: (feed: PrimalArticleFeed, newName: string, feedType: FeedType) => void,\n  enable?: (feed: PrimalArticleFeed, enabled: boolean, feedType: FeedType) => void,\n}\n\nconst FeedSorter: Component<{\n  id?: string,\n  feedType: 'home' | 'reads',\n  feeds: PrimalArticleFeed[],\n  actions: FeedSorterActions,\n\n}> = (props) => {\n\n  let sorter: any;\n  const account = useAccountContext();\n\n  const [editMode, setEditMode] = createSignal('');\n\n  const [newName, setNewName] = createSignal('');\n\n  const constructId = (feed: PrimalArticleFeed) => {\n    return feed.spec;\n  }\n\n  const removeFeed = (feed: PrimalArticleFeed) => {\n    props.actions.remove && props.actions.remove(feed, props.feedType);\n  };\n\n  const editFeed = (feed: PrimalArticleFeed) => {\n    const id = `${constructId(feed)}`;\n    setEditMode(() => id);\n    setNewName(() => feed.name);\n    const input = document.getElementById(`input_${id}`);\n    input && input.focus();\n  };\n\n  const updateFeedName = (feed: PrimalArticleFeed) => {\n    props.actions.rename && props.actions.rename(feed, newName(), props.feedType);\n    setEditMode('');\n  }\n\n  const sortList = (target: any) => {\n    // Get all items\n    let items = target.getElementsByClassName(styles.feedItem);\n    // init current item\n    let current: any = null;\n\n    // (Make items draggable and sortable\n    for (let i of items) {\n      i.draggable = true;\n\n      i.ondragstart = (e: DragEvent) => {\n        current = i;\n        for (let it of items) {\n          if (it === current) {\n            it.classList.add(styles.draggedItem);\n          }\n        }\n      };\n\n      i.ondragenter = (e: DragEvent) => {\n        const oldIndex = current.getAttribute('data-index');\n        const newIndex = i.getAttribute('data-index');\n\n        if (oldIndex > newIndex) {\n          i.classList.add(styles.draggedBefore);\n          i.classList.remove(styles.draggedAfter);\n        }\n        if (oldIndex < newIndex) {\n          i.classList.add(styles.draggedAfter);\n          i.classList.remove(styles.draggedBefore);\n        }\n      };\n\n      i.ondragleave = () => {\n        i.classList.remove(styles.draggedBefore);\n        i.classList.remove(styles.draggedAfter);\n      }\n\n      i.ondragend = () => { for (let it of items) {\n          it.classList.remove(styles.draggedItem);\n          i.classList.remove(styles.draggedBefore);\n          i.classList.remove(styles.draggedAfter);\n      }};\n\n      // Prevent default \"drop\", so we can do our own\n      i.ondragover = (e: DragEvent) => e.preventDefault();\n\n      i.ondrop = (e: DragEvent) => {\n        e.preventDefault();\n        if (i != current) {\n          const oldIndex = current.getAttribute('data-index');\n          const newIndex = i.getAttribute('data-index');\n\n          props.actions.move && props.actions.move(oldIndex, newIndex, props.feedType);\n\n          for (let it of items) {\n            it.classList.remove(styles.draggedBefore);\n            it.classList.remove(styles.draggedBefore);\n            it.classList.remove(styles.draggeditem);\n          }\n        }\n      };\n    }\n  }\n\n  createEffect(() => {\n    if (sorter && props.feeds.length > 0) {\n      sortList(sorter);\n    }\n  });\n\n  const isLockedFeed = (feed: PrimalArticleFeed) => lockedFeeds.includes(feed.feedkind || '');\n\n  return (\n    <div id={props.id} class={styles.feedSorter} ref={sorter}>\n      <Show when={props.feeds.length > 0}>\n        <For each={props.feeds}>\n          {(feed, index) => (\n            <div class={styles.feedItem} data-value={feed.spec} data-index={index()}>\n              <Show\n                when={editMode() === constructId(feed)}\n                fallback={\n                  <>\n                    <div class={styles.feedInfo}>\n                      <div class={styles.feedName}>{feed.name}</div>\n                      <div class={styles.feedDescription}>{feed.description}</div>\n                    </div>\n                    <Show when={account?.hasPublicKey()}>\n                      <div class={styles.controls}>\n                        <div class={styles.manageControls}>\n                          <Show when={isLockedFeed(feed)}>\n                            <div class={styles.feedEnabled}>\n                              <CheckBox2\n                                onChange={(v: boolean) => {\n                                  props.actions.enable && props.actions.enable(feed, v, props.feedType);\n                                }}\n                                checked={feed.enabled}\n                              />\n                            </div>\n                          </Show>\n\n                          <Show when={!isLockedFeed(feed)}>\n                            <button\n                              class={styles.mngButton}\n                              onClick={() => editFeed(feed)}\n                              disabled={isLockedFeed(feed)}\n                            >\n                              <div class={styles.editButton}></div>\n                            </button>\n                            <button\n                              class={styles.mngButton}\n                              onClick={() => removeFeed(feed)}\n                              disabled={isLockedFeed(feed)}\n                            >\n                              <div class={styles.deleteButton}></div>\n                            </button>\n                          </Show>\n                          <button\n                            class={styles.sortButton}\n                            onClick={() => {}}\n                          >\n                            <div class={styles.dragIcon}></div>\n                          </button>\n                        </div>\n                      </div>\n                    </Show>\n                  </>\n                }\n              >\n                <div class={styles.feedEdit}>\n                  <input\n                    id={`input_${constructId(feed)}`}\n                    class={styles.feedNameInput}\n                    value={newName()}\n                    // @ts-ignore\n                    onInput={(e: InputEvent) => setNewName(() => e.target?.value)}\n                    onKeyUp={(e: KeyboardEvent) => {\n                      if (e.code === 'Enter') {\n                        updateFeedName(feed);\n                      }\n\n                      if (e.code === 'Escape') {\n                        setEditMode('');\n                      }\n                    }}\n                  />\n                  <div class={styles.feedEditControl}>\n                    <button\n                      onClick={() => updateFeedName(feed)}\n                      title=\"Update\"\n                    >\n                      <div class={styles.checkIcon}></div>\n                    </button>\n                    <button\n                      onClick={() => {setEditMode('')}}\n                      title=\"Cancel\"\n                    >\n                      <div class={styles.closeIcon}></div>\n                    </button>\n                  </div>\n                </div>\n              </Show>\n            </div>\n          )}\n        </For>\n      </Show>\n    </div>\n  )\n}\n\nexport default hookForDev(FeedSorter);\n","import { Component, createEffect, For, Match, onMount, Switch } from 'solid-js';\nimport styles from './FeedMarketPlace.module.scss';\n\nimport AdvancedSearchDialog from '../AdvancedSearch/AdvancedSearchDialog';\nimport { subsTo } from '../../sockets';\nimport { APP_ID } from '../../App';\nimport { fetchDVMFeeds } from '../../lib/feed';\nimport { Kind } from '../../constants';\nimport { createStore } from 'solid-js/store';\nimport { NostrDVM, PrimalArticleFeed, PrimalDVM, PrimalUser } from '../../types/primal';\nimport { convertToUser } from '../../stores/profile';\nimport FeedMarketItem from './FeedMarketPlaceItem';\nimport ButtonSecondary from '../Buttons/ButtonSecondary';\nimport FeedMarketPlacePreview from './FeedMarketPlacePreview';\nimport ButtonPrimary from '../Buttons/ButtonPrimary';\nimport { emptyStore, MarketplaceStore } from './FeedMarketPlace';\nimport { useAccountContext } from '../../contexts/AccountContext';\n\n\nconst FeedMarketPlaceDialog: Component<{\n  open?: boolean,\n  type?: 'notes' | 'reads',\n  setOpen?: (v: boolean) => void,\n  onAddFeed?: (feed: PrimalArticleFeed) => void,\n}> = (props) => {\n  const account = useAccountContext();\n\n  const [store, updateStore] = createStore<MarketplaceStore>({ ...emptyStore });\n\n  createEffect(() => {\n    if (props.open) {\n      fetchDVMs();\n    }\n    else {\n      clearDVMs();\n    }\n  });\n\n  const fetchDVMs = () => {\n    const subId = `feed_market_${APP_ID}`;\n\n    const unsub = subsTo(subId, {\n      onEvent: (_, content) => {\n\n        if (content.kind === Kind.DVM) {\n          const dvmData = JSON.parse(content.content);\n\n          const identifier = (content.tags?.find(t => t[0] === 'd') || ['d', ''])[1];\n\n          const dvm: PrimalDVM = {\n            id: content.id,\n            name: dvmData.name || '',\n            about: dvmData.about || '',\n            amount: dvmData.amount || 'free',\n            primalVerifiedRequired: dvmData.primalVerifiedRequired || false,\n            pubkey: content.pubkey,\n            supportedKinds: content.tags?.reduce<string[]>((acc, t: string[]) => t[0] === 'k' ? [...acc, t[1]] : acc, []) || [],\n            identifier,\n            picture: dvmData.picture,\n            image: dvmData.image,\n            coordinate: `${Kind.DVM}:${content.pubkey}:${identifier}`,\n            primal_spec: dvmData.primal_spec,\n          };\n\n          updateStore('dvms', store.dvms.length, () => ({ ...dvm }));\n          return;\n        }\n\n        if (content.kind === Kind.Metadata) {\n          const user = convertToUser(content, content.pubkey);\n\n          updateStore('users', user.pubkey, () => ({ ...user }));\n          return;\n        }\n\n        if (content.kind === Kind.NoteStats) {\n          const stats = JSON.parse(content.content);\n\n          if (!stats.event_id) return;\n\n          updateStore('dvmStats', stats.event_id, () => ({\n            likes: stats.likes || 0,\n            satszapped: stats.satszapped || 0,\n          }));\n\n        }\n      },\n      onEose: () => {\n        unsub();\n      }\n    });\n\n    fetchDVMFeeds(account?.publicKey, subId, props.type);\n  }\n\n  const clearDVMs = () => {\n    // delay for close animation\n    setTimeout(() => {\n      updateStore(() => ({\n        dvms: [],\n        dvmStats: {},\n        users: {},\n        previewDvm: undefined,\n      }));\n\n    }, 300);\n  }\n\n\n  return (\n    <AdvancedSearchDialog\n      open={props.open}\n      setOpen={props.setOpen}\n      title={\n        <div class={styles.feedMarketplaceTitle}>\n          Feed Marketplace\n        </div>\n      }\n      triggerClass={'hidden'}\n    >\n      <Switch>\n        <Match when={!store.previewDvm}>\n          <div class={styles.feedMarketplaceContent}>\n            <div class={styles.booths}>\n              <For each={store.dvms}>\n                {dvm => (\n                  <FeedMarketItem\n                    dvm={dvm}\n                    author={store.users[dvm.pubkey]}\n                    stats={store.dvmStats[dvm.id]}\n                    onClick={(d) => {\n                      updateStore('previewDvm', () => ({ ...d }))\n                    }}\n                  />\n                )}\n              </For>\n            </div>\n\n            <div class={styles.feedMarketplaceFooter}>\n              <div class={styles.instruction}>\n                Select a feed to preview it\n              </div>\n\n              <ButtonSecondary\n                light={true}\n                onClick={() => props.setOpen && props.setOpen(false)}\n              >\n                Cancel\n              </ButtonSecondary>\n            </div>\n          </div>\n        </Match>\n        <Match when={store.previewDvm}>\n          <div class={styles.feedMarketplaceContent}>\n            <FeedMarketPlacePreview\n              dvm={store.previewDvm}\n              author={store.users[store.previewDvm?.pubkey || '']}\n              stats={store.dvmStats[store.previewDvm?.id || '']}\n              type={props.type || 'notes'}\n              isInDialog={true}\n            />\n          </div>\n\n          <div class={styles.feedMarketplacePreviewFooter}>\n            <ButtonSecondary\n              light={true}\n              onClick={() => updateStore('previewDvm', () => undefined)}\n            >\n              Back\n            </ButtonSecondary>\n            <ButtonPrimary\n              onClick={() => {\n                const dvm = store.previewDvm;\n                if (!props.onAddFeed || !dvm) return;\n\n                const spec = dvm.primal_spec ?? JSON.stringify({\n                  dvm_id: dvm.id,\n                  dvm_pubkey: dvm.pubkey,\n                  kind: props.type,\n                });\n\n                const feed: PrimalArticleFeed = {\n                  name: dvm.name,\n                  description: dvm.about,\n                  spec,\n                  enabled: true,\n                  feedkind: 'dvm',\n                }\n\n                props.onAddFeed(feed)\n              }}\n            >\n              Add feed\n            </ButtonPrimary>\n          </div>\n        </Match>\n      </Switch>\n    </AdvancedSearchDialog>\n  )\n}\n\nexport default FeedMarketPlaceDialog;\n"],"names":["lockedFeeds","FeedSorter","props","sorter","account","useAccountContext","editMode","setEditMode","createSignal","newName","setNewName","constructId","feed","spec","removeFeed","actions","remove","feedType","editFeed","id","name","input","document","getElementById","focus","updateFeedName","rename","sortList","target","items","getElementsByClassName","styles","feedItem","current","i","draggable","ondragstart","e","it","classList","add","draggedItem","ondragenter","oldIndex","getAttribute","newIndex","draggedBefore","draggedAfter","ondragleave","ondragend","ondragover","preventDefault","ondrop","move","draggeditem","createEffect","feeds","length","isLockedFeed","includes","feedkind","_el$","_tmpl$","_ref$","_$use","_$insert","_$createComponent","Show","when","children","For","each","index","_el$2","fallback","_el$10","_tmpl$3","_el$11","firstChild","_el$12","nextSibling","description","_$effect","_p$","_v$12","feedInfo","_v$13","feedName","_v$14","feedDescription","_$className","undefined","hasPublicKey","_el$13","_tmpl$5","_el$14","_el$20","_el$21","_el$15","CheckBox2","onChange","v","enable","checked","enabled","feedEnabled","_el$16","_tmpl$4","_el$17","$$click","_v$15","mngButton","_v$16","_v$17","editButton","disabled","_el$18","_el$19","_v$18","_v$19","_v$20","deleteButton","_v$21","controls","_v$22","manageControls","_v$23","sortButton","_v$24","dragIcon","_el$3","_tmpl$2","_el$4","_el$5","_el$6","_el$7","_el$8","_el$9","$$keyup","code","$$input","value","_v$3","feedEdit","_v$4","_v$5","feedNameInput","_v$6","feedEditControl","_v$7","checkIcon","_v$8","closeIcon","_$setAttribute","_v$9","_v$10","_v$11","_v$","_v$2","feedSorter","FeedSorter$1","hookForDev","_$delegateEvents","FeedMarketPlaceDialog","store","updateStore","createStore","emptyStore","open","fetchDVMs","clearDVMs","subId","APP_ID","unsub","subsTo","onEvent","_","content","kind","Kind","DVM","dvmData","JSON","parse","identifier","tags","find","t","dvm","about","amount","primalVerifiedRequired","pubkey","supportedKinds","reduce","acc","picture","image","coordinate","primal_spec","dvms","Metadata","user","convertToUser","NoteStats","stats","event_id","likes","satszapped","onEose","fetchDVMFeeds","publicKey","type","setTimeout","dvmStats","users","previewDvm","AdvancedSearchDialog","setOpen","title","feedMarketplaceTitle","triggerClass","Switch","Match","FeedMarketItem","author","onClick","d","ButtonSecondary","light","feedMarketplaceContent","booths","feedMarketplaceFooter","instruction","FeedMarketPlacePreview","isInDialog","ButtonPrimary","onAddFeed","stringify","dvm_id","dvm_pubkey","feedMarketplacePreviewFooter"],"mappings":"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"}