var D=Object.defineProperty;var l=(u,n)=>D(u,"name",{value:n,configurable:!0});import{U as I,cR as E,I as U,u as H,C as $,E as w,W as x,c as r,j as d,l as p,m as c,M as _,a2 as g,F as C,H as M,S as R,A as j,t as f}from"./index-64dc6460.js";import{L as G}from"./Loader-1ac7e304.js";import{N as K}from"./Note-f0f70728.js";import{P as O}from"./PageTitle-3d0a9832.js";import{S as Q}from"./StickySidebar-65b823c5.js";import{s as a}from"./FeedsTest.module-c5555bee.js";import{A as W}from"./ArticlePreview-3d0aa4c8.js";import{P as z}from"./Paginator-4878ac5b.js";import{B as J}from"./ButtonLink-2f835890.js";import{S as V}from"./SaveFeedDialog-7a5e022d.js";import{s as X,A as Y}from"./AdvancedSearch-214929ee.js";import"./ParsedNote-9900e3c8.js";import"./dates-9bcb2bf7.js";import"./ButtonGhost-a0fa1826.js";import"./Buttons.module-e818c1ea.js";import"./5WXHJDCZ-8b9b8e69.js";import"./index-b4296c5e.js";import"./ButtonPrimary-1f64caa8.js";import"./Wormhole-fa0163d3.js";import"./JFO5B7NF-4a51a11a.js";import"./QJIB6BDF-1d7b1e44.js";import"./JNCCF6MP-19ab5fd3.js";import"./index-c76cfba2.js";import"./AdvancedSearchDialog-eff41eef.js";import"./index-a25c8160.js";import"./ButtonSecondary-cc5e2282.js";import"./ButtonPremium-cdbfc08e.js";import"./PageCaption-27eb7f4c.js";import"./TextInput-e0ece469.js";import"./G5FCC32B-f4759418.js";import"./RLGGFAYQ-2a48be09.js";import"./LR7LBJN3-a1aba763.js";import"./SOM3K36D-40feb6ac.js";import"./VI7QYH27-fb7b5f5a.js";import"./SearchOption-a7f2ab4a.js";const Z=f("<div><div><div>search results</div></div><div>"),ee=f("<div>No results found"),te=f("<div><div><div>This is a Primal Premium feed.</div><div>Buy a Subscription to become a Nostr power user and support our work:"),b=f("<div>"),Ee=l(()=>{const u=I(),n=E(),A=U(),k=H(),[L,N]=$(!1);$(!1);const[m,P]=$(""),q=l(()=>["premium","premium-legend"].includes(k?.membershipStatus.tier||""),"isPremium");w(x(()=>u.query,(e,t)=>{if(!e||e===t)return;let o=decodeURIComponent(u.query);o.includes(" pas:1")||(o+=" pas:1"),P(()=>o),n?.actions.clearSearch(),n?.actions.findContent(o)}));const S=l(()=>m().search(/kind:30023/)>=0?g.LongForm:1,"kind");w(x(()=>u.query,(e,t)=>{!e||e===t||X("command",()=>e)}));const T=l(()=>[g.LongForm].includes(S())?"reads":"home","feedType"),B=l(e=>{if(e===m())return n?.actions.clearSearch(),n?.actions.findContent(e),!1;A(`/asearch/${encodeURIComponent(m())}`)},"submitCommandChange");return[r(O,{title:"Advanced search results"}),(()=>{const e=Z(),t=e.firstChild,o=t.nextSibling;return d(o,r(V,{get open(){return L()},setOpen:N,get query(){return m()},get feedType(){return T()}}),null),d(o,r(J,{onClick:()=>A("/asearch",{state:{query:m()}}),children:"Back to Advanced search"}),null),p(i=>{const v=a.advancedSerchResultsHeader,s=a.caption,h=a.actions;return v!==i._v$&&c(e,i._v$=v),s!==i._v$2&&c(t,i._v$2=s),h!==i._v$3&&c(o,i._v$3=h),i},{_v$:void 0,_v$2:void 0,_v$3:void 0}),e})(),r(Q,{get children(){return r(Y,{get command(){return m()},onCommandChange:P,submitCommandChange:B})}}),(()=>{const e=b();return d(e,r(M,{get children(){return[r(_,{get when(){return[g.LongForm,g.LongFormShell].includes(S())},get children(){return r(C,{get each(){return n?.reads},children:t=>r(W,{article:t})})}}),r(_,{get when(){return[g.Text].includes(S())},get children(){return r(C,{get each(){return n?.notes},children:t=>r(K,{note:t,shorten:!0})})}}),r(_,{get when(){return!n?.isFetchingContent&&(n?.notes.length===0||n?.reads.length===0)},get children(){const t=ee();return t.firstChild,d(t,r(C,{get each(){return n?.errors},children:o=>(()=>{const i=b();return d(i,o),p(()=>c(i,a.error)),i})()}),null),p(()=>c(t,a.noResults)),t}})]}}),null),d(e,r(R,{get when(){return n?.isFetchingContent},get children(){return r(G,{})}}),null),d(e,r(R,{get when(){return!q()},get children(){const t=te(),o=t.firstChild,i=o.firstChild,v=i.nextSibling;return d(t,r(j,{href:"/premium",get class(){return a.premiumLink},children:"Get Primal Premium"}),null),p(s=>{const h=a.moreSearchInfo,y=a.moreSearchCaption,F=a.moreSearchDescription;return h!==s._v$4&&c(t,s._v$4=h),y!==s._v$5&&c(i,s._v$5=y),F!==s._v$6&&c(v,s._v$6=F),s},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),t}}),null),p(()=>c(e,a.list)),e})(),r(z,{loadNextPage:()=>n?.actions.fetchContentNextPage(m())})]},"AdvancedSearchResults");export{Ee as default};
//# sourceMappingURL=AdvancedSearchResults-5ca65718.js.map
