{"version":3,"file":"Settings-830d3cd7.js","sources":["../../src/components/SettingsSidebar/SettingsSidebar.tsx","../../src/pages/Settings/Settings.tsx"],"sourcesContent":["import { useIntl } from '@cookbook/solid-intl';\nimport { Component, For, Show } from 'solid-js';\nimport { useAccountContext } from '../../contexts/AccountContext';\nimport { settings as t } from '../../translations';\n\nimport { Relay, relayInit, utils } from \"../../lib/nTools\";\n\nimport styles from './SettingsSidebar.module.scss';\nimport { cacheServer, isConnected, socket } from '../../sockets';\nimport { hookForDev } from '../../lib/devTools';\n\nconst SettingsSidebar: Component<{ id?: string }> = (props) => {\n\n  const intl = useIntl();\n  const account = useAccountContext();\n\n  const connectedRelays = () => account?.relays || [];\n\n  const disconnectedRelays = () => {\n    const allRelayUrls = Object.keys(account?.relaySettings || {}).map(utils.normalizeURL);\n    const connectedUrls = connectedRelays().map(r => utils.normalizeURL(r.url));\n\n    return allRelayUrls.filter(url => !connectedUrls.includes(url));\n  };\n\n  return (\n    <div id={props.id}>\n      <div class={styles.headingConnectedRelays}>\n        <div>\n          {intl.formatMessage(t.relays)}\n        </div>\n      </div>\n\n      <For each={connectedRelays()}>\n        {relay => (\n          <div class={styles.relayEntry}>\n            <Show\n              when={!account?.proxyThroughPrimal}\n              fallback={<div class={styles.suspended}></div>}\n            >\n              <div class={styles.connected}></div>\n            </Show>\n            <span class={styles.relayUrl} title={relay.url}>\n              {relay.url}\n            </span>\n          </div>\n        )}\n      </For>\n      <For each={disconnectedRelays()}>\n        {relayUrl => (\n          <div class={styles.relayEntry}>\n            <Show\n              when={!account?.proxyThroughPrimal}\n              fallback={<div class={styles.suspended}></div>}\n            >\n              <div class={styles.disconnected}></div>\n            </Show>\n            <span class={styles.relayUrl} title={`${relayUrl}`}>\n              {`${relayUrl}`}\n            </span>\n          </div>\n        )}\n      </For>\n\n      <div class={styles.headingCachingService}>\n        <div>\n          {intl.formatMessage(t.cashingService)}\n        </div>\n      </div>\n\n      <div class={styles.relayEntry}>\n        <Show\n          when={isConnected()}\n          fallback={<div class={styles.disconnected}></div>}\n        >\n          <div class={styles.connected}></div>\n        </Show>\n        <span>\n          {socket()?.url || cacheServer}\n        </span>\n      </div>\n    </div>\n  )\n}\n\nexport default hookForDev(SettingsSidebar);\n","import { Component } from 'solid-js';\nimport styles from './Settings.module.scss';\n\nimport Wormhole from '../../components/Wormhole/Wormhole';\nimport { useIntl } from '@cookbook/solid-intl';\nimport Search from '../../components/Search/Search';\nimport { settings as t } from '../../translations';\nimport StickySidebar from '../../components/StickySidebar/StickySidebar';\nimport SettingsSidebar from '../../components/SettingsSidebar/SettingsSidebar';\nimport PageTitle from '../../components/PageTitle/PageTitle';\n\nconst Settings: Component<any> = (props) => {\n\n  const intl = useIntl();\n\n  return (\n    <div class={styles.settingsContainer}>\n      <PageTitle title={intl.formatMessage(t.title)} />\n\n      <Wormhole to=\"search_section\">\n        <Search />\n      </Wormhole>\n\n      <StickySidebar>\n        <SettingsSidebar />\n      </StickySidebar>\n\n      {props.children}\n    </div>\n  )\n}\n\nexport default Settings;\n"],"names":["SettingsSidebar","props","intl","useIntl","account","useAccountContext","connectedRelays","relays","disconnectedRelays","allRelayUrls","Object","keys","relaySettings","map","utils","normalizeURL","connectedUrls","r","url","filter","includes","_el$","_tmpl$2","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$5","_el$6","_el$8","_$insert","formatMessage","t","_$createComponent","For","each","children","relay","_el$9","_tmpl$3","_el$11","Show","when","proxyThroughPrimal","fallback","_el$12","_tmpl$","_$effect","_$className","styles","suspended","_el$10","connected","_p$","_v$5","relayEntry","_v$6","relayUrl","_v$7","_$setAttribute","undefined","_el$13","_el$15","_el$16","_el$14","disconnected","_v$8","_v$9","cashingService","isConnected","_el$17","_el$7","socket","cacheServer","_v$","id","_v$2","headingConnectedRelays","_v$3","headingCachingService","_v$4","hookForDev","Settings","PageTitle","title","Wormhole","to","Search","StickySidebar","settingsContainer"],"mappings":"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"}