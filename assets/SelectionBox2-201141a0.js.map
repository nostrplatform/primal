{"version":3,"file":"SelectionBox2-201141a0.js","sources":["../../src/components/SelectionBox/SelectionBox2.tsx"],"sourcesContent":["import { Select } from \"@kobalte/core/select\";\n\n// Import default styles. (All examples use this via a global import)\nimport \"@thisbeyond/solid-select/style.css\";\nimport { Component, createEffect, JSXElement, Show } from \"solid-js\";\nimport { hookForDev } from \"../../lib/devTools\";\nimport { SelectionOption } from \"../../types/primal\";\n\nimport SelectionItem from \"./SelectionItem\";\n\n// Apply custom styling. See stylesheet below.\nimport styles from  \"./SelectionBox.module.scss\";\nimport { createStore } from \"solid-js/store\";\n\n\nconst SelectionBox2: Component<{\n  options: SelectionOption[],\n  onChange: (option: any) => void,\n  initialValue?: string | SelectionOption,\n  big?: boolean,\n  value?: string | SelectionOption,\n  id?: string,\n  caption?: string,\n  captionAction?: JSXElement,\n}> = (props) => {\n\n  const defaultValue = () => {\n    const init = props.initialValue;\n\n    if (!init) return;\n\n    if (typeof init === 'string') {\n      const found = Object.entries(opts).find(([_, oo]) => oo.id === init);\n\n      if (!found) return props.options[0];\n\n      return {\n        ...found[1],\n        value: found[0],\n      }\n    }\n\n    const found = Object.entries(opts).find(([_, oo]) => oo.id === init.id);\n\n    if (!found) return props.options[0];\n\n    return {\n      ...found[1],\n      value: found[0],\n    }\n  }\n\n  const value = () => {\n    const v = props.value;\n\n    if (!v) {\n      return defaultValue();\n    }\n\n    if (typeof v === 'string') {\n      const found = Object.entries(opts).find(([_, oo]) => oo.id === v);\n\n      if (!found) return;\n\n      return {\n        ...found[1],\n        value: found[0],\n      }\n    }\n\n\n    const found = Object.entries(opts).find(([_, oo]) => oo.id === v.id);\n\n    if (!found) return;\n\n    return {\n      ...found[1],\n      value: found[0],\n    }\n  }\n\n  const hasCaption = () => props.caption || props.captionAction;\n\n  const [opts, setOpts] = createStore<Record<string,SelectionOption>>({});\n\n  createEffect(() => {\n    if (props.options.length > 0) {\n      setTimeout(() => {\n        let temp: Record<string,SelectionOption> = {};\n\n        for (let i=0;i<props.options.length;i++) {\n          const option = props.options[i];\n\n          const id = option.id || generateOptionId(option);\n\n          temp[id] = props.options[i];\n        }\n\n        setOpts(() => ({...temp}));\n      }, 200);\n    }\n  });\n\n  const generateOptionId = (option: SelectionOption) => {\n    const label = option.label;\n    const desc = option.description || '';\n\n    return `${label}__${desc}`.split(' ').join('_');\n  }\n\n  const options = () => {\n    return Object.entries(opts).reduce<SelectionOption[]>((acc, [id, option]) => {\n      return [ ...acc, {\n        ...option,\n        value: id,\n      }]\n    }, []);\n  }\n\n  const onOptionSelect = (option: SelectionOption) => {\n    if (!option) return;\n\n    const o = opts[option.value];\n\n    o && props.onChange(o);\n  }\n\n  return (\n    <Select\n      id={props.id}\n      class={styles.selectionBox}\n      options={options()}\n      optionValue=\"value\"\n      optionTextValue=\"label\"\n      optionDisabled=\"disabled\"\n      itemComponent={(prps) => SelectionItem(prps)}\n      defaultValue={defaultValue()}\n      value={value()}\n      onChange={onOptionSelect}\n    >\n      <Select.Trigger class={props.big ? styles.triggerBig : styles.trigger}>\n          <Select.Value<SelectionOption>>\n            {state => options().length > 0 ? state.selectedOption()?.label || '' : ''}\n          </Select.Value>\n          <Select.Icon>\n            <Show when={options().length > 0}>\n              <div class={props.big ? styles.selectionIconBig : styles.selectionIcon}></div>\n            </Show>\n          </Select.Icon>\n      </Select.Trigger>\n      <Select.Content class={styles.selectionContent}>\n        <Show when={hasCaption()}>\n          <div class={styles.caption}>\n            <div class={styles.title}>\n              {props.caption && `${props.caption}:`}\n            </div>\n            {props.captionAction}\n          </div>\n        </Show>\n        <Select.Listbox class={`${styles.listbox} ${hasCaption() ? styles.withCaption : '' }`}/>\n      </Select.Content>\n    </Select>\n  );\n}\n\nexport default hookForDev(SelectionBox2);\n"],"names":["SelectionBox2","props","defaultValue","init","initialValue","found","Object","entries","opts","find","_","oo","id","value","options","v","hasCaption","caption","captionAction","setOpts","createStore","createEffect","length","setTimeout","temp","i","option","generateOptionId","label","desc","description","split","join","reduce","acc","_$createComponent","Select","styles","selectionBox","optionValue","optionTextValue","optionDisabled","itemComponent","prps","SelectionItem","onChange","o","children","Trigger","big","triggerBig","trigger","Value","state","selectedOption","Icon","Show","when","_el$","_tmpl$","_$effect","_$className","selectionIconBig","selectionIcon","Content","selectionContent","_el$2","_tmpl$2","_el$3","firstChild","_$insert","_p$","_v$","_v$2","title","undefined","Listbox","listbox","withCaption","hookForDev"],"mappings":"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"}