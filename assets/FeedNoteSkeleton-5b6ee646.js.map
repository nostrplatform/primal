{"version":3,"file":"FeedNoteSkeleton-5b6ee646.js","sources":["../../src/components/SmallNote/SmallNote.tsx","../../src/components/Skeleton/ShortNoteSkeleton.tsx","../../src/components/Skeleton/FeedNoteSkeleton.tsx"],"sourcesContent":["import { Component, JSXElement, Show } from 'solid-js';\nimport Avatar from '../Avatar/Avatar';\n\nimport styles from './SmallNote.module.scss';\nimport { A } from '@solidjs/router';\nimport { PrimalNote } from '../../types/primal';\nimport { useThreadContext } from '../../contexts/ThreadContext';\nimport { date } from '../../lib/dates';\nimport { authorName } from '../../stores/profile';\nimport { note as t } from '../../translations';\nimport { useIntl } from '@cookbook/solid-intl';\nimport { hookForDev } from '../../lib/devTools';\nimport ParsedNote from '../ParsedNote/ParsedNote';\nimport { useAppContext } from '../../contexts/AppContext';\n\n\nconst SmallNote: Component<{ note: PrimalNote, children?: JSXElement, id?: string }> = (props) => {\n\n  const threadContext = useThreadContext();\n  const intl = useIntl();\n  const app = useAppContext();\n\n  const navToThread = (note: PrimalNote) => {\n    threadContext?.actions.setPrimaryNote(note);\n  };\n\n  const nameOfAuthor = () => {\n    return authorName(props.note.user || { pubkey: props.note.post.pubkey });\n  };\n\n  const parsedContent = (text: string) => {\n    const regex = /\\#\\[([0-9]*)\\]/g;\n    let parsed = text;\n\n    let refs = [];\n    let match;\n\n    while((match = regex.exec(text)) !== null) {\n      refs.push(match[1]);\n    }\n\n    if (refs.length > 0) {\n      for(let i =0; i < refs.length; i++) {\n        let r = parseInt(refs[i]);\n\n        const tag = props.note.post.tags[r];\n\n        if (tag[0] === 'e' && props.note.mentionedNotes && props.note.mentionedNotes[tag[1]]) {\n          const embeded = (<span>\n          {intl.formatMessage(\n            t.mentionIndication,\n            {\n              name: authorName(props.note.user),\n            },\n          )}\n        </span>);\n\n          // @ts-ignore\n          parsed = parsed.replace(`#[${r}]`, embeded.outerHTML);\n        }\n\n        if (tag[0] === 'p' && props.note.mentionedUsers && props.note.mentionedUsers[tag[1]]) {\n          const user = props.note.mentionedUsers[tag[1]];\n\n          const link =  (<span>@{authorName(user)}</span>);\n\n          // @ts-ignore\n          parsed = parsed.replace(`#[${r}]`, link.outerHTML);\n        }\n      }\n    }\n\n    return parsed;\n\n  };\n\n  return (\n    <div id={props.id} class={styles.smallNote} data-note-id={props.note.post.noteId}>\n      <A href={app?.actions.profileLink(props.note.user.npub) || ''} class={styles.avatar}>\n        <Avatar user={props.note.user} size=\"xxs\" />\n      </A>\n      <A\n        href={`/e/${props.note.post.noteId}`}\n        class={styles.content}\n        onClick={() => navToThread(props.note)}\n      >\n        <div class={styles.header}>\n          <div class={styles.name} title={nameOfAuthor()}>\n            {nameOfAuthor()}\n          </div>\n          <div class={styles.time}>\n            <Show\n              when={props.children}\n              fallback={date(props.note.post?.created_at).label}\n            >\n              {props.children}\n            </Show>\n          </div>\n        </div>\n        <div class={styles.message}>\n          <div>\n            <ParsedNote\n              note={props.note}\n              noLinks=\"text\"\n              ignoreMedia={true}\n              ignoreLinebreaks={true}\n              shorten={true}\n              veryShort={true}\n            />\n          </div>\n        </div>\n      </A>\n    </div>\n  );\n}\n\nexport default hookForDev(SmallNote);\n","import { Component } from 'solid-js';\n\nimport styles from './Skeleton.module.scss';\n\nconst ShortNoteSkeleton: Component<{\n  id?: string,\n}> = (props) => {\n  return (\n    <div class={styles.shortNoteSkeleton}>\n      <div class={styles.avatarSN}></div>\n      <div class={styles.shortNote}>\n        <div class={styles.headerSN}></div>\n        <div class={styles.contentSN}></div>\n      </div>\n    </div>\n  );\n}\n\nexport default ShortNoteSkeleton;\n","import { Component } from 'solid-js';\n\nimport styles from './Skeleton.module.scss';\n\nconst FeedNoteSkeleton: Component<{\n  id?: string,\n}> = (props) => {\n  return (\n    <div class={styles.feedNoteSkeleton}>\n      <div class={styles.headerN}>\n        <div class={styles.avatarN}></div>\n        <div class={styles.userInfoN}></div>\n      </div>\n      <div class={styles.contentN}></div>\n    </div>\n  );\n}\n\nexport default FeedNoteSkeleton;\n"],"names":["SmallNote","props","threadContext","useThreadContext","useIntl","app","useAppContext","navToThread","note","actions","setPrimaryNote","nameOfAuthor","authorName","user","pubkey","post","_el$4","_tmpl$5","_$insert","_$createComponent","A","href","profileLink","npub","styles","avatar","children","Avatar","size","noteId","content","onClick","_el$5","_tmpl$3","_el$6","firstChild","_el$7","nextSibling","Show","when","fallback","date","created_at","label","_$effect","_p$","_v$","header","_v$2","name","_v$3","_v$4","time","_$className","_$setAttribute","undefined","_el$8","_tmpl$4","_el$9","ParsedNote","noLinks","ignoreMedia","ignoreLinebreaks","shorten","veryShort","message","_v$5","id","_v$6","smallNote","_v$7","hookForDev","ShortNoteSkeleton","_el$","_tmpl$","_el$2","_el$3","shortNoteSkeleton","avatarSN","shortNote","headerSN","contentSN","FeedNoteSkeleton","feedNoteSkeleton","headerN","avatarN","userInfoN","contentN"],"mappings":"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"}