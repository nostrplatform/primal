{"version":3,"file":"FollowButton-d935d050.js","sources":["../../src/components/FollowButton/FollowButton.tsx"],"sourcesContent":["import { useIntl } from '@cookbook/solid-intl';\nimport { Component, Show } from 'solid-js';\nimport { useAccountContext } from '../../contexts/AccountContext';\nimport { hookForDev } from '../../lib/devTools';\nimport { account as t, actions } from '../../translations';\nimport { PrimalUser } from '../../types/primal';\nimport ButtonFlip from '../Buttons/ButtonFlip';\nimport { useToastContext } from '../Toaster/Toaster';\n\nimport styles from './FollowButton.module.scss';\n\n\nconst FollowButton: Component<{\n  person: PrimalUser | undefined,\n  large?: boolean,\n  flexible?: boolean,\n  id?: string,\n  light?: boolean,\n  postAction?: (remove: boolean, pubkey: string) => void,\n}> = (props) => {\n\n  const toast = useToastContext()\n  const account = useAccountContext();\n  const intl = useIntl();\n\n  const isFollowed = () => {\n    return props.person &&\n      account?.publicKey &&\n      account?.following.includes(props.person.pubkey);\n  }\n\n  const onFollow = (e: MouseEvent) => {\n    e.preventDefault();\n    if (account?.followInProgress !== '') return;\n\n    if (!account || !account.hasPublicKey() || !props.person) {\n      account?.actions.showGetStarted();\n      // toast?.sendWarning(intl.formatMessage(t.needToLogin))\n      return;\n    }\n\n    const action = isFollowed() ?\n      account.actions.removeFollow :\n      account.actions.addFollow;\n\n    action(props.person.pubkey, props.postAction);\n  }\n\n  const klass = () => {\n    if (props.large) return styles.large;\n    if (props.flexible) return styles.flexible;\n    return styles.small;\n  }\n\n  return (\n    <Show when={props.person}>\n      <div id={props.id} class={klass()}>\n        <ButtonFlip\n          onClick={onFollow}\n          disabled={account?.followInProgress !== ''}\n          when={isFollowed()}\n          light={props.light}\n          fallback={intl.formatMessage(t.follow)}\n        >\n          {intl.formatMessage(t.unfollow)}\n        </ButtonFlip>\n      </div>\n    </Show>\n  )\n}\n\nexport default hookForDev(FollowButton);\n"],"names":["FollowButton","props","useToastContext","account","useAccountContext","intl","useIntl","isFollowed","person","publicKey","following","includes","pubkey","onFollow","e","preventDefault","followInProgress","hasPublicKey","actions","showGetStarted","removeFollow","addFollow","postAction","klass","large","styles","flexible","small","_$createComponent","Show","when","children","_el$","_tmpl$","_$insert","ButtonFlip","onClick","disabled","light","fallback","formatMessage","t","follow","unfollow","_$effect","_p$","_v$","id","_v$2","_$setAttribute","_$className","undefined","hookForDev"],"mappings":"kWAYMA,EAOAC,EAAAA,GAAU,CAEAC,EAAiB,EAC/B,MAAMC,EAAUC,IACVC,EAAOC,IAEPC,EAAaA,EAAAA,IACVN,EAAMO,QACXL,GAASM,WACTN,GAASO,UAAUC,SAASV,EAAMO,OAAOI,MAAM,EAHhCL,cAMbM,EAAYC,EAAAA,GAAkB,CAElC,GADAA,EAAEC,eAAc,EACZZ,GAASa,mBAAqB,GAAI,OAEtC,GAAI,CAACb,GAAW,CAACA,EAAQc,aAAY,GAAM,CAAChB,EAAMO,OAAQ,CACxDL,GAASe,QAAQC,iBAEjB,MACF,EAEeZ,EAAU,EACvBJ,EAAQe,QAAQE,aAChBjB,EAAQe,QAAQG,WAEXpB,EAAMO,OAAOI,OAAQX,EAAMqB,UAAU,GAd5BR,YAiBZS,EAAQA,EAAAA,IACRtB,EAAMuB,MAAcC,EAAOD,MAC3BvB,EAAMyB,SAAiBD,EAAOC,SAC3BD,EAAOE,MAHFJ,SAMd,OAAAK,EACGC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAE7B,EAAMO,MAAM,EAAA,IAAAuB,UAAA,CAAA,MAAAC,EAAAC,IAAAC,OAAAA,EAAAF,EAAAJ,EAEnBO,EAAU,CACTC,QAASvB,EAAQ,IACjBwB,UAAQ,CAAA,OAAElC,GAASa,mBAAqB,EAAE,EAAA,IAC1Cc,MAAI,CAAA,OAAEvB,EAAU,CAAE,EAAA,IAClB+B,OAAK,CAAA,OAAErC,EAAMqC,KAAK,EAAA,IAClBC,UAAQ,CAAA,OAAElC,EAAKmC,cAAcC,EAAEC,MAAM,CAAC,EAAA,IAAAX,UAAA,CAAA,OAErC1B,EAAKmC,cAAcC,EAAEE,QAAQ,CAAC,CAAA,CAAA,CAAA,EAAAC,EAAAC,GAAA,CAAA,MAAAC,EAR1B7C,EAAM8C,GAAEC,EAASzB,EAAK,EAAEuB,OAAAA,IAAAD,EAAAC,KAAAG,EAAAjB,EAAAa,KAAAA,EAAAC,IAAAA,CAAA,EAAAE,IAAAH,EAAAG,MAAAE,EAAAlB,EAAAa,EAAAG,KAAAA,CAAA,EAAAH,CAAA,EAAA,CAAAC,IAAAK,OAAAH,KAAAG,MAAA,CAAA,EAAAnB,CAAA,CAAA,CAAA,CAavC,EAlDM/B,gBAoDSmD,EAAAA,EAAWpD,CAAY"}