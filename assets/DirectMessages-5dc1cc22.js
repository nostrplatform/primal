var $t=Object.defineProperty;var o=(p,O)=>$t(p,"name",{value:O,configurable:!0});import{h as Se,e as Ve,j as f,c as n,k as Re,w as ze,l as E,m as g,S as ne,J as pt,s as W,t as U,u as Le,B as Ke,$ as bt,_ as De,D as Pe,o as mt,bE as ft,bT as yt,bU as Ct,bV as xt,bW as wt,bX as kt,bY as Mt,bZ as St,b_ as Xe,b$ as Lt,c0 as Tt,c1 as He,c2 as It,c3 as jt,c4 as Bt,c5 as Dt,c6 as At,c7 as Et,c8 as Rt,c9 as zt,ca as Pt,cb as Ut,cc as Ht,cd as Nt,ce as Ft,F as V,b4 as Ot,cf as Ze,i as Ne,bb as Je,cg as Wt,bh as Vt,al as xe,a2 as he,A as Ce,ay as Ge,a3 as Ue,aY as Kt,d as _t,bN as Gt,ch as Fe,ci as qt,g as qe,C as ae,E as de,aq as Qt,ar as ve,cj as et,ck as Yt,cl as Xt,H as Zt,M as tt,x as Me,aD as Jt,bk as en,n as tn,bs as nn,bu as nt,bt as st,bD as sn,bF as rn,bM as Ee,U as on,I as an,W as rt,b5 as cn,cm as Ie,p as ln}from"./index-64dc6460.js";import{a as ye}from"./dates-9bcb2bf7.js";import{T as we}from"./7FJWXM73-511ca333.js";import{P as dn}from"./PageTitle-3d0a9832.js";import{P as un}from"./PageCaption-27eb7f4c.js";import{W as gn}from"./Wormhole-fa0163d3.js";import{S as mn}from"./Search-c8ce1e29.js";import{A as fn,E as _n,L as ht}from"./ParsedNote-9900e3c8.js";import{B as hn}from"./ButtonPrimary-1f64caa8.js";import{B as ot}from"./ButtonGhost-a0fa1826.js";import{L as vn}from"./Loader-1ac7e304.js";import{P as vt}from"./Paginator-4878ac5b.js";import{g as it}from"./textArea-802fec28.js";import{_ as at}from"./index-555a6fe0.js";import{S as $n}from"./SearchOption-a7f2ab4a.js";import"./SOM3K36D-40feb6ac.js";import"./index-c76cfba2.js";import"./5WXHJDCZ-8b9b8e69.js";import"./index-b4296c5e.js";import"./RLGGFAYQ-2a48be09.js";import"./LR7LBJN3-a1aba763.js";import"./Buttons.module-e818c1ea.js";const pn="_directMessageContact_jazx1_1",bn="_selected_jazx1_14",yn="_focus_jazx1_14",Cn="_senderInfo_jazx1_19",xn="_firstLine_jazx1_24",wn="_senderName_jazx1_29",kn="_dotSeparator_jazx1_39",Mn="_lastMessageTime_jazx1_46",Sn="_secondLine_jazx1_52",Ln="_conversation_jazx1_66",Tn="_messages_jazx1_73",In="_myThread_jazx1_84",jn="_avatar_jazx1_90",Bn="_threadMessages_jazx1_93",Dn="_message_jazx1_73",An="_messageLn_jazx1_99",En="_threadTime_jazx1_117",Rn="_oldThread_jazx1_127",zn="_lastInThread_jazx1_130",Pn="_newThread_jazx1_133",Un="_theirThread_jazx1_146",Hn="_dmComposer_jazx1_204",Nn="_secondaryButton_jazx1_210",Fn="_primaryButton_jazx1_226",On="_iconSend_jazx1_242",Wn="_dmInput_jazx1_245",Vn="_compact_jazx1_268",Kn="_newMessage_jazx1_275",Gn="_textAreaBorder_jazx1_285",qn="_searchSuggestions_jazx1_356",Qn="_emojiSuggestions_jazx1_367",Yn="_emojiOption_jazx1_382",Xn="_highlight_jazx1_394",Zn="_senderBubble_jazx1_402",Jn="_doubleSize_jazx1_421",es="_tripleSize_jazx1_424",I={directMessageContact:pn,selected:bn,focus:yn,senderInfo:Cn,firstLine:xn,senderName:wn,dotSeparator:kn,lastMessageTime:Mn,secondLine:Sn,conversation:Ln,messages:Tn,myThread:In,avatar:jn,threadMessages:Bn,message:Dn,messageLn:An,threadTime:En,oldThread:Rn,lastInThread:zn,newThread:Pn,theirThread:Un,dmComposer:Hn,secondaryButton:Nn,primaryButton:Fn,iconSend:On,dmInput:Wn,compact:Vn,newMessage:Kn,textAreaBorder:Gn,searchSuggestions:qn,emojiSuggestions:Qn,emojiOption:Yn,highlight:Xn,senderBubble:Zn,doubleSize:Jn,tripleSize:es},Oe=U("<div>"),ts=U("<button><div><div><div></div></div><div>"),ns=o(p=>{const O=o(()=>p.dmContact.user,"user"),C=o(()=>p.dmContact.dmInfo,"contactInfo"),R=o(()=>p.dmContact.dmInfo.cnt,"count"),i=o(()=>Math.floor(new Date().getTime()/1e3),"now");return(()=>{const F=ts(),x=F.firstChild,D=x.firstChild,q=D.firstChild,Q=D.nextSibling;return F.$$click=()=>p.onSelect&&p.onSelect(O().pubkey),f(F,n(Re,{get user(){return O()},size:"md"}),x),f(q,()=>ze(O())),f(D,n(ne,{get when(){return C().latest_at>0},get children(){return[(()=>{const t=Oe();return E(()=>g(t,I.dotSeparator)),t})(),(()=>{const t=Oe();return f(t,()=>ye(C().latest_at||0,"narrow",i()).label),E(()=>g(t,I.lastMessageTime)),t})()]}}),null),f(Q,()=>pt(O())),f(F,n(ne,{get when(){return R()>0},get children(){const t=Oe();return f(t,R),E(()=>g(t,I.senderBubble)),t}}),null),E(t=>{const S=`${I.directMessageContact} ${p.isSelected?I.selected:""}`,A=O().pubkey,w=I.senderInfo,j=I.firstLine,d=I.senderName,h=I.secondLine;return S!==t._v$&&g(F,t._v$=S),A!==t._v$2&&W(F,"data-user",t._v$2=A),w!==t._v$3&&g(x,t._v$3=w),j!==t._v$4&&g(D,t._v$4=j),d!==t._v$5&&g(q,t._v$5=d),h!==t._v$6&&g(Q,t._v$6=h),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),F})()},"DirectMessageContact"),ss=Se(ns);Ve(["click"]);const rs="_dmLayout_lug05_1",os="_dmHeader_lug05_10",is="_dmContent_lug05_16",as="_dmSidebar_lug05_24",cs="_dmControls_lug05_32",ls="_dmContactsList_lug05_40",ds="_dmConversation_lug05_53",us="_dmContactsTabs_lug05_62",gs="_dmContactTab_lug05_71",ms="_dmContactsTabIndicator_lug05_92",fs="_markAsRead_lug05_102",oe={dmLayout:rs,dmHeader:os,dmContent:is,dmSidebar:as,dmControls:cs,dmContactsList:ls,dmConversation:ds,dmContactsTabs:us,dmContactTab:gs,dmContactsTabIndicator:ms,markAsRead:fs},ct=U("<br>"),je=U("<div>"),_s=U("<video controls><source>"),hs=U('<iframe title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>'),vs=U('<iframe style="borderRadius:12" width="100%" height="352" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy">'),$s=U("<iframe allowfullscreen>"),ps=U('<div><iframe title="SoundCloud player" width="100%" height="120" frameborder="0">'),bs=U('<iframe width="100%" height="166" scrolling="no" allow="autoplay">'),ys=U('<iframe allow="autoplay *; encrypted-media *; fullscreen *; clipboard-write" frameborder="0" style="width:100%;maxWidth:660;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation">'),Cs=U('<iframe style="borderRadius:12" width="100%" height="380" frameborder="0" loading="lazy">'),xs=U('<span><a link target="_blank">'),We=U("<span>"),ws=U('<span class="linkish">'),ks=U("<span>@"),Ms=U('<span class="linkish">@'),Ss=U("<span>#"),Ls=U('<span class="whole"> '),Ts=7,Is=o(p=>{Le();const O=Ke(),C=bt(),R=De(),[i,F]=Pe([]);let x="text",D=!1,q=0;mt(()=>{S()});const Q=o(()=>514,"noteWidth"),t=o((e,m,s,c)=>{const r=e.length,$=e.length-1;if(r>0&&e[r-1].type===m){F($,"tokens",M=>[...M,s]),c&&F($,"meta",()=>({...c}));return}F(r,()=>({type:m,tokens:[s],meta:c}))},"updateContent"),S=o(()=>{const e=A();for(let c=0;c<e.length;c++){const r=e[c];w(r)}const m=i.findLastIndex(c=>c.type!=="text"),s=i[i.length-1];m===i.length-2&&s.type==="text"&&s.tokens.every(c=>[" ",""].includes(c))&&F(c=>c.slice(0,c.length-1))},"generateContent"),A=o(()=>p.content.replace(ft," __LB__ ").replace(/\s+/g," __SP__ ").split(/[\s]+/),"parseContent"),w=o(e=>{if(e==="__LB__"){if(D)return;t(i,"linebreak",e),x="LB";return}if(e==="__SP__"){["image","video","LB"].includes(x)||t(i,"text"," ");return}if(D=!1,yt(e)){x="text",t(i,"text",e);return}if(Ct(e)){const m=e.indexOf("http");if(m>0){const r=e.slice(0,m),$=(e.match(xt)||[])[0];if($){const M=e.substring($.length+m,e.length);w(r),w($),w(M);return}else{w(r),w(e.slice(m));return}}if(!p.ignoreMedia){if(wt(e)){j("image"),D=!0,x="image",t(i,"image",e);return}if(kt(e)){j("video"),D=!0,x="video",t(i,"video",e,{videoType:"video/mp4"});return}if(Mt(e)){j("video"),D=!0,x="video",t(i,"video",e,{videoType:"video/ogg"});return}if(St(e)){j("video"),D=!0,x="video",t(i,"video",e,{videoType:"video/webm"});return}if(Xe(e)){j("youtube"),D=!0,x="youtube",t(i,"youtube",e);return}if(Lt(e)){j("spotify"),D=!0,x="spotify",t(i,"spotify",e);return}if(Tt(e)){j("twitch"),D=!0,x="twitch",t(i,"twitch",e);return}if(He(e)){j("mixcloud"),D=!0,x="mixcloud",t(i,"mixcloud",e);return}if(It(e)){j("soundcloud"),D=!0,x="soundcloud",t(i,"soundcloud",e);return}if(jt(e)){j("applemusic"),D=!0,x="applemusic",t(i,"applemusic",e);return}if(Bt(e)){j("wavelake"),D=!0,x="wavelake",t(i,"wavelake",e);return}}if(p.noLinks==="text"){x="text",t(i,"text",e);return}const s=Dt(e);!p.noPreviews&&s&&s.url&&(!!s.description&&s.description.length>0||!s.images?.some(r=>r==="")||!!s.title)?(j("link"),t(i,"link",e,{preview:s})):t(i,"link",e),x="link",D=!1,q++;return}if(At(e)){j("notemention"),x="notemention",D=!0,t(i,"notemention",e);return}if(Et(e)){x="usermention",t(i,"usermention",e);return}if(Rt(e)){x="comunity",t(i,"comunity",e);return}if(zt(e)){x="tagmention",t(i,"tagmention",e);return}if(Pt(e)){x="hashtag",t(i,"hashtag",e);return}if(Ut(e)){x="emoji",t(i,"emoji",e);return}if(Ht(e)){x="lnbc";let s=e.match(Nt)?.find(c=>c.startsWith("lnbc"));s?(j("lnbc"),t(i,"lnbc",s)):t(i,"text",e);return}if(Ft(e)){x="lnbc",j("lnbc"),t(i,"lnbc",e);return}x="text",t(i,"text",e)},"parseToken"),j=o(e=>{if(x==="LB"){const m=i.length-1,s=i[m];F(m,()=>({type:s.type,tokens:[],meta:{...s.meta,removedBy:e,removedTokens:[...s.tokens]}}))}},"removeLinebreaks"),d=o(e=>{let m=e.meta?.removedBy==="link"&&q>1?e.meta?.removedTokens||[]:e.tokens;const s=Math.min(2,m.length),c=Array(s).fill(ct());return n(V,{each:c,children:r=>ct()})},"renderLinebreak"),h=o(e=>{let m=[];for(let c=0;c<e.tokens.length;c++){const r=e.tokens[c];m.push(r)}return m.join(" ").replaceAll("&lt;","<").replaceAll("&gt;",">")},"renderText"),b=o((e,m)=>{const s=e.tokens.length,c=Ot(),r=m===i.length-1?"noBottomMargin":"";if(s===1){const M=e.tokens[0];let v=C?.actions.getMedia(M,"o");const N=v?.media_url||Ze(M)||M;let z=C?.actions.getMedia(M,"m")||C?.actions.getMedia(M,"o")||M;return n(Je,{class:`noteimage ${r}`,src:N,get isDev(){return Ne()},media:v,mediaThumb:z,width:514,imageGroup:`${c}`})}const $=s<Ts?`grid-${s}`:"grid-large";return(()=>{const M=je();return g(M,`imageGrid ${$}`),f(M,n(V,{get each(){return e.tokens},children:(v,N)=>{let z=C?.actions.getMedia(v,"o");const J=z?.media_url||Ze(v)||v;let re=C?.actions.getMedia(v,"m")||C?.actions.getMedia(v,"o")||v;return n(Je,{get class(){return`noteimage_gallery cell_${N()+1}`},src:J,get isDev(){return Ne()},media:z,width:514,mediaThumb:re,imageGroup:`${c}`,plainBorder:!0,forceHeight:500})}})),M})()},"renderImage"),a=o((e,m)=>{const s=m===i.length-1?"noBottomMargin":"";return n(V,{get each(){return e.tokens},children:c=>{let r=C?.actions.getMedia(c,"o"),$,M;if(r){const J=r.w/r.h;$=(Q()-2*20)/J,M=$>680?680*J:Q()-2*20,$=$>680?680:$}let v=r?"w-cen":"w-max";Ne()&&!r&&(v+=" redBorder"),v+=" embeddedContent",v+=` ${s}`;const N=(()=>{const z=_s(),J=z.firstChild;return g(z,v),W(z,"width",M),W(z,"height",$),z.muted=!0,z.loop=!0,z.playsInline=!0,W(J,"src",c),E(()=>W(J,"type",e.meta?.videoType)),z})();return C?.actions.addVideo(N),N}})},"renderVideo"),B=o((e,m)=>{const s=m===i.length-1?"noBottomMargin":"";return n(V,{get each(){return e.tokens},children:c=>{const r=Xe(c)&&RegExp.$1;return(()=>{const $=hs();return g($,`w-max embeddedContent ${s}`),W($,"src",`https://www.youtube.com/embed/${r}`),W($,"key",r),$})()}})},"renderYouTube"),y=o((e,m)=>{const s=m===i.length-1?"noBottomMargin":"";return n(V,{get each(){return e.tokens},children:c=>{const r=c.replace(/\/(track|album|playlist|episode)\/([a-zA-Z0-9]+)/,"/embed/$1/$2");return(()=>{const $=vs();return g($,`embeddedContent ${s}`),W($,"src",r),$})()}})},"renderSpotify"),H=o((e,m)=>{const s=m===i.length-1?"noBottomMargin":"";return n(V,{get each(){return e.tokens},children:c=>{const $=`?channel=${c.split("/").slice(-1)}&parent=${window.location.hostname}&muted=true`;return(()=>{const M=$s();return g(M,`${`embeddedContent ${s}`||""} w-max`),W(M,"src",`https://player.twitch.tv/${$}`),M})()}})},"renderTwitch"),Y=o((e,m)=>{const s=m===i.length-1?"noBottomMargin":"";return n(V,{get each(){return e.tokens},children:c=>{const r=(He(c)&&RegExp.$1)+"%2F"+(He(c)&&RegExp.$2);return(()=>{const $=ps(),M=$.firstChild;return g($,`embeddedContent ${s}`),W(M,"src",`https://www.mixcloud.com/widget/iframe/?hide_cover=1&feed=%2F${r}%2F`),$})()}})},"renderMixCloud"),K=o((e,m)=>{const s=m===i.length-1?"noBottomMargin":"";return n(V,{get each(){return e.tokens},children:c=>(()=>{const r=bs();return g(r,`embeddedContent ${s}`),W(r,"src",`https://w.soundcloud.com/player/?url=${c}`),r})()})},"renderSoundCloud"),Z=o((e,m)=>{const s=m===i.length-1?"noBottomMargin":"";return n(V,{get each(){return e.tokens},children:c=>{const r=c.replace("music.apple.com","embed.music.apple.com"),$=/\?i=\d+$/.test(r);return(()=>{const M=ys();return g(M,`embeddedContent ${s}`),W(M,"height",`${$?175:450}`),W(M,"src",r),M})()}})},"renderAppleMusic"),se=o((e,m)=>{const s=m===i.length-1?"noBottomMargin":"";return n(V,{get each(){return e.tokens},children:c=>{const r=c.replace(/(?:player\.|www\.)?wavlake\.com/,"embed.wavlake.com");return(()=>{const $=Cs();return g($,`embeddedContent ${s}`),W($,"src",r),$})()}})},"renderWavelake"),ue=o((e,m)=>n(V,{get each(){return e.tokens},children:s=>e.meta&&e.meta.preview&&q<2?n(Wt,{get preview(){return e.meta.preview},get isLast(){return m===i.length-1}}):(()=>{const c=xs(),r=c.firstChild;return W(c,"data-url",s),W(r,"href",s),f(r,s),c})()}),"renderLinks"),me=o((e,m)=>n(V,{get each(){return e.tokens},children:s=>{let[c,r]=s.split(":");if(!r)return s;let $=Fe.exec(r);if($){const re=$.index;r.slice(re),r=r.slice(0,re)}const M=o(re=>n(Ce,{href:`/e/${re}`,children:s}),"unknownMention"),v=Vt(r),N=xe.naddrEncode({kind:v.data.kind,pubkey:v.data.pubkey,identifier:v.data.identifier||""}),z=R?.referecedReads;if(v.type!=="naddr"||!z)return M(N);const J=z[N];return J?ge(J):M(r)}}),"renderComunityMention"),ge=o((e,m)=>e?(()=>{const s=je();return f(s,n(fn,{article:e,hideFooter:!0,hideContext:!0})),E(()=>g(s,I.articlePreview)),s})():[],"renderLongFormMention"),u=o((e,m)=>n(V,{get each(){return e.tokens},children:s=>{let[c,r]=s.split(":");if(!r)return s;let $=Fe.exec(r);if($){const v=$.index;r.slice(v),r=r.slice(0,v)}let M=(()=>{const v=We();return f(v,s),v})();try{const v=xe.decode(r).data;let N=typeof v=="string"?he.Text:v.kind;const z=typeof v=="string"?v:v.id,re=`/e/${xe.noteEncode(z)}`;if(p.noLinks==="links")return(()=>{const _=ws();return f(_,s),_})();const l={...R?.referecedNotes||{}},k={...R?.referecedReads||{}},L={},T={...R?.referecedUsers||{}};if(N===void 0){let _=l&&l[z];if(!_){const P=xe.naddrEncode({kind:v.kind,pubkey:v.pubkey,identifier:v.identifier||""});_=k&&k[P]}_||(_=L&&L[z]),N=_?.post.kind||_?.msg?.kind||_.event.kind||he.Text}if(typeof N!="number")return M;if([he.Text].includes(N)&&!p.noLinks){const _=l&&l[z];M=n(Ce,{href:re,children:s}),_&&([he.LongForm,he.LongFormShell].includes(_.post.kind)?M=ge(_,m):M=(()=>{const P=je();return f(P,n(_n,{note:_,mentionedUsers:T||{},get isLast(){return m===i.length-1},hideFooter:!0})),P})())}if([he.LongForm,he.LongFormShell].includes(N)&&!p.noLinks){const _=xe.naddrEncode({kind:v.kind,pubkey:v.pubkey,identifier:v.identifier||""}),P=k&&k[_];M=n(Ce,{href:re,children:s}),P&&(M=ge(P,m))}if(N===he.Highlight){const _=L&&L[z];M=(()=>{const P=je();return f(P,()=>_?.event?.content),E(()=>g(P,I.mentionedHighlight)),P})()}}catch(v){Ge("ERROR rendering note mention",v),M=(()=>{const N=We();return f(N,s),E(()=>g(N,I.error)),N})()}return M}}),"renderNoteMention"),ee=o(e=>n(V,{get each(){return e.tokens},children:m=>{let[s,c]=m.split(":");if(!c)return m;let r="";s!=="nostr"&&(r=s.split("nostr")[0]||"");let $="",M=Fe.exec(c);if(M){const N=M.index;$=c.slice(N),c=c.slice(0,N)}const v={...R?.referecedUsers||{}};try{const N=xe.decode(c).data,z=typeof N=="string"?N:N.pubkey,J=Ue(z),re=O?.actions.profileLink(J)||"";let l=v&&v[z];const k=l?ze(l):Kt(J);let L=(()=>{const T=ks(),_=T.firstChild;return f(T,r,_),f(T,k,null),f(T,$,null),T})();return p.noLinks==="links"&&(L=[r,(()=>{const T=Ms(),_=T.firstChild;return f(T,k,null),T})(),$]),p.noLinks||(L=l?[r,_t(()=>Gt({user:l})),$]:[r,n(Ce,{href:re,get children(){return["@",k]}}),$]),L}catch{return[r,(()=>{const z=We();return f(z,m),E(()=>g(z,I.error)),z})()]}}}),"renderUserMention"),te=o(e=>n(V,{get each(){return e.tokens},children:m=>{let[s,c]=m.split("#"),r="",$=qt.exec(c);if($){const v=$.index;r=c.slice(v),c=c.slice(0,v)}const M=p.noLinks==="text"?(()=>{const v=Ss();return v.firstChild,f(v,c,null),v})():n(Ce,{href:`/search/%23${c}`,get children(){return["#",c]}});return(()=>{const v=Ls();return v.firstChild,f(v,M,null),f(v,r,null),v})()}}),"renderHashtag"),ce=o(e=>n(V,{get each(){return e.tokens},children:m=>m}),"renderEmoji"),le=o(e=>n(V,{get each(){return e.tokens},children:m=>n(ht,{lnbc:m})}),"renderLnbc"),$e=o((e,m)=>{const s={linebreak:d,text:h,image:b,video:a,youtube:B,spotify:y,twitch:H,mixcloud:Y,soundcloud:K,applemusic:Z,wavelake:se,link:ue,notemention:u,usermention:ee,comunity:me,hashtag:te,emoji:ce,lnbc:le};return s[e.type]?s[e.type](e,m):[]},"renderContent");return(()=>{const e=je();return f(e,n(V,{each:i,children:(m,s)=>$e(m,s())})),E(()=>g(e,I.parsedMessage)),e})()},"DirectMessageParsedContent"),lt=Se(Is),js="_cashu_d278n_1",Bs="_paymentOverlay_d278n_12",Ds="_header_d278n_24",As="_title_d278n_31",Es="_headerActions_d278n_41",Rs="_qrIcon_d278n_47",zs="_copyIcon_d278n_56",Ps="_copyDone_d278n_68",Us="_checkIcon_d278n_75",Hs="_body_d278n_84",Ns="_description_d278n_90",Fs="_amount_d278n_96",Os="_footer_d278n_102",Ws="_mint_d278n_109",Vs="_payAction_d278n_116",Ks="_spent_d278n_125",Gs="_noBack_d278n_133",qs="_cashuIcon_d278n_136",Qs="_cashuAlter_d278n_144",Ys="_expiryDate_d278n_251",Xs="_expiredDate_d278n_258",X={cashu:js,paymentOverlay:Bs,header:Ds,title:As,headerActions:Es,qrIcon:Rs,copyIcon:zs,copyDone:Ps,checkIcon:Us,body:Hs,description:Ns,amount:Fs,footer:Os,mint:Ws,payAction:Vs,spent:Ks,noBack:Gs,cashuIcon:qs,cashuAlter:Qs,expiryDate:Ys,expiredDate:Xs},Be=U("<div>"),Zs=U("<div><div><div><div></div><div></div></div><div></div></div><div><div></div><div></div></div><div><div>"),Js=U("<div><div>"),er=o(p=>{const O=Le(),C=Ke(),R=qe(),[i,F]=Pe({token:[]}),[x,D]=ae(!1),[q,Q]=ae(!1),[t,S]=ae(!1),A=o(async a=>{let B=[];for(const y of a){const H=C?.actions.getCashuMint(y.mint);if(!H)continue;const K=(await H.check({proofs:y.proofs.map(Z=>({secret:Z.secret}))})).spendable.map(Z=>Z);B=[...B,...K]}D(()=>!B.includes(!1))},"checkMints");de(()=>{i.token.length!==0&&A(i.token)}),de(()=>{try{const a=Qt(p.token);F(()=>({...a}))}catch(a){Ge("Failed to decode cashu token: ",a)}}),de(()=>{q()&&setTimeout(()=>{Q(()=>!1)},1e3)});const w=o(()=>`${i.token[0]?.proofs.reduce((a,B)=>a+B.amount,0)||0} sats`,"amount"),j=o(()=>i.memo||"","description"),d=o(()=>C?.actions.openConfirmModal({title:R.formatMessage(ve.confirm.title),description:R.formatMessage(ve.confirm.description,{amount:w()}),confirmLabel:R.formatMessage(ve.confirm.confirmLabel),abortLabel:R.formatMessage(ve.confirm.abortLabel),onAbort:C.actions.closeConfirmModal,onConfirm:()=>{C.actions.closeConfirmModal(),h()}}),"confirmPayment"),h=o(()=>{const a=O?.activeUser?.lud16??"",B=`https://redeem.cashu.me?token=${encodeURIComponent(p.token)}&lightning=${encodeURIComponent(a)}&autopay=yes`;window.open(B,"blank_")},"redeemCashu"),b=o(()=>{let a=p.alternative?X.cashuAlter:X.cashu;return p.noBack&&(a+=` ${X.noBack}`),a},"klass");return(()=>{const a=Zs(),B=a.firstChild,y=B.firstChild,H=y.firstChild,Y=H.nextSibling,K=y.nextSibling,Z=B.nextSibling,se=Z.firstChild,ue=se.nextSibling,me=Z.nextSibling,ge=me.firstChild;return f(a,n(ne,{get when(){return t()},get children(){const u=Be();return f(u,n(vn,{})),E(()=>g(u,X.paymentOverlay)),u}}),B),f(Y,()=>R.formatMessage(ve.title)),f(K,n(ne,{get when(){return x()},get children(){return n(ot,{onClick:u=>{u.preventDefault(),C?.actions.openCashuModal(p.token,()=>{C.actions.closeCashuModal(),d()})},shrink:!0,get children(){const u=Be();return E(()=>g(u,X.qrIcon)),u}})}}),null),f(K,n(ne,{get when(){return!q()},get fallback(){return(()=>{const u=Js(),ee=u.firstChild;return E(te=>{const ce=X.copyDone,le=X.checkIcon;return ce!==te._v$12&&g(u,te._v$12=ce),le!==te._v$13&&g(ee,te._v$13=le),te},{_v$12:void 0,_v$13:void 0}),u})()},get children(){return n(ot,{onClick:u=>{u.preventDefault(),navigator.clipboard.writeText(p.token),Q(()=>!0)},shrink:!0,get children(){const u=Be();return E(()=>g(u,X.copyIcon)),u}})}}),null),f(se,j),f(ue,w),f(ge,n(ne,{get when(){return i.token[0]},get children(){return R.formatMessage(ve.mint,{url:new URL(i.token[0]?.mint).hostname})}})),f(me,n(ne,{get when(){return x()},get fallback(){return(()=>{const u=Be();return f(u,()=>R.formatMessage(ve.spent)),E(()=>g(u,X.spent)),u})()},get children(){const u=Be();return f(u,n(hn,{onClick:ee=>{ee.preventDefault(),d()},get children(){return R.formatMessage(ve.redeem)}})),E(()=>g(u,X.payAction)),u}}),null),E(u=>{const ee=p.id,te=b(),ce=X.header,le=X.title,$e=X.cashuIcon,e=X.headerActions,m=X.body,s=X.description,c=X.amount,r=X.footer,$=X.mint;return ee!==u._v$&&W(a,"id",u._v$=ee),te!==u._v$2&&g(a,u._v$2=te),ce!==u._v$3&&g(B,u._v$3=ce),le!==u._v$4&&g(y,u._v$4=le),$e!==u._v$5&&g(H,u._v$5=$e),e!==u._v$6&&g(K,u._v$6=e),m!==u._v$7&&g(Z,u._v$7=m),s!==u._v$8&&g(se,u._v$8=s),c!==u._v$9&&g(ue,u._v$9=c),r!==u._v$10&&g(me,u._v$10=r),$!==u._v$11&&g(ge,u._v$11=$),u},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0}),a})()},"Cashu"),tr=Se(er),ke=U("<div>"),dt=U("<div><div>"),ut=900,nr=o(p=>{const O=Le(),C=Ke();De();const R=o(()=>p.message.sender===p.previousMessage?.sender,"isFromPreviusSender"),i=o(()=>p.message.created_at-(p.nextMessage?.created_at||0)>ut,"isLastRecent"),F=o(()=>(p.previousMessage?.created_at||0)-p.message.created_at<ut,"isRecent"),x=o(()=>p.message.sender!==p.nextMessage?.sender,"isNextFromDifferentSender"),D=o(()=>p.message.sender===O?.publicKey,"isMe"),q=o(()=>R()&&F()?"old":"new","getThreadStatus"),Q=o(()=>{const S=p.message;if(!Yt(S.content)&&!Xt(S.content))return(()=>{const h=ke();return f(h,n(lt,{get content(){return S.content}})),E(b=>{const a=`${I.message} ${t()}`,B=S.id,y=ye(S.created_at||0).date.toLocaleString();return a!==b._v$&&g(h,b._v$=a),B!==b._v$2&&W(h,"data-event-id",b._v$2=B),y!==b._v$3&&W(h,"title",b._v$3=y),b},{_v$:void 0,_v$2:void 0,_v$3:void 0}),h})();let A=[],j=S.content.replace(ft," __LB__ ").replace(/\s+/g," __SP__ ").split(/[\s]+/),d=0;return j.forEach(h=>{if(h.startsWith("lnbc")||h.startsWith("cashuA"))A[d]&&d++,A[d]=h,d++;else{let b=h;const a=A[d]||"";h==="__SP__"&&(b=a.length===0?"":" "),h==="__LB__"&&(b=a.length===0?"":"\r"),A[d]=a+b}}),n(V,{get each(){return A.reverse()},children:h=>n(Zt,{get fallback(){return(()=>{const b=ke();return f(b,n(lt,{content:h})),E(a=>{const B=`${I.message} ${t()}`,y=S.id,H=ye(S.created_at||0).date.toLocaleString();return B!==a._v$10&&g(b,a._v$10=B),y!==a._v$11&&W(b,"data-event-id",a._v$11=y),H!==a._v$12&&W(b,"title",a._v$12=H),a},{_v$10:void 0,_v$11:void 0,_v$12:void 0}),b})()},get children(){return[n(tt,{get when(){return h.startsWith("lnbc")},get children(){const b=ke();return f(b,n(ht,{lnbc:h,noBack:!0,get alternative(){return D()}})),E(a=>{const B=`${I.messageLn} ${t()}`,y=S.id,H=ye(S.created_at||0).date.toLocaleString();return B!==a._v$4&&g(b,a._v$4=B),y!==a._v$5&&W(b,"data-event-id",a._v$5=y),H!==a._v$6&&W(b,"title",a._v$6=H),a},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),b}}),n(tt,{get when(){return h.startsWith("cashuA")},get children(){const b=ke();return f(b,n(tr,{token:h,noBack:!0,get alternative(){return D()}})),E(a=>{const B=`${I.messageLn} ${t()}`,y=S.id,H=ye(S.created_at||0).date.toLocaleString();return B!==a._v$7&&g(b,a._v$7=B),y!==a._v$8&&W(b,"data-event-id",a._v$8=y),H!==a._v$9&&W(b,"title",a._v$9=H),a},{_v$7:void 0,_v$8:void 0,_v$9:void 0}),b}})]}})})},"renderMessage"),t=o(()=>{let S=`${q()==="old"?I.oldThread:I.newThread}`;return(i()||x())&&(S+=` ${I.lastInThread}`),S},"messageClass");return n(ne,{get when(){return!D()},get fallback(){return(()=>{const S=dt(),A=S.firstChild;return f(S,n(ne,{get when(){return i()||x()},get children(){return n(Ce,{get href(){return C?.actions.profileLink(Ue(p.message.sender))||""},get class(){return I.avatar},get children(){return n(Re,{get user(){return O?.activeUser},size:"xxs"})}})}}),A),f(A,Q),f(S,n(ne,{get when(){return q()==="new"},get children(){const w=ke();return f(w,()=>ye(p.message.created_at,"long",et()).label),E(()=>g(w,I.threadTime)),w}}),null),E(w=>{const j=I.myThread,d=I.threadMessages;return j!==w._v$15&&g(S,w._v$15=j),d!==w._v$16&&g(A,w._v$16=d),w},{_v$15:void 0,_v$16:void 0}),S})()},get children(){const S=dt(),A=S.firstChild;return f(S,n(ne,{get when(){return i()||x()},get children(){return n(Ce,{get href(){return C?.actions.profileLink(Ue(p.message.sender))||""},get class(){return I.avatar},get children(){return n(Re,{get user(){return p.contact.user},size:"xxs"})}})}}),A),f(A,Q),f(S,n(ne,{get when(){return q()==="new"},get children(){const w=ke();return f(w,()=>ye(p.message.created_at,"long",et()).label),E(()=>g(w,I.threadTime)),w}}),null),E(w=>{const j=I.theirThread,d=I.threadMessages;return j!==w._v$13&&g(S,w._v$13=j),d!==w._v$14&&g(A,w._v$14=d),w},{_v$13:void 0,_v$14:void 0}),S}})},"DirectMessageConversation$2"),sr=Se(nr),gt=U("<div>"),rr=o(p=>{Le();const O=De();let C;return(()=>{const R=gt();return f(R,n(ne,{get when(){return!O?.isFetchingMessages},get children(){const i=gt(),F=C;return typeof F=="function"?Me(F,i):C=i,f(i,n(V,{get each(){return p.messages},children:(x,D)=>n(sr,{get previousMessage(){return p.messages[D()-1]},get nextMessage(){return p.messages[D()+1]},get contact(){return p.contact},message:x})}),null),f(i,n(vt,{get loadNextPage(){return O?.actions.getConversationNextPage},isSmall:!0}),null),E(()=>g(i,I.messages)),i}})),E(()=>g(R,I.conversation)),R})()},"DirectMessageConversation"),or=Se(rr),ir=U('<div id="mention-auto">'),ar=U("<div>"),cr=U('<div><div><textarea data-min-rows="2"></textarea></div><button><div>'),lr=U("<button>"),dr=o(p=>{const O=Le(),C=Jt(),R=qe(),i=De(),[F,x]=ae(""),[D,q]=ae(!1),Q=en();let t,S,A,w;const[j,d]=ae(0),[h,b]=ae(!1),[a,B]=ae(""),[y,H]=Pe([]);let Y={top:0,left:0,height:0};const K=o(async()=>{if(!p.pubkey||!t||!S||!A)return;const l=F().trim();if(l.length===0)return;x("");const k=$(l),L={id:`N_M_${p.messageCount}`,sender:O?.publicKey||"",content:k,created_at:Math.floor(new Date().getTime()/1e3)};await i?.actions.sendMessage(p.pubkey,L)&&(t.value="",t.style.height="40px",S.style.height="40px",A.style.height="80px")},"sendMessage"),Z=o(()=>D()&&F().trim().length>0?I.primaryButton:I.secondaryButton,"sendButtonClass"),se=o(()=>{t&&x(t.value)},"onInput"),ue=o(l=>{var k=l.value;l.value="",l._baseScrollHeight=l.scrollHeight,l.value=k},"getScrollHeight"),me=o(()=>{const k=t;if(!k||k.nodeName!=="TEXTAREA")return;const L=parseInt(k.getAttribute("data-min-rows")||"0");if(!k._baseScrollHeight&&ue(k),k.scrollHeight>=800/3)return;k.rows=L;const T=k.value===""?0:Math.ceil((k.scrollHeight-k._baseScrollHeight)/20);k.rows=L+T,k.style.height=`${40+20*T}px`,A&&(A.style.height=`${80+20*T}px`),S&&(S.style.height=`${40+20*T}px`),x(k.value)},"onExpandableTextareaInput"),ge=o(l=>{if(!t||!A)return!1;const k=["Enter","Space","Comma","Tab"];if(!ee()&&!h()&&l.code==="Enter"&&!l.shiftKey)return l.preventDefault(),nt(()=>{K()},300),!1;if(!ee()&&!h()&&l.key===":")return t.selectionStart>0&&![" ",`\r
`,"\r",`
`].includes(t.value[t.selectionStart-1])||(Y=it(t,t.selectionStart),b(!0)),!1;if(h()){if(l.code==="ArrowDown"){l.preventDefault(),d(P=>y.length===0?0:P<y.length-7?P+6:0);const _=document.getElementById(`${Q}-${j()}`);return _&&w&&!Ee(_,w)&&_.scrollIntoView({block:"end",behavior:"smooth"}),!1}if(l.code==="ArrowUp"){l.preventDefault(),d(P=>y.length===0?0:P>=6?P-6:y.length-1);const _=document.getElementById(`${Q}-${j()}`);return _&&w&&!Ee(_,w)&&_.scrollIntoView({block:"start",behavior:"smooth"}),!1}if(l.code==="ArrowRight"){l.preventDefault(),d(P=>y.length===0?0:P<y.length-1?P+1:0);const _=document.getElementById(`${Q}-${j()}`);return _&&w&&!Ee(_,w)&&_.scrollIntoView({block:"end",behavior:"smooth"}),!1}if(l.code==="ArrowLeft"){l.preventDefault(),d(P=>y.length===0?0:P>0?P-1:y.length-1);const _=document.getElementById(`${Q}-${j()}`);return _&&w&&!Ee(_,w)&&_.scrollIntoView({block:"start",behavior:"smooth"}),!1}if(l.code,k.includes(l.code)||l.code==="Semicolon")return a().trim().length===0?(b(!1),!1):(l.preventDefault(),y.length===0&&H(()=>at(a())),v(y[j()]),d(0),!1);const L=t.selectionStart,T=t.value.slice(0,L).lastIndexOf(":");return l.code==="Backspace"?(B(a().slice(0,-1)),(T<0||L-T<=1)&&b(!1),!1):(["Shift","Control","Meta"].includes(l.key)||B(_=>_+l.key),!1)}if(!ee()&&l.key==="@")return c=it(t,t.selectionStart),t.selectionStart>0&&![" ",`\r
`,"\r",`
`].includes(t.value[t.selectionStart-1])||(le(""),e(""),te(!0)),!1;if(!ee()&&l.code==="Backspace"&&t){let L=t.selectionStart;const T=t.value.slice(0,L),_=T.split(/[\s,;\n\r]/).pop();if(_?.startsWith("@`")){const P=T.lastIndexOf(_),pe=T.slice(0,P)+t.value.slice(L);x(pe),t.value=pe,t.selectionEnd=P}}if(ee()){if(l.code==="ArrowDown")return l.preventDefault(),s(_=>!u?.users||u.users.length===0?0:_<u.users.length-1?_+1:0),!1;if(l.code==="ArrowUp")return l.preventDefault(),s(_=>!u?.users||u.users.length===0?0:_>0?_-1:u.users.length-1),!1;if(k.includes(l.code))return ce().trim().length===0?(te(!1),!1):(l.preventDefault(),u?.users&&J(u.users[m()]),te(!1),!1);const L=t.selectionStart,T=t.value.slice(0,L).lastIndexOf("@");if(l.code==="Backspace"){if(le(ce().slice(0,-1)),T<0||L-T<=1)return te(!1),!1}else if(!["Shift","Control","Meta"].includes(l.key))return le(_=>_+l.key),!1;return!1}return!0},"onKeyDown");mt(()=>{A?.addEventListener("input",()=>me()),t&&t.addEventListener("keydown",ge)}),tn(()=>{A?.removeEventListener("input",()=>me()),t&&t.removeEventListener("keydown",ge)});const u=nn(),[ee,te]=ae(!1),[ce,le]=ae(""),[$e,e]=ae(""),[m,s]=ae(0);let c={top:0,left:0,height:0},r;const $=o(l=>l.replace(rn,k=>{const[L,T]=k.split("`");return` nostr:${N[T].npub}`}),"prepareMessageForSending");de(()=>{const l=ce();nt(()=>{e(()=>l)},500)}),de(()=>{if($e().length===0){u?.actions.getRecomendedUsers();return}u?.actions.findUsers($e())}),de(()=>{ee()&&(M(),u?.users&&u.users.length>0&&s(0))});const M=o(()=>{if(!t||!r||!A)return;let k=t.getBoundingClientRect().height-c.top+32,L=c.left;L+r.getBoundingClientRect().width>628&&(L=628-r.getBoundingClientRect().width),r.style.bottom=`${k}px`,r.style.left=`${L}px`},"mentionPositionOptions"),v=o(l=>{if(!t||!l){b(!1),B(""),H(()=>[]);return}const k=F();let L=t.selectionStart;const T=k.slice(0,L).lastIndexOf(":"),_=k.slice(0,T)+l.name+k.slice(L);x(_),t.value=F(),t.selectionEnd=T+1,t.focus(),b(!1),B(""),H(()=>[])},"selectEmoji"),[N,z]=Pe({}),J=o(l=>{if(!t||!l)return;te(!1);const k=ze(l);z(Ae=>({...Ae,[k]:l}));const L=F();let T=t.selectionStart;const _=L.slice(0,T).lastIndexOf("@"),P=L.slice(0,_)+`@\`${k}\``+L.slice(T);e(""),x(P),t.value=F(),t.focus(),T=P.slice(0,T).lastIndexOf("@")+k.length+3,t.selectionEnd=T;const pe=new Event("input",{bubbles:!0,cancelable:!0});t.dispatchEvent(pe)},"selectUser");de(()=>{a().length>st&&H(()=>at(a()))}),de(()=>{h()&&(re(),y.length>0&&d(0))});const re=o(()=>{if(!t||!w||!A)return;let k=t.getBoundingClientRect().height-Y.top+32,L=Y.left;w.style.bottom=`${k}px`,w.style.left=`${L}px`},"emojiPositionOptions");return(()=>{const l=cr(),k=l.firstChild,L=k.firstChild,T=k.nextSibling,_=T.firstChild,P=A;typeof P=="function"?Me(P,l):A=l;const pe=S;typeof pe=="function"?Me(pe,k):S=k,L.$$input=se,L.addEventListener("blur",()=>q(!1)),L.addEventListener("focus",()=>q(!0));const Ae=t;return typeof Ae=="function"?Me(Ae,L):t=L,T.$$click=K,f(l,n(ne,{get when(){return ee()},get children(){const G=ir(),fe=r;return typeof fe=="function"?Me(fe,G):r=G,f(G,n(V,{get each(){return u?.users},children:(ie,be)=>n($n,{get title(){return ze(ie)},get description(){return ie.nip05},get icon(){return n(Re,{user:ie,size:"xs"})},get statNumber(){return C?.profileHistory.stats[ie.pubkey]?.followers_count||u?.scores[ie.pubkey]},get statLabel(){return R.formatMessage(sn.followers)},onClick:()=>J(ie),get highlighted(){return m()===be()}})})),E(()=>g(G,I.searchSuggestions)),G}}),null),f(l,n(ne,{get when(){return _t(()=>!!h())()&&a().length>st},get children(){const G=ar(),fe=w;return typeof fe=="function"?Me(fe,G):w=G,f(G,n(V,{each:y,children:(ie,be)=>(()=>{const _e=lr();return _e.$$click=()=>v(ie),f(_e,()=>ie.name),E(Te=>{const Qe=`${Q}-${be()}`,Ye=`${I.emojiOption} ${j()===be()?I.highlight:""}`;return Qe!==Te._v$5&&W(_e,"id",Te._v$5=Qe),Ye!==Te._v$6&&g(_e,Te._v$6=Ye),Te},{_v$5:void 0,_v$6:void 0}),_e})()})),E(()=>g(G,I.emojiSuggestions)),G}}),null),E(G=>{const fe=I.newMessage,ie=I.textAreaBorder,be=Z(),_e=I.iconSend;return fe!==G._v$&&g(l,G._v$=fe),ie!==G._v$2&&g(k,G._v$2=ie),be!==G._v$3&&g(T,G._v$3=be),_e!==G._v$4&&g(_,G._v$4=_e),G},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),l})()},"DirectMessageComposer"),ur=Se(dr);Ve(["input","click"]);const gr=U("<div><div></div><button>"),mr=U("<div>"),fr=U("<div><div></div><div><div></div><div>"),Pr=o(()=>{const p=on(),O=Le(),C=De(),R=qe(),i=an(),F=o(d=>C?C.dmContacts[d]||[]:[],"contacts"),x=o(async d=>{if(!C||!["any","follows","other"].includes(d)||d===C.lastConversationRelation&&C?.dmContacts[d].length>0)return;C.actions.setDmRelation2(d);let h=C?.dmContacts[d];if(h.length>0){const a=t(h[0].pubkey);if(a.length===0)return;i(`/dms/${a}`);return}await C.actions.getContacts(d),h=C?.dmContacts[d];const b=h.find(a=>a.pubkey===C.lastConversationContact?.pubkey)?.pubkey||t(h[0].pubkey);b.length!==0&&i(`/dms/${b}`)},"changeRelation"),D=o(d=>O?.following?O.following.includes(d):!1,"isFollowing"),q=o(async d=>{if(!(!C||!O||!O.following)){if(D(d))return await x("follows");if(!D(d))return await x("other")}},"updateRelationOfContact"),Q=o(async d=>{await C?.actions.selectContact(d),await q(d)},"setupContact"),t=o(d=>{let h=d;if(!h.startsWith("npub"))try{h=Ue(h)}catch(b){return Ge("Failed to decode npub: ",b),""}return h},"toNpub"),S=o(d=>{const h=t(d);h.length!==0&&i(`/dms/${h}`)},"selectContact"),A=o(async d=>{if(!(!O?.publicKey||!O.isKeyLookupDone)){if(!d){const b=C?.lastConversationContact?.pubkey;if(b){await q(b),S(b);return}x(C?.lastConversationRelation||"follows");return}Q(d)}},"setupPageState"),w=o(()=>{C?.actions.resetAllMessages()},"markAllAsRead"),j=o(d=>{const h=t(d);return[d,h].includes(p.contact)},"isSelected");return de(rt(()=>[O?.isKeyLookupDone,p.contact],d=>{const[h,b]=d;if(h){let a=b||"";a.startsWith("npub")&&(a=cn(a)),A(a)}})),de(rt(()=>C?.dmCount,(d,h)=>{if(!d||d===h)return;d>0&&C?.actions.refreshContacts(C.lastConversationRelation)},{defer:!0})),(()=>{const d=fr(),h=d.firstChild,b=h.nextSibling,a=b.firstChild,B=a.nextSibling;return f(d,n(dn,{get title(){return R.formatMessage(Ie.title)}}),h),f(h,n(un,{get title(){return R.formatMessage(Ie.title)}})),f(d,n(gn,{to:"search_section",get children(){return n(mn,{get placeholder(){return R.formatMessage(ln.findUser)},onInputConfirm:()=>{},noLinks:!0,hideDefault:!0,onUserSelect:y=>i(`/dms/${y.pubkey}`)})}}),b),f(a,n(we,{get value(){return C?.lastConversationRelation},onChange:x,get children(){return[(()=>{const y=gr(),H=y.firstChild,Y=H.nextSibling;return f(H,n(we.List,{get class(){return oe.dmContactsTabs},get children(){return[n(we.Trigger,{get class(){return oe.dmContactTab},value:"follows",get children(){return R.formatMessage(Ie.follows)}}),n(we.Trigger,{get class(){return oe.dmContactTab},value:"other",get children(){return R.formatMessage(Ie.other)}}),n(we.Indicator,{get class(){return oe.dmContactsTabIndicator}})]}})),Y.$$click=w,f(Y,()=>R.formatMessage(Ie.markAsRead)),E(K=>{const Z=oe.dmControls,se=oe.markAsRead,ue=C?.dmCount===0;return Z!==K._v$&&g(y,K._v$=Z),se!==K._v$2&&g(Y,K._v$2=se),ue!==K._v$3&&(Y.disabled=K._v$3=ue),K},{_v$:void 0,_v$2:void 0,_v$3:void 0}),y})(),(()=>{const y=mr();return f(y,n(V,{each:["follows","other"],children:H=>n(we.Content,{get class(){return oe.dmContactsTabContent},value:H,get children(){return[n(V,{get each(){return F(H)},children:Y=>n(ss,{dmContact:Y,onSelect:S,get isSelected(){return j(Y.pubkey)}})}),n(vt,{isSmall:!0,loadNextPage:()=>C?.actions.getContactsNextPage(H)})]}})})),E(()=>g(y,oe.dmContactsList)),y})()]}})),f(B,n(ur,{get pubkey(){return C?.lastConversationContact?.pubkey},get messageCount(){return C?.messages.length}}),null),f(B,n(or,{get contact(){return C?.lastConversationContact},get messages(){return C?.messages}}),null),E(y=>{const H=oe.dmLayout,Y=oe.dmHeader,K=oe.dmContent,Z=oe.dmSidebar,se=oe.dmConversation;return H!==y._v$4&&g(d,y._v$4=H),Y!==y._v$5&&g(h,y._v$5=Y),K!==y._v$6&&g(b,y._v$6=K),Z!==y._v$7&&g(a,y._v$7=Z),se!==y._v$8&&g(B,y._v$8=se),y},{_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),d})()},"DirectMessages");Ve(["click"]);export{Pr as default};
//# sourceMappingURL=DirectMessages-5dc1cc22.js.map
