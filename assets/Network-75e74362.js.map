{"version":3,"file":"Network-75e74362.js","sources":["../../src/translationHelpers.tsx","../../src/pages/Settings/Network.tsx"],"sourcesContent":["export const interpretBold = (...chunks: any) => <b>{chunks}</b>;\n\nexport const interpretLineBreak = (...chunks: any) => <div>{chunks}</div>;\n","import { Component, createEffect, createSignal, For, Match, onMount, Show, Switch } from 'solid-js';\nimport { Relay, relayInit } from \"../../lib/nTools\";\nimport styles from './Settings.module.scss';\n\nimport { useIntl } from '@cookbook/solid-intl';\nimport {\n  settings as t,\n  actions as tActions,\n  errors as tErrors,\n  placeholders as tPlaceholders,\n} from '../../translations';\nimport PageCaption from '../../components/PageCaption/PageCaption';\nimport { A } from '@solidjs/router';\nimport { useAccountContext } from '../../contexts/AccountContext';\nimport { getDefaultRelays } from '../../lib/relays';\nimport { APP_ID } from '../../App';\nimport { isConnected as isSocketConnected, socket, subsTo } from '../../sockets';\nimport { createStore } from 'solid-js/store';\nimport Checkbox from '../../components/Checkbox/Checkbox';\nimport ConfirmModal from '../../components/ConfirmModal/ConfirmModal';\nimport { interpretBold } from '../../translationHelpers';\nimport HelpTip from '../../components/HelpTip/HelpTip';\nimport PageTitle from '../../components/PageTitle/PageTitle';\nimport ButtonLink from '../../components/Buttons/ButtonLink';\nimport { logError } from '../../lib/logger';\nimport { useSettingsContext } from '../../contexts/SettingsContext';\nimport CheckBox2 from '../../components/Checkbox/CheckBox2';\n\n\nconst Network: Component = () => {\n\n  const intl = useIntl();\n  const account = useAccountContext();\n  const settings = useSettingsContext();\n\n  const [recomendedRelays, setRecomendedRelays] = createStore<Relay[]>([]);\n  const [confirmRemoveRelay, setConfirmRemoveRelay] = createSignal('');\n  const [invalidCustomRelay, setInvalidCustomRelay] = createSignal(false);\n  const [invalidCachingService, setInvalidCachingService] = createSignal(false);\n\n  let customRelayInput: HTMLInputElement | undefined;\n  let cachingServiceInput: HTMLInputElement | undefined;\n\n  const relays = () => {\n    let settingsRelays = [];\n\n    for (let url in (account?.relaySettings || {})) {\n\n      settingsRelays.push(relayInit(url))\n    }\n\n    return settingsRelays;\n  };\n\n  const otherRelays = () => {\n    const myRelays: string[] = relays().map(r => r.url);\n\n    let unusedRelays: string[] = [];\n\n    for (let i = 0; i < recomendedRelays.length; i++) {\n      const relay = recomendedRelays[i];\n\n      const exists = myRelays.find(r => {\n\n        const a = new URL(r);\n        const b = new URL(relay.url);\n\n        return a.href === b.href;\n      });\n\n      if (!exists) {\n        unusedRelays.push(relay.url);\n      }\n    }\n\n    return unusedRelays;\n  }\n\n  const isConnected = (url: string) => {\n    const relay: Relay | undefined = account?.relays.find(r => r.url === url);\n\n    return relay && relay.ws && relay.ws.readyState === WebSocket.OPEN;\n  };\n\n  const isPrimalRelayInUserSettings = () => {\n    const rels: string[] = import.meta.env.PRIMAL_PRIORITY_RELAYS?.split(',') || [];\n\n    return Object.keys(account?.relaySettings || {}).includes(rels[0]);\n  }\n\n  const onCheckPrimalRelay = () => {\n    account?.actions.setConnectToPrimaryRelays(!account.connectToPrimaryRelays)\n  };\n\n  const onAddRelay = (url: string) => {\n    const rels: string[] = import.meta.env.PRIMAL_PRIORITY_RELAYS?.split(',') || [];\n\n    if (rels.includes(url)) {\n      account?.actions.setConnectToPrimaryRelays(true);\n    }\n\n    const myRelays = relays();\n\n    if (myRelays.length === 0) {\n      account?.actions.dissconnectDefaultRelays()\n    }\n\n    account?.actions.addRelay(url);\n  };\n\n  const onRemoveRelay = (url: string) => {\n    account?.actions.removeRelay(url);\n\n    const myRelays = relays();\n\n    if (myRelays.length === 0) {\n      setTimeout(() => {\n        account?.actions.connectToRelays({});\n      }, 200);\n    }\n  };\n\n  const onCustomRelayInput = () => {\n    if (!customRelayInput || customRelayInput.value === '') {\n      return;\n    }\n\n    try {\n      const value = customRelayInput.value;\n      const url = new URL(value);\n      if (!url.origin.startsWith('wss://') && !url.origin.startsWith('ws://')) {\n        throw(new Error('must be a wss'))\n      }\n\n      customRelayInput.value = '';\n      account?.actions.addRelay(value);\n      setInvalidCustomRelay(false);\n    } catch (e) {\n      logError('invalid relay input ', e);\n      setInvalidCustomRelay(true);\n    }\n  }\n\n  const resetRelays = () => {\n    account?.actions.resetRelays(recomendedRelays);\n  }\n\n  const onCachingServiceInput = () => {\n    if (!cachingServiceInput || cachingServiceInput.value === '') {\n      return;\n    }\n\n    try {\n      const url = new URL(cachingServiceInput.value);\n      if (!url.origin.startsWith('wss://') && !url.origin.startsWith('ws://')) {\n        throw(new Error('must be a wss'))\n      }\n\n      cachingServiceInput.value = '';\n      account?.actions.changeCachingService(url.href);\n      setInvalidCachingService(false);\n    } catch (e) {\n      logError('invalid caching service input', e);\n      setInvalidCachingService(true);\n    }\n  }\n\n  createEffect(() => {\n    const unsub = subsTo(`settings_drs_${APP_ID}`, {\n      onEvent: (_, content) => {\n        const urls = JSON.parse(content.content || '[]') || [];\n        setRecomendedRelays(() => urls.map(relayInit));\n      },\n      onEose: () => {\n        unsub();\n      },\n    });\n\n    getDefaultRelays(`settings_drs_${APP_ID}`);\n  });\n\n  return (\n    <div>\n      <PageTitle title={`${intl.formatMessage(t.network.title)} ${intl.formatMessage(t.title)}`} />\n\n      <PageCaption>\n        <A href='/settings' >{intl.formatMessage(t.index.title)}</A>:&nbsp;\n        <div>{intl.formatMessage(t.network.title)}</div>\n      </PageCaption>\n\n      <div class={styles.settingsContent}>\n        <div class={styles.settingsCaption}>\n          <CheckBox2\n            id='proxyEvents'\n            label=\"\"\n            onChange={() => {settings?.actions.setProxyThroughPrimal(!account?.proxyThroughPrimal)}}\n            checked={account?.proxyThroughPrimal}\n          />\n          <span>{intl.formatMessage(t.network.proxyEvents)}</span>\n          <HelpTip zIndex={1_000}>\n            <span>\n              {intl.formatMessage(t.network.proxyDescription)}\n            </span>\n          </HelpTip>\n        </div>\n\n        <div class={styles.moderationDescription}>\n          {intl.formatMessage(t.network.proxyDescription)}\n        </div>\n      </div>\n\n      <div class={styles.settingsContent}>\n        <div class={`${styles.bigCaption}`}>\n          {intl.formatMessage(t.network.cachingService)}\n        </div>\n\n        <div class={styles.settingsCaption}>\n          <div>\n            {intl.formatMessage(t.network.connectedCachingService)}\n          </div>\n          <HelpTip>\n            <span>{intl.formatMessage(tPlaceholders.cachingPoolHelp)}</span>\n          </HelpTip>\n        </div>\n\n        <div class={`${styles.relayItem} ${styles.extended}`}>\n          <div class={styles.relayEntry}>\n            <Show\n              when={isSocketConnected()}\n              fallback={<div class={styles.disconnected}></div>}\n            >\n              <div class={styles.connected}></div>\n            </Show>\n            <div class={styles.webIcon}></div>\n            <span>\n              {socket()?.url}\n            </span>\n          </div>\n        </div>\n\n      <div class={`${styles.settingsCaption} ${styles.secondCaption}`}>\n          {intl.formatMessage(t.network.alternativeCachingService)}\n      </div>\n\n      <div\n        class={styles.relayInput}\n      >\n        <div class={styles.webIcon}></div>\n        <input\n          ref={cachingServiceInput}\n          type=\"text\"\n          placeholder={intl.formatMessage(tPlaceholders.cachingServiceUrl)}\n          onChange={() => onCachingServiceInput()}\n        />\n        <button onClick={() => onCachingServiceInput()}>\n          <div class={styles.connectIcon}></div>\n        </button>\n      </div>\n\n      <Show when={invalidCachingService()}>\n        <div class={styles.invalidInput}>\n          {intl.formatMessage(tErrors.invalidRelayUrl)}\n        </div>\n      </Show>\n\n      <div style=\"height: 20px\"></div>\n\n      <ButtonLink\n        onClick={() => account?.actions.changeCachingService()}\n      >\n        {intl.formatMessage(tActions.restoreCachingService)}\n      </ButtonLink>\n    </div>\n\n\n\n      <div class={styles.settingsContent}>\n        <div class={styles.bigCaption}>\n          {intl.formatMessage(t.network.relays)}\n        </div>\n\n        <div class={styles.settingsCaption}>\n          {intl.formatMessage(t.network.myRelays)}\n        </div>\n      </div>\n\n      <Show\n        when={relays().length > 0}\n        fallback={\n          <div class={styles.settingsContentPaddingOnly}>\n            <div class={styles.noMyRelays}>\n              {intl.formatMessage(t.network.noMyRelays)}\n            </div>\n          </div>\n        }\n      >\n        <For each={relays()}>\n          {relay => (\n            <button class={styles.relayItem} onClick={() => setConfirmRemoveRelay(relay.url)}>\n              <div class={styles.relayEntry}>\n                <Switch fallback={<div class={styles.disconnected}></div>}>\n                  <Match when={account?.proxyThroughPrimal}>\n                    <div class={styles.suspended}></div>\n                  </Match>\n\n                  <Match when={isConnected(relay.url)}>\n                    <div class={styles.connected}></div>\n                  </Match>\n                </Switch>\n\n                <div class={styles.webIcon}></div>\n                <span class={styles.relayUrl} title={relay.url}>\n                  {relay.url}\n                </span>\n              </div>\n\n              <div class={styles.remove}>\n                {intl.formatMessage(tActions.removeRelay)}\n              </div>\n            </button>\n          )}\n        </For>\n      </Show>\n\n\n      <div class={styles.settingsContentPaddingOnly}>\n        <Show when={!isPrimalRelayInUserSettings()}>\n          <CheckBox2\n            id=\"primal_relay_check\"\n            checked={account?.connectToPrimaryRelays}\n            onChange={() => onCheckPrimalRelay()}\n            label={`Post a copy of all content to the Primal relay (${import.meta.env.PRIMAL_PRIORITY_RELAYS})`}\n          />\n        </Show>\n      </div>\n\n      <div class={styles.resetRelays}>\n        <ButtonLink onClick={resetRelays}>\n          {intl.formatMessage(tActions.resetRelays)}\n        </ButtonLink>\n        <HelpTip>\n          <span>{intl.formatMessage(tPlaceholders.resetRelaysHelp)}</span>\n        </HelpTip>\n      </div>\n\n      <div class={styles.settingsContentBorderless}>\n        <div class={`${styles.settingsCaption} ${styles.secondCaption}`}>\n          {intl.formatMessage(t.network.customRelay)}\n        </div>\n\n        <div\n          class={styles.relayInput}\n        >\n          <div class={styles.webIcon}></div>\n          <input\n            ref={customRelayInput}\n            type=\"text\"\n            placeholder={intl.formatMessage(tPlaceholders.relayUrl)}\n            onChange={() => onCustomRelayInput()}\n          />\n          <button onClick={() => onCustomRelayInput()}>\n            <div class={styles.connectIcon}></div>\n          </button>\n        </div>\n\n        <Show when={invalidCustomRelay()}>\n          <div class={styles.invalidInput}>\n            {intl.formatMessage(tErrors.invalidRelayUrl)}\n          </div>\n        </Show>\n\n        <div style=\"height: 48px\"></div>\n      </div>\n\n      <ConfirmModal\n        open={confirmRemoveRelay().length > 0}\n        description={intl.formatMessage(tActions.confirmRemoveRelay, {\n          url: confirmRemoveRelay(),\n          b: interpretBold,\n        }) as string}\n        onConfirm={() => {\n          onRemoveRelay(confirmRemoveRelay())\n          setConfirmRemoveRelay('');\n        }}\n        onAbort={() => setConfirmRemoveRelay('')}\n      />\n    </div>\n  )\n}\n\nexport default Network;\n"],"names":["interpretBold","chunks","_el$","_tmpl$","_$insert","Network","intl","useIntl","account","useAccountContext","settings","useSettingsContext","recomendedRelays","setRecomendedRelays","createStore","confirmRemoveRelay","setConfirmRemoveRelay","createSignal","invalidCustomRelay","setInvalidCustomRelay","invalidCachingService","setInvalidCachingService","customRelayInput","cachingServiceInput","relays","settingsRelays","url","relaySettings","push","relayInit","isConnected","relay","find","r","ws","readyState","WebSocket","OPEN","isPrimalRelayInUserSettings","rels","import","split","Object","keys","includes","onCheckPrimalRelay","actions","setConnectToPrimaryRelays","connectToPrimaryRelays","onRemoveRelay","removeRelay","length","setTimeout","connectToRelays","onCustomRelayInput","value","URL","origin","startsWith","Error","addRelay","e","logError","resetRelays","onCachingServiceInput","changeCachingService","href","createEffect","unsub","subsTo","APP_ID","onEvent","_","content","urls","JSON","parse","map","onEose","getDefaultRelays","_tmpl$3","_el$3","firstChild","_el$4","_el$5","_el$7","nextSibling","_el$8","_el$9","_el$10","_el$11","_el$13","_el$14","_el$16","_el$17","_el$18","_el$19","_el$20","_el$21","_el$22","_el$23","_el$25","_el$26","_el$27","_el$28","_el$29","_el$30","_el$32","_el$33","_el$34","_el$35","_el$36","_el$37","_el$38","_el$40","_$createComponent","PageTitle","title","formatMessage","t","network","PageCaption","children","A","index","_el$2","CheckBox2","id","label","onChange","setProxyThroughPrimal","proxyThroughPrimal","checked","proxyEvents","HelpTip","zIndex","_el$6","_tmpl$2","proxyDescription","cachingService","connectedCachingService","_el$12","tPlaceholders","cachingPoolHelp","Show","when","isSocketConnected","fallback","_el$41","_$effect","_$className","styles","disconnected","_el$15","connected","socket","alternativeCachingService","addEventListener","_ref$","_$use","$$click","_el$24","tErrors","invalidRelayUrl","invalidInput","ButtonLink","onClick","tActions","restoreCachingService","myRelays","_el$42","_tmpl$4","_el$43","noMyRelays","_p$","_v$26","settingsContentPaddingOnly","_v$27","undefined","For","each","_el$44","_tmpl$5","_el$45","_el$48","_el$49","_el$50","Switch","_el$51","Match","_el$46","suspended","_el$47","_v$28","relayItem","_v$29","relayEntry","_v$30","webIcon","_v$31","relayUrl","_v$32","_v$33","remove","_$setAttribute","_el$31","resetRelaysHelp","customRelay","_ref$2","_el$39","ConfirmModal","open","description","b","onConfirm","onAbort","_v$","settingsContent","_v$2","settingsCaption","_v$3","moderationDescription","_v$4","_v$5","bigCaption","_v$6","_v$7","extended","_v$8","_v$9","_v$10","secondCaption","_v$11","relayInput","_v$12","_v$13","cachingServiceUrl","_v$14","connectIcon","_v$15","_v$16","_v$17","_v$18","_v$19","_v$20","settingsContentBorderless","_v$21","_v$22","_v$23","_v$24","_v$25","_$delegateEvents"],"mappings":"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"}