var U=Object.defineProperty;var d=(P,s)=>U(P,"name",{value:s,configurable:!0});import{b as E,ad as w,g as y,aI as N,Y as M,u as K,B as X,o as Z,aJ as J,j as l,c as r,A as z,k as ee,l as u,m as i,w as te,V as ne,S as A,J as re,K as q,F as I,t as $,T as C,aK as R,aL as se,a2 as F,aM as Q,aN as oe,aO as ae,E as le,aP as ie,n as ce,aQ as ue}from"./index-64dc6460.js";import{s as n,N as pe,E as de,a as ge}from"./ExploreHotTopics-83547ce2.js";import{S as $e}from"./StickySidebar-65b823c5.js";import{S as ve}from"./Search-c8ce1e29.js";import{P as _e}from"./PageCaption-27eb7f4c.js";import{P as me}from"./PageTitle-3d0a9832.js";import{T as f}from"./7FJWXM73-511ca333.js";import{F as fe}from"./FeedMarketPlace-34349272.js";import{P as j}from"./Paginator-4878ac5b.js";import{F as he}from"./FollowButton-d935d050.js";import{e as xe}from"./ParsedNote-9900e3c8.js";import{N as be}from"./NoteGallery-bea6c77c.js";import"./Wormhole-fa0163d3.js";import"./Loader-1ac7e304.js";import"./SearchOption-a7f2ab4a.js";import"./SOM3K36D-40feb6ac.js";import"./index-c76cfba2.js";import"./5WXHJDCZ-8b9b8e69.js";import"./index-b4296c5e.js";import"./RLGGFAYQ-2a48be09.js";import"./LR7LBJN3-a1aba763.js";import"./FeedMarketPlaceItem-1368feb7.js";import"./ButtonFlip-65663082.js";import"./Buttons.module-e818c1ea.js";import"./dates-9bcb2bf7.js";import"./ButtonGhost-a0fa1826.js";import"./ButtonPrimary-1f64caa8.js";const W=$("<div><div>"),Y=$("<div>"),Pe=$("<div>followers"),Ce=$("<div><span>+ "),Se=$("<div><div><div><div></div></div><div><div></div></div></div><div>"),Te=d(P=>{E(),w(),y();const s=N();M();const m=K(),x=X();Z(()=>{s?.exploreMedia.length===0&&h()});const h=d(async()=>{const{users:o,paging:e,page:t}=await J(m?.publicKey,`explore_people_${C}`,{limit:20});s?.actions.setExplorePeople(o,e,t)},"getPeople"),v=d(async()=>{if(!s||s.peoplePaging.since===0)return;const o=s.peoplePaging.since||0,e=s.explorePeople.reduce((_,b)=>o===b.userStats?.followers_increase?.increase?_+1:_,0),t={limit:20,until:s.peoplePaging.since,offset:e},{users:a,paging:p,page:g}=await J(m?.publicKey,`explore_people_${C}`,t);s?.actions.setExplorePeople(a,p,g)},"getNextPeoplePage");return(()=>{const o=W(),e=o.firstChild;return l(e,r(I,{get each(){return s?.explorePeople},children:t=>r(z,{get href(){return x?.actions.profileLink(t.npub)||""},get class(){return n.explorePerson},get children(){return[(()=>{const a=W(),p=a.firstChild;return l(a,r(ee,{user:t,size:"mll"}),p),l(p,r(he,{person:t})),u(g=>{const _=n.userImage,b=n.follow;return _!==g._v$3&&i(a,g._v$3=_),b!==g._v$4&&i(p,g._v$4=b),g},{_v$3:void 0,_v$4:void 0}),a})(),(()=>{const a=Se(),p=a.firstChild,g=p.firstChild,_=g.firstChild,b=g.nextSibling,k=b.firstChild,L=p.nextSibling;return l(_,()=>te(t),null),l(_,r(ne,{user:t}),null),l(g,r(A,{get when(){return t.nip05},get children(){const c=Y();return l(c,()=>re(t)),u(()=>i(c,n.nip05)),c}}),null),l(k,()=>t.about),l(L,r(A,{get when(){return t.userStats?.followers_count},get children(){return[(()=>{const c=Y();return l(c,()=>q(t.userStats?.followers_count||0)),u(()=>i(c,n.number)),c})(),(()=>{const c=Pe();return u(()=>i(c,n.unit)),c})()]}}),null),l(L,r(A,{get when(){return t.userStats?.followers_increase?.increase},get children(){const c=Ce(),S=c.firstChild;return S.firstChild,l(S,()=>t.userStats?.followers_increase?.increase.toLocaleString(),null),u(()=>i(c,n.increaseCount)),c}}),null),u(c=>{const S=n.userInfo,V=n.userData,B=n.userBasicData,D=n.userName,G=n.userAdditionalData,O=`${n.userAbout} ${t.nip05?"":n.extended}`,H=n.userStats;return S!==c._v$5&&i(a,c._v$5=S),V!==c._v$6&&i(p,c._v$6=V),B!==c._v$7&&i(g,c._v$7=B),D!==c._v$8&&i(_,c._v$8=D),G!==c._v$9&&i(b,c._v$9=G),O!==c._v$10&&i(k,c._v$10=O),H!==c._v$11&&i(L,c._v$11=H),c},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0}),a})()]}})})),l(o,r(j,{isSmall:!0,loadNextPage:v}),null),u(t=>{const a=n.explorePeople,p=n.peopleGrid;return a!==t._v$&&i(o,t._v$=a),p!==t._v$2&&i(e,t._v$2=p),t},{_v$:void 0,_v$2:void 0}),o})()},"ExplorePeople"),Ee=$("<div>"),we=d(P=>{E(),w(),y();const s=N();M();const m=K();Z(()=>{s?.exploreZaps.length===0&&x()});const x=d(async()=>{const{notes:o,reads:e,users:t,zaps:a,paging:p}=await R(m?.publicKey,`explore_zaps_${C}`,{limit:20});s?.actions.setExploreZaps(a,p,{notes:o,users:t,reads:e})},"getZaps"),h=d(async()=>{if(!s||s.zapPaging.since===0)return;const o=se(s.exploreZaps,s.zapPaging),e={limit:20,until:s.zapPaging.since,offset:o},{notes:t,reads:a,users:p,zaps:g,paging:_}=await R(m?.publicKey,`explore_zaps_${C}`,e);s?.actions.setExploreZaps(g,_,{notes:t,users:p,reads:a})},"getNextZapPage"),v=d(o=>{if(o.zappedKind===F.Text)return s?.zapSubjects.notes.find(e=>e.id===o.zappedId);if(o.zappedKind===F.LongForm)return s?.zapSubjects.reads.find(e=>[e.noteId,e.id].includes(o.zappedId||""));if(o.zappedKind===F.Metadata)return o.reciver},"getZapSubject");return(()=>{const o=Ee();return l(o,r(I,{get each(){return s?.exploreZaps},children:e=>r(xe,{zap:e,get subject(){return v(e)}})}),null),l(o,r(j,{isSmall:!0,loadNextPage:h}),null),u(()=>i(o,n.exploreZaps)),o})()},"ExploreZaps"),ye=$("<div><div>"),Ne=d(P=>{E(),w(),y();const s=N();M();const m=K();Z(()=>{s?.exploreMedia.length===0&&x()});const x=d(async()=>{const{notes:o,paging:e}=await Q(m?.publicKey,`explore_media_${C}`,{limit:30});s?.actions.setExploreMedia(o,e)},"getMedia"),h=d(async()=>{if(!s||s.mediaPaging.since===0)return;const o=s.mediaPaging.since||0,e=s.mediaPaging.sortBy,t=s.exploreMedia.reduce((_,b)=>o===b.msg[e]?_+1:_,0),a={limit:30,until:s.mediaPaging.since,offset:t},{notes:p,paging:g}=await Q(m?.publicKey,`explore_media_${C}`,a);s?.actions.setExploreMedia(p,g)},"getNextMediaPage"),v=d(()=>s?.exploreMedia.filter(o=>oe.test(o.content)),"galleryImages");return(()=>{const o=ye(),e=o.firstChild;return l(e,r(I,{get each(){return v()},children:t=>r(z,{get href(){return`/e/${t.noteId}`},get class(){return n.missingImage},get children(){return r(be,{note:t})}})}),null),l(e,r(j,{isSmall:!0,loadNextPage:h}),null),u(t=>{const a=n.exploreMedia,p=n.galleryGrid;return a!==t._v$&&i(o,t._v$=a),p!==t._v$2&&i(e,t._v$2=p),t},{_v$:void 0,_v$2:void 0}),o})()},"ExploreMedia"),Me=$("<div>"),Ke=$("<div>#"),Ze=$("<div> notes"),ze=d(P=>{E(),w(),y();const s=N();M();const m=K();Z(()=>{x()});const x=d(async()=>{const{topicStats:v}=await ae(m?.publicKey,`explore_topics_${C}`);s?.actions.setExploreTopics(v)},"getTopics"),h=d(()=>s?.exploreTopics.toSorted((v,o)=>o[1]-v[1]),"topics");return(()=>{const v=Me();return l(v,r(I,{get each(){return h()},children:o=>r(z,{get href(){return`/search/%23${o[0]}`},get class(){return n.exploreTopic},get children(){return[(()=>{const e=Ke();return e.firstChild,l(e,()=>o[0],null),u(()=>i(e,n.name)),e})(),(()=>{const e=Ze(),t=e.firstChild;return l(e,()=>q(o[1]),t),u(()=>i(e,n.number)),e})()]}})})),u(()=>i(v,n.exploreTopics)),v})()},"ExploreTopics"),T=$("<div>"),Ie=$("<div>Feeds"),Le=$("<div>People"),Ae=$("<div>Zaps"),Fe=$("<div>Media"),je=$("<div>Topics"),gt=d(()=>{E(),w();const P=y(),s=N(),m=M(),x=K(),h=d(()=>m.hash.length>1?m.hash.substring(1):"feeds","hash");Z(()=>{h(),v()}),le(()=>{ie()&&(s?.actions.fetchLegendStats(x?.publicKey),s?.actions.openNetStatsStream())}),ce(()=>{s?.actions.closeNetStatsStream()});const v=d(e=>{},"updateTabContent"),o=d(e=>{window.location.hash=e},"onChangeTab");return[r(me,{get title(){return P.formatMessage(ue.pageTitle)}}),r(_e,{get children(){const e=T();return l(e,r(ve,{fullWidth:!0})),u(()=>i(e,n.exploreHeader)),e}}),r($e,{get children(){const e=T();return l(e,r(pe,{get stats(){return s?.stats}}),null),l(e,r(de,{}),null),l(e,r(ge,{}),null),u(()=>i(e,n.exploreSide)),e}}),(()=>{const e=T();return l(e,r(f,{get value(){return h()},onChange:o,get defaultValue(){return h()},get children(){return[r(f.List,{get class(){return n.exploreTabs},get children(){return[(()=>{const t=T();return l(t,r(f.Trigger,{get class(){return n.exploreTab},value:"feeds",get children(){const a=Ie();return u(()=>i(a,n.tabLabel)),a}}),null),l(t,r(f.Trigger,{get class(){return n.exploreTab},value:"people",get children(){const a=Le();return u(()=>i(a,n.tabLabel)),a}}),null),l(t,r(f.Trigger,{get class(){return n.exploreTab},value:"zaps",get children(){const a=Ae();return u(()=>i(a,n.tabLabel)),a}}),null),l(t,r(f.Trigger,{get class(){return n.exploreTab},value:"media",get children(){const a=Fe();return u(()=>i(a,n.tabLabel)),a}}),null),l(t,r(f.Trigger,{get class(){return n.exploreTab},value:"topics",get children(){const a=je();return u(()=>i(a,n.tabLabel)),a}}),null),l(t,r(f.Indicator,{get class(){return n.exploreTabIndicator}}),null),u(()=>i(t,n.left)),t})(),(()=>{const t=T();return l(t,r(z,{href:"/asearch",children:"Advanced Search"})),u(()=>i(t,n.right)),t})()]}}),r(f.Content,{get class(){return n.tabContent},value:"feeds",get children(){return r(fe,{get open(){return h()==="feeds"}})}}),r(f.Content,{get class(){return n.tabContent},value:"people",get children(){return r(Te,{})}}),r(f.Content,{get class(){return n.tabContent},value:"zaps",get children(){return r(we,{})}}),r(f.Content,{get class(){return n.tabContent},value:"media",get children(){return r(Ne,{})}}),r(f.Content,{get class(){return n.tabContent},value:"topics",get children(){return r(ze,{})}})]}})),u(()=>i(e,n.explorePageTabs)),e})()]},"Explore");export{gt as default};
//# sourceMappingURL=Explore-2554a5f8.js.map
