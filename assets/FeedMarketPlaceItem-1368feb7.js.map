{"version":3,"file":"FeedMarketPlaceItem-1368feb7.js","sources":["../../src/components/Note/NoteFooter/DvmFooterActionButton.tsx","../../src/components/FeedMarketplace/FeedMarketPlaceItem.tsx"],"sourcesContent":["import { Component, createEffect, onCleanup } from 'solid-js';\nimport { PrimalDVM, PrimalNote } from '../../../types/primal';\n\nimport styles from './NoteFooter.module.scss';\n\nconst buttonTypeClasses: Record<string, string> = {\n  zap: styles.zapType,\n  like: styles.likeType,\n  reply: styles.replyType,\n  repost: styles.repostType,\n};\n\nconst DvmFooterActionButton: Component<{\n  type: 'zap' | 'like' | 'reply' | 'repost',\n  dvm: PrimalDVM | undefined,\n  disabled?: boolean,\n  highlighted?: boolean,\n  onClick?: (e: MouseEvent) => void,\n  onMouseDown?: (e: MouseEvent) => void,\n  onMouseUp?: (e: MouseEvent) => void,\n  onTouchStart?: (e: TouchEvent) => void,\n  onTouchEnd?: (e: TouchEvent) => void,\n  label: string | number,\n  hidden?: boolean,\n  title?: string,\n  large?: boolean,\n}> = (props) => {\n\n  return (\n    <button\n      id={`btn_${props.type}_${props.dvm?.id}`}\n      class={`${styles.stat} ${props.highlighted ? styles.highlighted : ''}`}\n      onClick={props.onClick ?? (() => {})}\n      onMouseDown={props.onMouseDown ?? (() => {})}\n      onMouseUp={props.onMouseUp ?? (() => {})}\n      onTouchStart={props.onTouchStart ?? (() => {})}\n      onTouchEnd={props.onTouchEnd ?? (() => {})}\n      disabled={props.disabled}\n    >\n      <div class={`${buttonTypeClasses[props.type]} ${props.large ? styles.large : ''}`}>\n        <div\n          class={`${styles.icon} ${props.large ? styles.large : ''}`}\n          style={props.hidden ? 'visibility: hidden': 'visibility: visible'}\n        ></div>\n        <div class={styles.statNumber}>{props.label || ''}</div>\n      </div>\n    </button>\n  )\n}\n\nexport default DvmFooterActionButton;\n","import { useIntl } from '@cookbook/solid-intl';\nimport { batch, Component, createEffect, For, Show } from 'solid-js';\nimport { createStore } from 'solid-js/store';\nimport { useAccountContext } from '../../contexts/AccountContext';\nimport { truncateNumber } from '../../lib/notifications';\nimport { DVMMetadata, NoteActions, PrimalDVM, PrimalUser, ZapOption } from '../../types/primal';\nimport Avatar from '../Avatar/Avatar';\nimport DvmFooterActionButton from '../Note/NoteFooter/DvmFooterActionButton';\nimport NoteFooterActionButton from '../Note/NoteFooter/NoteFooterActionButton';\nimport { useToastContext } from '../Toaster/Toaster';\nimport { toast as t } from '../../translations';\nimport styles from './FeedMarketPlace.module.scss';\nimport { canUserReceiveZaps, zapDVM } from '../../lib/zap';\nimport { CustomZapInfo, useAppContext } from '../../contexts/AppContext';\nimport { useSettingsContext } from '../../contexts/SettingsContext';\nimport { lottieDuration } from '../Note/NoteFooter/NoteFooter';\nimport { A } from '@solidjs/router';\n\n\nconst FeedMarketItem: Component<{\n  dvm: PrimalDVM | undefined,\n  author: PrimalUser | undefined,\n  stats?: { likes: number, satszapped: number },\n  metadata?: DVMMetadata,\n  actions?: NoteActions,\n  size?: 'header' | 'list',\n  commonUsers?: PrimalUser[],\n  onClick?: (dvm: PrimalDVM | undefined) => void,\n}> = (props) => {\n  const account = useAccountContext();\n  const toast = useToastContext();\n  const intl = useIntl();\n  const app = useAppContext();\n  const settings = useSettingsContext();\n\n  const [state, setState] = createStore({\n    likes: 0,\n    satszapped: 0,\n    liked: false,\n    zapped: false,\n    isZapping: false,\n    zapFailed: false,\n  });\n\n  const size = () => props.size || 'list';\n\n  createEffect(() => {\n    if (props.stats) {\n      setState(() => ({\n        likes: props.stats?.likes || 0,\n        satszapped: props.stats?.satszapped || 0,\n      }));\n    }\n    if (props.actions) {\n      setState(() => ({\n        liked: props.actions?.liked || false,\n        zapped: props.actions?.zapped || false,\n      }));\n    }\n  })\n\n  const likes = () => state.likes;\n  const satszapped = () => state.satszapped;\n\n  const isPaid = () => {\n    if (!props.dvm) return false;\n\n    const { amount, primalVerifiedRequired } = props.dvm;\n    const amountValue = parseInt(amount);\n    return (amount !== 'free' && !isNaN(amountValue) && amountValue > 0) || primalVerifiedRequired\n  }\n\n  const doLike = async (e: MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!account || !props.dvm) {\n      return;\n    }\n\n    if (!account.hasPublicKey()) {\n      account.actions.showGetStarted();\n      return;\n    }\n\n    if (!account.proxyThroughPrimal && account.relays.length === 0) {\n      toast?.sendWarning(\n        intl.formatMessage(t.noRelaysConnected),\n      );\n      return;\n    }\n\n    const success = await account.actions.addLike(props.dvm);\n\n    if (success) {\n      setState((state) => ({\n        likes: state.likes + 1,\n        liked: true,\n      }));\n    }\n  };\n\n\n  let quickZapDelay = 0;\n\n  const customZapInfo: () => CustomZapInfo = () => ({\n    dvm: props.dvm ? { ...props.dvm, user: props.author } : undefined,\n    onConfirm: onConfirmZap,\n    onSuccess: onSuccessZap,\n    onFail: onFailZap,\n    onCancel: onCancelZap,\n  });\n\n  const onConfirmZap = (zapOption: ZapOption) => {\n    app?.actions.closeCustomZapModal();\n    setState('satszapped', (sz) => sz + (zapOption.amount || 0));\n    setState('zapped', () => true);\n\n    // batch(() => {\n    //   updateReactionsState('zappedAmount', () => zapOption.amount || 0);\n    //   updateReactionsState('satsZapped', (z) => z + (zapOption.amount || 0));\n    //   updateReactionsState('zapped', () => true);\n    //   updateReactionsState('showZapAnim', () => true)\n    // });\n\n    // addTopZap(zapOption);\n    // addTopZapFeed(zapOption)\n  };\n\n  const onSuccessZap = (zapOption: ZapOption) => {\n    app?.actions.closeCustomZapModal();\n    app?.actions.resetCustomZap();\n\n    setState('zapped', () => true);\n\n    // const pubkey = account?.publicKey;\n\n    // if (!pubkey) return;\n\n    // batch(() => {\n    //   updateReactionsState('zapCount', (z) => z + 1);\n    //   updateReactionsState('isZapping', () => false);\n    //   updateReactionsState('showZapAnim', () => false);\n    //   updateReactionsState('hideZapIcon', () => false);\n    //   updateReactionsState('zapped', () => true);\n    // });\n  };\n\n  const onFailZap = (zapOption: ZapOption) => {\n    app?.actions.closeCustomZapModal();\n    app?.actions.resetCustomZap();\n\n    setState('satszapped', (sz) => sz - (zapOption.amount || 0));\n    setState('zapped', () => props.actions?.zapped || false);\n\n    // batch(() => {\n    //   updateReactionsState('zappedAmount', () => -(zapOption.amount || 0));\n    //   updateReactionsState('satsZapped', (z) => z - (zapOption.amount || 0));\n    //   updateReactionsState('isZapping', () => false);\n    //   updateReactionsState('showZapAnim', () => false);\n    //   updateReactionsState('hideZapIcon', () => false);\n    //   updateReactionsState('zapped', () => props.note.post.noteActions.zapped);\n    // });\n\n    // removeTopZap(zapOption);\n    // removeTopZapFeed(zapOption);\n  };\n\n  const onCancelZap = (zapOption: ZapOption) => {\n    app?.actions.closeCustomZapModal();\n    app?.actions.resetCustomZap();\n\n    setState('satszapped', (sz) => sz - (zapOption.amount || 0));\n    setState('zapped', () => props.actions?.zapped || false);\n\n    // batch(() => {\n    //   updateReactionsState('zappedAmount', () => -(zapOption.amount || 0));\n    //   updateReactionsState('satsZapped', (z) => z - (zapOption.amount || 0));\n    //   updateReactionsState('isZapping', () => false);\n    //   updateReactionsState('showZapAnim', () => false);\n    //   updateReactionsState('hideZapIcon', () => false);\n    //   updateReactionsState('zapped', () => props.note.post.noteActions.zapped);\n    // });\n\n    // removeTopZap(zapOption);\n    // removeTopZapFeed(zapOption);\n  };\n\n  const startZap = (e: MouseEvent | TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!account?.hasPublicKey()) {\n      account?.actions.showGetStarted();\n      setState('isZapping', () => false);\n      return;\n    }\n\n    if (!account.proxyThroughPrimal && account.relays.length === 0) {\n      toast?.sendWarning(\n        intl.formatMessage(t.noRelaysConnected),\n      );\n      return;\n    }\n\n    if (!canUserReceiveZaps(props.author)) {\n      toast?.sendWarning(\n        intl.formatMessage(t.zapDVMUnavailable),\n      );\n      setState('isZapping', () => false);\n      setState('zapFailed', () => true);\n      return;\n    }\n\n    quickZapDelay = setTimeout(() => {\n      app?.actions.openCustomZapModal(customZapInfo());\n      setState('isZapping', () => true);\n    }, 500);\n  };\n\n  const commitZap = (e: MouseEvent | TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    clearTimeout(quickZapDelay);\n\n    if (state.zapFailed) {\n      setState('zapFailed', () => false);\n      return;\n    }\n\n    if (!account?.hasPublicKey()) {\n      account?.actions.showGetStarted();\n      return;\n    }\n\n    if ((!account.proxyThroughPrimal && account.relays.length === 0)) {\n      return;\n    }\n\n    if (app?.customZap === undefined) {\n      doQuickZap();\n    }\n  };\n\n  const doQuickZap = async () => {\n    if (!account?.hasPublicKey()) {\n      account?.actions.showGetStarted();\n      return;\n    }\n\n    const amount = settings?.defaultZap.amount || 10;\n    const message = settings?.defaultZap.message || '';\n    const emoji = settings?.defaultZap.emoji;\n\n    setState('satszapped', (sz) => sz + (amount || 0));\n    setState('isZapping', () => true);\n\n    // batch(() => {\n    //   props.updateState && props.updateState('isZapping', () => true);\n    //   props.updateState && props.updateState('satsZapped', (z) => z + amount);\n    //   props.updateState && props.updateState('showZapAnim', () => true);\n    // });\n\n    // props.onZapAnim && props.onZapAnim({ amount, message, emoji })\n\n    setTimeout(async () => {\n      if (!props.dvm || !props.author) return;\n      const success = await zapDVM(props.dvm, props.author, account.publicKey, amount, message, account.activeRelays);\n\n      setState('isZapping', () => false);\n\n      if (success) {\n        customZapInfo().onSuccess({\n          emoji,\n          amount,\n          message,\n        });\n\n        return;\n      }\n\n      customZapInfo().onFail({\n        emoji,\n        amount,\n        message,\n      });\n    }, lottieDuration());\n\n  }\n\n  return (\n    <div\n      data-id={props.dvm?.id}\n      class={`${styles.feedMarketPlaceItem} ${size() === 'header' ? styles.header : ''}`}\n      onClick={() => props.onClick && props.onClick(props.dvm)}\n    >\n      <div class={styles.left}>\n        <div class={styles.avatar}>\n          <Avatar size=\"vs2\" src={props.dvm?.picture || props.dvm?.image || ''} />\n          {/* <Show when={props.metadata?.isPrimal && size() === 'list'}>\n            <div class={styles.smallPrimalLogo}></div>\n          </Show> */}\n        </div>\n        <div class={styles.paid}>\n          <Show\n            when={isPaid()}\n            fallback={<div class={styles.freeToken}>FREE</div>}\n          >\n            <div class={styles.paidToken}>PAID</div>\n          </Show>\n        </div>\n      </div>\n\n      <div class={styles.right}>\n        <div class={styles.info}>\n          <div class={styles.title}>{props.dvm?.name || ''}</div>\n          <div class={styles.about}>{props.dvm?.about || ''}</div>\n        </div>\n\n          <Show when={props.metadata?.isPrimal && size() === 'header'}>\n            <div class={styles.createdBy}>\n              <div class={styles.primalLogo}></div>\n              <span>Created by</span> <span class={styles.authorName}>Primal</span>\n            </div>\n          </Show>\n\n        <div class={styles.actions}>\n          <div class={styles.commonUsersList}>\n            <For each={props.commonUsers}>\n              {user => (\n                <A\n                  href={app?.actions.profileLink(user.npub) || ''}\n                  class={styles.avatar}\n                  onClick={(e: MouseEvent) => {e.stopPropagation(); return true;}}\n                >\n                  <Avatar size=\"micro\" user={user} />\n                </A>\n              )}\n            </For>\n          </div>\n\n          <div class={styles.stats}>\n            <DvmFooterActionButton\n              dvm={props.dvm}\n              onClick={doLike}\n              type=\"like\"\n              highlighted={state.liked || account?.likes.includes(props.dvm?.id || '')}\n              label={likes() === 0 ? '' : truncateNumber(likes(), 2)}\n              title={likes().toLocaleString()}\n            />\n            <DvmFooterActionButton\n              dvm={props.dvm}\n              onClick={(e: MouseEvent) => e.stopPropagation()}\n              onMouseDown={startZap}\n              onMouseUp={commitZap}\n              onTouchStart={startZap}\n              onTouchEnd={commitZap}\n              type=\"zap\"\n              highlighted={state.zapped || state.isZapping}\n              label={satszapped() === 0 ? '' : truncateNumber(satszapped(), 2)}\n              title={satszapped().toLocaleString()}\n            />\n          </div>\n        </div>\n      </div>\n\n    </div>\n  )\n}\n\nexport default FeedMarketItem;\n"],"names":["buttonTypeClasses","zap","styles","zapType","like","likeType","reply","replyType","repost","repostType","DvmFooterActionButton","props","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","nextSibling","_$addEventListener","onTouchEnd","onTouchStart","onMouseUp","onMouseDown","onClick","_$insert","label","_$effect","_p$","_v$","type","dvm","id","_v$2","stat","highlighted","_v$3","disabled","_v$4","large","_v$5","icon","_v$6","hidden","_v$7","statNumber","_$setAttribute","_$className","_$style","undefined","_$delegateEvents","FeedMarketItem","account","useAccountContext","toast","useToastContext","intl","useIntl","app","useAppContext","settings","useSettingsContext","state","setState","createStore","likes","satszapped","liked","zapped","isZapping","zapFailed","size","createEffect","stats","actions","isPaid","amount","primalVerifiedRequired","amountValue","parseInt","isNaN","doLike","__name","e","preventDefault","stopPropagation","hasPublicKey","showGetStarted","proxyThroughPrimal","relays","length","sendWarning","formatMessage","t","noRelaysConnected","addLike","quickZapDelay","customZapInfo","user","author","onConfirm","onConfirmZap","onSuccess","onSuccessZap","onFail","onFailZap","onCancel","onCancelZap","zapOption","closeCustomZapModal","sz","resetCustomZap","startZap","canUserReceiveZaps","zapDVMUnavailable","setTimeout","openCustomZapModal","commitZap","clearTimeout","customZap","doQuickZap","defaultZap","message","emoji","success","zapDVM","publicKey","activeRelays","lottieDuration","_tmpl$3","_el$6","_el$7","_el$8","_el$9","_el$15","_el$16","_el$17","$$click","_$createComponent","Avatar","src","picture","image","Show","when","fallback","_el$18","_tmpl$4","freeToken","children","_el$5","paidToken","name","about","_$memo","metadata","isPrimal","_el$10","_tmpl$2","_el$11","_el$12","_el$13","_el$14","createdBy","primalLogo","authorName","For","each","commonUsers","A","href","profileLink","npub","avatar","includes","truncateNumber","title","toLocaleString","feedMarketPlaceItem","header","left","_v$8","paid","_v$9","right","_v$10","info","_v$11","_v$12","_v$13","_v$14","commonUsersList","_v$15"],"mappings":"irDAKMA,GAA4C,CAChDC,IAAKC,EAAOC,QACZC,KAAMF,EAAOG,SACbC,MAAOJ,EAAOK,UACdC,OAAQN,EAAOO,UACjB,EAEMC,GAcAC,EAAAA,IAEJ,IAAA,CAAA,MAAAC,EAAAC,GAAA,EAAAC,EAAAF,EAAAG,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAE,YAAAC,OAAAA,EAAAP,EAAA,WAQgBD,EAAMS,aAAe,IAAM,CAAE,GAAC,EAAA,EAAAD,EAAAP,EAAA,aAD5BD,EAAMU,eAAiB,IAAM,CAAE,GAAC,EAAA,EAAAF,EAAAP,EAAA,UADnCD,EAAMW,YAAc,IAAM,CAAE,GAAC,EAAA,EAAAH,EAAAP,EAAA,YAD3BD,EAAMY,cAAgB,IAAM,CAAE,GAAC,EAAA,EAAAJ,EAAAP,EAAA,QADnCD,EAAMa,UAAY,IAAM,CAAE,GAAC,EAAA,EAAAC,EAAAR,EAAA,IAYFN,EAAMe,OAAS,EAAE,EAAAC,EAAAC,GAAA,CAAA,MAAAC,EAd9C,OAAMlB,EAAMmB,IAAK,IAAGnB,EAAMoB,KAAKC,EAAG,GAACC,EAChC,GAAE/B,EAAOgC,IAAK,IAAGvB,EAAMwB,YAAcjC,EAAOiC,YAAc,EAAG,GAACC,EAM5DzB,EAAM0B,SAAQC,EAEX,GAAEtC,GAAkBW,EAAMmB,IAAI,CAAE,IAAGnB,EAAM4B,MAAQrC,EAAOqC,MAAQ,EAAG,GAACC,EAErE,GAAEtC,EAAOuC,IAAK,IAAG9B,EAAM4B,MAAQrC,EAAOqC,MAAQ,EAAG,GAACG,EACnD/B,EAAMgC,OAAS,qBAAsB,sBAAqBC,EAEvD1C,EAAO2C,WAAUhB,OAAAA,IAAAD,EAAAC,KAAAiB,GAAAlC,EAAAgB,KAAAA,EAAAC,IAAAA,CAAA,EAAAI,IAAAL,EAAAK,MAAAc,EAAAnC,EAAAgB,EAAAK,KAAAA,CAAA,EAAAG,IAAAR,EAAAQ,OAAAxB,EAAAyB,SAAAT,EAAAQ,KAAAA,GAAAE,IAAAV,EAAAU,MAAAS,EAAAjC,EAAAc,EAAAU,KAAAA,CAAA,EAAAE,IAAAZ,EAAAY,MAAAO,EAAA/B,EAAAY,EAAAY,KAAAA,CAAA,EAAAZ,EAAAc,KAAAM,GAAAhC,EAAA0B,EAAAd,EAAAc,IAAA,EAAAE,IAAAhB,EAAAgB,MAAAG,EAAA9B,EAAAW,EAAAgB,KAAAA,CAAA,EAAAhB,CAAA,EAAA,CAAAC,IAAAoB,OAAAhB,KAAAgB,OAAAb,KAAAa,OAAAX,KAAAW,OAAAT,KAAAS,OAAAP,KAAAO,OAAAL,KAAAK,MAAA,CAAA,EAAArC,CAAA,KAlB/BD,yBAwB+BuC,GAAA,CAAA,QAAA,YAAA,UAAA,aAAA,UAAA,CAAA,mNC/B/BC,GASAxC,EAAAA,GAAU,CACd,MAAMyC,EAAUC,KACVC,EAAQC,KACRC,EAAOC,KACPC,EAAMC,KACNC,EAAWC,KAEX,CAACC,EAAOC,CAAQ,EAAIC,GAAY,CACpCC,MAAO,EACPC,WAAY,EACZC,MAAO,GACPC,OAAQ,GACRC,UAAW,GACXC,UAAW,EACb,CAAC,EAEKC,EAAOA,EAAAA,IAAM5D,EAAM4D,MAAQ,OAApBA,QAEbC,GAAa,IAAM,CACb7D,EAAM8D,OACRV,EAAS,KAAO,CACdE,MAAOtD,EAAM8D,OAAOR,OAAS,EAC7BC,WAAYvD,EAAM8D,OAAOP,YAAc,CACxC,EAAC,EAEAvD,EAAM+D,SACRX,EAAS,KAAO,CACdI,MAAOxD,EAAM+D,SAASP,OAAS,GAC/BC,OAAQzD,EAAM+D,SAASN,QAAU,EAClC,EAAC,CAEN,CAAC,EAED,MAAMH,EAAQA,EAAAA,IAAMH,EAAMG,MAAZA,SACRC,EAAaA,EAAAA,IAAMJ,EAAMI,WAAZA,cAEbS,EAASA,EAAAA,IAAM,CACnB,GAAI,CAAChE,EAAMoB,IAAK,MAAO,GAEvB,KAAM,CAAE6C,OAAAA,EAAQC,uBAAAA,GAA2BlE,EAAMoB,IAC3C+C,EAAcC,SAASH,CAAM,EACnC,OAAQA,IAAW,QAAU,CAACI,MAAMF,CAAW,GAAKA,EAAc,GAAMD,GAL3DF,UAQTM,EAASC,EAAA,MAAOC,GAAkB,CAItC,GAHAA,EAAEC,eAAc,EAChBD,EAAEE,gBAAe,EAEb,CAACjC,GAAW,CAACzC,EAAMoB,IACrB,OAGF,GAAI,CAACqB,EAAQkC,eAAgB,CAC3BlC,EAAQsB,QAAQa,iBAChB,MACF,CAEA,GAAI,CAACnC,EAAQoC,oBAAsBpC,EAAQqC,OAAOC,SAAW,EAAG,CAC9DpC,GAAOqC,YACLnC,EAAKoC,cAAcC,EAAEC,iBAAiB,CACxC,EACA,MACF,CAEgB,MAAM1C,EAAQsB,QAAQqB,QAAQpF,EAAMoB,GAAG,GAGrDgC,EAAUD,IAAW,CACnBG,MAAOH,EAAMG,MAAQ,EACrBE,MAAO,EACR,EAAC,GA1BS,UA+Bf,IAAI6B,EAAgB,EAEpB,MAAMC,EAAqCA,EAAAA,KAAO,CAChDlE,IAAKpB,EAAMoB,IAAM,CAAE,GAAGpB,EAAMoB,IAAKmE,KAAMvF,EAAMwF,MAAO,EAAIlD,OACxDmD,UAAWC,GACXC,UAAWC,GACXC,OAAQC,GACRC,SAAUC,EACZ,GAN2CV,iBAQrCI,GAAgBO,EAAAA,GAAyB,CAC7ClD,GAAKgB,QAAQmC,sBACb9C,EAAS,aAAe+C,GAAOA,GAAMF,EAAUhC,QAAU,EAAE,EAC3Db,EAAS,SAAU,IAAM,EAAI,GAHT6C,gBAgBhBL,GAAgBK,EAAAA,GAAyB,CAC7ClD,GAAKgB,QAAQmC,sBACbnD,GAAKgB,QAAQqC,iBAEbhD,EAAS,SAAU,IAAM,EAAI,GAJT6C,gBAmBhBH,GAAaG,EAAAA,GAAyB,CAC1ClD,GAAKgB,QAAQmC,sBACbnD,GAAKgB,QAAQqC,iBAEbhD,EAAS,aAAe+C,GAAOA,GAAMF,EAAUhC,QAAU,EAAE,EAC3Db,EAAS,SAAU,IAAMpD,EAAM+D,SAASN,QAAU,EAAK,GALtCwC,aAoBbD,GAAeC,EAAAA,GAAyB,CAC5ClD,GAAKgB,QAAQmC,sBACbnD,GAAKgB,QAAQqC,iBAEbhD,EAAS,aAAe+C,GAAOA,GAAMF,EAAUhC,QAAU,EAAE,EAC3Db,EAAS,SAAU,IAAMpD,EAAM+D,SAASN,QAAU,EAAK,GALpCwC,eAoBfI,EAAY7B,EAAAA,GAA+B,CAI/C,GAHAA,EAAEC,eAAc,EAChBD,EAAEE,gBAAe,EAEb,CAACjC,GAASkC,eAAgB,CAC5BlC,GAASsB,QAAQa,iBACjBxB,EAAS,YAAa,IAAM,EAAK,EACjC,MACF,CAEA,GAAI,CAACX,EAAQoC,oBAAsBpC,EAAQqC,OAAOC,SAAW,EAAG,CAC9DpC,GAAOqC,YACLnC,EAAKoC,cAAcC,EAAEC,iBAAiB,CACxC,EACA,MACF,CAEA,GAAI,CAACmB,GAAmBtG,EAAMwF,MAAM,EAAG,CACrC7C,GAAOqC,YACLnC,EAAKoC,cAAcC,EAAEqB,iBAAiB,CACxC,EACAnD,EAAS,YAAa,IAAM,EAAK,EACjCA,EAAS,YAAa,IAAM,EAAI,EAChC,MACF,CAEAiC,EAAgBmB,WAAW,IAAM,CAC/BzD,GAAKgB,QAAQ0C,mBAAmBnB,EAAe,CAAA,EAC/ClC,EAAS,YAAa,IAAM,EAAI,CACjC,EAAE,GAAG,GA7BUoB,YAgCZkC,EAAalC,EAAAA,GAA+B,CAMhD,GALAA,EAAEC,eAAc,EAChBD,EAAEE,gBAAe,EAEjBiC,aAAatB,CAAa,EAEtBlC,EAAMQ,UAAW,CACnBP,EAAS,YAAa,IAAM,EAAK,EACjC,MACF,CAEA,GAAI,CAACX,GAASkC,eAAgB,CAC5BlC,GAASsB,QAAQa,iBACjB,MACF,CAEK,CAACnC,EAAQoC,oBAAsBpC,EAAQqC,OAAOC,SAAW,GAI1DhC,GAAK6D,YAActE,QACrBuE,MArBerC,aAyBbqC,GAAatC,EAAA,SAAY,CAC7B,GAAI,CAAC9B,GAASkC,eAAgB,CAC5BlC,GAASsB,QAAQa,iBACjB,MACF,CAEA,MAAMX,EAAShB,GAAU6D,WAAW7C,QAAU,GACxC8C,EAAU9D,GAAU6D,WAAWC,SAAW,GAC1CC,EAAQ/D,GAAU6D,WAAWE,MAEnC5D,EAAS,aAAe+C,GAAOA,GAAMlC,GAAU,EAAE,EACjDb,EAAS,YAAa,IAAM,EAAI,EAUhCoD,WAAW,SAAY,CACrB,GAAI,CAACxG,EAAMoB,KAAO,CAACpB,EAAMwF,OAAQ,OACjC,MAAMyB,EAAU,MAAMC,GAAOlH,EAAMoB,IAAKpB,EAAMwF,OAAQ/C,EAAQ0E,UAAWlD,EAAQ8C,EAAStE,EAAQ2E,YAAY,EAI9G,GAFAhE,EAAS,YAAa,IAAM,EAAK,EAE7B6D,EAAS,CACX3B,EAAa,EAAGK,UAAU,CACxBqB,MAAAA,EACA/C,OAAAA,EACA8C,QAAAA,CACF,CAAC,EAED,MACF,CAEAzB,EAAa,EAAGO,OAAO,CACrBmB,MAAAA,EACA/C,OAAAA,EACA8C,QAAAA,CACF,CAAC,CACH,EAAGM,GAAgB,CAAA,GA1CF,cA8CnB,OAAA,IAAA,CAAA,MAAApH,EAAAqH,GAAA,EAAAnH,EAAAF,EAAAG,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAE,YAAAgH,EAAApH,EAAAI,YAAAiH,EAAAD,EAAAnH,WAAAqH,EAAAD,EAAApH,WAAAsH,EAAAD,EAAAlH,YAAAoH,EAAAH,EAAAjH,YAAAqH,EAAAD,EAAAvH,WAAAyH,EAAAD,EAAArH,YAAAN,OAAAA,EAAA6H,QAIa,IAAM9H,EAAMa,SAAWb,EAAMa,QAAQb,EAAMoB,GAAG,EAACN,EAAAT,EAAA0H,EAInDC,EAAM,CAACpE,KAAI,MAAA,IAAOqE,KAAG,CAAA,OAAEjI,EAAMoB,KAAK8G,SAAWlI,EAAMoB,KAAK+G,OAAS,EAAE,CAAA,CAAA,CAAA,EAAArH,EAAAR,EAAAyH,EAMnEK,EAAI,CAAA,IACHC,MAAI,CAAA,OAAErE,EAAM,CAAE,EAAA,IACdsE,UAAQ,CAAA,OAAA,IAAA,CAAA,MAAAC,EAAAC,KAAAxH,OAAAA,MAAAoB,EAAAmG,EAAchJ,EAAOkJ,SAAS,CAAA,EAAAF,CAAA,IAAA,EAAA,IAAAG,UAAA,CAAA,MAAAC,EAAAzI,KAAAc,OAAAA,MAAAoB,EAAAuG,EAE1BpJ,EAAOqJ,SAAS,CAAA,EAAAD,CAAA,CAAA,CAAA,CAAA,EAAA7H,EAAA2G,EAOHzH,IAAAA,EAAMoB,KAAKyH,MAAQ,EAAE,EAAA/H,EAAA4G,EACrB1H,IAAAA,EAAMoB,KAAK0H,OAAS,EAAE,EAAAhI,EAAAyG,EAAAQ,EAGhDK,EAAI,CAAA,IAACC,MAAI,CAAA,OAAEU,EAAA,IAAA,CAAA,CAAA/I,EAAMgJ,UAAUC,QAAQ,EAAA,GAAIrF,EAAM,IAAK,QAAQ,EAAA,IAAA8E,UAAA,CAAA,MAAAQ,EAAAC,GAAA,EAAAC,EAAAF,EAAA9I,WAAAiJ,EAAAD,EAAA7I,YAAA+I,EAAAD,EAAA9I,YAAAgJ,EAAAD,EAAA/I,YAAAS,OAAAA,EAAAC,GAAA,CAAA,MAAAC,EAC7C3B,EAAOiK,UAASlI,EACd/B,EAAOkK,WAAUhI,EACQlC,EAAOmK,WAAUxI,OAAAA,IAAAD,EAAAC,KAAAkB,EAAA8G,EAAAjI,EAAAC,IAAAA,CAAA,EAAAI,IAAAL,EAAAK,MAAAc,EAAAgH,EAAAnI,EAAAK,KAAAA,CAAA,EAAAG,IAAAR,EAAAQ,MAAAW,EAAAmH,EAAAtI,EAAAQ,KAAAA,CAAA,EAAAR,CAAA,EAAA,CAAAC,IAAAoB,OAAAhB,KAAAgB,OAAAb,KAAAa,MAAA,CAAA,EAAA4G,CAAA,CAAA,CAAA,EAAAvB,CAAA,EAAA7G,EAAA8G,EAAAG,EAMvD4B,GAAG,CAAA,IAACC,MAAI,CAAA,OAAE5J,EAAM6J,WAAW,EAAAnB,SACzBnD,GAAIwC,EACF+B,GAAC,CAAA,IACAC,MAAI,CAAA,OAAEhH,GAAKgB,QAAQiG,YAAYzE,EAAK0E,IAAI,GAAK,EAAE,EAAA,IAAA,OAAA,CAAA,OACxC1K,EAAO2K,MAAM,EACpBrJ,QAAU2D,IAAmBA,EAAEE,gBAAe,EAAW,IAAM,IAAAgE,UAAA,CAAA,OAAAX,EAE9DC,EAAM,CAACpE,KAAI,QAAS2B,KAAMA,CAAI,CAAA,CAAA,CAAA,CAAA,CAElC,CAAA,CAAA,EAAAzE,EAAA+G,EAAAE,EAKFhI,GAAqB,CAAA,IACpBqB,KAAG,CAAA,OAAEpB,EAAMoB,GAAG,EACdP,QAASyD,EACTnD,KAAI,OAAA,IACJK,aAAW,CAAA,OAAE2B,EAAMK,OAASf,GAASa,MAAM6G,SAASnK,EAAMoB,KAAKC,IAAM,EAAE,CAAC,EAAA,IACxEN,OAAK,CAAA,OAAEgI,EAAAzF,IAAAA,EAAO,IAAK,CAAC,EAAA,EAAG,GAAK8G,GAAe9G,IAAS,CAAC,CAAC,EAAA,IACtD+G,OAAK,CAAA,OAAE/G,EAAK,EAAGgH,gBAAgB,CAAA,CAAA,EAAA,IAAA,EAAAxJ,EAAA+G,EAAAE,EAEhChI,GAAqB,CAAA,IACpBqB,KAAG,CAAA,OAAEpB,EAAMoB,GAAG,EACdP,QAAU2D,GAAkBA,EAAEE,gBAAiB,EAC/C9D,YAAayF,EACb1F,UAAW+F,EACXhG,aAAc2F,EACd5F,WAAYiG,EACZvF,KAAI,MAAA,IACJK,aAAW,CAAA,OAAE2B,EAAMM,QAAUN,EAAMO,SAAS,EAAA,IAC5C3C,OAAK,CAAA,OAAEgI,EAAAxF,IAAAA,EAAY,IAAK,CAAC,EAAA,EAAG,GAAK6G,GAAe7G,IAAc,CAAC,CAAC,EAAA,IAChE8G,OAAK,CAAA,OAAE9G,EAAU,EAAG+G,gBAAgB,CAAA,CAAA,EAAA,IAAA,EAAAtJ,EAAAC,GAAA,CAAA,MAAAU,EApEnC3B,EAAMoB,KAAKC,GAAEQ,EACd,GAAEtC,EAAOgL,mBAAoB,IAAG3G,EAAM,IAAK,SAAWrE,EAAOiL,OAAS,EAAG,GAACzI,EAGtExC,EAAOkL,KAAIxI,EACT1C,EAAO2K,OAAMQ,EAMbnL,EAAOoL,KAAIC,EAUbrL,EAAOsL,MAAKC,EACVvL,EAAOwL,KAAIC,EACTzL,EAAO8K,MAAKY,EACZ1L,EAAOuJ,MAAKoC,EAUd3L,EAAOwE,QAAOoH,EACZ5L,EAAO6L,gBAAeC,EActB9L,EAAOuE,MAAKnC,OAAAA,IAAAV,EAAAU,MAAAQ,GAAAlC,EAAAgB,UAAAA,EAAAU,KAAAA,CAAA,EAAAE,IAAAZ,EAAAY,MAAAO,EAAAnC,EAAAgB,EAAAY,KAAAA,CAAA,EAAAE,IAAAd,EAAAc,MAAAK,EAAAjC,EAAAc,EAAAc,KAAAA,CAAA,EAAAE,IAAAhB,EAAAgB,MAAAG,EAAA/B,EAAAY,EAAAgB,KAAAA,CAAA,EAAAyI,IAAAzJ,EAAAyJ,MAAAtI,EAAA9B,EAAAW,EAAAyJ,KAAAA,CAAA,EAAAE,IAAA3J,EAAA2J,MAAAxI,EAAAmF,EAAAtG,EAAA2J,KAAAA,CAAA,EAAAE,IAAA7J,EAAA6J,OAAA1I,EAAAoF,EAAAvG,EAAA6J,MAAAA,CAAA,EAAAE,IAAA/J,EAAA+J,OAAA5I,EAAAqF,EAAAxG,EAAA+J,MAAAA,CAAA,EAAAC,IAAAhK,EAAAgK,OAAA7I,EAAAsF,EAAAzG,EAAAgK,MAAAA,CAAA,EAAAC,IAAAjK,EAAAiK,OAAA9I,EAAAuF,EAAA1G,EAAAiK,MAAAA,CAAA,EAAAC,IAAAlK,EAAAkK,OAAA/I,EAAAwF,EAAA3G,EAAAkK,MAAAA,CAAA,EAAAE,IAAApK,EAAAoK,OAAAjJ,EAAAyF,EAAA5G,EAAAoK,MAAAA,CAAA,EAAApK,CAAA,EAAA,CAAAU,KAAAW,OAAAT,KAAAS,OAAAP,KAAAO,OAAAL,KAAAK,OAAAoI,KAAApI,OAAAsI,KAAAtI,OAAAwI,MAAAxI,OAAA0I,MAAA1I,OAAA2I,MAAA3I,OAAA4I,MAAA5I,OAAA6I,MAAA7I,OAAA+I,MAAA/I,MAAA,CAAA,EAAArC,CAAA,IA2BlC,EArVMD,kBAuVwBuC,GAAA,CAAA,OAAA,CAAA"}