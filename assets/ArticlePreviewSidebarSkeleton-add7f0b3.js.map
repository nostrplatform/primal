{"version":3,"file":"ArticlePreviewSidebarSkeleton-add7f0b3.js","sources":["../../src/components/ArticlePreview/ArticleShort.tsx","../../src/components/Skeleton/ArticlePreviewSidebarSkeleton.tsx"],"sourcesContent":["import { A } from '@solidjs/router';\nimport { batch, Component, createEffect, createSignal, For, JSXElement, Show } from 'solid-js';\nimport { createStore } from 'solid-js/store';\nimport { Portal } from 'solid-js/web';\nimport { wordsPerMinute } from '../../constants';\nimport { useAccountContext } from '../../contexts/AccountContext';\nimport { CustomZapInfo, useAppContext } from '../../contexts/AppContext';\nimport { useMediaContext } from '../../contexts/MediaContext';\nimport { useThreadContext } from '../../contexts/ThreadContext';\nimport { date, shortDate } from '../../lib/dates';\nimport { hookForDev } from '../../lib/devTools';\nimport { userName } from '../../stores/profile';\nimport { PrimalArticle, ZapOption } from '../../types/primal';\nimport { uuidv4 } from '../../utils';\nimport Avatar from '../Avatar/Avatar';\nimport { NoteReactionsState } from '../Note/Note';\nimport NoteContextTrigger from '../Note/NoteContextTrigger';\nimport ArticleFooter from '../Note/NoteFooter/ArticleFooter';\nimport NoteFooter from '../Note/NoteFooter/NoteFooter';\nimport NoteTopZaps from '../Note/NoteTopZaps';\nimport NoteTopZapsCompact from '../Note/NoteTopZapsCompact';\nimport VerificationCheck from '../VerificationCheck/VerificationCheck';\n\nimport styles from './ArticlePreview.module.scss';\nimport { nip19 } from 'nostr-tools';\n\nconst isDev = localStorage.getItem('devMode') === 'true';\n\nconst ArticleShort: Component<{\n  id?: string,\n  article: PrimalArticle,\n  short?: boolean,\n  shorter?: boolean,\n}> = (props) => {\n  const media = useMediaContext();\n  const app = useAppContext();\n\n  const [missingCacheImage, setMissingChacheImage] = createSignal(false);\n\n  const articleImage = () => {\n    const url = props.article.image;\n    setMissingChacheImage(() => false);\n\n    let m = media?.actions.getMediaUrl(url, 's');\n\n    if (!m) {\n      m = media?.actions.getMediaUrl(url, 'm');\n    }\n\n    if (!m) {\n      m = media?.actions.getMediaUrl(url, 'o');\n    }\n\n    if (!m) {\n      m = url;\n      setMissingChacheImage(() => true);\n    }\n\n    return m;\n  }\n  const authorAvatar = () => {\n    const url = props.article.user.picture;\n    setMissingChacheImage(() => false);\n\n    let m = media?.actions.getMediaUrl(url, 's');\n\n    if (!m) {\n      m = media?.actions.getMediaUrl(url, 'm');\n    }\n\n    if (!m) {\n      m = media?.actions.getMediaUrl(url, 'o');\n    }\n\n    if (!m) {\n      m = url;\n      setMissingChacheImage(() => true);\n    }\n\n    return m;\n  }\n\n  const articleUrl = () => {\n    const vanityName = app?.verifiedUsers[props.article.pubkey];\n\n    if (!vanityName) return `/e/${props.article.naddr}`;\n\n    const decoded = nip19.decode(props.article.naddr);\n\n    const data = decoded.data as nip19.AddressPointer;\n\n    return `/${vanityName}/${data.identifier}`;\n  }\n\n  return (\n    <A\n      class={styles.articleShort}\n      href={articleUrl()}\n      data-event={props.article.id}\n    >\n      <div class={styles.header}>\n        <Avatar user={props.article.user} size=\"micro\"/>\n        <div class={styles.userName}>{userName(props.article.user)}</div>\n        <div class={styles.time}>\n          &bull;&nbsp;\n          {date(props.article.published).label}\n        </div>\n      </div>\n\n      <div class={styles.body}>\n        <div class={`${styles.text} ${props.short ? styles.short : ''} ${props.shorter ? styles.shorter : ''}`}>\n          <div class={styles.title}>\n            {props.article.title}\n          </div>\n          <div class={styles.estimate}>\n            {Math.ceil(props.article.wordCount / wordsPerMinute)} minutes\n          </div>\n        </div>\n        <div class={styles.image}>\n          <Show\n            when={props.article.image}\n            fallback={\n              <img\n                src={authorAvatar()}\n                class={isDev && missingCacheImage() ? 'redBorder' : ''}\n              />\n            }\n          >\n            <img\n              src={articleImage()}\n              class={isDev && missingCacheImage() ? 'redBorder' : ''}\n            />\n          </Show>\n        </div>\n      </div>\n    </A>\n  );\n}\n\nexport default hookForDev(ArticleShort);\n","import { Component } from 'solid-js';\n\nimport styles from './Skeleton.module.scss';\n\nconst ArticlePreviewSidebarSkeleton: Component<{\n  id?: string,\n}> = (props) => {\n  return (\n    <div class={styles.articlePreviewSidebarSkeleton}>\n      <div class={styles.header}>\n        <div class={styles.avatar}></div>\n        <div class={styles.userInfo}></div>\n      </div>\n      <div class={styles.body}>\n        <div class={styles.text}></div>\n        <div class={styles.image}></div>\n      </div>\n    </div>\n  );\n}\n\nexport default ArticlePreviewSidebarSkeleton;\n"],"names":["isDev","localStorage","getItem","ArticleShort","props","media","useMediaContext","app","useAppContext","missingCacheImage","setMissingChacheImage","createSignal","articleImage","url","article","image","m","actions","getMediaUrl","authorAvatar","user","picture","articleUrl","vanityName","verifiedUsers","pubkey","naddr","data","nip19","decode","identifier","_$createComponent","A","styles","articleShort","href","id","children","_el$","_tmpl$","_el$2","firstChild","_el$3","nextSibling","_$insert","Avatar","size","userName","date","published","label","_$effect","_p$","_v$","header","_v$2","_v$3","time","_$className","undefined","_el$5","_tmpl$3","_el$6","_el$7","_el$8","_el$9","_el$10","title","Math","ceil","wordCount","wordsPerMinute","Show","when","fallback","_el$12","_tmpl$2","_v$11","_v$12","_$setAttribute","_el$11","_v$4","_v$5","_v$6","body","_v$7","text","short","shorter","_v$8","_v$9","estimate","_v$10","hookForDev","ArticlePreviewSidebarSkeleton","_el$4","articlePreviewSidebarSkeleton","avatar","userInfo"],"mappings":"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"}