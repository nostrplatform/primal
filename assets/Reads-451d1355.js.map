{"version":3,"file":"Reads-451d1355.js","sources":["../../src/components/Skeleton/AuthorSubscribeSkeleton.tsx","../../src/components/AuthorSubscribe/AuthorSubscribe.tsx","../../src/components/Skeleton/ReadsFeaturedTopicsSkeleton.tsx","../../src/components/HomeSidebar/ReadsSidebar.tsx","../../src/components/FeedSelect/ReedSelect.tsx","../../src/components/HomeHeader/ReadsHeader.tsx","../../src/pages/Reads.tsx"],"sourcesContent":["import { Component } from 'solid-js';\n\nimport styles from './Skeleton.module.scss';\n\nconst AuthorSubscribeSkeleton: Component<{\n  id?: string,\n}> = (props) => {\n\n\n  return (\n    <div class={styles.authorSubscribeSkeleton}>\n    </div>\n  );\n}\n\nexport default AuthorSubscribeSkeleton;\n","import { A, useNavigate } from '@solidjs/router';\nimport { batch, Component, createEffect, createSignal, For, JSXElement, onMount, Show } from 'solid-js';\nimport { createStore } from 'solid-js/store';\nimport { Transition } from 'solid-transition-group';\nimport { APP_ID } from '../../App';\nimport { Kind } from '../../constants';\nimport { useAccountContext } from '../../contexts/AccountContext';\nimport { CustomZapInfo, useAppContext } from '../../contexts/AppContext';\nimport { useSettingsContext } from '../../contexts/SettingsContext';\nimport { useThreadContext } from '../../contexts/ThreadContext';\nimport { fetchUserProfile } from '../../handleNotes';\nimport { date, shortDate } from '../../lib/dates';\nimport { hookForDev } from '../../lib/devTools';\nimport { sendEvent } from '../../lib/notes';\nimport { humanizeNumber } from '../../lib/stats';\nimport { zapSubscription } from '../../lib/zap';\nimport { nip05Verification, userName } from '../../stores/profile';\nimport { PrimalArticle, PrimalUser, ZapOption } from '../../types/primal';\nimport { isDev, uuidv4 } from '../../utils';\nimport Avatar from '../Avatar/Avatar';\nimport ButtonPrimary from '../Buttons/ButtonPrimary';\nimport ButtonSecondary from '../Buttons/ButtonSecondary';\nimport Loader from '../Loader/Loader';\nimport AuthorSubscribeSkeleton from '../Skeleton/AuthorSubscribeSkeleton';\nimport { Tier, TierCost } from '../SubscribeToAuthorModal/SubscribeToAuthorModal';\nimport VerificationCheck from '../VerificationCheck/VerificationCheck';\n\nimport styles from './AuthorSubscribe.module.scss';\n\nconst AuthorSubscribe: Component<{\n  id?: string,\n  author: PrimalUser | undefined,\n}> = (props) => {\n  const account = useAccountContext();\n  const app = useAppContext();\n  const navigate = useNavigate();\n  const settings = useSettingsContext();\n\n  // const [isFetching, setIsFetching] = createSignal(false);\n  // const [author, setAuthor] = createSignal<PrimalUser>();\n\n  // const getAuthorData = async (pubkey: string) => {\n  //   if (!account?.publicKey || !pubkey) return;\n\n  //   const subId = `reads_fpi_${APP_ID}`;\n\n  //   setIsFetching(() => true);\n\n  //   const profile = await fetchUserProfile(account.publicKey, pubkey, subId);\n\n  //   setIsFetching(() => false);\n\n  //   setAuthor(() => ({ ...profile }));\n  // };\n\n  // createEffect(() => {\n  //   getAuthorData(props.pubkey);\n  // });\n\n  const doSubscription = async (tier: Tier, cost: TierCost, exchangeRate?: Record<string, Record<string, number>>) => {\n    const a = props.author;\n\n    if (!a || !account || !cost) return;\n\n    if (cost.unit === 'USD' && (!exchangeRate || !exchangeRate['USD'])) return;\n\n    const subEvent = {\n      kind: Kind.Subscribe,\n      content: '',\n      created_at: Math.floor((new Date()).getTime() / 1_000),\n      tags: [\n        ['p', a.pubkey],\n        ['e', tier.id],\n        ['amount', cost.amount, cost.unit, cost.cadence],\n        ['event', JSON.stringify(tier.event)],\n        // Copy any zap splits\n        ...(tier.event.tags?.filter(t => t[0] === 'zap') || []),\n      ],\n    }\n\n\n    const { success, note } = await sendEvent(subEvent, account.activeRelays, account.relaySettings, account?.proxyThroughPrimal || false);\n\n    if (success && note) {\n      const isZapped = await zapSubscription(note, a, account.publicKey, account.activeRelays, exchangeRate);\n\n      if (!isZapped) {\n        unsubscribe(note.id);\n      }\n    }\n  }\n\n  const unsubscribe = async (eventId: string) => {\n    const a = props.author;\n\n    if (!a || !account) return;\n\n    const unsubEvent = {\n      kind: Kind.Unsubscribe,\n      content: '',\n      created_at: Math.floor((new Date()).getTime() / 1_000),\n\n      tags: [\n        ['p', a.pubkey],\n        ['e', eventId],\n      ],\n    };\n\n    await sendEvent(unsubEvent, account.activeRelays, account.relaySettings, account?.proxyThroughPrimal || false);\n\n  }\n\n  const openSubscribe = () => {\n    app?.actions.openAuthorSubscribeModal(props.author, doSubscription);\n  };\n\n  const shouldAnimate = () => isDev() && localStorage.getItem('animate') === 'true'\n\n  return (\n    <Transition name={shouldAnimate() ? 'slide-fade' : 'none'}>\n      <Show\n        when={props.author}\n        fallback={<div><AuthorSubscribeSkeleton /></div>}\n      >\n        <A href={app?.actions.profileLink(props.author?.npub) || ''} class={styles.authorFeaturCard}>\n          <Show when={props.author?.picture}>\n            <div class={styles.imageHolder}>\n              <img class={styles.image} src={props.author?.picture} />\n            </div>\n          </Show>\n          <div class={styles.userInfo}>\n            <div class={styles.userBasicData}>\n              <div class={styles.userName}>\n                {userName(props.author)}\n                <VerificationCheck user={props.author} />\n              </div>\n              <Show when={props.author?.nip05}>\n                <div class={styles.nip05}>\n                  {nip05Verification(props.author)}\n                </div>\n              </Show>\n            </div>\n            <div class={styles.userAdditionalData}>\n              <div class={`${styles.userAbout} ${!props.author?.nip05 ? styles.extended : ''}`}>\n                {props.author?.about}\n              </div>\n              <Show when={props.author?.userStats?.followers_count}>\n                <div class={styles.userStats}>\n                  <div class={styles.number}>\n                    {humanizeNumber(props.author?.userStats?.followers_count || 0)}\n                  </div>\n                  <div class={styles.unit}>\n                    followers\n                  </div>\n                </div>\n              </Show>\n            </div>\n          </div>\n        </A>\n      </Show>\n    </Transition>\n  );\n}\n\nexport default hookForDev(AuthorSubscribe);\n","import { Component } from 'solid-js';\n\nimport styles from './Skeleton.module.scss';\n\nconst ReadsFeaturedTopicsSkeleton: Component<{\n  id?: string,\n}> = (props) => {\n  return (\n    <div class={styles.readsFeaturedTopicsSkeleton}>\n      <div class={styles.topic}>\n      </div>\n      <div class={styles.topic}>\n      </div>\n      <div class={styles.topic}>\n      </div>\n      <div class={styles.topic}>\n      </div>\n      <div class={styles.topic}>\n      </div>\n      <div class={styles.topic}>\n      </div>\n      <div class={styles.topic}>\n      </div>\n      <div class={styles.topic}>\n      </div>\n      <div class={styles.topic}>\n      </div>\n      <div class={styles.topic}>\n      </div>\n    </div>\n  );\n}\n\nexport default ReadsFeaturedTopicsSkeleton;\n","import { Component, createEffect, createSignal, For, onMount, Show } from 'solid-js';\n\nimport {\n  EventCoordinate,\n  PrimalArticle,\n  SelectionOption\n} from '../../types/primal';\n\nimport styles from './HomeSidebar.module.scss';\nimport SmallNote from '../SmallNote/SmallNote';\nimport { useAccountContext } from '../../contexts/AccountContext';\nimport { hookForDev } from '../../lib/devTools';\nimport SelectionBox from '../SelectionBox/SelectionBox';\nimport Loader from '../Loader/Loader';\nimport { readHomeSidebarSelection, saveHomeSidebarSelection } from '../../lib/localStore';\nimport { useHomeContext } from '../../contexts/HomeContext';\nimport { useReadsContext } from '../../contexts/ReadsContext';\nimport { createStore } from 'solid-js/store';\nimport { APP_ID } from '../../App';\nimport { subsTo } from '../../sockets';\nimport { getArticleThread, getFeaturedAuthors, getReadsTopics } from '../../lib/feed';\nimport { fetchArticles, fetchUserProfile } from '../../handleNotes';\nimport { getParametrizedEvent, getParametrizedEvents } from '../../lib/notes';\nimport { decodeIdentifier } from '../../lib/keys';\nimport ArticleShort from '../ArticlePreview/ArticleShort';\nimport AuthorSubscribe from '../AuthorSubscribe/AuthorSubscribe';\nimport { A } from '@solidjs/router';\nimport { getRandomIntegers, isDev } from '../../utils';\nimport ArticlePreviewSidebarSkeleton from '../Skeleton/ArticlePreviewSidebarSkeleton';\nimport ReadsFeaturedTopicsSkeleton from '../Skeleton/ReadsFeaturedTopicsSkeleton';\nimport { Transition } from 'solid-transition-group';\nimport { minKnownProfiles } from '../../constants';\n\nconst sidebarOptions = [\n  {\n    label: 'Trending 24h',\n    value: 'trending_24h',\n  },\n  {\n    label: 'Trending 12h',\n    value: 'trending_12h',\n  },\n  {\n    label: 'Trending 4h',\n    value: 'trending_4h',\n  },\n  {\n    label: 'Trending 1h',\n    value: 'trending_1h',\n  },\n  {\n    label: '',\n    value: '',\n    disabled: true,\n    separator: true,\n  },\n\n  {\n    label: 'Most-zapped 24h',\n    value: 'mostzapped_24h',\n  },\n  {\n    label: 'Most-zapped 12h',\n    value: 'mostzapped_12h',\n  },\n  {\n    label: 'Most-zapped 4h',\n    value: 'mostzapped_4h',\n  },\n  {\n    label: 'Most-zapped 1h',\n    value: 'mostzapped_1h',\n  },\n];\n\nconst ReadsSidebar: Component< { id?: string } > = (props) => {\n\n  const account = useAccountContext();\n  const reads= useReadsContext();\n\n  // const [topPicks, setTopPicks] = createStore<PrimalArticle[]>([]);\n  // const [topics, setTopics] = createStore<string[]>([]);\n  const [featuredAuthor, setFeautredAuthor] = createSignal<string>();\n\n  const [isFetching, setIsFetching] = createSignal(false);\n  const [isFetchingTopics, setIsFetchingTopics] = createSignal(false);\n  const [isFetchingAuthors, setIsFetchingAuthors] = createSignal(false);\n\n  const [got, setGot] = createSignal(false);\n\n  const getTopics = () => {\n    if (!reads) return;\n    if (reads.topics.length > 0) return;\n\n    const subId = `reads_topics_${APP_ID}`;\n\n\n    const unsub = subsTo(subId, {\n      onEvent: (_, content) => {\n        const topics = JSON.parse(content.content || '[]') as string[];\n\n        reads?.actions.setTopics(topics);\n      },\n      onEose: () => {\n        setIsFetchingTopics(() => false);\n        unsub();\n      }\n    })\n    setIsFetchingTopics(() => true);\n    getReadsTopics(subId);\n  }\n\n  const getFeaturedAuthor = () => {\n    if (!reads) return;\n    if (reads.featuredAuthor) return;\n\n    const subId = `reads_fa_${APP_ID}`;\n\n    const unsub = subsTo(subId, {\n      onEvent: (_, content) => {\n        const authors = JSON.parse(content.content || '[]') as string[];\n\n        // const author = '1d22e00c32fcf2eb60c094f89f5cfa3ccd38a1b317dccda9b296fa6f50e00d0e';\n        // setFeautredAuthor(() => author);\n\n        // const author = 'a8eb6e07bf408713b0979f337a3cd978f622e0d41709f3b74b48fff43dbfcd2b';\n        // setFeautredAuthor(() => author);\n\n        // const author = '88cc134b1a65f54ef48acc1df3665063d3ea45f04eab8af4646e561c5ae99079';\n        // setFeautredAuthor(() => author);\n\n        // const author = 'fa984bd7dbb282f07e16e7ae87b26a2a7b9b90b7246a44771f0cf5ae58018f52';\n        // setFeautredAuthor(() => author);\n\n        // const author = '3f770d65d3a764a9c5cb503ae123e62ec7598ad035d836e2a810f3877a745b24';\n        // setFeautredAuthor(() => author);\n\n        setFeautredAuthor(() => authors[Math.floor(Math.random() * authors.length)]);\n      },\n      onEose: () => {\n        setIsFetchingAuthors(() => false);\n        unsub();\n      }\n    })\n    setIsFetchingAuthors(() => true);\n    getFeaturedAuthors(subId);\n  }\n\n  const getAuthorData = async (pubkey: string) => {\n    const userNpub = account?.publicKey || minKnownProfiles.names['primal'];\n    if (!userNpub || !pubkey) return;\n\n    const subId = `reads_fpi_${APP_ID}`;\n\n    setIsFetching(() => true);\n\n    const profile = await fetchUserProfile(userNpub, pubkey, subId);\n\n    setIsFetching(() => false);\n\n    reads?.actions.setFeaturedAuthor(profile);\n  };\n\n  onMount(() => {\n    if (account?.isKeyLookupDone && reads?.recomendedReads.length === 0) {\n      reads.actions.doSidebarSearch('');\n    }\n\n    if (account?.isKeyLookupDone) {\n      getTopics();\n      getFeaturedAuthor();\n    }\n  });\n\n  createEffect(() => {\n    if (!reads) return;\n    const pubkey = featuredAuthor();\n    if (!pubkey) return;\n\n    getAuthorData(pubkey);\n  });\n\n\n  // createEffect(() => {\n  //   const rec = reads?.recomendedReads || [];\n\n  //   if (rec.length > 0 && !got()) {\n  //     setGot(() => true);\n  //     let randomIndices = getRandomIntegers(0, rec.length, 3);\n\n  //     const reads = [ ...randomIndices ].map(i => rec[i]);\n\n  //     getRecomendedArticles(reads)\n  //   }\n  // });\n\n  // const getRecomendedArticles = async (ids: string[]) => {\n  //   if (!reads) return;\n  //   if (reads.topPicks.length > 0) return;\n\n  //   const subId = `reads_picks_${APP_ID}`;\n\n  //   setIsFetching(() => true);\n\n  //   const articles = await fetchArticles(ids,subId);\n\n  //   setIsFetching(() => false);\n\n  //   reads.actions.setTopPicks(articles);\n  // };\n\n  return (\n    <div id={props.id} class={styles.readsSidebar}>\n      <Show when={account?.isKeyLookupDone}>\n        <div class={styles.headingPicks}>\n          Featured Author\n        </div>\n\n        <div class={styles.section}>\n          <AuthorSubscribe author={reads?.featuredAuthor} />\n        </div>\n\n        <div class={styles.headingPicks}>\n          Featured Reads\n        </div>\n\n        <div class={styles.sectionTopPicks}>\n\n        <Transition name=\"slide-fade\">\n          <Show\n            when={reads && reads.topPicks.length > 0}\n            fallback={\n              <Show when={!reads || reads.topPicks.length === 0}>\n                <div>\n                  <For each={Array(3)}>\n                    {() => <div class=\"animated\"><ArticlePreviewSidebarSkeleton /></div>}\n                  </For>\n                </div>\n              </Show>\n            }\n          >\n            <div>\n              <For\n                each={reads?.topPicks}\n              >\n                {(note) =>\n                  <div class=\"animated\">\n                    <ArticleShort article={note} />\n                  </div>\n                }\n              </For>\n            </div>\n          </Show>\n        </Transition>\n        </div>\n\n\n        <div class={styles.headingPicks}>\n          Topics\n        </div>\n\n        <div class={styles.sectionTopics}>\n          <Transition name=\"slide-fade\">\n            <Show\n              when={reads && reads.topics.length > 0}\n              fallback={\n                <Show when={!reads || reads.topics.length === 0}>\n                  <div class=\"animated\">\n                    <ReadsFeaturedTopicsSkeleton />\n                  </div>\n                </Show>\n              }\n            >\n              <div>\n                <For\n                  each={reads?.topics}\n                >\n                  {(topic) => <A href={`/reads/${topic}`} class={styles.topic}>{topic}</A>}\n                </For>\n              </div>\n            </Show>\n          </Transition>\n        </div>\n\n      </Show>\n    </div>\n  );\n}\n\nexport default hookForDev(ReadsSidebar);\n","import { A } from '@solidjs/router';\nimport { Component, Show } from 'solid-js';\nimport { useAccountContext } from '../../contexts/AccountContext';\nimport { useHomeContext } from '../../contexts/HomeContext';\nimport { useReadsContext } from '../../contexts/ReadsContext';\nimport { useSettingsContext } from '../../contexts/SettingsContext';\nimport { hookForDev } from '../../lib/devTools';\nimport { fetchStoredFeed } from '../../lib/localStore';\nimport { FeedOption, PrimalFeed, SelectionOption } from '../../types/primal';\nimport { sha256 } from '../../utils';\nimport SelectBox from '../SelectBox/SelectBox';\nimport SelectionBox from '../SelectionBox/SelectionBox';\nimport SelectionBox2 from '../SelectionBox/SelectionBox2';\n\nconst ReedSelect: Component<{ isPhone?: boolean, id?: string, big?: boolean}> = (props) => {\n\n  const account = useAccountContext();\n  const reeds = useReadsContext();\n  const settings = useSettingsContext();\n\n  const findFeed = (hex: string, includeReplies: string) => {\n    const ir = includeReplies === 'undefined' ? undefined :\n      includeReplies === 'true';\n\n    return settings?.availableFeeds.find(f => {\n      const isHex = f.hex === hex;\n      const isOpt = typeof ir === typeof f.includeReplies ?\n        f.includeReplies === ir :\n        false;\n\n      return isHex && isOpt;\n    });\n  };\n\n  const genId = (v: string) => Object.values(JSON.parse(v)).join('_')\n\n  const selectFeed = (option: FeedOption) => {\n    if (!option) return;\n\n    const feed = {\n      spec: option.value || '',\n      name: option.label,\n      description: option.description || '',\n      enabled: true,\n    };\n\n    const selected = reeds?.selectedFeed;\n\n    if (selected && selected.spec === feed.spec) return;\n\n    reeds?.actions.clearNotes();\n    reeds?.actions.selectFeed(feed);\n  };\n\n  const isSelected = (option: FeedOption) => {\n    const selected = reeds?.selectedFeed;\n\n    return selected && selected.spec === option.value;\n\n\n    // if (selected?.hex && option.value) {\n    //   const t = option.value.split('_');\n\n    //   const isHex = encodeURI(selected.hex) == t[0];\n    //   const isOpt = t[1] === 'undefined' ?\n    //     selected.includeReplies === undefined :\n    //     selected.includeReplies?.toString() === t[1];\n\n    //   return isHex && isOpt;\n    // }\n\n    // return false;\n  }\n\n  const options:() => SelectionOption[] = () => {\n    if (!settings) return [];\n\n    return settings?.readsFeeds.reduce<SelectionOption[]>((acc, f) => {\n      return f.enabled ? [ ...acc, {\n        label: f.name,\n        value: f.spec,\n        description: f.description,\n        id: genId(f.spec),\n      }] : acc;\n    }, []);\n\n    // return settings?.readsFeeds.map(f => ({\n    //   label: f.name,\n    //   value: f.spec,\n    //   description: f.description,\n    //   id: genId(f.spec),\n    // })) || [];\n    // let opts = [];\n\n    // if (account?.publicKey) {\n    //   opts.push(\n    //     {\n    //       label: 'My Reads',\n    //       value: account?.publicKey || '',\n    //     }\n    //   );\n    // }\n\n    // opts.push(\n    //   {\n    //     label: 'All Reads',\n    //     value: 'none',\n    //   }\n    // );\n\n    // return [ ...opts ];\n  };\n\n  const initialValue = () => {\n    const selected = reeds?.selectedFeed;\n\n    if (!selected) {\n      let feed = fetchStoredFeed(account?.publicKey, 'reads');\n\n      if (feed) {\n        return {\n          label: feed.name,\n          value: feed.spec || '',\n          description: feed.description,\n          id: genId(feed.spec),\n        }\n      }\n\n      \n      const opt = options()[0];\n      \n      selectFeed(opt);\n      return opt;\n    }\n\n    return {\n      label: selected.name,\n      value: selected.spec || '',\n      description: selected.description,\n      id: genId(selected.spec),\n    }\n  }\n\n  const selectedValue = () => {\n    if (!reeds?.selectedFeed)\n      return initialValue();\n\n    return {\n      label: reeds.selectedFeed.name,\n      value: reeds.selectedFeed.spec,\n      description: reeds.selectedFeed.description,\n      id: genId(reeds.selectedFeed.spec),\n    };\n  };\n\n  return (\n      <SelectionBox2\n        options={options()}\n        onChange={selectFeed}\n        initialValue={initialValue()}\n        value={selectedValue()}\n        isSelected={isSelected}\n        isPhone={props.isPhone}\n        big={props.big}\n        caption=\"Reads Feeds\"\n        captionAction={<A href=\"/settings/reads_feeds\">Edit Feeds</A>}\n      />\n  );\n}\n\nexport default hookForDev(ReedSelect);\n","import { Component, For, onCleanup, onMount, Show } from 'solid-js';\nimport Avatar from '../Avatar/Avatar';\n\nimport styles from './HomeHeader.module.scss';\nimport { useAccountContext } from '../../contexts/AccountContext';\nimport { useIntl } from '@cookbook/solid-intl';\nimport { feedNewPosts } from '../../translations';\nimport { hookForDev } from '../../lib/devTools';\nimport { userName } from '../../stores/profile';\nimport { PrimalUser } from '../../types/primal';\nimport ReedSelect from '../FeedSelect/ReedSelect';\nimport { useReadsContext } from '../../contexts/ReadsContext';\n\nconst ReadsHeader: Component< {\n  id?: string,\n  hasNewPosts: () => boolean,\n  loadNewContent: () => void,\n  newPostCount: () => number,\n  newPostAuthors: PrimalUser[],\n} > = (props) => {\n\n  const reads = useReadsContext();\n  const account = useAccountContext();\n  const intl = useIntl();\n\n  let lastScrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n\n  const onScroll = () => {\n    const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n    // const smallHeader = document.getElementById('small_header');\n    const border = document.getElementById('small_bottom_border');\n\n    reads?.actions.updateScrollTop(scrollTop);\n\n    const isScrollingDown = scrollTop > lastScrollTop;\n    lastScrollTop = scrollTop;\n\n    if (scrollTop < 2) {\n      if (border) {\n        border.style.display = 'none';\n      }\n      return;\n    }\n\n    if (lastScrollTop < 2) {\n      return;\n    }\n\n    if (border) {\n      border.style.display = 'flex';\n    }\n\n    if (!isScrollingDown) {\n      return;\n    }\n\n  }\n\n  onMount(() => {\n    window.addEventListener('scroll', onScroll);\n  });\n\n  onCleanup(() => {\n    window.removeEventListener('scroll', onScroll);\n  });\n\n  return (\n    <div id={props.id} class={styles.readsHeader}>\n      <div class={`${styles.bigFeedSelect} ${styles.readsFeed}`}>\n        <ReedSelect big={true} />\n\n        <Show\n          when={props.hasNewPosts()}\n        >\n          <button\n            class={styles.newContentItem}\n            onClick={props.loadNewContent}\n          >\n            <div class={styles.counter}>\n              {intl.formatMessage(\n                feedNewPosts,\n                {\n                  number: props.newPostCount() >= 99 ? 99 : props.newPostCount(),\n                },\n              )}\n            </div>\n          </button>\n        </Show>\n      </div>\n\n      <Show\n        when={props.hasNewPosts() && !account?.showNewNoteForm && !((reads?.scrollTop || 0) < 85)}\n      >\n        <div class={styles.newArticleContentNotification}>\n          <button\n            onClick={props.loadNewContent}\n          >\n            <div class={styles.avatars}>\n              <For each={props.newPostAuthors}>\n                {(user) => (\n                  <div\n                    class={styles.avatar}\n                    title={userName(user)}\n                  >\n                    <Avatar user={user} size=\"xss\" />\n                  </div>\n                )}\n              </For>\n            </div>\n            <div class={styles.counter}>\n              {intl.formatMessage(\n                feedNewPosts,\n                {\n                  number: props.newPostCount(),\n                },\n              )}\n            </div>\n          </button>\n        </div>\n      </Show>\n    </div>\n  );\n}\n\nexport default hookForDev(ReadsHeader);\n","import {\n  Component,\n  createEffect,\n  createSignal,\n  For,\n  Match,\n  on,\n  onCleanup,\n  onMount,\n  Show,\n  Switch\n} from 'solid-js';\nimport Note from '../components/Note/Note';\nimport styles from './Home.module.scss';\nimport HomeHeader from '../components/HomeHeader/HomeHeader';\nimport Loader from '../components/Loader/Loader';\nimport Paginator from '../components/Paginator/Paginator';\nimport HomeSidebar from '../components/HomeSidebar/HomeSidebar';\nimport Branding from '../components/Branding/Branding';\nimport HomeHeaderPhone from '../components/HomeHeaderPhone/HomeHeaderPhone';\nimport Wormhole from '../components/Wormhole/Wormhole';\nimport { scrollWindowTo } from '../lib/scroll';\nimport StickySidebar from '../components/StickySidebar/StickySidebar';\nimport { useHomeContext } from '../contexts/HomeContext';\nimport { useIntl } from '@cookbook/solid-intl';\nimport { createStore } from 'solid-js/store';\nimport { PrimalArticle, PrimalUser } from '../types/primal';\nimport Avatar from '../components/Avatar/Avatar';\nimport { userName } from '../stores/profile';\nimport { useAccountContext } from '../contexts/AccountContext';\nimport { reads, branding } from '../translations';\nimport Search from '../components/Search/Search';\nimport { setIsHome } from '../components/Layout/Layout';\nimport PageTitle from '../components/PageTitle/PageTitle';\nimport { useAppContext } from '../contexts/AppContext';\nimport { useReadsContext } from '../contexts/ReadsContext';\nimport ArticlePreview from '../components/ArticlePreview/ArticlePreview';\nimport PageCaption from '../components/PageCaption/PageCaption';\nimport ReadsSidebar from '../components/HomeSidebar/ReadsSidebar';\nimport ReedSelect from '../components/FeedSelect/ReedSelect';\nimport ReadsHeader from '../components/HomeHeader/ReadsHeader';\nimport { A, useParams } from '@solidjs/router';\nimport { APP_ID } from '../App';\nimport ButtonGhost from '../components/Buttons/ButtonGhost';\nimport ArticlePreviewSkeleton from '../components/Skeleton/ArticlePreviewSkeleton';\nimport { Transition } from 'solid-transition-group';\nimport { ToggleButton } from '@kobalte/core/toggle-button';\nimport { isDev } from '../utils';\n\n\nconst Home: Component = () => {\n\n  const context = useReadsContext();\n  const account = useAccountContext();\n  const intl = useIntl();\n  const app = useAppContext();\n  const params = useParams();\n\n  const isPageLoading = () => context?.isFetching;\n\n  let checkNewNotesTimer: number = 0;\n\n  const [hasNewPosts, setHasNewPosts] = createSignal(false);\n  const [newNotesCount, setNewNotesCount] = createSignal(0);\n  const [newPostAuthors, setNewPostAuthors] = createStore<PrimalUser[]>([]);\n\n  const newPostCount = () => newNotesCount() < 100 ? newNotesCount() : 100;\n\n  onMount(() => {\n    // setIsHome(true);\n    scrollWindowTo(context?.scrollTop);\n  });\n\n  createEffect(() => {\n    if ((context?.future.notes.length || 0) > 99 || app?.isInactive) {\n      clearInterval(checkNewNotesTimer);\n      return;\n    }\n\n    const spec = context?.selectedFeed?.spec || '';\n\n    if (checkNewNotesTimer) {\n      clearInterval(checkNewNotesTimer);\n      setHasNewPosts(false);\n      setNewNotesCount(0);\n      setNewPostAuthors(() => []);\n    }\n\n    const timeout = 25_000 + Math.random() * 10_000;\n\n    checkNewNotesTimer = setInterval(() => {\n      context?.actions.checkForNewNotes(spec);\n    }, timeout);\n  });\n\n  createEffect(() => {\n    const count = context?.future.notes.length || 0;\n    if (count === 0) {\n      return\n    }\n\n    if (!hasNewPosts()) {\n      setHasNewPosts(true);\n    }\n\n    if (newPostAuthors.length < 3) {\n      const users = context?.future.notes.map(note => note.user) || [];\n\n      const uniqueUsers = users.reduce<PrimalUser[]>((acc, user) => {\n        const isDuplicate = acc.find(u => u && u.pubkey === user.pubkey);\n        return isDuplicate ?  acc : [ ...acc, user ];\n      }, []).slice(0, 3);\n\n      setNewPostAuthors(() => [...uniqueUsers]);\n    }\n\n    setNewNotesCount(count);\n  });\n\n  onCleanup(()=> {\n    clearInterval(checkNewNotesTimer);\n    setIsHome(false);\n  });\n\n  const loadNewContent = () => {\n    if (newNotesCount() > 100 || app?.appState === 'waking') {\n      context?.actions.getFirstPage();\n      return;\n    }\n\n    context?.actions.loadFutureContent();\n    scrollWindowTo(0, true);\n    setHasNewPosts(false);\n    setNewNotesCount(0);\n    setNewPostAuthors(() => []);\n  }\n\n  createEffect(on(() => params.topic, (v, p) => {\n    if (v && v.length > 0) {\n      context?.actions.clearNotes();\n      context?.actions.fetchNotes(`{\\\"kind\\\":\\\"reads\\\",\\\"topic\\\":\\\"${decodeURIComponent(params.topic)}\\\"}`);\n      return;\n    } else {\n      if (p && p.length > 0) {\n        context?.actions.refetchSelectedFeed();\n      }\n    }\n  }));\n\n  createEffect(on(() => account?.isKeyLookupDone, (v, p) => {\n\n    if (v && v !== p && account?.publicKey && !params.topic) {\n      const selected = context?.selectedFeed;;\n\n      // context?.actions.resetSelectedFeed();\n      if (selected) {\n        // context?.actions.clearNotes();\n        context?.actions.selectFeed({ ...selected });\n      }\n    }\n  }));\n\n  const onArticleRendered = (article: PrimalArticle, el: HTMLAnchorElement | undefined) => {\n    context?.actions.setArticleHeight(article.naddr, el?.getBoundingClientRect().height || 0);\n  };\n\n  return (\n    <div class={styles.homeContent}>\n      <PageTitle title={intl.formatMessage(branding)} />\n      <Wormhole\n        to=\"search_section\"\n      >\n        <Search />\n      </Wormhole>\n\n      <PageCaption title={intl.formatMessage(reads.pageTitle)}>\n        <Show\n          when={params.topic}\n          fallback={\n            <div>\n              <ReadsHeader\n                hasNewPosts={hasNewPosts}\n                loadNewContent={loadNewContent}\n                newPostCount={newPostCount}\n                newPostAuthors={newPostAuthors}\n              />\n            </div>\n          }\n        >\n          <div class={styles.readsTopicHeader}>\n            <div\n              class={styles.backToReads}\n            >\n              topic:\n            </div>\n            <A\n              class={styles.topicBubble}\n              href={'/reads'}\n              onClick={() => context?.actions.refetchSelectedFeed()}\n            >\n              <div>\n                {decodeURIComponent(params.topic)}\n              </div>\n\n              <div class={styles.closeIcon}></div>\n            </A>\n          </div>\n        </Show>\n      </PageCaption>\n\n      <StickySidebar>\n        <ReadsSidebar />\n      </StickySidebar>\n\n      <div class={styles.readsFeed}>\n        <Transition name=\"slide-fade\">\n          <Show\n            when={context?.notes && context.notes.length > 0}\n            fallback={\n              <div>\n                <For each={new Array(5)}>\n                  {() => <ArticlePreviewSkeleton />}\n                </For>\n              </div>\n            }\n          >\n            <div class={styles.feed}>\n              <For each={context?.notes} >\n                {(note) => (\n                  <div class=\"animated\">\n                    <ArticlePreview\n                      article={note}\n                      height={context?.articleHeights[note.naddr]}\n                      onRender={onArticleRendered}\n                    />\n                  </div>\n                )}\n              </For>\n            </div>\n          </Show>\n        </Transition>\n\n        <Switch>\n          <Match\n            when={!isPageLoading() && context?.notes && context?.notes.length === 0}\n          >\n            <div class={styles.noContent}>\n            </div>\n          </Match>\n          <Match\n            when={isPageLoading()}\n          >\n            <div class={styles.noContent}>\n            </div>\n          </Match>\n        </Switch>\n        <Paginator loadNextPage={() => context?.actions.fetchNextPage(params.topic)}/>\n      </div>\n    </div>\n  )\n}\n\nexport default Home;\n"],"names":["AuthorSubscribeSkeleton","props","_el$","_tmpl$","_$effect","_$className","styles","authorSubscribeSkeleton","AuthorSubscribe","useAccountContext","app","useAppContext","useNavigate","useSettingsContext","shouldAnimate","isDev","localStorage","getItem","_$createComponent","Transition","name","children","Show","when","author","fallback","_el$12","_tmpl$2","_$insert","A","href","actions","profileLink","npub","authorFeaturCard","picture","_el$2","firstChild","_p$","_v$","imageHolder","_v$2","image","_v$3","_$setAttribute","undefined","_el$3","_tmpl$4","_el$4","_el$5","_el$7","nextSibling","_el$8","userName","VerificationCheck","user","nip05","_el$6","nip05Verification","about","userStats","followers_count","_el$9","_tmpl$3","_el$10","_el$11","humanizeNumber","_v$4","_v$5","number","_v$6","unit","_v$7","userInfo","_v$8","userBasicData","_v$9","_v$10","userAdditionalData","_v$11","userAbout","extended","hookForDev","ReadsFeaturedTopicsSkeleton","readsFeaturedTopicsSkeleton","topic","ReadsSidebar","account","reads","useReadsContext","featuredAuthor","setFeautredAuthor","createSignal","isFetching","setIsFetching","isFetchingTopics","setIsFetchingTopics","isFetchingAuthors","setIsFetchingAuthors","getTopics","topics","length","subId","APP_ID","unsub","subsTo","onEvent","_","content","JSON","parse","setTopics","onEose","getReadsTopics","getFeaturedAuthor","authors","Math","floor","random","getFeaturedAuthors","getAuthorData","__name","pubkey","userNpub","publicKey","minKnownProfiles","names","profile","fetchUserProfile","setFeaturedAuthor","onMount","isKeyLookupDone","recomendedReads","doSidebarSearch","createEffect","headingPicks","section","topPicks","For","each","Array","_tmpl$5","ArticlePreviewSidebarSkeleton","note","ArticleShort","article","sectionTopPicks","_el$13","sectionTopics","id","readsSidebar","ReedSelect","reeds","settings","genId","v","Object","values","join","selectFeed","option","feed","spec","value","label","description","enabled","selected","selectedFeed","clearNotes","isSelected","options","readsFeeds","reduce","acc","f","initialValue","fetchStoredFeed","opt","selectedValue","SelectionBox2","onChange","isPhone","big","caption","captionAction","ReadsHeader","intl","useIntl","lastScrollTop","document","body","scrollTop","documentElement","onScroll","border","getElementById","updateScrollTop","isScrollingDown","style","display","window","addEventListener","onCleanup","removeEventListener","hasNewPosts","_$addEventListener","loadNewContent","formatMessage","feedNewPosts","newPostCount","newContentItem","counter","showNewNoteForm","newPostAuthors","Avatar","size","avatar","newArticleContentNotification","avatars","readsHeader","bigFeedSelect","readsFeed","ReadsHeader$1","_$delegateEvents","Home","context","params","useParams","isPageLoading","checkNewNotesTimer","setHasNewPosts","newNotesCount","setNewNotesCount","setNewPostAuthors","createStore","scrollWindowTo","future","notes","isInactive","clearInterval","timeout","setInterval","checkForNewNotes","count","uniqueUsers","map","find","u","slice","setIsHome","appState","getFirstPage","loadFutureContent","on","p","fetchNotes","decodeURIComponent","refetchSelectedFeed","onArticleRendered","el","setArticleHeight","naddr","getBoundingClientRect","height","PageTitle","title","branding","Wormhole","to","Search","PageCaption","pageTitle","topicBubble","onClick","closeIcon","readsTopicHeader","backToReads","StickySidebar","ArticlePreviewSkeleton","ArticlePreview","articleHeights","onRender","Switch","Match","noContent","Paginator","loadNextPage","fetchNextPage","homeContent"],"mappings":"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"}