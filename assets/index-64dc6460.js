var Wb=Object.defineProperty;var o=(e,t)=>Wb(e,"name",{value:t,configurable:!0});var Ad=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var Ls=(e,t,n)=>(Ad(e,t,"read from private field"),n?n.call(e):t.get(e)),Zc=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},zi=(e,t,n,r)=>(Ad(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);o(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}o(n,"getFetchOpts");function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}o(r,"processPreload")},"polyfill")();const Re={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Md(this.context.count)},getNextContextId(){return Md(this.context.count++)}};function Md(e){const t=String(e),n=t.length-1;return Re.context.id+(n?String.fromCharCode(96+n):"")+t}o(Md,"getContextId");function Hs(e){Re.context=e}o(Hs,"setHydrateContext");const jb=o((e,t)=>e===t,"equalFn"),$t=Symbol("solid-proxy"),e0=typeof Proxy=="function",Js=Symbol("solid-track"),ka={equals:jb};let t0=s0;const Ir=1,Ta=2,n0={owned:null,cleanups:null,context:null,owner:null},Wc={};var tt=null;let jc=null,Gb=null,rt=null,Qt=null,Mr=null,tc=0;function Xi(e,t){const n=rt,r=tt,i=e.length===0,s=t===void 0?r:t,a=i?n0:{owned:null,cleanups:null,context:s?s.context:null,owner:s},c=i?e:()=>e(()=>Lt(()=>Qs(a)));tt=a,rt=null;try{return ur(c,!0)}finally{rt=n,tt=r}}o(Xi,"createRoot");function lt(e,t){t=t?Object.assign({},ka,t):ka;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o(i=>(typeof i=="function"&&(i=i(n.value)),i0(n,i)),"setter");return[r0.bind(n),r]}o(lt,"createSignal");function Kl(e,t,n){const r=rc(e,t,!0,Ir);bs(r)}o(Kl,"createComputed");function ct(e,t,n){const r=rc(e,t,!1,Ir);bs(r)}o(ct,"createRenderEffect");function at(e,t,n){t0=Xb;const r=rc(e,t,!1,Ir);(!n||!n.render)&&(r.user=!0),Mr?Mr.push(r):bs(r)}o(at,"createEffect");function it(e,t,n){n=n?Object.assign({},ka,n):ka;const r=rc(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,bs(r),r0.bind(r)}o(it,"createMemo");function qb(e){return e&&typeof e=="object"&&"then"in e}o(qb,"isPromise");function Vb(e,t,n){let r,i,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,i=e,s=t||{}):(r=e,i=t,s=n||{});let a=null,c=Wc,u=null,l=!1,f="initialValue"in s,h=typeof r=="function"&&it(r);const p=new Set,[y,_]=(s.storage||lt)(s.initialValue),[x,w]=lt(void 0),[v,T]=lt(void 0,{equals:!1}),[N,I]=lt(f?"ready":"unresolved");Re.context&&(u=Re.getNextContextId(),s.ssrLoadFrom==="initial"?c=s.initialValue:Re.load&&Re.has(u)&&(c=Re.load(u)));function C(B,z,A,d){return a===B&&(a=null,d!==void 0&&(f=!0),(B===c||z===c)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(d,{value:z})),c=Wc,D(z,A)),z}o(C,"loadEnd");function D(B,z){ur(()=>{z===void 0&&_(()=>B),I(z!==void 0?"errored":f?"ready":"unresolved"),w(z);for(const A of p.keys())A.decrement();p.clear()},!1)}o(D,"completeLoad");function U(){const B=Jb,z=y(),A=x();if(A!==void 0&&!a)throw A;return rt&&!rt.user&&B&&Kl(()=>{v(),a&&(B.resolved||p.has(B)||(B.increment(),p.add(B)))}),z}o(U,"read");function H(B=!0){if(B!==!1&&l)return;l=!1;const z=h?h():r;if(z==null||z===!1){C(a,Lt(y));return}const A=c!==Wc?c:Lt(()=>i(z,{value:y(),refetching:B}));return qb(A)?(a=A,"value"in A?(A.status==="success"?C(a,A.value,void 0,z):C(a,void 0,Jl(A.value),z),A):(l=!0,queueMicrotask(()=>l=!1),ur(()=>{I(f?"refreshing":"pending"),T()},!1),A.then(d=>C(A,d,void 0,z),d=>C(A,void 0,Jl(d),z)))):(C(a,A,void 0,z),A)}return o(H,"load"),Object.defineProperties(U,{state:{get:()=>N()},error:{get:()=>x()},loading:{get(){const B=N();return B==="pending"||B==="refreshing"}},latest:{get(){if(!f)return U();const B=x();if(B&&!a)throw B;return y()}}}),h?Kl(()=>H(!1)):H(!1),[U,{refetch:H,mutate:_}]}o(Vb,"createResource");function Jr(e){return ur(e,!1)}o(Jr,"batch");function Lt(e){if(rt===null)return e();const t=rt;rt=null;try{return e()}finally{rt=t}}o(Lt,"untrack");function Bi(e,t,n){const r=Array.isArray(e);let i,s=n&&n.defer;return a=>{let c;if(r){c=Array(e.length);for(let l=0;l<e.length;l++)c[l]=e[l]()}else c=e();if(s)return s=!1,a;const u=Lt(()=>t(c,i,a));return i=c,u}}o(Bi,"on");function ai(e){at(()=>Lt(e))}o(ai,"onMount");function on(e){return tt===null||(tt.cleanups===null?tt.cleanups=[e]:tt.cleanups.push(e)),e}o(on,"onCleanup");function rs(){return rt}o(rs,"getListener");function Ys(){return tt}o(Ys,"getOwner");function af(e,t){const n=tt,r=rt;tt=e,rt=null;try{return ur(t,!0)}catch(i){cf(i)}finally{tt=n,rt=r}}o(af,"runWithOwner");function Gs(e){const t=rt,n=tt;return Promise.resolve().then(()=>{rt=t,tt=n;let r;return ur(e,!1),rt=tt=null,r?r.done:void 0})}o(Gs,"startTransition");const[Kb,W6]=lt(!1);function j6(){return[Kb,Gs]}o(j6,"useTransition");function Ht(e,t){const n=Symbol("context");return{id:n,Provider:ew(n),defaultValue:e}}o(Ht,"createContext");function zt(e){let t;return tt&&tt.context&&(t=tt.context[e.id])!==void 0?t:e.defaultValue}o(zt,"useContext");function nc(e){const t=it(e),n=it(()=>Yl(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}o(nc,"children");let Jb;function r0(){if(this.sources&&this.state)if(this.state===Ir)bs(this);else{const e=Qt;Qt=null,ur(()=>Ia(this),!1),Qt=e}if(rt){const e=this.observers?this.observers.length:0;rt.sources?(rt.sources.push(this),rt.sourceSlots.push(e)):(rt.sources=[this],rt.sourceSlots=[e]),this.observers?(this.observers.push(rt),this.observerSlots.push(rt.sources.length-1)):(this.observers=[rt],this.observerSlots=[rt.sources.length-1])}return this.value}o(r0,"readSignal");function i0(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&ur(()=>{for(let i=0;i<e.observers.length;i+=1){const s=e.observers[i],a=jc&&jc.running;a&&jc.disposed.has(s),(a?!s.tState:!s.state)&&(s.pure?Qt.push(s):Mr.push(s),s.observers&&o0(s)),a||(s.state=Ir)}if(Qt.length>1e6)throw Qt=[],new Error},!1)),t}o(i0,"writeSignal");function bs(e){if(!e.fn)return;Qs(e);const t=tc;Yb(e,e.value,t)}o(bs,"updateComputation");function Yb(e,t,n){let r;const i=tt,s=rt;rt=tt=e;try{r=e.fn(t)}catch(a){return e.pure&&(e.state=Ir,e.owned&&e.owned.forEach(Qs),e.owned=null),e.updatedAt=n+1,cf(a)}finally{rt=s,tt=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?i0(e,r):e.value=r,e.updatedAt=n)}o(Yb,"runComputation");function rc(e,t,n,r=Ir,i){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:tt,context:tt?tt.context:null,pure:n};return tt===null||tt!==n0&&(tt.owned?tt.owned.push(s):tt.owned=[s]),s}o(rc,"createComputation");function Na(e){if(e.state===0)return;if(e.state===Ta)return Ia(e);if(e.suspense&&Lt(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<tc);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Ir)bs(e);else if(e.state===Ta){const r=Qt;Qt=null,ur(()=>Ia(e,t[0]),!1),Qt=r}}o(Na,"runTop");function ur(e,t){if(Qt)return e();let n=!1;t||(Qt=[]),Mr?n=!0:Mr=[],tc++;try{const r=e();return Qb(n),r}catch(r){n||(Mr=null),Qt=null,cf(r)}}o(ur,"runUpdates");function Qb(e){if(Qt&&(s0(Qt),Qt=null),e)return;const t=Mr;Mr=null,t.length&&ur(()=>t0(t),!1)}o(Qb,"completeUpdates");function s0(e){for(let t=0;t<e.length;t++)Na(e[t])}o(s0,"runQueue");function Xb(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Na(r)}if(Re.context){if(Re.count){Re.effects||(Re.effects=[]),Re.effects.push(...e.slice(0,n));return}Hs()}for(Re.effects&&(Re.done||!Re.count)&&(e=[...Re.effects,...e],n+=Re.effects.length,delete Re.effects),t=0;t<n;t++)Na(e[t])}o(Xb,"runUserEffects");function Ia(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const i=r.state;i===Ir?r!==t&&(!r.updatedAt||r.updatedAt<tc)&&Na(r):i===Ta&&Ia(r,t)}}}o(Ia,"lookUpstream");function o0(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Ta,n.pure?Qt.push(n):Mr.push(n),n.observers&&o0(n))}}o(o0,"markDownstream");function Qs(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const s=i.pop(),a=n.observerSlots.pop();r<i.length&&(s.sourceSlots[a]=r,i[r]=s,n.observerSlots[r]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Qs(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Qs(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}o(Qs,"cleanNode");function Jl(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}o(Jl,"castError");function cf(e,t=tt){throw Jl(e)}o(cf,"handleError");function Yl(e){if(typeof e=="function"&&!e.length)return Yl(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Yl(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}o(Yl,"resolveChildren");function ew(e,t){return o(function(r){let i;return ct(()=>i=Lt(()=>(tt.context={...tt.context,[e]:r.value},nc(()=>r.children))),void 0),i},"provider")}o(ew,"createProvider");const tw=Symbol("fallback");function kd(e){for(let t=0;t<e.length;t++)e[t]()}o(kd,"dispose");function nw(e,t,n={}){let r=[],i=[],s=[],a=0,c=t.length>1?[]:null;return on(()=>kd(s)),()=>{let u=e()||[],l=u.length,f,h;return u[Js],Lt(()=>{let y,_,x,w,v,T,N,I,C;if(l===0)a!==0&&(kd(s),s=[],r=[],i=[],a=0,c&&(c=[])),n.fallback&&(r=[tw],i[0]=Xi(D=>(s[0]=D,n.fallback())),a=1);else if(a===0){for(i=new Array(l),h=0;h<l;h++)r[h]=u[h],i[h]=Xi(p);a=l}else{for(x=new Array(l),w=new Array(l),c&&(v=new Array(l)),T=0,N=Math.min(a,l);T<N&&r[T]===u[T];T++);for(N=a-1,I=l-1;N>=T&&I>=T&&r[N]===u[I];N--,I--)x[I]=i[N],w[I]=s[N],c&&(v[I]=c[N]);for(y=new Map,_=new Array(I+1),h=I;h>=T;h--)C=u[h],f=y.get(C),_[h]=f===void 0?-1:f,y.set(C,h);for(f=T;f<=N;f++)C=r[f],h=y.get(C),h!==void 0&&h!==-1?(x[h]=i[f],w[h]=s[f],c&&(v[h]=c[f]),h=_[h],y.set(C,h)):s[f]();for(h=T;h<l;h++)h in x?(i[h]=x[h],s[h]=w[h],c&&(c[h]=v[h],c[h](h))):i[h]=Xi(p);i=i.slice(0,a=l),r=u.slice(0)}return i});function p(y){if(s[h]=y,c){const[_,x]=lt(h);return c[h]=x,t(u[h],_)}return t(u[h])}o(p,"mapper")}}o(nw,"mapArray");function pe(e,t){return Lt(()=>e(t||{}))}o(pe,"createComponent");function jo(){return!0}o(jo,"trueFn");const Ql={get(e,t,n){return t===$t?n:e.get(t)},has(e,t){return t===$t?!0:e.has(t)},set:jo,deleteProperty:jo,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:jo,deleteProperty:jo}},ownKeys(e){return e.keys()}};function Gc(e){return(e=typeof e=="function"?e():e)?e:{}}o(Gc,"resolveSource");function rw(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}o(rw,"resolveSources");function Ra(...e){let t=!1;for(let a=0;a<e.length;a++){const c=e[a];t=t||!!c&&$t in c,e[a]=typeof c=="function"?(t=!0,it(c)):c}if(e0&&t)return new Proxy({get(a){for(let c=e.length-1;c>=0;c--){const u=Gc(e[c])[a];if(u!==void 0)return u}},has(a){for(let c=e.length-1;c>=0;c--)if(a in Gc(e[c]))return!0;return!1},keys(){const a=[];for(let c=0;c<e.length;c++)a.push(...Object.keys(Gc(e[c])));return[...new Set(a)]}},Ql);const n={},r=Object.create(null);for(let a=e.length-1;a>=0;a--){const c=e[a];if(!c)continue;const u=Object.getOwnPropertyNames(c);for(let l=u.length-1;l>=0;l--){const f=u[l];if(f==="__proto__"||f==="constructor")continue;const h=Object.getOwnPropertyDescriptor(c,f);if(!r[f])r[f]=h.get?{enumerable:!0,configurable:!0,get:rw.bind(n[f]=[h.get.bind(c)])}:h.value!==void 0?h:void 0;else{const p=n[f];p&&(h.get?p.push(h.get.bind(c)):h.value!==void 0&&p.push(()=>h.value))}}}const i={},s=Object.keys(r);for(let a=s.length-1;a>=0;a--){const c=s[a],u=r[c];u&&u.get?Object.defineProperty(i,c,u):i[c]=u?u.value:void 0}return i}o(Ra,"mergeProps");function a0(e,...t){if(e0&&$t in e){const i=new Set(t.length>1?t.flat():t[0]),s=t.map(a=>new Proxy({get(c){return a.includes(c)?e[c]:void 0},has(c){return a.includes(c)&&c in e},keys(){return a.filter(c=>c in e)}},Ql));return s.push(new Proxy({get(a){return i.has(a)?void 0:e[a]},has(a){return i.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!i.has(a))}},Ql)),s}const n={},r=t.map(()=>({}));for(const i of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,i),a=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let c=!1,u=0;for(const l of t)l.includes(i)&&(c=!0,a?r[u][i]=s.value:Object.defineProperty(r[u],i,s)),++u;c||(a?n[i]=s.value:Object.defineProperty(n,i,s))}return[...r,n]}o(a0,"splitProps");function Ze(e){let t,n;const r=o(i=>{const s=Re.context;if(s){const[c,u]=lt();Re.count||(Re.count=0),Re.count++,(n||(n=e())).then(l=>{!Re.done&&Hs(s),Re.count--,u(()=>l.default),Hs()}),t=c}else if(!t){const[c]=Vb(()=>(n||(n=e())).then(u=>u.default));t=c}let a;return it(()=>(a=t())?Lt(()=>{if(!s||Re.done)return a(i);const c=Re.context;Hs(s);const u=a(i);return Hs(c),u}):"")},"wrap");return r.preload=()=>n||((n=e()).then(i=>t=o(()=>i.default,"comp")),n),r}o(Ze,"lazy");let iw=0;function G6(){return Re.context?Re.getNextContextId():`cl-${iw++}`}o(G6,"createUniqueId");const c0=o(e=>`Stale read from <${e}>.`,"narrowedError");function q6(e){const t="fallback"in e&&{fallback:()=>e.fallback};return it(nw(()=>e.each,e.children,t||void 0))}o(q6,"For");function Dn(e){const t=e.keyed,n=it(()=>e.when,void 0,{equals:(r,i)=>t?r===i:!r==!i});return it(()=>{const r=n();if(r){const i=e.children;return typeof i=="function"&&i.length>0?Lt(()=>i(t?r:()=>{if(!Lt(n))throw c0("Show");return e.when})):i}return e.fallback},void 0,void 0)}o(Dn,"Show");function sw(e){let t=!1;const n=o((s,a)=>(t?s[1]===a[1]:!s[1]==!a[1])&&s[2]===a[2],"equals"),r=nc(()=>e.children),i=it(()=>{let s=r();Array.isArray(s)||(s=[s]);for(let a=0;a<s.length;a++){const c=s[a].when;if(c)return t=!!s[a].keyed,[a,c,s[a]]}return[-1]},void 0,{equals:n});return it(()=>{const[s,a,c]=i();if(s<0)return e.fallback;const u=c.children;return typeof u=="function"&&u.length>0?Lt(()=>u(t?a:()=>{if(Lt(i)[0]!==s)throw c0("Match");return c.when})):u},void 0,void 0)}o(sw,"Switch");function Td(e){return e}o(Td,"Match");const ow=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],aw=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...ow]),cw=new Set(["innerHTML","textContent","innerText","children"]),lw=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),uw=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function fw(e,t){const n=uw[e];return typeof n=="object"?n[t]?n.$:void 0:n}o(fw,"getPropAlias");const dw=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),hw=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),pw={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function gw(e,t,n){let r=n.length,i=t.length,s=r,a=0,c=0,u=t[i-1].nextSibling,l=null;for(;a<i||c<s;){if(t[a]===n[c]){a++,c++;continue}for(;t[i-1]===n[s-1];)i--,s--;if(i===a){const f=s<r?c?n[c-1].nextSibling:n[s-c]:u;for(;c<s;)e.insertBefore(n[c++],f)}else if(s===c)for(;a<i;)(!l||!l.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[s-1]&&n[c]===t[i-1]){const f=t[--i].nextSibling;e.insertBefore(n[c++],t[a++].nextSibling),e.insertBefore(n[--s],f),t[i]=n[s]}else{if(!l){l=new Map;let h=c;for(;h<s;)l.set(n[h],h++)}const f=l.get(t[a]);if(f!=null)if(c<f&&f<s){let h=a,p=1,y;for(;++h<i&&h<s&&!((y=l.get(t[h]))==null||y!==f+p);)p++;if(p>f-c){const _=t[a];for(;c<f;)e.insertBefore(n[c++],_)}else e.replaceChild(n[c++],t[a++])}else a++;else t[a++].remove()}}}o(gw,"reconcileArrays");const Nd="_$DX_DELEGATE";function mw(e,t,n,r={}){let i;return Xi(s=>{i=s,t===document?e():Ot(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}o(mw,"render");function qt(e,t,n){let r;const i=o(()=>{const a=document.createElement("template");return a.innerHTML=e,n?a.content.firstChild.firstChild:a.content.firstChild},"create"),s=t?()=>Lt(()=>document.importNode(r||(r=i()),!0)):()=>(r||(r=i())).cloneNode(!0);return s.cloneNode=s,s}o(qt,"template");function l0(e,t=window.document){const n=t[Nd]||(t[Nd]=new Set);for(let r=0,i=e.length;r<i;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,Sw))}}o(l0,"delegateEvents");function ht(e,t,n){Fi(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}o(ht,"setAttribute");function yw(e,t,n,r){Fi(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}o(yw,"setAttributeNS");function bw(e,t,n){Fi(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}o(bw,"setBoolAttribute");function pt(e,t){Fi(e)||(t==null?e.removeAttribute("class"):e.className=t)}o(pt,"className");function ww(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=s=>i.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}o(ww,"addEventListener");function _w(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let s,a;for(s=0,a=i.length;s<a;s++){const c=i[s];!c||c==="undefined"||t[c]||(Id(e,c,!1),delete n[c])}for(s=0,a=r.length;s<a;s++){const c=r[s],u=!!t[c];!c||c==="undefined"||n[c]===u||!u||(Id(e,c,!0),n[c]=u)}return n}o(_w,"classList");function u0(e,t,n){if(!t)return n?ht(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)i=t[s],i!==n[s]&&(r.setProperty(s,i),n[s]=i);return n}o(u0,"style");function f0(e,t={},n,r){const i={};return r||ct(()=>i.children=is(e,t.children,i.children)),ct(()=>typeof t.ref=="function"&&ic(t.ref,e)),ct(()=>vw(e,t,n,!0,i,!0)),i}o(f0,"spread");function ic(e,t,n){return Lt(()=>e(t,n))}o(ic,"use");function Ot(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return is(e,t,r,n);ct(i=>is(e,t(),i,n),r)}o(Ot,"insert");function vw(e,t,n,r,i={},s=!1){t||(t={});for(const a in i)if(!(a in t)){if(a==="children")continue;i[a]=Rd(e,a,null,i[a],n,s,t)}for(const a in t){if(a==="children"){r||is(e,t.children);continue}const c=t[a];i[a]=Rd(e,a,c,i[a],n,s,t)}}o(vw,"assign$1");function Ew(e){let t,n;return!Fi()||!(t=Re.registry.get(n=Aw()))?e():(Re.completed&&Re.completed.add(t),Re.registry.delete(n),t)}o(Ew,"getNextElement");function Fi(e){return!!Re.context&&!Re.done&&(!e||e.isConnected)}o(Fi,"isHydrating");function xw(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}o(xw,"toPropertyName");function Id(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,s=r.length;i<s;i++)e.classList.toggle(r[i],n)}o(Id,"toggleClassKey");function Rd(e,t,n,r,i,s,a){let c,u,l,f,h;if(t==="style")return u0(e,n,r);if(t==="classList")return _w(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const p=t.slice(3);r&&e.removeEventListener(p,r,typeof r!="function"&&r),n&&e.addEventListener(p,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const p=t.slice(10);r&&e.removeEventListener(p,r,!0),n&&e.addEventListener(p,n,!0)}else if(t.slice(0,2)==="on"){const p=t.slice(2).toLowerCase(),y=dw.has(p);if(!y&&r){const _=Array.isArray(r)?r[0]:r;e.removeEventListener(p,_)}(y||n)&&(ww(e,p,n,y),y&&l0([p]))}else if(t.slice(0,5)==="attr:")ht(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")bw(e,t.slice(5),n);else if((h=t.slice(0,5)==="prop:")||(l=cw.has(t))||!i&&((f=fw(t,e.tagName))||(u=aw.has(t)))||(c=e.nodeName.includes("-")||"is"in a)){if(h)t=t.slice(5),u=!0;else if(Fi(e))return n;t==="class"||t==="className"?pt(e,n):c&&!u&&!l?e[xw(t)]=n:e[f||t]=n}else{const p=i&&t.indexOf(":")>-1&&pw[t.split(":")[0]];p?yw(e,p,t,n):ht(e,lw[t]||t,n)}return n}o(Rd,"assignProp");function Sw(e){if(Re.registry&&Re.events&&Re.events.find(([u,l])=>l===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,i=e.currentTarget,s=o(u=>Object.defineProperty(e,"target",{configurable:!0,value:u}),"retarget"),a=o(()=>{const u=t[n];if(u&&!t.disabled){const l=t[`${n}Data`];if(l!==void 0?u.call(t,l,e):u.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},"handleNode"),c=o(()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););},"walkUpTree");if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),Re.registry&&!Re.done&&(Re.done=_$HY.done=!0),e.composedPath){const u=e.composedPath();s(u[0]);for(let l=0;l<u.length-2&&(t=u[l],!!a());l++){if(t._$host){t=t._$host,c();break}if(t.parentNode===i)break}}else c();s(r)}o(Sw,"eventHandler");function is(e,t,n,r,i){const s=Fi(e);if(s){!n&&(n=[...e.childNodes]);let u=[];for(let l=0;l<n.length;l++){const f=n[l];f.nodeType===8&&f.data.slice(0,2)==="!$"?f.remove():u.push(f)}n=u}for(;typeof n=="function";)n=n();if(t===n)return n;const a=typeof t,c=r!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,a==="string"||a==="number"){if(s||a==="number"&&(t=t.toString(),t===n))return n;if(c){let u=n[0];u&&u.nodeType===3?u.data!==t&&(u.data=t):u=document.createTextNode(t),n=Zi(e,n,r,u)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||a==="boolean"){if(s)return n;n=Zi(e,n,r)}else{if(a==="function")return ct(()=>{let u=t();for(;typeof u=="function";)u=u();n=is(e,u,n,r)}),()=>n;if(Array.isArray(t)){const u=[],l=n&&Array.isArray(n);if(Xl(u,t,n,i))return ct(()=>n=is(e,u,n,r,!0)),()=>n;if(s){if(!u.length)return n;if(r===void 0)return n=[...e.childNodes];let f=u[0];if(f.parentNode!==e)return n;const h=[f];for(;(f=f.nextSibling)!==r;)h.push(f);return n=h}if(u.length===0){if(n=Zi(e,n,r),c)return n}else l?n.length===0?Ld(e,u,r):gw(e,n,u):(n&&Zi(e),Ld(e,u));n=u}else if(t.nodeType){if(s&&t.parentNode)return n=c?[t]:t;if(Array.isArray(n)){if(c)return n=Zi(e,n,r,t);Zi(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}o(is,"insertExpression");function Xl(e,t,n,r){let i=!1;for(let s=0,a=t.length;s<a;s++){let c=t[s],u=n&&n[e.length],l;if(!(c==null||c===!0||c===!1))if((l=typeof c)=="object"&&c.nodeType)e.push(c);else if(Array.isArray(c))i=Xl(e,c,u)||i;else if(l==="function")if(r){for(;typeof c=="function";)c=c();i=Xl(e,Array.isArray(c)?c:[c],Array.isArray(u)?u:[u])||i}else e.push(c),i=!0;else{const f=String(c);u&&u.nodeType===3&&u.data===f?e.push(u):e.push(document.createTextNode(f))}}return i}o(Xl,"normalizeIncomingArray");function Ld(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}o(Ld,"appendNodes");function Zi(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let s=!1;for(let a=t.length-1;a>=0;a--){const c=t[a];if(i!==c){const u=c.parentNode===e;!s&&!a?u?e.replaceChild(i,c):e.insertBefore(i,n):u&&c.remove()}else s=!0}}else e.insertBefore(i,n);return[i]}o(Zi,"cleanChildren");function Aw(){return Re.getNextContextId()}o(Aw,"getHydrationKey");const d0=!1,Mw="http://www.w3.org/2000/svg";function h0(e,t=!1){return t?document.createElementNS(Mw,e):document.createElement(e)}o(h0,"createElement");function V6(e){const{useShadow:t}=e,n=document.createTextNode(""),r=o(()=>e.mount||document.body,"mount"),i=Ys();let s,a=!!Re.context;return at(()=>{a&&(Ys().user=a=!1),s||(s=af(i,()=>it(()=>e.children)));const c=r();if(c instanceof HTMLHeadElement){const[u,l]=lt(!1),f=o(()=>l(!0),"cleanup");Xi(h=>Ot(c,()=>u()?h():s(),null)),on(f)}else{const u=h0(e.isSVG?"g":"div",e.isSVG),l=t&&u.attachShadow?u.attachShadow({mode:"open"}):u;Object.defineProperty(u,"_$host",{get(){return n.parentNode},configurable:!0}),Ot(l,s),c.appendChild(u),e.ref&&e.ref(u),on(()=>c.removeChild(u))}},void 0,{render:!a}),n}o(V6,"Portal");function K6(e){const[t,n]=a0(e,["component"]),r=it(()=>t.component);return it(()=>{const i=r();switch(typeof i){case"function":return Lt(()=>i(n));case"string":const s=hw.has(i),a=Re.context?Ew():h0(i,s);return f0(a,n,s),a}})}o(K6,"Dynamic");const Xs=Symbol("store-raw"),ar=Symbol("store-node"),kn=Symbol("store-has"),p0=Symbol("store-self");function g0(e){let t=e[$t];if(!t&&(Object.defineProperty(e,$t,{value:t=new Proxy(e,Tw)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=n.length;i<s;i++){const a=n[i];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}o(g0,"wrap$1");function kr(e){let t;return e!=null&&typeof e=="object"&&(e[$t]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}o(kr,"isWrappable");function ti(e,t=new Set){let n,r,i,s;if(n=e!=null&&e[Xs])return n;if(!kr(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,c=e.length;a<c;a++)i=e[a],(r=ti(i,t))!==i&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let u=0,l=a.length;u<l;u++)s=a[u],!c[s].get&&(i=e[s],(r=ti(i,t))!==i&&(e[s]=r))}return e}o(ti,"unwrap");function ss(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}o(ss,"getNodes");function Ti(e,t,n){if(e[t])return e[t];const[r,i]=lt(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}o(Ti,"getNode");function kw(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===$t||t===ar||(delete n.value,delete n.writable,n.get=()=>e[$t][t]),n}o(kw,"proxyDescriptor$1");function lf(e){rs()&&Ti(ss(e,ar),p0)()}o(lf,"trackSelf");function m0(e){return lf(e),Reflect.ownKeys(e)}o(m0,"ownKeys");const Tw={get(e,t,n){if(t===Xs)return e;if(t===$t)return n;if(t===Js)return lf(e),n;const r=ss(e,ar),i=r[t];let s=i?i():e[t];if(t===ar||t===kn||t==="__proto__")return s;if(!i){const a=Object.getOwnPropertyDescriptor(e,t);rs()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(s=Ti(r,t,s)())}return kr(s)?g0(s):s},has(e,t){return t===Xs||t===$t||t===Js||t===ar||t===kn||t==="__proto__"?!0:(rs()&&Ti(ss(e,kn),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:m0,getOwnPropertyDescriptor:kw};function un(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],s=e.length;n===void 0?(delete e[t],e[kn]&&e[kn][t]&&i!==void 0&&e[kn][t].$()):(e[t]=n,e[kn]&&e[kn][t]&&i===void 0&&e[kn][t].$());let a=ss(e,ar),c;if((c=Ti(a,t,i))&&c.$(()=>n),Array.isArray(e)&&e.length!==s){for(let u=e.length;u<s;u++)(c=a[u])&&c.$();(c=Ti(a,"length",s))&&c.$(e.length)}(c=a[p0])&&c.$()}o(un,"setProperty");function y0(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];un(e,i,t[i])}}o(y0,"mergeStoreNode");function Nw(e,t){if(typeof t=="function"&&(t=t(e)),t=ti(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const i=t[n];e[n]!==i&&un(e,n,i)}un(e,"length",r)}else y0(e,t)}o(Nw,"updateArray");function zs(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const a=typeof r,c=Array.isArray(e);if(Array.isArray(r)){for(let u=0;u<r.length;u++)zs(e,[r[u]].concat(t),n);return}else if(c&&a==="function"){for(let u=0;u<e.length;u++)r(e[u],u)&&zs(e,[u].concat(t),n);return}else if(c&&a==="object"){const{from:u=0,to:l=e.length-1,by:f=1}=r;for(let h=u;h<=l;h+=f)zs(e,[h].concat(t),n);return}else if(t.length>1){zs(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(i,n),s===i)||r===void 0&&s==null||(s=ti(s),r===void 0||kr(i)&&kr(s)&&!Array.isArray(s)?y0(i,s):un(e,r,s))}o(zs,"updatePath");function Xt(...[e,t]){const n=ti(e||{}),r=Array.isArray(n),i=g0(n);function s(...a){Jr(()=>{r&&a.length===1?Nw(n,a[0]):zs(n,a)})}return o(s,"setStore"),[i,s]}o(Xt,"createStore");function Iw(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||n.set||!n.configurable||t===$t||t===ar||(delete n.value,delete n.writable,n.get=()=>e[$t][t],n.set=r=>e[$t][t]=r),n}o(Iw,"proxyDescriptor");const Rw={get(e,t,n){if(t===Xs)return e;if(t===$t)return n;if(t===Js)return lf(e),n;const r=ss(e,ar),i=r[t];let s=i?i():e[t];if(t===ar||t===kn||t==="__proto__")return s;if(!i){const a=Object.getOwnPropertyDescriptor(e,t),c=typeof s=="function";if(rs()&&(!c||e.hasOwnProperty(t))&&!(a&&a.get))s=Ti(r,t,s)();else if(s!=null&&c&&s===Array.prototype[t])return(...u)=>Jr(()=>Array.prototype[t].apply(n,u))}return kr(s)?b0(s):s},has(e,t){return t===Xs||t===$t||t===Js||t===ar||t===kn||t==="__proto__"?!0:(rs()&&Ti(ss(e,kn),t)(),t in e)},set(e,t,n){return Jr(()=>un(e,t,ti(n))),!0},deleteProperty(e,t){return Jr(()=>un(e,t,void 0,!0)),!0},ownKeys:m0,getOwnPropertyDescriptor:Iw};function b0(e){let t=e[$t];if(!t){Object.defineProperty(e,$t,{value:t=new Proxy(e,Rw)});const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e),i=Object.getPrototypeOf(e),s=i!==null&&e!==null&&typeof e=="object"&&!Array.isArray(e)&&i!==Object.prototype;if(s){const a=Object.getOwnPropertyDescriptors(i);n.push(...Object.keys(a)),Object.assign(r,a)}for(let a=0,c=n.length;a<c;a++){const u=n[a];if(!(s&&u==="constructor")){if(r[u].get){const l=r[u].get.bind(t);Object.defineProperty(e,u,{get:l,configurable:!0})}if(r[u].set){const l=r[u].set;Object.defineProperty(e,u,{set:o(h=>Jr(()=>l.call(t,h)),"set"),configurable:!0})}}}}return t}o(b0,"wrap");function Lw(e,t){const n=ti(e||{});return b0(n)}o(Lw,"createMutable");const eu=Symbol("store-root");function Ji(e,t,n,r,i){const s=t[n];if(e===s)return;const a=Array.isArray(e);if(n!==eu&&(!kr(e)||!kr(s)||a!==Array.isArray(s)||i&&e[i]!==s[i])){un(t,n,e);return}if(a){if(e.length&&s.length&&(!r||i&&e[0]&&e[0][i]!=null)){let l,f,h,p,y,_,x,w;for(h=0,p=Math.min(s.length,e.length);h<p&&(s[h]===e[h]||i&&s[h]&&e[h]&&s[h][i]===e[h][i]);h++)Ji(e[h],s,h,r,i);const v=new Array(e.length),T=new Map;for(p=s.length-1,y=e.length-1;p>=h&&y>=h&&(s[p]===e[y]||i&&s[h]&&e[h]&&s[p][i]===e[y][i]);p--,y--)v[y]=s[p];if(h>y||h>p){for(f=h;f<=y;f++)un(s,f,e[f]);for(;f<e.length;f++)un(s,f,v[f]),Ji(e[f],s,f,r,i);s.length>e.length&&un(s,"length",e.length);return}for(x=new Array(y+1),f=y;f>=h;f--)_=e[f],w=i&&_?_[i]:_,l=T.get(w),x[f]=l===void 0?-1:l,T.set(w,f);for(l=h;l<=p;l++)_=s[l],w=i&&_?_[i]:_,f=T.get(w),f!==void 0&&f!==-1&&(v[f]=s[l],f=x[f],T.set(w,f));for(f=h;f<e.length;f++)f in v?(un(s,f,v[f]),Ji(e[f],s,f,r,i)):un(s,f,e[f])}else for(let l=0,f=e.length;l<f;l++)Ji(e[l],s,l,r,i);s.length>e.length&&un(s,"length",e.length);return}const c=Object.keys(e);for(let l=0,f=c.length;l<f;l++)Ji(e[c[l]],s,c[l],r,i);const u=Object.keys(s);for(let l=0,f=u.length;l<f;l++)e[u[l]]===void 0&&un(s,u[l],void 0)}o(Ji,"applyState");function Qn(e,t={}){const{merge:n,key:r="id"}=t,i=ti(e);return s=>{if(!kr(s)||!kr(i))return i;const a=Ji(i,{[eu]:s},eu,n,r);return a===void 0?s:a}}o(Qn,"reconcile");const tu="/assets/logo_fire-409917ad.svg",J6=Object.freeze(Object.defineProperty({__proto__:null,default:tu},Symbol.toStringTag,{value:"Module"})),nu="/assets/logo_ice-a42417b6.svg",Y6=Object.freeze(Object.defineProperty({__proto__:null,default:nu},Symbol.toStringTag,{value:"Module"})),Pw=1e3,Ow=60*Pw,w0=60*Ow,Cw=24*w0,Go={users:{},messages:[],postStats:{},noteActions:{},topZaps:{}},Bw="9a500dccc084a138330a1d1b2be0d5e86394624325d25084d3eca164e7ea698a",Fw=[{name:"sunset",label:"sunset wave",logo:tu,dark:!0},{name:"sunrise",label:"sunrise wave",logo:tu},{name:"midnight",label:"midnight wave",logo:nu,dark:!0},{name:"ice",label:"ice wave",logo:nu}],sc={names:{miljan:"d61f3bc5b3eb4400efdae6169a5c17cabf3246b514361de939ce4a1a0da6ef4a",marko:"123afae7d187ba36d6ddcd97dbf4acc59aeffe243f782592ff8f25ed579df306",essguess:"0b13870379cf18ae6b6d516d9f0833e0273c7a6758652a698e11f04c9c1a0d29",pr:"dd9b989dfe5e0840a92538f3e9f84f674e5f17ab05932efbacb4d8e6c905f302",marija:"b8a518a60fab9f3969b62238860f4643003b6437b75d60860dd8de34fb21c931",moysie:"2a55ed52ed31f85f8bdef3bdd165aa74265d82c952193d7b76fb4c76cccc4231",nikola:"97b988fbf4f8880493f925711e1bd806617b508fd3d28312288507e42f8a3368",princfilip:"29c07b40860f06df7c1ada6af2cc6b4c541b76a720542d7ee645c20c9452ffd2",highlights:"9a500dccc084a138330a1d1b2be0d5e86394624325d25084d3eca164e7ea698a",primal:"532d830dffe09c13e75e8b145c825718fc12b0003f61d61e9077721c7fff93cb",andi:"5fd8c6a375c431729a3b78e2080ffff0a1dc63f52e2a868a801151190a31f955",rockstar:"91c9a5e1a9744114c6fe2d61ae4de82629eaaa0fb52f48288093c7e7e036f832",qa:"88cc134b1a65f54ef48acc1df3665063d3ea45f04eab8af4646e561c5ae99079",jack:"82341f882b6eabcd2ba7f1ef90aad961cf074af15b9ef44a09f9d2a8fbfbe6a2"}},Uw=[];var W=(e=>(e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.Subscribe=7001]="Subscribe",e[e.Unsubscribe=7002]="Unsubscribe",e[e.Highlight=9802]="Highlight",e[e.Zap=9735]="Zap",e[e.MuteList=1e4]="MuteList",e[e.RelayList=10002]="RelayList",e[e.Bookmarks=10003]="Bookmarks",e[e.TierList=17e3]="TierList",e[e.CategorizedPeople=3e4]="CategorizedPeople",e[e.LongForm=30023]="LongForm",e[e.Settings=30078]="Settings",e[e.DVM=31990]="DVM",e[e.Tier=37001]="Tier",e[e.ACK=10000098]="ACK",e[e.NoteStats=10000100]="NoteStats",e[e.NetStats=10000101]="NetStats",e[e.LegendStats=10000102]="LegendStats",e[e.UserStats=10000105]="UserStats",e[e.OldestEvent=10000106]="OldestEvent",e[e.Mentions=10000107]="Mentions",e[e.UserScore=10000108]="UserScore",e[e.Notification=10000110]="Notification",e[e.Timestamp=10000111]="Timestamp",e[e.NotificationStats=10000112]="NotificationStats",e[e.FeedRange=10000113]="FeedRange",e[e.NoteActions=10000115]="NoteActions",e[e.MessageStats=10000117]="MessageStats",e[e.MesagePerSenderStats=10000118]="MesagePerSenderStats",e[e.MediaInfo=10000119]="MediaInfo",e[e.Upload=10000120]="Upload",e[e.Uploaded=10000121]="Uploaded",e[e.Releases=10000124]="Releases",e[e.ImportResponse=10000127]="ImportResponse",e[e.LinkMetadata=10000128]="LinkMetadata",e[e.EventZapInfo=10000129]="EventZapInfo",e[e.FilteringReason=10000131]="FilteringReason",e[e.UserFollowerCounts=10000133]="UserFollowerCounts",e[e.SuggestedUsersByCategory=10000134]="SuggestedUsersByCategory",e[e.UploadChunk=10000135]="UploadChunk",e[e.UserRelays=10000139]="UserRelays",e[e.RelayHint=10000141]="RelayHint",e[e.NoteQuoteStats=10000143]="NoteQuoteStats",e[e.WordCount=10000144]="WordCount",e[e.FeaturedAuthors=10000148]="FeaturedAuthors",e[e.DVMFollowsActions=10000156]="DVMFollowsActions",e[e.UserFollowerIncrease=10000157]="UserFollowerIncrease",e[e.VerifiedUsersDict=10000158]="VerifiedUsersDict",e[e.DVMMetadata=10000159]="DVMMetadata",e[e.NoteTopicStat=10000160]="NoteTopicStat",e[e.MediaStats=10000163]="MediaStats",e[e.MediaList=10000164]="MediaList",e[e.ContentStats=10000166]="ContentStats",e[e.BroadcastStatus=10000167]="BroadcastStatus",e[e.LegendCustomization=10000168]="LegendCustomization",e[e.MembershipCohortInfo=10000169]="MembershipCohortInfo",e[e.WALLET_OPERATION=10000300]="WALLET_OPERATION",e[e.ExchangeRate=10000305]="ExchangeRate",e[e.OrderHistory=10000605]="OrderHistory",e[e.LongFormShell=10030023]="LongFormShell",e))(W||{});const ga=1e3;var Pt=(e=>(e[e.NEW_USER_FOLLOWED_YOU=1]="NEW_USER_FOLLOWED_YOU",e[e.USER_UNFOLLOWED_YOU=2]="USER_UNFOLLOWED_YOU",e[e.YOUR_POST_WAS_ZAPPED=3]="YOUR_POST_WAS_ZAPPED",e[e.YOUR_POST_WAS_LIKED=4]="YOUR_POST_WAS_LIKED",e[e.YOUR_POST_WAS_REPOSTED=5]="YOUR_POST_WAS_REPOSTED",e[e.YOUR_POST_WAS_REPLIED_TO=6]="YOUR_POST_WAS_REPLIED_TO",e[e.YOU_WERE_MENTIONED_IN_POST=7]="YOU_WERE_MENTIONED_IN_POST",e[e.YOUR_POST_WAS_MENTIONED_IN_POST=8]="YOUR_POST_WAS_MENTIONED_IN_POST",e[e.POST_YOU_WERE_MENTIONED_IN_WAS_ZAPPED=101]="POST_YOU_WERE_MENTIONED_IN_WAS_ZAPPED",e[e.POST_YOU_WERE_MENTIONED_IN_WAS_LIKED=102]="POST_YOU_WERE_MENTIONED_IN_WAS_LIKED",e[e.POST_YOU_WERE_MENTIONED_IN_WAS_REPOSTED=103]="POST_YOU_WERE_MENTIONED_IN_WAS_REPOSTED",e[e.POST_YOU_WERE_MENTIONED_IN_WAS_REPLIED_TO=104]="POST_YOU_WERE_MENTIONED_IN_WAS_REPLIED_TO",e[e.POST_YOUR_POST_WAS_MENTIONED_IN_WAS_ZAPPED=201]="POST_YOUR_POST_WAS_MENTIONED_IN_WAS_ZAPPED",e[e.POST_YOUR_POST_WAS_MENTIONED_IN_WAS_LIKED=202]="POST_YOUR_POST_WAS_MENTIONED_IN_WAS_LIKED",e[e.POST_YOUR_POST_WAS_MENTIONED_IN_WAS_REPOSTED=203]="POST_YOUR_POST_WAS_MENTIONED_IN_WAS_REPOSTED",e[e.POST_YOUR_POST_WAS_MENTIONED_IN_WAS_REPLIED_TO=204]="POST_YOUR_POST_WAS_MENTIONED_IN_WAS_REPLIED_TO",e))(Pt||{});const Q6={1:"follower",2:"follower",3:"who_zapped_it",4:"who_liked_it",5:"who_reposted_it",6:"who_replied_to_it",7:"you_were_mentioned_by",8:"your_post_were_mentioned_by",101:"who_zapped_it",102:"who_liked_it",103:"who_reposted_it",104:"who_replied_to_it",201:"who_zapped_it",202:"who_liked_it",203:"who_reposted_it",204:"who_replied_to_it"},X6={3:"your_post",4:"your_post",5:"your_post",6:"reply",7:"you_were_mentioned_in",8:"your_post_were_mentioned_in",101:"post_you_were_mentioned_in",102:"post_you_were_mentioned_in",103:"post_you_were_mentioned_in",104:"reply",201:"your_post_were_mentioned_in",202:"your_post_were_mentioned_in",203:"your_post_were_mentioned_in",204:"reply"},e4=/^[a-zA-Z0-9\-\_]+$/,Dw=/open\.spotify\.com\/(track|album|playlist|episode)\/([a-zA-Z0-9]+)/,$w=/twitch.tv\/([a-z0-9_]+$)/i,ru=/mixcloud\.com\/(?!live)([a-zA-Z0-9]+)\/([a-zA-Z0-9-]+)/,Hw=/soundcloud\.com\/(?!live)([a-zA-Z0-9]+)\/([a-zA-Z0-9-]+)/,zw=/music\.apple\.com\/([a-z]{2}\/)?(?:album|playlist)\/[\w\d-]+\/([.a-zA-Z0-9-]+)(?:\?i=\d+)?/i,Zw=/https?:\/\/(?:player\.|www\.)?wavlake\.com\/(?!top|new|artists|account|activity|login|preferences|feed|profile)(?:(?:track|album)\/[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}|[a-z-]+)/i,_0=/(?:https?:\/\/)?(?:www|m\.)?(?:youtu\.be\/|youtube\.com\/(?:live\/|shorts\/|embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})/,Ww=/https?:\/\/(www\.)?[-a-zA-Z0-9\u00F0-\u02AF@:%._\+~#=]{1,256}\.[a-zA-Z0-9\u00F0-\u02AF()]{1,8}\b([-a-zA-Z0-9\u00F0-\u02AF()@:%_\+.~#?&//=]*)/i,jw=/https?:\/\/(www\.)?[-a-zA-Z0-9\u00F0-\u02AF@:%._\+~#=]{1,256}\.[a-zA-Z0-9\u00F0-\u02AF()]{1,8}\b([-a-zA-Z0-9\u00F0-\u02AF()@:%_\+.~#?&//=]*)/ig,t4=/https?:\/\/\S+\.[^()]+(?:\([^)]*\))*/,Gw=/^(\.|,|;|\?|\!)$/,qw=/(?:\s|^)\:\w+\:/,Vw=/lnbc[a-zA-Z0-9]*/,Kw=/bitcoin:[a-zA-Z0-9]*(\?.*)lightning=([a-zA-Z0-9]*)(&.*|$)/,Jw=/(?:\s|^)#[^\s!@#$%^&*(),.?":{}|<>]+/i,n4=/(\r\n|\r|\n)/ig,Yw=/\#\[([0-9]*)\]/,r4=/nostr:((note|nevent)1\w+)\b/g,Qw=/nostr:((note|nevent)1\w+)\b/,Xw=/nostr:((npub|nprofile)1\w+)\b/,i4=/nostr:((npub|nprofile)1\w+)\b/g,e_=/nostr:((naddr)1\w+)\b/,s4=/nostr:((naddr)1\w+)\b/g,o4=/(?:\s|^)@\`(.*?)\`/ig,a4=/(http(s?):)([/|.|\w|\s|-])*\.(?:png|jpg|jpeg|webp|gif|format=png)/g,c4=/(http(s?):)([/|.|\w|\s|-])*\.(?:png|jpg|jpeg|webp|gif|mp4|mov|ogg|webm|format=png)/g,l4=/(http(s?):)([/|.|\w|\s|-])*\.(?:png|jpg|jpeg|webp|gif|mp4|mov|ogg|webm|format=png)/,u4=/(?:\s|^)nostr:((note|nevent|naddr)1\w+)\b/,f4=/(https?:\/\/.*\.(?:png|jpg))|\!\[(.*?)\]\((https?:\/\/.*\.(?:png|jpg))\)/i,d4=/[^A-Za-z0-9]/,h4=/[^A-Za-z0-9\-\_]/,p4=200,g4=200,m4=238,y4=99,v0={NEW_USER_FOLLOWED_YOU:!0,USER_UNFOLLOWED_YOU:!0,YOUR_POST_WAS_ZAPPED:!0,YOUR_POST_WAS_LIKED:!0,YOUR_POST_WAS_REPOSTED:!0,YOUR_POST_WAS_REPLIED_TO:!0,YOU_WERE_MENTIONED_IN_POST:!0,YOUR_POST_WAS_MENTIONED_IN_POST:!0,POST_YOU_WERE_MENTIONED_IN_WAS_ZAPPED:!0,POST_YOU_WERE_MENTIONED_IN_WAS_LIKED:!0,POST_YOU_WERE_MENTIONED_IN_WAS_REPOSTED:!0,POST_YOU_WERE_MENTIONED_IN_WAS_REPLIED_TO:!0,POST_YOUR_POST_WAS_MENTIONED_IN_WAS_ZAPPED:!0,POST_YOUR_POST_WAS_MENTIONED_IN_WAS_LIKED:!0,POST_YOUR_POST_WAS_MENTIONED_IN_WAS_REPOSTED:!0,POST_YOUR_POST_WAS_MENTIONED_IN_WAS_REPLIED_TO:!0},b4=0;new Date().getTime();const E0=new Date("12/19/2023").getTime(),x0="1.1.10",w4="https://apps.apple.com/us/app/primal/id1673134518",S0=new Date("02/02/2024").getTime(),A0="0.91.2",_4="https://play.google.com/store/apps/details?id=net.primal.android",M0={amount:42,message:"Onward 🫡"},k0=[{emoji:"👍",amount:21,message:"Great post 👍"},{emoji:"🚀",amount:420,message:"Let's go 🚀"},{emoji:"☕",amount:1e3,message:"Coffie on me ☕"},{emoji:"🍻",amount:5e3,message:"Cheers 🍻"},{emoji:"🍷",amount:1e4,message:"Party time 🍷"},{emoji:"👑",amount:1e5,message:"Generational wealth 👑"}],T0="content",uf="trending",t_={name:"primal_spam",scopes:[T0,uf]},n_={name:"primal_nsfw",scopes:[uf]},N0=[t_,n_],v4="npub1tkpg9lyfgy83c4mgrgkrhzl90t732ekzvt73m6658xva88g5rj6qy6ntw4",E4=["primal_spam","primal_nsfw"],x4=50,eo="prpec",I0="?iv=",S4={regular:100,premium:1024,premiumLegend:1024},A4={paymentRequest:"",sections:[],expiry:0,route_hints:[]},r_=["a","e"],Pd=7*24*60*60*1e3,xt=o((...e)=>{localStorage.getItem("devMode")==="true"&&console.log(...e)},"logInfo"),en=o((...e)=>{localStorage.getItem("devMode")==="true"&&console.warn(...e)},"logWarning"),nt=o((...e)=>{localStorage.getItem("devMode")==="true"&&console.error(...e)},"logError");/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const i_=4,Od=0,Cd=1,s_=2;function ws(e){let t=e.length;for(;--t>=0;)e[t]=0}o(ws,"zero$1");const o_=0,R0=1,a_=2,c_=3,l_=258,ff=29,Io=256,to=Io+1+ff,es=30,df=19,L0=2*to+1,wi=15,qc=16,u_=7,hf=256,P0=16,O0=17,C0=18,iu=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ma=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),f_=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),B0=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d_=512,_r=new Array((to+2)*2);ws(_r);const qs=new Array(es*2);ws(qs);const no=new Array(d_);ws(no);const ro=new Array(l_-c_+1);ws(ro);const pf=new Array(ff);ws(pf);const La=new Array(es);ws(La);function Vc(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}o(Vc,"StaticTreeDesc");let F0,U0,D0;function Kc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}o(Kc,"TreeDesc");const $0=o(e=>e<256?no[e]:no[256+(e>>>7)],"d_code"),io=o((e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},"put_short"),dn=o((e,t,n)=>{e.bi_valid>qc-n?(e.bi_buf|=t<<e.bi_valid&65535,io(e,e.bi_buf),e.bi_buf=t>>qc-e.bi_valid,e.bi_valid+=n-qc):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},"send_bits"),nr=o((e,t,n)=>{dn(e,n[t*2],n[t*2+1])},"send_code"),H0=o((e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},"bi_reverse"),h_=o(e=>{e.bi_valid===16?(io(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},"bi_flush"),p_=o((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,c=t.stat_desc.extra_base,u=t.stat_desc.max_length;let l,f,h,p,y,_,x=0;for(p=0;p<=wi;p++)e.bl_count[p]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<L0;l++)f=e.heap[l],p=n[n[f*2+1]*2+1]+1,p>u&&(p=u,x++),n[f*2+1]=p,!(f>r)&&(e.bl_count[p]++,y=0,f>=c&&(y=a[f-c]),_=n[f*2],e.opt_len+=_*(p+y),s&&(e.static_len+=_*(i[f*2+1]+y)));if(x!==0){do{for(p=u-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[u]--,x-=2}while(x>0);for(p=u;p!==0;p--)for(f=e.bl_count[p];f!==0;)h=e.heap[--l],!(h>r)&&(n[h*2+1]!==p&&(e.opt_len+=(p-n[h*2+1])*n[h*2],n[h*2+1]=p),f--)}},"gen_bitlen"),z0=o((e,t,n)=>{const r=new Array(wi+1);let i=0,s,a;for(s=1;s<=wi;s++)i=i+n[s-1]<<1,r[s]=i;for(a=0;a<=t;a++){let c=e[a*2+1];c!==0&&(e[a*2]=H0(r[c]++,c))}},"gen_codes"),g_=o(()=>{let e,t,n,r,i;const s=new Array(wi+1);for(n=0,r=0;r<ff-1;r++)for(pf[r]=n,e=0;e<1<<iu[r];e++)ro[n++]=r;for(ro[n-1]=r,i=0,r=0;r<16;r++)for(La[r]=i,e=0;e<1<<ma[r];e++)no[i++]=r;for(i>>=7;r<es;r++)for(La[r]=i<<7,e=0;e<1<<ma[r]-7;e++)no[256+i++]=r;for(t=0;t<=wi;t++)s[t]=0;for(e=0;e<=143;)_r[e*2+1]=8,e++,s[8]++;for(;e<=255;)_r[e*2+1]=9,e++,s[9]++;for(;e<=279;)_r[e*2+1]=7,e++,s[7]++;for(;e<=287;)_r[e*2+1]=8,e++,s[8]++;for(z0(_r,to+1,s),e=0;e<es;e++)qs[e*2+1]=5,qs[e*2]=H0(e,5);F0=new Vc(_r,iu,Io+1,to,wi),U0=new Vc(qs,ma,0,es,wi),D0=new Vc(new Array(0),f_,0,df,u_)},"tr_static_init"),Z0=o(e=>{let t;for(t=0;t<to;t++)e.dyn_ltree[t*2]=0;for(t=0;t<es;t++)e.dyn_dtree[t*2]=0;for(t=0;t<df;t++)e.bl_tree[t*2]=0;e.dyn_ltree[hf*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},"init_block"),W0=o(e=>{e.bi_valid>8?io(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},"bi_windup"),Bd=o((e,t,n,r)=>{const i=t*2,s=n*2;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},"smaller"),Jc=o((e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Bd(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Bd(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},"pqdownheap"),Fd=o((e,t,n)=>{let r,i,s=0,a,c;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+s++]&255,r+=(e.pending_buf[e.sym_buf+s++]&255)<<8,i=e.pending_buf[e.sym_buf+s++],r===0?nr(e,i,t):(a=ro[i],nr(e,a+Io+1,t),c=iu[a],c!==0&&(i-=pf[a],dn(e,i,c)),r--,a=$0(r),nr(e,a,n),c=ma[a],c!==0&&(r-=La[a],dn(e,r,c)));while(s<e.sym_next);nr(e,hf,t)},"compress_block"),su=o((e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let a,c,u=-1,l;for(e.heap_len=0,e.heap_max=L0,a=0;a<s;a++)n[a*2]!==0?(e.heap[++e.heap_len]=u=a,e.depth[a]=0):n[a*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=u<2?++u:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[l*2+1]);for(t.max_code=u,a=e.heap_len>>1;a>=1;a--)Jc(e,n,a);l=s;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Jc(e,n,1),c=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=c,n[l*2]=n[a*2]+n[c*2],e.depth[l]=(e.depth[a]>=e.depth[c]?e.depth[a]:e.depth[c])+1,n[a*2+1]=n[c*2+1]=l,e.heap[1]=l++,Jc(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],p_(e,t),z0(n,u,e.bl_count)},"build_tree"),Ud=o((e,t,n)=>{let r,i=-1,s,a=t[0*2+1],c=0,u=7,l=4;for(a===0&&(u=138,l=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)s=a,a=t[(r+1)*2+1],!(++c<u&&s===a)&&(c<l?e.bl_tree[s*2]+=c:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[P0*2]++):c<=10?e.bl_tree[O0*2]++:e.bl_tree[C0*2]++,c=0,i=s,a===0?(u=138,l=3):s===a?(u=6,l=3):(u=7,l=4))},"scan_tree"),Dd=o((e,t,n)=>{let r,i=-1,s,a=t[0*2+1],c=0,u=7,l=4;for(a===0&&(u=138,l=3),r=0;r<=n;r++)if(s=a,a=t[(r+1)*2+1],!(++c<u&&s===a)){if(c<l)do nr(e,s,e.bl_tree);while(--c!==0);else s!==0?(s!==i&&(nr(e,s,e.bl_tree),c--),nr(e,P0,e.bl_tree),dn(e,c-3,2)):c<=10?(nr(e,O0,e.bl_tree),dn(e,c-3,3)):(nr(e,C0,e.bl_tree),dn(e,c-11,7));c=0,i=s,a===0?(u=138,l=3):s===a?(u=6,l=3):(u=7,l=4)}},"send_tree"),m_=o(e=>{let t;for(Ud(e,e.dyn_ltree,e.l_desc.max_code),Ud(e,e.dyn_dtree,e.d_desc.max_code),su(e,e.bl_desc),t=df-1;t>=3&&e.bl_tree[B0[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},"build_bl_tree"),y_=o((e,t,n,r)=>{let i;for(dn(e,t-257,5),dn(e,n-1,5),dn(e,r-4,4),i=0;i<r;i++)dn(e,e.bl_tree[B0[i]*2+1],3);Dd(e,e.dyn_ltree,t-1),Dd(e,e.dyn_dtree,n-1)},"send_all_trees"),b_=o(e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Od;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Cd;for(n=32;n<Io;n++)if(e.dyn_ltree[n*2]!==0)return Cd;return Od},"detect_data_type");let $d=!1;const w_=o(e=>{$d||(g_(),$d=!0),e.l_desc=new Kc(e.dyn_ltree,F0),e.d_desc=new Kc(e.dyn_dtree,U0),e.bl_desc=new Kc(e.bl_tree,D0),e.bi_buf=0,e.bi_valid=0,Z0(e)},"_tr_init$1"),j0=o((e,t,n,r)=>{dn(e,(o_<<1)+(r?1:0),3),W0(e),io(e,n),io(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},"_tr_stored_block$1"),__=o(e=>{dn(e,R0<<1,3),nr(e,hf,_r),h_(e)},"_tr_align$1"),v_=o((e,t,n,r)=>{let i,s,a=0;e.level>0?(e.strm.data_type===s_&&(e.strm.data_type=b_(e)),su(e,e.l_desc),su(e,e.d_desc),a=m_(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&t!==-1?j0(e,t,n,r):e.strategy===i_||s===i?(dn(e,(R0<<1)+(r?1:0),3),Fd(e,_r,qs)):(dn(e,(a_<<1)+(r?1:0),3),y_(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),Fd(e,e.dyn_ltree,e.dyn_dtree)),Z0(e),r&&W0(e)},"_tr_flush_block$1"),E_=o((e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(ro[n]+Io+1)*2]++,e.dyn_dtree[$0(t)*2]++),e.sym_next===e.sym_end),"_tr_tally$1");var x_=w_,S_=j0,A_=v_,M_=E_,k_=__,T_={_tr_init:x_,_tr_stored_block:S_,_tr_flush_block:A_,_tr_tally:M_,_tr_align:k_};const N_=o((e,t,n,r)=>{let i=e&65535|0,s=e>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0},"adler32");var so=N_;const I_=o(()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},"makeTable"),R_=new Uint32Array(I_()),L_=o((e,t,n,r)=>{const i=R_,s=r+n;e^=-1;for(let a=r;a<s;a++)e=e>>>8^i[(e^t[a])&255];return e^-1},"crc32");var Bt=L_,Ni={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ui={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:P_,_tr_stored_block:ou,_tr_flush_block:O_,_tr_tally:Yr,_tr_align:C_}=T_,{Z_NO_FLUSH:Qr,Z_PARTIAL_FLUSH:B_,Z_FULL_FLUSH:F_,Z_FINISH:Tn,Z_BLOCK:Hd,Z_OK:jt,Z_STREAM_END:zd,Z_STREAM_ERROR:cr,Z_DATA_ERROR:U_,Z_BUF_ERROR:Yc,Z_DEFAULT_COMPRESSION:D_,Z_FILTERED:$_,Z_HUFFMAN_ONLY:qo,Z_RLE:H_,Z_FIXED:z_,Z_DEFAULT_STRATEGY:Z_,Z_UNKNOWN:W_,Z_DEFLATED:oc}=Ui,j_=9,G_=15,q_=8,V_=29,K_=256,au=K_+1+V_,J_=30,Y_=19,Q_=2*au+1,X_=15,Ve=3,Vr=258,lr=Vr+Ve+1,ev=32,os=42,gf=57,cu=69,lu=73,uu=91,fu=103,_i=113,Zs=666,rn=1,_s=2,Ii=3,vs=4,tv=3,vi=o((e,t)=>(e.msg=Ni[t],t),"err"),Zd=o(e=>e*2-(e>4?9:0),"rank"),Gr=o(e=>{let t=e.length;for(;--t>=0;)e[t]=0},"zero"),nv=o(e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)},"slide_hash");let rv=o((e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,"HASH_ZLIB"),Xr=rv;const mn=o(e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},"flush_pending"),bn=o((e,t)=>{O_(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,mn(e.strm)},"flush_block_only"),et=o((e,t)=>{e.pending_buf[e.pending++]=t},"put_byte"),Ps=o((e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},"putShortMSB"),du=o((e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=so(e.adler,t,i,n):e.state.wrap===2&&(e.adler=Bt(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},"read_buf"),G0=o((e,t)=>{let n=e.max_chain_length,r=e.strstart,i,s,a=e.prev_length,c=e.nice_match;const u=e.strstart>e.w_size-lr?e.strstart-(e.w_size-lr):0,l=e.window,f=e.w_mask,h=e.prev,p=e.strstart+Vr;let y=l[r+a-1],_=l[r+a];e.prev_length>=e.good_match&&(n>>=2),c>e.lookahead&&(c=e.lookahead);do if(i=t,!(l[i+a]!==_||l[i+a-1]!==y||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<p);if(s=Vr-(p-r),r=p-Vr,s>a){if(e.match_start=t,a=s,s>=c)break;y=l[r+a-1],_=l[r+a]}}while((t=h[t&f])>u&&--n!==0);return a<=e.lookahead?a:e.lookahead},"longest_match"),as=o(e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-lr)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),nv(e),r+=t),e.strm.avail_in===0)break;if(n=du(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=Ve)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Xr(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Xr(e,e.ins_h,e.window[i+Ve-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Ve)););}while(e.lookahead<lr&&e.strm.avail_in!==0)},"fill_window"),q0=o((e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,s,a=0,c=e.strm.avail_in;do{if(r=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>s&&(r=s),r<n&&(r===0&&t!==Tn||t===Qr||r!==i+e.strm.avail_in)))break;a=t===Tn&&r===i+e.strm.avail_in?1:0,ou(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,mn(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(du(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(a===0);return c-=e.strm.avail_in,c&&(c>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=c&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-c,e.strm.next_in),e.strstart),e.strstart+=c,e.insert+=c>e.w_size-e.insert?e.w_size-e.insert:c),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?vs:t!==Qr&&t!==Tn&&e.strm.avail_in===0&&e.strstart===e.block_start?_s:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(du(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,n=s>e.w_size?e.w_size:s,i=e.strstart-e.block_start,(i>=n||(i||t===Tn)&&t!==Qr&&e.strm.avail_in===0&&i<=s)&&(r=i>s?s:i,a=t===Tn&&e.strm.avail_in===0&&r===i?1:0,ou(e,e.block_start,r,a),e.block_start+=r,mn(e.strm)),a?Ii:rn)},"deflate_stored"),Qc=o((e,t)=>{let n,r;for(;;){if(e.lookahead<lr){if(as(e),e.lookahead<lr&&t===Qr)return rn;if(e.lookahead===0)break}if(n=0,e.lookahead>=Ve&&(e.ins_h=Xr(e,e.ins_h,e.window[e.strstart+Ve-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-lr&&(e.match_length=G0(e,n)),e.match_length>=Ve)if(r=Yr(e,e.strstart-e.match_start,e.match_length-Ve),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Ve){e.match_length--;do e.strstart++,e.ins_h=Xr(e,e.ins_h,e.window[e.strstart+Ve-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Xr(e,e.ins_h,e.window[e.strstart+1]);else r=Yr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(bn(e,!1),e.strm.avail_out===0))return rn}return e.insert=e.strstart<Ve-1?e.strstart:Ve-1,t===Tn?(bn(e,!0),e.strm.avail_out===0?Ii:vs):e.sym_next&&(bn(e,!1),e.strm.avail_out===0)?rn:_s},"deflate_fast"),Wi=o((e,t)=>{let n,r,i;for(;;){if(e.lookahead<lr){if(as(e),e.lookahead<lr&&t===Qr)return rn;if(e.lookahead===0)break}if(n=0,e.lookahead>=Ve&&(e.ins_h=Xr(e,e.ins_h,e.window[e.strstart+Ve-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Ve-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-lr&&(e.match_length=G0(e,n),e.match_length<=5&&(e.strategy===$_||e.match_length===Ve&&e.strstart-e.match_start>4096)&&(e.match_length=Ve-1)),e.prev_length>=Ve&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Ve,r=Yr(e,e.strstart-1-e.prev_match,e.prev_length-Ve),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Xr(e,e.ins_h,e.window[e.strstart+Ve-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Ve-1,e.strstart++,r&&(bn(e,!1),e.strm.avail_out===0))return rn}else if(e.match_available){if(r=Yr(e,0,e.window[e.strstart-1]),r&&bn(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return rn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Yr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Ve-1?e.strstart:Ve-1,t===Tn?(bn(e,!0),e.strm.avail_out===0?Ii:vs):e.sym_next&&(bn(e,!1),e.strm.avail_out===0)?rn:_s},"deflate_slow"),iv=o((e,t)=>{let n,r,i,s;const a=e.window;for(;;){if(e.lookahead<=Vr){if(as(e),e.lookahead<=Vr&&t===Qr)return rn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Ve&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){s=e.strstart+Vr;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);e.match_length=Vr-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Ve?(n=Yr(e,1,e.match_length-Ve),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Yr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(bn(e,!1),e.strm.avail_out===0))return rn}return e.insert=0,t===Tn?(bn(e,!0),e.strm.avail_out===0?Ii:vs):e.sym_next&&(bn(e,!1),e.strm.avail_out===0)?rn:_s},"deflate_rle"),sv=o((e,t)=>{let n;for(;;){if(e.lookahead===0&&(as(e),e.lookahead===0)){if(t===Qr)return rn;break}if(e.match_length=0,n=Yr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(bn(e,!1),e.strm.avail_out===0))return rn}return e.insert=0,t===Tn?(bn(e,!0),e.strm.avail_out===0?Ii:vs):e.sym_next&&(bn(e,!1),e.strm.avail_out===0)?rn:_s},"deflate_huff");function Gn(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}o(Gn,"Config");const Ws=[new Gn(0,0,0,0,q0),new Gn(4,4,8,4,Qc),new Gn(4,5,16,8,Qc),new Gn(4,6,32,32,Qc),new Gn(4,4,16,16,Wi),new Gn(8,16,32,32,Wi),new Gn(8,16,128,128,Wi),new Gn(8,32,128,256,Wi),new Gn(32,128,258,1024,Wi),new Gn(32,258,258,4096,Wi)],ov=o(e=>{e.window_size=2*e.w_size,Gr(e.head),e.max_lazy_match=Ws[e.level].max_lazy,e.good_match=Ws[e.level].good_length,e.nice_match=Ws[e.level].nice_length,e.max_chain_length=Ws[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Ve-1,e.match_available=0,e.ins_h=0},"lm_init");function av(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=oc,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Q_*2),this.dyn_dtree=new Uint16Array((2*J_+1)*2),this.bl_tree=new Uint16Array((2*Y_+1)*2),Gr(this.dyn_ltree),Gr(this.dyn_dtree),Gr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(X_+1),this.heap=new Uint16Array(2*au+1),Gr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*au+1),Gr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}o(av,"DeflateState");const Ro=o(e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==os&&t.status!==gf&&t.status!==cu&&t.status!==lu&&t.status!==uu&&t.status!==fu&&t.status!==_i&&t.status!==Zs?1:0},"deflateStateCheck"),V0=o(e=>{if(Ro(e))return vi(e,cr);e.total_in=e.total_out=0,e.data_type=W_;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?gf:t.wrap?os:_i,e.adler=t.wrap===2?0:1,t.last_flush=-2,P_(t),jt},"deflateResetKeep"),K0=o(e=>{const t=V0(e);return t===jt&&ov(e.state),t},"deflateReset"),cv=o((e,t)=>Ro(e)||e.state.wrap!==2?cr:(e.state.gzhead=t,jt),"deflateSetHeader"),J0=o((e,t,n,r,i,s)=>{if(!e)return cr;let a=1;if(t===D_&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>j_||n!==oc||r<8||r>15||t<0||t>9||s<0||s>z_||r===8&&a!==1)return vi(e,cr);r===8&&(r=9);const c=new av;return e.state=c,c.strm=e,c.status=os,c.wrap=a,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=i+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+Ve-1)/Ve),c.window=new Uint8Array(c.w_size*2),c.head=new Uint16Array(c.hash_size),c.prev=new Uint16Array(c.w_size),c.lit_bufsize=1<<i+6,c.pending_buf_size=c.lit_bufsize*4,c.pending_buf=new Uint8Array(c.pending_buf_size),c.sym_buf=c.lit_bufsize,c.sym_end=(c.lit_bufsize-1)*3,c.level=t,c.strategy=s,c.method=n,K0(e)},"deflateInit2"),lv=o((e,t)=>J0(e,t,oc,G_,q_,Z_),"deflateInit"),uv=o((e,t)=>{if(Ro(e)||t>Hd||t<0)return e?vi(e,cr):cr;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===Zs&&t!==Tn)return vi(e,e.avail_out===0?Yc:cr);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(mn(e),e.avail_out===0)return n.last_flush=-1,jt}else if(e.avail_in===0&&Zd(t)<=Zd(r)&&t!==Tn)return vi(e,Yc);if(n.status===Zs&&e.avail_in!==0)return vi(e,Yc);if(n.status===os&&n.wrap===0&&(n.status=_i),n.status===os){let i=oc+(n.w_bits-8<<4)<<8,s=-1;if(n.strategy>=qo||n.level<2?s=0:n.level<6?s=1:n.level===6?s=2:s=3,i|=s<<6,n.strstart!==0&&(i|=ev),i+=31-i%31,Ps(n,i),n.strstart!==0&&(Ps(n,e.adler>>>16),Ps(n,e.adler&65535)),e.adler=1,n.status=_i,mn(e),n.pending!==0)return n.last_flush=-1,jt}if(n.status===gf){if(e.adler=0,et(n,31),et(n,139),et(n,8),n.gzhead)et(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),et(n,n.gzhead.time&255),et(n,n.gzhead.time>>8&255),et(n,n.gzhead.time>>16&255),et(n,n.gzhead.time>>24&255),et(n,n.level===9?2:n.strategy>=qo||n.level<2?4:0),et(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(et(n,n.gzhead.extra.length&255),et(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Bt(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=cu;else if(et(n,0),et(n,0),et(n,0),et(n,0),et(n,0),et(n,n.level===9?2:n.strategy>=qo||n.level<2?4:0),et(n,tv),n.status=_i,mn(e),n.pending!==0)return n.last_flush=-1,jt}if(n.status===cu){if(n.gzhead.extra){let i=n.pending,s=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+s>n.pending_buf_size;){let c=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+c),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=Bt(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=c,mn(e),n.pending!==0)return n.last_flush=-1,jt;i=0,s-=c}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending+=s,n.gzhead.hcrc&&n.pending>i&&(e.adler=Bt(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=lu}if(n.status===lu){if(n.gzhead.name){let i=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Bt(e.adler,n.pending_buf,n.pending-i,i)),mn(e),n.pending!==0)return n.last_flush=-1,jt;i=0}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,et(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Bt(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=uu}if(n.status===uu){if(n.gzhead.comment){let i=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Bt(e.adler,n.pending_buf,n.pending-i,i)),mn(e),n.pending!==0)return n.last_flush=-1,jt;i=0}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,et(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Bt(e.adler,n.pending_buf,n.pending-i,i))}n.status=fu}if(n.status===fu){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(mn(e),n.pending!==0))return n.last_flush=-1,jt;et(n,e.adler&255),et(n,e.adler>>8&255),e.adler=0}if(n.status=_i,mn(e),n.pending!==0)return n.last_flush=-1,jt}if(e.avail_in!==0||n.lookahead!==0||t!==Qr&&n.status!==Zs){let i=n.level===0?q0(n,t):n.strategy===qo?sv(n,t):n.strategy===H_?iv(n,t):Ws[n.level].func(n,t);if((i===Ii||i===vs)&&(n.status=Zs),i===rn||i===Ii)return e.avail_out===0&&(n.last_flush=-1),jt;if(i===_s&&(t===B_?C_(n):t!==Hd&&(ou(n,0,0,!1),t===F_&&(Gr(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),mn(e),e.avail_out===0))return n.last_flush=-1,jt}return t!==Tn?jt:n.wrap<=0?zd:(n.wrap===2?(et(n,e.adler&255),et(n,e.adler>>8&255),et(n,e.adler>>16&255),et(n,e.adler>>24&255),et(n,e.total_in&255),et(n,e.total_in>>8&255),et(n,e.total_in>>16&255),et(n,e.total_in>>24&255)):(Ps(n,e.adler>>>16),Ps(n,e.adler&65535)),mn(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?jt:zd)},"deflate$2"),fv=o(e=>{if(Ro(e))return cr;const t=e.state.status;return e.state=null,t===_i?vi(e,U_):jt},"deflateEnd"),dv=o((e,t)=>{let n=t.length;if(Ro(e))return cr;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==os||r.lookahead)return cr;if(i===1&&(e.adler=so(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(Gr(r.head),r.strstart=0,r.block_start=0,r.insert=0);let u=new Uint8Array(r.w_size);u.set(t.subarray(n-r.w_size,n),0),t=u,n=r.w_size}const s=e.avail_in,a=e.next_in,c=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,as(r);r.lookahead>=Ve;){let u=r.strstart,l=r.lookahead-(Ve-1);do r.ins_h=Xr(r,r.ins_h,r.window[u+Ve-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++;while(--l);r.strstart=u,r.lookahead=Ve-1,as(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Ve-1,r.match_available=0,e.next_in=a,e.input=c,e.avail_in=s,r.wrap=i,jt},"deflateSetDictionary");var hv=lv,pv=J0,gv=K0,mv=V0,yv=cv,bv=uv,wv=fv,_v=dv,vv="pako deflate (from Nodeca project)",Vs={deflateInit:hv,deflateInit2:pv,deflateReset:gv,deflateResetKeep:mv,deflateSetHeader:yv,deflate:bv,deflateEnd:wv,deflateSetDictionary:_v,deflateInfo:vv};const Ev=o((e,t)=>Object.prototype.hasOwnProperty.call(e,t),"_has");var xv=o(function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)Ev(n,r)&&(e[r]=n[r])}}return e},"assign"),Sv=o(e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let a=e[r];n.set(a,i),i+=a.length}return n},"flattenChunks"),ac={assign:xv,flattenChunks:Sv};let Y0=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Y0=!1}const oo=new Uint8Array(256);for(let e=0;e<256;e++)oo[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;oo[254]=oo[254]=1;var Av=o(e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,s,a=e.length,c=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(c),s=0,i=0;s<c;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t},"string2buf");const Mv=o((e,t)=>{if(t<65534&&e.subarray&&Y0)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n},"buf2binstring");var kv=o((e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let a=e[r++];if(a<128){s[i++]=a;continue}let c=oo[a];if(c>4){s[i++]=65533,r+=c-1;continue}for(a&=c===2?31:c===3?15:7;c>1&&r<n;)a=a<<6|e[r++]&63,c--;if(c>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return Mv(s,i)},"buf2string"),Tv=o((e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+oo[e[n]]>t?n:t},"utf8border"),ao={string2buf:Av,buf2string:kv,utf8border:Tv};function Nv(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}o(Nv,"ZStream");var Q0=Nv;const X0=Object.prototype.toString,{Z_NO_FLUSH:Iv,Z_SYNC_FLUSH:Rv,Z_FULL_FLUSH:Lv,Z_FINISH:Pv,Z_OK:Pa,Z_STREAM_END:Ov,Z_DEFAULT_COMPRESSION:Cv,Z_DEFAULT_STRATEGY:Bv,Z_DEFLATED:Fv}=Ui;function Lo(e){this.options=ac.assign({level:Cv,method:Fv,chunkSize:16384,windowBits:15,memLevel:8,strategy:Bv},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Q0,this.strm.avail_out=0;let n=Vs.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Pa)throw new Error(Ni[n]);if(t.header&&Vs.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=ao.string2buf(t.dictionary):X0.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=Vs.deflateSetDictionary(this.strm,r),n!==Pa)throw new Error(Ni[n]);this._dict_set=!0}}o(Lo,"Deflate$1");Lo.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?Pv:Iv,typeof e=="string"?n.input=ao.string2buf(e):X0.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===Rv||s===Lv)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=Vs.deflate(n,s),i===Ov)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Vs.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Pa;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Lo.prototype.onData=function(e){this.chunks.push(e)};Lo.prototype.onEnd=function(e){e===Pa&&(this.result=ac.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function mf(e,t){const n=new Lo(t);if(n.push(e,!0),n.err)throw n.msg||Ni[n.err];return n.result}o(mf,"deflate$1");function Uv(e,t){return t=t||{},t.raw=!0,mf(e,t)}o(Uv,"deflateRaw$1");function Dv(e,t){return t=t||{},t.gzip=!0,mf(e,t)}o(Dv,"gzip$1");var $v=Lo,Hv=mf,zv=Uv,Zv=Dv,Wv=Ui,jv={Deflate:$v,deflate:Hv,deflateRaw:zv,gzip:Zv,constants:Wv};const Vo=16209,Gv=16191;var qv=o(function(t,n){let r,i,s,a,c,u,l,f,h,p,y,_,x,w,v,T,N,I,C,D,U,H,B,z;const A=t.state;r=t.next_in,B=t.input,i=r+(t.avail_in-5),s=t.next_out,z=t.output,a=s-(n-t.avail_out),c=s+(t.avail_out-257),u=A.dmax,l=A.wsize,f=A.whave,h=A.wnext,p=A.window,y=A.hold,_=A.bits,x=A.lencode,w=A.distcode,v=(1<<A.lenbits)-1,T=(1<<A.distbits)-1;e:do{_<15&&(y+=B[r++]<<_,_+=8,y+=B[r++]<<_,_+=8),N=x[y&v];t:for(;;){if(I=N>>>24,y>>>=I,_-=I,I=N>>>16&255,I===0)z[s++]=N&65535;else if(I&16){C=N&65535,I&=15,I&&(_<I&&(y+=B[r++]<<_,_+=8),C+=y&(1<<I)-1,y>>>=I,_-=I),_<15&&(y+=B[r++]<<_,_+=8,y+=B[r++]<<_,_+=8),N=w[y&T];n:for(;;){if(I=N>>>24,y>>>=I,_-=I,I=N>>>16&255,I&16){if(D=N&65535,I&=15,_<I&&(y+=B[r++]<<_,_+=8,_<I&&(y+=B[r++]<<_,_+=8)),D+=y&(1<<I)-1,D>u){t.msg="invalid distance too far back",A.mode=Vo;break e}if(y>>>=I,_-=I,I=s-a,D>I){if(I=D-I,I>f&&A.sane){t.msg="invalid distance too far back",A.mode=Vo;break e}if(U=0,H=p,h===0){if(U+=l-I,I<C){C-=I;do z[s++]=p[U++];while(--I);U=s-D,H=z}}else if(h<I){if(U+=l+h-I,I-=h,I<C){C-=I;do z[s++]=p[U++];while(--I);if(U=0,h<C){I=h,C-=I;do z[s++]=p[U++];while(--I);U=s-D,H=z}}}else if(U+=h-I,I<C){C-=I;do z[s++]=p[U++];while(--I);U=s-D,H=z}for(;C>2;)z[s++]=H[U++],z[s++]=H[U++],z[s++]=H[U++],C-=3;C&&(z[s++]=H[U++],C>1&&(z[s++]=H[U++]))}else{U=s-D;do z[s++]=z[U++],z[s++]=z[U++],z[s++]=z[U++],C-=3;while(C>2);C&&(z[s++]=z[U++],C>1&&(z[s++]=z[U++]))}}else if(I&64){t.msg="invalid distance code",A.mode=Vo;break e}else{N=w[(N&65535)+(y&(1<<I)-1)];continue n}break}}else if(I&64)if(I&32){A.mode=Gv;break e}else{t.msg="invalid literal/length code",A.mode=Vo;break e}else{N=x[(N&65535)+(y&(1<<I)-1)];continue t}break}}while(r<i&&s<c);C=_>>3,r-=C,_-=C<<3,y&=(1<<_)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=s<c?257+(c-s):257-(s-c),A.hold=y,A.bits=_},"inflate_fast");const ji=15,Wd=852,jd=592,Gd=0,Xc=1,qd=2,Vv=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Kv=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Jv=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Yv=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Qv=o((e,t,n,r,i,s,a,c)=>{const u=c.bits;let l=0,f=0,h=0,p=0,y=0,_=0,x=0,w=0,v=0,T=0,N,I,C,D,U,H=null,B;const z=new Uint16Array(ji+1),A=new Uint16Array(ji+1);let d=null,m,S,R;for(l=0;l<=ji;l++)z[l]=0;for(f=0;f<r;f++)z[t[n+f]]++;for(y=u,p=ji;p>=1&&z[p]===0;p--);if(y>p&&(y=p),p===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,c.bits=1,0;for(h=1;h<p&&z[h]===0;h++);for(y<h&&(y=h),w=1,l=1;l<=ji;l++)if(w<<=1,w-=z[l],w<0)return-1;if(w>0&&(e===Gd||p!==1))return-1;for(A[1]=0,l=1;l<ji;l++)A[l+1]=A[l]+z[l];for(f=0;f<r;f++)t[n+f]!==0&&(a[A[t[n+f]]++]=f);if(e===Gd?(H=d=a,B=20):e===Xc?(H=Vv,d=Kv,B=257):(H=Jv,d=Yv,B=0),T=0,f=0,l=h,U=s,_=y,x=0,C=-1,v=1<<y,D=v-1,e===Xc&&v>Wd||e===qd&&v>jd)return 1;for(;;){m=l-x,a[f]+1<B?(S=0,R=a[f]):a[f]>=B?(S=d[a[f]-B],R=H[a[f]-B]):(S=32+64,R=0),N=1<<l-x,I=1<<_,h=I;do I-=N,i[U+(T>>x)+I]=m<<24|S<<16|R|0;while(I!==0);for(N=1<<l-1;T&N;)N>>=1;if(N!==0?(T&=N-1,T+=N):T=0,f++,--z[l]===0){if(l===p)break;l=t[n+a[f]]}if(l>y&&(T&D)!==C){for(x===0&&(x=y),U+=h,_=l-x,w=1<<_;_+x<p&&(w-=z[_+x],!(w<=0));)_++,w<<=1;if(v+=1<<_,e===Xc&&v>Wd||e===qd&&v>jd)return 1;C=T&D,i[C]=y<<24|_<<16|U-s|0}}return T!==0&&(i[U+T]=l-x<<24|64<<16|0),c.bits=y,0},"inflate_table");var Ks=Qv;const Xv=0,eg=1,tg=2,{Z_FINISH:Vd,Z_BLOCK:e1,Z_TREES:Ko,Z_OK:Ri,Z_STREAM_END:t1,Z_NEED_DICT:n1,Z_STREAM_ERROR:Nn,Z_DATA_ERROR:ng,Z_MEM_ERROR:rg,Z_BUF_ERROR:r1,Z_DEFLATED:Kd}=Ui,cc=16180,Jd=16181,Yd=16182,Qd=16183,Xd=16184,eh=16185,th=16186,nh=16187,rh=16188,ih=16189,Oa=16190,gr=16191,el=16192,sh=16193,tl=16194,oh=16195,ah=16196,ch=16197,lh=16198,Jo=16199,Yo=16200,uh=16201,fh=16202,dh=16203,hh=16204,ph=16205,nl=16206,gh=16207,mh=16208,mt=16209,ig=16210,sg=16211,i1=852,s1=592,o1=15,a1=o1,yh=o(e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24),"zswap32");function c1(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}o(c1,"InflateState");const Di=o(e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<cc||t.mode>sg?1:0},"inflateStateCheck"),og=o(e=>{if(Di(e))return Nn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=cc,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(i1),t.distcode=t.distdyn=new Int32Array(s1),t.sane=1,t.back=-1,Ri},"inflateResetKeep"),ag=o(e=>{if(Di(e))return Nn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,og(e)},"inflateReset"),cg=o((e,t)=>{let n;if(Di(e))return Nn;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Nn:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,ag(e))},"inflateReset2"),lg=o((e,t)=>{if(!e)return Nn;const n=new c1;e.state=n,n.strm=e,n.window=null,n.mode=cc;const r=cg(e,t);return r!==Ri&&(e.state=null),r},"inflateInit2"),l1=o(e=>lg(e,a1),"inflateInit");let bh=!0,rl,il;const u1=o(e=>{if(bh){rl=new Int32Array(512),il=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ks(eg,e.lens,0,288,rl,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ks(tg,e.lens,0,32,il,0,e.work,{bits:5}),bh=!1}e.lencode=rl,e.lenbits=9,e.distcode=il,e.distbits=5},"fixedtables"),ug=o((e,t,n,r)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},"updatewindow"),f1=o((e,t)=>{let n,r,i,s,a,c,u,l,f,h,p,y,_,x,w=0,v,T,N,I,C,D,U,H;const B=new Uint8Array(4);let z,A;const d=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Di(e)||!e.output||!e.input&&e.avail_in!==0)return Nn;n=e.state,n.mode===gr&&(n.mode=el),a=e.next_out,i=e.output,u=e.avail_out,s=e.next_in,r=e.input,c=e.avail_in,l=n.hold,f=n.bits,h=c,p=u,H=Ri;e:for(;;)switch(n.mode){case cc:if(n.wrap===0){n.mode=el;break}for(;f<16;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}if(n.wrap&2&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,B[0]=l&255,B[1]=l>>>8&255,n.check=Bt(n.check,B,2,0),l=0,f=0,n.mode=Jd;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=mt;break}if((l&15)!==Kd){e.msg="unknown compression method",n.mode=mt;break}if(l>>>=4,f-=4,U=(l&15)+8,n.wbits===0&&(n.wbits=U),U>15||U>n.wbits){e.msg="invalid window size",n.mode=mt;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=l&512?ih:gr,l=0,f=0;break;case Jd:for(;f<16;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}if(n.flags=l,(n.flags&255)!==Kd){e.msg="unknown compression method",n.mode=mt;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=mt;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&n.wrap&4&&(B[0]=l&255,B[1]=l>>>8&255,n.check=Bt(n.check,B,2,0)),l=0,f=0,n.mode=Yd;case Yd:for(;f<32;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}n.head&&(n.head.time=l),n.flags&512&&n.wrap&4&&(B[0]=l&255,B[1]=l>>>8&255,B[2]=l>>>16&255,B[3]=l>>>24&255,n.check=Bt(n.check,B,4,0)),l=0,f=0,n.mode=Qd;case Qd:for(;f<16;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&n.wrap&4&&(B[0]=l&255,B[1]=l>>>8&255,n.check=Bt(n.check,B,2,0)),l=0,f=0,n.mode=Xd;case Xd:if(n.flags&1024){for(;f<16;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&n.wrap&4&&(B[0]=l&255,B[1]=l>>>8&255,n.check=Bt(n.check,B,2,0)),l=0,f=0}else n.head&&(n.head.extra=null);n.mode=eh;case eh:if(n.flags&1024&&(y=n.length,y>c&&(y=c),y&&(n.head&&(U=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+y),U)),n.flags&512&&n.wrap&4&&(n.check=Bt(n.check,r,y,s)),c-=y,s+=y,n.length-=y),n.length))break e;n.length=0,n.mode=th;case th:if(n.flags&2048){if(c===0)break e;y=0;do U=r[s+y++],n.head&&U&&n.length<65536&&(n.head.name+=String.fromCharCode(U));while(U&&y<c);if(n.flags&512&&n.wrap&4&&(n.check=Bt(n.check,r,y,s)),c-=y,s+=y,U)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=nh;case nh:if(n.flags&4096){if(c===0)break e;y=0;do U=r[s+y++],n.head&&U&&n.length<65536&&(n.head.comment+=String.fromCharCode(U));while(U&&y<c);if(n.flags&512&&n.wrap&4&&(n.check=Bt(n.check,r,y,s)),c-=y,s+=y,U)break e}else n.head&&(n.head.comment=null);n.mode=rh;case rh:if(n.flags&512){for(;f<16;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}if(n.wrap&4&&l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=mt;break}l=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=gr;break;case ih:for(;f<32;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}e.adler=n.check=yh(l),l=0,f=0,n.mode=Oa;case Oa:if(n.havedict===0)return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=c,n.hold=l,n.bits=f,n1;e.adler=n.check=1,n.mode=gr;case gr:if(t===e1||t===Ko)break e;case el:if(n.last){l>>>=f&7,f-=f&7,n.mode=nl;break}for(;f<3;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}switch(n.last=l&1,l>>>=1,f-=1,l&3){case 0:n.mode=sh;break;case 1:if(u1(n),n.mode=Jo,t===Ko){l>>>=2,f-=2;break e}break;case 2:n.mode=ah;break;case 3:e.msg="invalid block type",n.mode=mt}l>>>=2,f-=2;break;case sh:for(l>>>=f&7,f-=f&7;f<32;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=mt;break}if(n.length=l&65535,l=0,f=0,n.mode=tl,t===Ko)break e;case tl:n.mode=oh;case oh:if(y=n.length,y){if(y>c&&(y=c),y>u&&(y=u),y===0)break e;i.set(r.subarray(s,s+y),a),c-=y,s+=y,u-=y,a+=y,n.length-=y;break}n.mode=gr;break;case ah:for(;f<14;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}if(n.nlen=(l&31)+257,l>>>=5,f-=5,n.ndist=(l&31)+1,l>>>=5,f-=5,n.ncode=(l&15)+4,l>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=mt;break}n.have=0,n.mode=ch;case ch:for(;n.have<n.ncode;){for(;f<3;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}n.lens[d[n.have++]]=l&7,l>>>=3,f-=3}for(;n.have<19;)n.lens[d[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},H=Ks(Xv,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,H){e.msg="invalid code lengths set",n.mode=mt;break}n.have=0,n.mode=lh;case lh:for(;n.have<n.nlen+n.ndist;){for(;w=n.lencode[l&(1<<n.lenbits)-1],v=w>>>24,T=w>>>16&255,N=w&65535,!(v<=f);){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}if(N<16)l>>>=v,f-=v,n.lens[n.have++]=N;else{if(N===16){for(A=v+2;f<A;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}if(l>>>=v,f-=v,n.have===0){e.msg="invalid bit length repeat",n.mode=mt;break}U=n.lens[n.have-1],y=3+(l&3),l>>>=2,f-=2}else if(N===17){for(A=v+3;f<A;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}l>>>=v,f-=v,U=0,y=3+(l&7),l>>>=3,f-=3}else{for(A=v+7;f<A;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}l>>>=v,f-=v,U=0,y=11+(l&127),l>>>=7,f-=7}if(n.have+y>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=mt;break}for(;y--;)n.lens[n.have++]=U}}if(n.mode===mt)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=mt;break}if(n.lenbits=9,z={bits:n.lenbits},H=Ks(eg,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,H){e.msg="invalid literal/lengths set",n.mode=mt;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},H=Ks(tg,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,H){e.msg="invalid distances set",n.mode=mt;break}if(n.mode=Jo,t===Ko)break e;case Jo:n.mode=Yo;case Yo:if(c>=6&&u>=258){e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=c,n.hold=l,n.bits=f,qv(e,p),a=e.next_out,i=e.output,u=e.avail_out,s=e.next_in,r=e.input,c=e.avail_in,l=n.hold,f=n.bits,n.mode===gr&&(n.back=-1);break}for(n.back=0;w=n.lencode[l&(1<<n.lenbits)-1],v=w>>>24,T=w>>>16&255,N=w&65535,!(v<=f);){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}if(T&&!(T&240)){for(I=v,C=T,D=N;w=n.lencode[D+((l&(1<<I+C)-1)>>I)],v=w>>>24,T=w>>>16&255,N=w&65535,!(I+v<=f);){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}l>>>=I,f-=I,n.back+=I}if(l>>>=v,f-=v,n.back+=v,n.length=N,T===0){n.mode=ph;break}if(T&32){n.back=-1,n.mode=gr;break}if(T&64){e.msg="invalid literal/length code",n.mode=mt;break}n.extra=T&15,n.mode=uh;case uh:if(n.extra){for(A=n.extra;f<A;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=fh;case fh:for(;w=n.distcode[l&(1<<n.distbits)-1],v=w>>>24,T=w>>>16&255,N=w&65535,!(v<=f);){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}if(!(T&240)){for(I=v,C=T,D=N;w=n.distcode[D+((l&(1<<I+C)-1)>>I)],v=w>>>24,T=w>>>16&255,N=w&65535,!(I+v<=f);){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}l>>>=I,f-=I,n.back+=I}if(l>>>=v,f-=v,n.back+=v,T&64){e.msg="invalid distance code",n.mode=mt;break}n.offset=N,n.extra=T&15,n.mode=dh;case dh:if(n.extra){for(A=n.extra;f<A;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=mt;break}n.mode=hh;case hh:if(u===0)break e;if(y=p-u,n.offset>y){if(y=n.offset-y,y>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=mt;break}y>n.wnext?(y-=n.wnext,_=n.wsize-y):_=n.wnext-y,y>n.length&&(y=n.length),x=n.window}else x=i,_=a-n.offset,y=n.length;y>u&&(y=u),u-=y,n.length-=y;do i[a++]=x[_++];while(--y);n.length===0&&(n.mode=Yo);break;case ph:if(u===0)break e;i[a++]=n.length,u--,n.mode=Yo;break;case nl:if(n.wrap){for(;f<32;){if(c===0)break e;c--,l|=r[s++]<<f,f+=8}if(p-=u,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?Bt(n.check,i,p,a-p):so(n.check,i,p,a-p)),p=u,n.wrap&4&&(n.flags?l:yh(l))!==n.check){e.msg="incorrect data check",n.mode=mt;break}l=0,f=0}n.mode=gh;case gh:if(n.wrap&&n.flags){for(;f<32;){if(c===0)break e;c--,l+=r[s++]<<f,f+=8}if(n.wrap&4&&l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=mt;break}l=0,f=0}n.mode=mh;case mh:H=t1;break e;case mt:H=ng;break e;case ig:return rg;case sg:default:return Nn}return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=c,n.hold=l,n.bits=f,(n.wsize||p!==e.avail_out&&n.mode<mt&&(n.mode<nl||t!==Vd))&&ug(e,e.output,e.next_out,p-e.avail_out),h-=e.avail_in,p-=e.avail_out,e.total_in+=h,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?Bt(n.check,i,p,e.next_out-p):so(n.check,i,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===gr?128:0)+(n.mode===Jo||n.mode===tl?256:0),(h===0&&p===0||t===Vd)&&H===Ri&&(H=r1),H},"inflate$2"),d1=o(e=>{if(Di(e))return Nn;let t=e.state;return t.window&&(t.window=null),e.state=null,Ri},"inflateEnd"),h1=o((e,t)=>{if(Di(e))return Nn;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Ri):Nn},"inflateGetHeader"),p1=o((e,t)=>{const n=t.length;let r,i,s;return Di(e)||(r=e.state,r.wrap!==0&&r.mode!==Oa)?Nn:r.mode===Oa&&(i=1,i=so(i,t,n,0),i!==r.check)?ng:(s=ug(e,t,n,n),s?(r.mode=ig,rg):(r.havedict=1,Ri))},"inflateSetDictionary");var g1=ag,m1=cg,y1=og,b1=l1,w1=lg,_1=f1,v1=d1,E1=h1,x1=p1,S1="pako inflate (from Nodeca project)",vr={inflateReset:g1,inflateReset2:m1,inflateResetKeep:y1,inflateInit:b1,inflateInit2:w1,inflate:_1,inflateEnd:v1,inflateGetHeader:E1,inflateSetDictionary:x1,inflateInfo:S1};function A1(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}o(A1,"GZheader");var M1=A1;const fg=Object.prototype.toString,{Z_NO_FLUSH:k1,Z_FINISH:T1,Z_OK:co,Z_STREAM_END:sl,Z_NEED_DICT:ol,Z_STREAM_ERROR:N1,Z_DATA_ERROR:wh,Z_MEM_ERROR:I1}=Ui;function Po(e){this.options=ac.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Q0,this.strm.avail_out=0;let n=vr.inflateInit2(this.strm,t.windowBits);if(n!==co)throw new Error(Ni[n]);if(this.header=new M1,vr.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ao.string2buf(t.dictionary):fg.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=vr.inflateSetDictionary(this.strm,t.dictionary),n!==co)))throw new Error(Ni[n])}o(Po,"Inflate$1");Po.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,a,c;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?T1:k1,fg.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=vr.inflate(n,a),s===ol&&i&&(s=vr.inflateSetDictionary(n,i),s===co?s=vr.inflate(n,a):s===wh&&(s=ol));n.avail_in>0&&s===sl&&n.state.wrap>0&&e[n.next_in]!==0;)vr.inflateReset(n),s=vr.inflate(n,a);switch(s){case N1:case wh:case ol:case I1:return this.onEnd(s),this.ended=!0,!1}if(c=n.avail_out,n.next_out&&(n.avail_out===0||s===sl))if(this.options.to==="string"){let u=ao.utf8border(n.output,n.next_out),l=n.next_out-u,f=ao.buf2string(n.output,u);n.next_out=l,n.avail_out=r-l,l&&n.output.set(n.output.subarray(u,u+l),0),this.onData(f)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===co&&c===0)){if(s===sl)return s=vr.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Po.prototype.onData=function(e){this.chunks.push(e)};Po.prototype.onEnd=function(e){e===co&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ac.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function yf(e,t){const n=new Po(t);if(n.push(e),n.err)throw n.msg||Ni[n.err];return n.result}o(yf,"inflate$1");function R1(e,t){return t=t||{},t.raw=!0,yf(e,t)}o(R1,"inflateRaw$1");var L1=Po,P1=yf,O1=R1,C1=yf,B1=Ui,F1={Inflate:L1,inflate:P1,inflateRaw:O1,ungzip:C1,constants:B1};const{Deflate:U1,deflate:D1,deflateRaw:$1,gzip:H1}=jv,{Inflate:z1,inflate:Z1,inflateRaw:W1,ungzip:j1}=F1;var G1=U1,q1=D1,V1=$1,K1=H1,J1=z1,Y1=Z1,Q1=W1,X1=j1,eE=Ui,tE={Deflate:G1,deflate:q1,deflateRaw:V1,gzip:K1,Inflate:J1,inflate:Y1,inflateRaw:Q1,ungzip:X1,constants:eE};const[nE,dg]=lt(!0),[yt,rE]=lt(),[ni,hu]=lt(!1),iE=o(()=>!ni(),"isNotConnected"),sE=o((e,t)=>{const n=`set_protocol_${ue}`,r=Me(n,{onEose:()=>{r(),t()}});Ee(JSON.stringify(["REQ",n,{cache:["set_primal_protocol",{compression:e}]}]),!0)},"setPrimalProtocol"),hg=o(()=>{if(localStorage.getItem("noBinary")==="true"?hu(!0):sE("zlib",()=>{hu(!0)}),localStorage.getItem("devMode")==="true"){const t=window.onPrimalCacheServerConnected;t&&t(lo,yt()),yt()?.addEventListener("message",function(n){const r=window.onPrimalCacheServerMessageReceived;r&&r(lo,n.data)})}},"onOpen"),pg=o(()=>{hu(!1),yt()?.removeEventListener("open",hg),yt()?.removeEventListener("close",pg),yt()?.removeEventListener("error",gg),nE()&&setTimeout(()=>{lc()},200)},"onClose"),gg=o(e=>{nt("ws error: ",e)},"onError");let lo="";const lc=o(()=>{if(iE()){lo=localStorage.getItem("cacheServer")||"wss://cache2.primal.net/v1";let e=new WebSocket(lo);e.binaryType="arraybuffer",rE(e),xt("CACHE SOCKET: ",yt()),yt()?.addEventListener("open",hg),yt()?.addEventListener("close",pg),yt()?.addEventListener("error",gg),dg(()=>!0)}},"connect"),bf=o((e=!0)=>{dg(()=>e),yt()?.close()},"disconnect"),oE=o(()=>{bf(),setTimeout(lc,1e3)},"reset"),Ee=o((e,t=!1)=>{if(ni()||t){const n=new CustomEvent("send",{detail:{message:e,ws:yt()}});yt()?.send(e),yt()?.dispatchEvent(n);const r=window.onPrimalCacheServerMessageSent;r&&r(lo,e)}else setTimeout(()=>{Ee(e)},100)},"sendMessage"),uc=o((e,t)=>{e&&Object.keys(t).forEach(n=>{e.removeEventListener(n,t[n]),e.addEventListener(n,t[n])})},"refreshSocketListeners"),ri=o((e,t)=>{e&&Object.keys(t).forEach(n=>{e.removeEventListener(n,t[n])})},"removeSocketListeners"),aE=o(async e=>{try{return tE.inflate(e,{to:"string"})}catch(t){return nt("ERROR PAKO: ",t),"{}"}},"decompressBlob"),Es=o(async e=>{if(typeof e.data=="string")return e.data;try{return await aE(e.data)}catch(t){return nt("ERROR TO DECOMPRESS BLOB: ",t),"{}"}},"readData"),cE=o((e,t,n)=>{const r=o(async i=>{const s=await Es(i),a=JSON.parse(s),[c,u,l]=a;if(c==="EVENTS"){let f=0;for(f=0;f<l.length;f++){const h=l[f];n("EVENT",u,h)}return}t===u&&n(c,u,l)},"listener");return e.addEventListener("message",r),()=>{e.removeEventListener("message",r)}},"subTo"),Me=o((e,t)=>{const n=o(async r=>{const i=await Es(r),s=JSON.parse(i),[a,c]=s;if(t&&e===c){if(a==="EVENTS"){const u=s[2];let l=0;for(l=0;l<u.length;l++){const f=u[l];t.onEvent&&t.onEvent(c,f)}}a==="EVENT"&&t.onEvent&&t.onEvent(c,s[2]),a==="EOSE"&&t.onEose&&t.onEose(c),a==="NOTICE"&&t.onNotice&&t.onNotice(c,s[2])}},"listener");return yt()?.addEventListener("message",n),()=>{yt()?.removeEventListener("message",n)}},"subsTo");function _h(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}o(_h,"number$4");function mg(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}o(mg,"bytes$3");function lE(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_h(e.outputLen),_h(e.blockLen)}o(lE,"hash$2");function Ca(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}o(Ca,"exists$2");function uE(e,t){mg(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}o(uE,"output$2");const al=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yg=o(e=>e instanceof Uint8Array,"u8a$2"),cl=o(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView$2"),qn=o((e,t)=>e<<32-t|e>>>t,"rotr$2"),fE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!fE)throw new Error("Non little-endian hardware is not supported");function dE(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}o(dE,"utf8ToBytes$4");function wf(e){if(typeof e=="string"&&(e=dE(e)),!yg(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}o(wf,"toBytes$2");function hE(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!yg(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}o(hE,"concatBytes$4");var po;let bg=(po=class{clone(){return this._cloneInto()}},o(po,"Hash"),po);function pE(e){const t=o(r=>e().update(wf(r)).digest(),"hashC"),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}o(pE,"wrapConstructor$2");function wg(e=32){if(al&&typeof al.getRandomValues=="function")return al.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}o(wg,"randomBytes$2");function gE(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),c=Number(n&s),u=r?4:0,l=r?0:4;e.setUint32(t+u,a,r),e.setUint32(t+l,c,r)}o(gE,"setBigUint64$2");var go;let mE=(go=class extends bg{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=cl(this.buffer)}update(t){Ca(this);const{view:n,buffer:r,blockLen:i}=this;t=wf(t);const s=t.length;for(let a=0;a<s;){const c=Math.min(i-this.pos,s-a);if(c===i){const u=cl(t);for(;i<=s-a;a+=i)this.process(u,a);continue}r.set(t.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ca(this),uE(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let h=a;h<i;h++)n[h]=0;gE(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=cl(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,f=this.get();if(l>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)c.setUint32(4*h,f[h],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:a,pos:c}=this;return t.length=i,t.pos=c,t.finished=s,t.destroyed=a,i%n&&t.buffer.set(r),t}},o(go,"SHA2"),go);const yE=o((e,t,n)=>e&t^~e&n,"Chi$2"),bE=o((e,t,n)=>e&t^e&n^t&n,"Maj$2"),wE=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Br=new Uint32Array(64);var mo;let _E=(mo=class extends mE{constructor(){super(64,32,8,!1),this.A=Cr[0]|0,this.B=Cr[1]|0,this.C=Cr[2]|0,this.D=Cr[3]|0,this.E=Cr[4]|0,this.F=Cr[5]|0,this.G=Cr[6]|0,this.H=Cr[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:a,G:c,H:u}=this;return[t,n,r,i,s,a,c,u]}set(t,n,r,i,s,a,c,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=c|0,this.H=u|0}process(t,n){for(let h=0;h<16;h++,n+=4)Br[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const p=Br[h-15],y=Br[h-2],_=qn(p,7)^qn(p,18)^p>>>3,x=qn(y,17)^qn(y,19)^y>>>10;Br[h]=x+Br[h-7]+_+Br[h-16]|0}let{A:r,B:i,C:s,D:a,E:c,F:u,G:l,H:f}=this;for(let h=0;h<64;h++){const p=qn(c,6)^qn(c,11)^qn(c,25),y=f+p+yE(c,u,l)+wE[h]+Br[h]|0,x=(qn(r,2)^qn(r,13)^qn(r,22))+bE(r,i,s)|0;f=l,l=u,u=c,c=a+y|0,a=s,s=i,i=r,r=y+x|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,c=c+this.E|0,u=u+this.F|0,l=l+this.G|0,f=f+this.H|0,this.set(r,i,s,a,c,u,l,f)}roundClean(){Br.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},o(mo,"SHA256"),mo);const pu=pE(()=>new _E);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _g=BigInt(0),fc=BigInt(1),vE=BigInt(2),dc=o(e=>e instanceof Uint8Array,"u8a$1"),EE=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function cs(e){if(!dc(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=EE[e[n]];return t}o(cs,"bytesToHex$3");function vg(e){const t=e.toString(16);return t.length&1?`0${t}`:t}o(vg,"numberToHexUnpadded$1");function _f(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}o(_f,"hexToNumber$2");function ls(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),a=Number.parseInt(s,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[r]=a}return n}o(ls,"hexToBytes$3");function hn(e){return _f(cs(e))}o(hn,"bytesToNumberBE$1");function vf(e){if(!dc(e))throw new Error("Uint8Array expected");return _f(cs(Uint8Array.from(e).reverse()))}o(vf,"bytesToNumberLE$1");function ii(e,t){return ls(e.toString(16).padStart(t*2,"0"))}o(ii,"numberToBytesBE$1");function Ef(e,t){return ii(e,t).reverse()}o(Ef,"numberToBytesLE$1");function xE(e){return ls(vg(e))}o(xE,"numberToVarBytesBE$1");function Jt(e,t,n){let r;if(typeof t=="string")try{r=ls(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(dc(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}o(Jt,"ensureBytes$1");function Li(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!dc(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}o(Li,"concatBytes$3");function SE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}o(SE,"equalBytes$2");function AE(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}o(AE,"utf8ToBytes$3");function ME(e){let t;for(t=0;e>_g;e>>=fc,t+=1);return t}o(ME,"bitLen$1");function kE(e,t){return e>>BigInt(t)&fc}o(kE,"bitGet$1");const TE=o((e,t,n)=>e|(n?fc:_g)<<BigInt(t),"bitSet$1"),xf=o(e=>(vE<<BigInt(e-1))-fc,"bitMask$1"),ll=o(e=>new Uint8Array(e),"u8n$1"),vh=o(e=>Uint8Array.from(e),"u8fr$1");function Eg(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=ll(e),i=ll(e),s=0;const a=o(()=>{r.fill(1),i.fill(0),s=0},"reset"),c=o((...h)=>n(i,r,...h),"h"),u=o((h=ll())=>{i=c(vh([0]),h),r=c(),h.length!==0&&(i=c(vh([1]),h),r=c())},"reseed"),l=o(()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const p=[];for(;h<t;){r=c();const y=r.slice();p.push(y),h+=r.length}return Li(...p)},"gen");return o((h,p)=>{a(),u(h);let y;for(;!(y=p(l()));)u();return a(),y},"genUntil")}o(Eg,"createHmacDrbg$1");const NE={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Oo(e,t,n={}){const r=o((i,s,a)=>{const c=NE[s];if(typeof c!="function")throw new Error(`Invalid validator "${s}", expected function`);const u=e[i];if(!(a&&u===void 0)&&!c(u,e))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${s}`)},"checkField");for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}o(Oo,"validateObject$1");const IE=Object.freeze(Object.defineProperty({__proto__:null,bitGet:kE,bitLen:ME,bitMask:xf,bitSet:TE,bytesToHex:cs,bytesToNumberBE:hn,bytesToNumberLE:vf,concatBytes:Li,createHmacDrbg:Eg,ensureBytes:Jt,equalBytes:SE,hexToBytes:ls,hexToNumber:_f,numberToBytesBE:ii,numberToBytesLE:Ef,numberToHexUnpadded:vg,numberToVarBytesBE:xE,utf8ToBytes:AE,validateObject:Oo},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ft=BigInt(0),kt=BigInt(1),mi=BigInt(2),RE=BigInt(3),gu=BigInt(4),Eh=BigInt(5),xh=BigInt(8);BigInt(9);BigInt(16);function Gt(e,t){const n=e%t;return n>=Ft?n:t+n}o(Gt,"mod$1");function LE(e,t,n){if(n<=Ft||t<Ft)throw new Error("Expected power/modulo > 0");if(n===kt)return Ft;let r=kt;for(;t>Ft;)t&kt&&(r=r*e%n),e=e*e%n,t>>=kt;return r}o(LE,"pow$1");function En(e,t,n){let r=e;for(;t-- >Ft;)r*=r,r%=n;return r}o(En,"pow2$1");function mu(e,t){if(e===Ft||t<=Ft)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Gt(e,t),r=t,i=Ft,s=kt;for(;n!==Ft;){const c=r/n,u=r%n,l=i-s*c;r=n,n=u,i=s,s=l}if(r!==kt)throw new Error("invert: does not exist");return Gt(i,t)}o(mu,"invert$1");function PE(e){const t=(e-kt)/mi;let n,r,i;for(n=e-kt,r=0;n%mi===Ft;n/=mi,r++);for(i=mi;i<e&&LE(i,t,e)!==e-kt;i++);if(r===1){const a=(e+kt)/gu;return o(function(u,l){const f=u.pow(l,a);if(!u.eql(u.sqr(f),l))throw new Error("Cannot find square root");return f},"tonelliFast")}const s=(n+kt)/mi;return o(function(c,u){if(c.pow(u,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let l=r,f=c.pow(c.mul(c.ONE,i),n),h=c.pow(u,s),p=c.pow(u,n);for(;!c.eql(p,c.ONE);){if(c.eql(p,c.ZERO))return c.ZERO;let y=1;for(let x=c.sqr(p);y<l&&!c.eql(x,c.ONE);y++)x=c.sqr(x);const _=c.pow(f,kt<<BigInt(l-y-1));f=c.sqr(_),h=c.mul(h,_),p=c.mul(p,f),l=y}return h},"tonelliSlow")}o(PE,"tonelliShanks$1");function OE(e){if(e%gu===RE){const t=(e+kt)/gu;return o(function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s},"sqrt3mod4")}if(e%xh===Eh){const t=(e-Eh)/xh;return o(function(r,i){const s=r.mul(i,mi),a=r.pow(s,t),c=r.mul(i,a),u=r.mul(r.mul(c,mi),a),l=r.mul(c,r.sub(u,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l},"sqrt5mod8")}return PE(e)}o(OE,"FpSqrt$1");const CE=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function BE(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=CE.reduce((r,i)=>(r[i]="function",r),t);return Oo(e,n)}o(BE,"validateField$1");function FE(e,t,n){if(n<Ft)throw new Error("Expected power > 0");if(n===Ft)return e.ONE;if(n===kt)return t;let r=e.ONE,i=t;for(;n>Ft;)n&kt&&(r=e.mul(r,i)),i=e.sqr(i),n>>=kt;return r}o(FE,"FpPow$1");function UE(e,t){const n=new Array(t.length),r=t.reduce((s,a,c)=>e.is0(a)?s:(n[c]=s,e.mul(s,a)),e.ONE),i=e.inv(r);return t.reduceRight((s,a,c)=>e.is0(a)?s:(n[c]=e.mul(s,n[c]),e.mul(s,a)),i),n}o(UE,"FpInvertBatch$1");function xg(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}o(xg,"nLength$1");function DE(e,t,n=!1,r={}){if(e<=Ft)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=xg(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=OE(e),c=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:xf(i),ZERO:Ft,ONE:kt,create:u=>Gt(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return Ft<=u&&u<e},is0:u=>u===Ft,isOdd:u=>(u&kt)===kt,neg:u=>Gt(-u,e),eql:(u,l)=>u===l,sqr:u=>Gt(u*u,e),add:(u,l)=>Gt(u+l,e),sub:(u,l)=>Gt(u-l,e),mul:(u,l)=>Gt(u*l,e),pow:(u,l)=>FE(c,u,l),div:(u,l)=>Gt(u*mu(l,e),e),sqrN:u=>u*u,addN:(u,l)=>u+l,subN:(u,l)=>u-l,mulN:(u,l)=>u*l,inv:u=>mu(u,e),sqrt:r.sqrt||(u=>a(c,u)),invertBatch:u=>UE(c,u),cmov:(u,l,f)=>f?l:u,toBytes:u=>n?Ef(u,s):ii(u,s),fromBytes:u=>{if(u.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${u.length}`);return n?vf(u):hn(u)}});return Object.freeze(c)}o(DE,"Field$1");function Sg(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}o(Sg,"getFieldBytesLength$1");function Ag(e){const t=Sg(e);return t+Math.ceil(t/2)}o(Ag,"getMinHashLength$1");function $E(e,t,n=!1){const r=e.length,i=Sg(t),s=Ag(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const a=n?hn(e):vf(e),c=Gt(a,t-kt)+kt;return n?Ef(c,i):ii(c,i)}o($E,"mapHashToField$1");/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const HE=BigInt(0),ul=BigInt(1);function zE(e,t){const n=o((i,s)=>{const a=s.negate();return i?a:s},"constTimeNegate"),r=o(i=>{const s=Math.ceil(t/i)+1,a=2**(i-1);return{windows:s,windowSize:a}},"opts");return{constTimeNegate:n,unsafeLadder(i,s){let a=e.ZERO,c=i;for(;s>HE;)s&ul&&(a=a.add(c)),c=c.double(),s>>=ul;return a},precomputeWindow(i,s){const{windows:a,windowSize:c}=r(s),u=[];let l=i,f=l;for(let h=0;h<a;h++){f=l,u.push(f);for(let p=1;p<c;p++)f=f.add(l),u.push(f);l=f.double()}return u},wNAF(i,s,a){const{windows:c,windowSize:u}=r(i);let l=e.ZERO,f=e.BASE;const h=BigInt(2**i-1),p=2**i,y=BigInt(i);for(let _=0;_<c;_++){const x=_*u;let w=Number(a&h);a>>=y,w>u&&(w-=p,a+=ul);const v=x,T=x+Math.abs(w)-1,N=_%2!==0,I=w<0;w===0?f=f.add(n(N,s[v])):l=l.add(n(I,s[T]))}return{p:l,f}},wNAFCached(i,s,a,c){const u=i._WINDOW_SIZE||1;let l=s.get(i);return l||(l=this.precomputeWindow(i,u),u!==1&&s.set(i,c(l))),this.wNAF(u,l,a)}}}o(zE,"wNAF$1");function Mg(e){return BE(e.Fp),Oo(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xg(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}o(Mg,"validateBasic$1");/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ZE(e){const t=Mg(e);Oo(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}o(ZE,"validatePointOpts$1");const{bytesToNumberBE:WE,hexToBytes:jE}=IE;var yo;const Ei={Err:(yo=class extends Error{constructor(t=""){super(t)}},o(yo,"DERErr"),yo),_parseInt(e){const{Err:t}=Ei;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:WE(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Ei,n=typeof e=="string"?jE(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Ei._parseInt(n.subarray(2)),{d:a,l:c}=Ei._parseInt(s);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){const t=o(l=>Number.parseInt(l[0],16)&8?"00"+l:l,"slice"),n=o(l=>{const f=l.toString(16);return f.length&1?`0${f}`:f},"h"),r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,a=i.length/2,c=n(s),u=n(a);return`30${n(a+s+4)}02${u}${i}02${c}${r}`}},xr=BigInt(0),An=BigInt(1);BigInt(2);const Sh=BigInt(3);BigInt(4);function GE(e){const t=ZE(e),{Fp:n}=t,r=t.toBytes||((x,w,v)=>{const T=w.toAffine();return Li(Uint8Array.from([4]),n.toBytes(T.x),n.toBytes(T.y))}),i=t.fromBytes||(x=>{const w=x.subarray(1),v=n.fromBytes(w.subarray(0,n.BYTES)),T=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:v,y:T}});function s(x){const{a:w,b:v}=t,T=n.sqr(x),N=n.mul(T,x);return n.add(n.add(N,n.mul(x,w)),v)}if(o(s,"weierstrassEquation"),!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(x){return typeof x=="bigint"&&xr<x&&x<t.n}o(a,"isWithinCurveOrder");function c(x){if(!a(x))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}o(c,"assertGE");function u(x){const{allowedPrivateKeyLengths:w,nByteLength:v,wrapPrivateKey:T,n:N}=t;if(w&&typeof x!="bigint"){if(x instanceof Uint8Array&&(x=cs(x)),typeof x!="string"||!w.includes(x.length))throw new Error("Invalid key");x=x.padStart(v*2,"0")}let I;try{I=typeof x=="bigint"?x:hn(Jt("private key",x,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof x}`)}return T&&(I=Gt(I,N)),c(I),I}o(u,"normPrivateKeyToScalar");const l=new Map;function f(x){if(!(x instanceof h))throw new Error("ProjectivePoint expected")}o(f,"assertPrjPoint");const _=class _{constructor(w,v,T){if(this.px=w,this.py=v,this.pz=T,w==null||!n.isValid(w))throw new Error("x required");if(v==null||!n.isValid(v))throw new Error("y required");if(T==null||!n.isValid(T))throw new Error("z required")}static fromAffine(w){const{x:v,y:T}=w||{};if(!w||!n.isValid(v)||!n.isValid(T))throw new Error("invalid affine point");if(w instanceof _)throw new Error("projective point not allowed");const N=o(I=>n.eql(I,n.ZERO),"is0");return N(v)&&N(T)?_.ZERO:new _(v,T,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const v=n.invertBatch(w.map(T=>T.pz));return w.map((T,N)=>T.toAffine(v[N])).map(_.fromAffine)}static fromHex(w){const v=_.fromAffine(i(Jt("pointHex",w)));return v.assertValidity(),v}static fromPrivateKey(w){return _.BASE.multiply(u(w))}_setWindowSize(w){this._WINDOW_SIZE=w,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:w,y:v}=this.toAffine();if(!n.isValid(w)||!n.isValid(v))throw new Error("bad point: x or y not FE");const T=n.sqr(v),N=s(w);if(!n.eql(T,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){f(w);const{px:v,py:T,pz:N}=this,{px:I,py:C,pz:D}=w,U=n.eql(n.mul(v,D),n.mul(I,N)),H=n.eql(n.mul(T,D),n.mul(C,N));return U&&H}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:v}=t,T=n.mul(v,Sh),{px:N,py:I,pz:C}=this;let D=n.ZERO,U=n.ZERO,H=n.ZERO,B=n.mul(N,N),z=n.mul(I,I),A=n.mul(C,C),d=n.mul(N,I);return d=n.add(d,d),H=n.mul(N,C),H=n.add(H,H),D=n.mul(w,H),U=n.mul(T,A),U=n.add(D,U),D=n.sub(z,U),U=n.add(z,U),U=n.mul(D,U),D=n.mul(d,D),H=n.mul(T,H),A=n.mul(w,A),d=n.sub(B,A),d=n.mul(w,d),d=n.add(d,H),H=n.add(B,B),B=n.add(H,B),B=n.add(B,A),B=n.mul(B,d),U=n.add(U,B),A=n.mul(I,C),A=n.add(A,A),B=n.mul(A,d),D=n.sub(D,B),H=n.mul(A,z),H=n.add(H,H),H=n.add(H,H),new _(D,U,H)}add(w){f(w);const{px:v,py:T,pz:N}=this,{px:I,py:C,pz:D}=w;let U=n.ZERO,H=n.ZERO,B=n.ZERO;const z=t.a,A=n.mul(t.b,Sh);let d=n.mul(v,I),m=n.mul(T,C),S=n.mul(N,D),R=n.add(v,T),k=n.add(I,C);R=n.mul(R,k),k=n.add(d,m),R=n.sub(R,k),k=n.add(v,N);let P=n.add(I,D);return k=n.mul(k,P),P=n.add(d,S),k=n.sub(k,P),P=n.add(T,N),U=n.add(C,D),P=n.mul(P,U),U=n.add(m,S),P=n.sub(P,U),B=n.mul(z,k),U=n.mul(A,S),B=n.add(U,B),U=n.sub(m,B),B=n.add(m,B),H=n.mul(U,B),m=n.add(d,d),m=n.add(m,d),S=n.mul(z,S),k=n.mul(A,k),m=n.add(m,S),S=n.sub(d,S),S=n.mul(z,S),k=n.add(k,S),d=n.mul(m,k),H=n.add(H,d),d=n.mul(P,k),U=n.mul(R,U),U=n.sub(U,d),d=n.mul(R,m),B=n.mul(P,B),B=n.add(B,d),new _(U,H,B)}subtract(w){return this.add(w.negate())}is0(){return this.equals(_.ZERO)}wNAF(w){return y.wNAFCached(this,l,w,v=>{const T=n.invertBatch(v.map(N=>N.pz));return v.map((N,I)=>N.toAffine(T[I])).map(_.fromAffine)})}multiplyUnsafe(w){const v=_.ZERO;if(w===xr)return v;if(c(w),w===An)return this;const{endo:T}=t;if(!T)return y.unsafeLadder(this,w);let{k1neg:N,k1:I,k2neg:C,k2:D}=T.splitScalar(w),U=v,H=v,B=this;for(;I>xr||D>xr;)I&An&&(U=U.add(B)),D&An&&(H=H.add(B)),B=B.double(),I>>=An,D>>=An;return N&&(U=U.negate()),C&&(H=H.negate()),H=new _(n.mul(H.px,T.beta),H.py,H.pz),U.add(H)}multiply(w){c(w);let v=w,T,N;const{endo:I}=t;if(I){const{k1neg:C,k1:D,k2neg:U,k2:H}=I.splitScalar(v);let{p:B,f:z}=this.wNAF(D),{p:A,f:d}=this.wNAF(H);B=y.constTimeNegate(C,B),A=y.constTimeNegate(U,A),A=new _(n.mul(A.px,I.beta),A.py,A.pz),T=B.add(A),N=z.add(d)}else{const{p:C,f:D}=this.wNAF(v);T=C,N=D}return _.normalizeZ([T,N])[0]}multiplyAndAddUnsafe(w,v,T){const N=_.BASE,I=o((D,U)=>U===xr||U===An||!D.equals(N)?D.multiplyUnsafe(U):D.multiply(U),"mul"),C=I(this,v).add(I(w,T));return C.is0()?void 0:C}toAffine(w){const{px:v,py:T,pz:N}=this,I=this.is0();w==null&&(w=I?n.ONE:n.inv(N));const C=n.mul(v,w),D=n.mul(T,w),U=n.mul(N,w);if(I)return{x:n.ZERO,y:n.ZERO};if(!n.eql(U,n.ONE))throw new Error("invZ was invalid");return{x:C,y:D}}isTorsionFree(){const{h:w,isTorsionFree:v}=t;if(w===An)return!0;if(v)return v(_,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:v}=t;return w===An?this:v?v(_,this):this.multiplyUnsafe(t.h)}toRawBytes(w=!0){return this.assertValidity(),r(_,this,w)}toHex(w=!0){return cs(this.toRawBytes(w))}};o(_,"Point");let h=_;h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const p=t.nBitLength,y=zE(h,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:a}}o(GE,"weierstrassPoints$1");function qE(e){const t=Mg(e);return Oo(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}o(qE,"validateOpts$1");function VE(e){const t=qE(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function a(k){return xr<k&&k<n.ORDER}o(a,"isValidFieldElement");function c(k){return Gt(k,r)}o(c,"modN");function u(k){return mu(k,r)}o(u,"invN");const{ProjectivePoint:l,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:p}=GE({...t,toBytes(k,P,F){const M=P.toAffine(),g=n.toBytes(M.x),L=Li;return F?L(Uint8Array.from([P.hasEvenY()?2:3]),g):L(Uint8Array.from([4]),g,n.toBytes(M.y))},fromBytes(k){const P=k.length,F=k[0],M=k.subarray(1);if(P===i&&(F===2||F===3)){const g=hn(M);if(!a(g))throw new Error("Point is not on curve");const L=h(g);let V=n.sqrt(L);const ie=(V&An)===An;return(F&1)===1!==ie&&(V=n.neg(V)),{x:g,y:V}}else if(P===s&&F===4){const g=n.fromBytes(M.subarray(0,n.BYTES)),L=n.fromBytes(M.subarray(n.BYTES,2*n.BYTES));return{x:g,y:L}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=o(k=>cs(ii(k,t.nByteLength)),"numToNByteStr");function _(k){const P=r>>An;return k>P}o(_,"isBiggerThanHalfOrder");function x(k){return _(k)?c(-k):k}o(x,"normalizeS");const w=o((k,P,F)=>hn(k.slice(P,F)),"slcNum"),R=class R{constructor(P,F,M){this.r=P,this.s=F,this.recovery=M,this.assertValidity()}static fromCompact(P){const F=t.nByteLength;return P=Jt("compactSignature",P,F*2),new R(w(P,0,F),w(P,F,2*F))}static fromDER(P){const{r:F,s:M}=Ei.toSig(Jt("DER",P));return new R(F,M)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new R(this.r,this.s,P)}recoverPublicKey(P){const{r:F,s:M,recovery:g}=this,L=U(Jt("msgHash",P));if(g==null||![0,1,2,3].includes(g))throw new Error("recovery id invalid");const V=g===2||g===3?F+t.n:F;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ie=g&1?"03":"02",he=l.fromHex(ie+y(V)),ge=u(V),_e=c(-L*ge),me=c(M*ge),te=l.BASE.multiplyAndAddUnsafe(he,_e,me);if(!te)throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return ls(this.toDERHex())}toDERHex(){return Ei.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ls(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}};o(R,"Signature");let v=R;const T={isValidPrivateKey(k){try{return f(k),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const k=Ag(t.n);return $E(t.randomBytes(k),t.n)},precompute(k=8,P=l.BASE){return P._setWindowSize(k),P.multiply(BigInt(3)),P}};function N(k,P=!0){return l.fromPrivateKey(k).toRawBytes(P)}o(N,"getPublicKey");function I(k){const P=k instanceof Uint8Array,F=typeof k=="string",M=(P||F)&&k.length;return P?M===i||M===s:F?M===2*i||M===2*s:k instanceof l}o(I,"isProbPub");function C(k,P,F=!0){if(I(k))throw new Error("first arg must be private key");if(!I(P))throw new Error("second arg must be public key");return l.fromHex(P).multiply(f(k)).toRawBytes(F)}o(C,"getSharedSecret");const D=t.bits2int||function(k){const P=hn(k),F=k.length*8-t.nBitLength;return F>0?P>>BigInt(F):P},U=t.bits2int_modN||function(k){return c(D(k))},H=xf(t.nBitLength);function B(k){if(typeof k!="bigint")throw new Error("bigint expected");if(!(xr<=k&&k<H))throw new Error(`bigint expected < 2^${t.nBitLength}`);return ii(k,t.nByteLength)}o(B,"int2octets");function z(k,P,F=A){if(["recovered","canonical"].some(re=>re in F))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:g}=t;let{lowS:L,prehash:V,extraEntropy:ie}=F;L==null&&(L=!0),k=Jt("msgHash",k),V&&(k=Jt("prehashed msgHash",M(k)));const he=U(k),ge=f(P),_e=[B(ge),B(he)];if(ie!=null){const re=ie===!0?g(n.BYTES):ie;_e.push(Jt("extraEntropy",re))}const me=Li(..._e),te=he;function X(re){const xe=D(re);if(!p(xe))return;const fe=u(xe),le=l.BASE.multiply(xe).toAffine(),q=c(le.x);if(q===xr)return;const Y=c(fe*c(te+q*ge));if(Y===xr)return;let ae=(le.x===q?0:2)|Number(le.y&An),we=Y;return L&&_(Y)&&(we=x(Y),ae^=1),new v(q,we,ae)}return o(X,"k2sig"),{seed:me,k2sig:X}}o(z,"prepSig");const A={lowS:t.lowS,prehash:!1},d={lowS:t.lowS,prehash:!1};function m(k,P,F=A){const{seed:M,k2sig:g}=z(k,P,F),L=t;return Eg(L.hash.outputLen,L.nByteLength,L.hmac)(M,g)}o(m,"sign"),l.BASE._setWindowSize(8);function S(k,P,F,M=d){const g=k;if(P=Jt("msgHash",P),F=Jt("publicKey",F),"strict"in M)throw new Error("options.strict was renamed to lowS");const{lowS:L,prehash:V}=M;let ie,he;try{if(typeof g=="string"||g instanceof Uint8Array)try{ie=v.fromDER(g)}catch(le){if(!(le instanceof Ei.Err))throw le;ie=v.fromCompact(g)}else if(typeof g=="object"&&typeof g.r=="bigint"&&typeof g.s=="bigint"){const{r:le,s:q}=g;ie=new v(le,q)}else throw new Error("PARSE");he=l.fromHex(F)}catch(le){if(le.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(L&&ie.hasHighS())return!1;V&&(P=t.hash(P));const{r:ge,s:_e}=ie,me=U(P),te=u(_e),X=c(me*te),re=c(ge*te),xe=l.BASE.multiplyAndAddUnsafe(he,X,re)?.toAffine();return xe?c(xe.x)===ge:!1}return o(S,"verify"),{CURVE:t,getPublicKey:N,getSharedSecret:C,sign:m,verify:S,ProjectivePoint:l,Signature:v,utils:T}}o(VE,"weierstrass$1");var bo;let kg=(bo=class extends bg{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,lE(t);const r=wf(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=t.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(t){return Ca(this),this.iHash.update(t),this}digestInto(t){Ca(this),mg(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:a,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=a,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},o(bo,"HMAC"),bo);const Tg=o((e,t,n)=>new kg(e,t).update(n).digest(),"hmac$2");Tg.create=(e,t)=>new kg(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function KE(e){return{hash:e,hmac:(t,...n)=>Tg(e,t,hE(...n)),randomBytes:wg}}o(KE,"getHash$1");function JE(e,t){const n=o(r=>VE({...e,...KE(r)}),"create");return Object.freeze({...n(t),create:n})}o(JE,"createCurve$1");/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ba=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ng=BigInt(1),Fa=BigInt(2),Ah=o((e,t)=>(e+t/Fa)/t,"divNearest$1");function Ig(e){const t=hc,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),c=BigInt(44),u=BigInt(88),l=e*e*e%t,f=l*l*e%t,h=En(f,n,t)*f%t,p=En(h,n,t)*f%t,y=En(p,Fa,t)*l%t,_=En(y,i,t)*y%t,x=En(_,s,t)*_%t,w=En(x,c,t)*x%t,v=En(w,u,t)*w%t,T=En(v,c,t)*x%t,N=En(T,n,t)*f%t,I=En(N,a,t)*_%t,C=En(I,r,t)*l%t,D=En(C,Fa,t);if(!yu.eql(yu.sqr(D),e))throw new Error("Cannot find square root");return D}o(Ig,"sqrtMod$1");const yu=DE(hc,void 0,void 0,{sqrt:Ig}),xs=JE({a:BigInt(0),b:BigInt(7),Fp:yu,n:Ba,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ba,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ng*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,a=BigInt("0x100000000000000000000000000000000"),c=Ah(s*e,t),u=Ah(-r*e,t);let l=Gt(e-c*n-u*i,t),f=Gt(-c*r-u*s,t);const h=l>a,p=f>a;if(h&&(l=t-l),p&&(f=t-f),l>a||f>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:p,k2:f}}}},pu),pc=BigInt(0),Rg=o(e=>typeof e=="bigint"&&pc<e&&e<hc,"fe"),YE=o(e=>typeof e=="bigint"&&pc<e&&e<Ba,"ge"),Mh={};function Ua(e,...t){let n=Mh[e];if(n===void 0){const r=pu(Uint8Array.from(e,i=>i.charCodeAt(0)));n=Li(r,r),Mh[e]=n}return pu(Li(n,...t))}o(Ua,"taggedHash");const Sf=o(e=>e.toRawBytes(!0).slice(1),"pointToBytes"),bu=o(e=>ii(e,32),"numTo32b"),fl=o(e=>Gt(e,hc),"modP"),uo=o(e=>Gt(e,Ba),"modN"),Af=xs.ProjectivePoint,QE=o((e,t,n)=>Af.BASE.multiplyAndAddUnsafe(e,t,n),"GmulAdd");function wu(e){let t=xs.utils.normPrivateKeyToScalar(e),n=Af.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:uo(-t),bytes:Sf(n)}}o(wu,"schnorrGetExtPubKey");function Lg(e){if(!Rg(e))throw new Error("bad x: need 0 < x < p");const t=fl(e*e),n=fl(t*e+BigInt(7));let r=Ig(n);r%Fa!==pc&&(r=fl(-r));const i=new Af(e,r,Ng);return i.assertValidity(),i}o(Lg,"lift_x");function Pg(...e){return uo(hn(Ua("BIP0340/challenge",...e)))}o(Pg,"challenge");function XE(e){return wu(e).bytes}o(XE,"schnorrGetPublicKey");function ex(e,t,n=wg(32)){const r=Jt("message",e),{bytes:i,scalar:s}=wu(t),a=Jt("auxRand",n,32),c=bu(s^hn(Ua("BIP0340/aux",a))),u=Ua("BIP0340/nonce",c,i,r),l=uo(hn(u));if(l===pc)throw new Error("sign failed: k is zero");const{bytes:f,scalar:h}=wu(l),p=Pg(f,i,r),y=new Uint8Array(64);if(y.set(f,0),y.set(bu(uo(h+p*s)),32),!Og(y,r,i))throw new Error("sign: Invalid signature produced");return y}o(ex,"schnorrSign");function Og(e,t,n){const r=Jt("signature",e,64),i=Jt("message",t),s=Jt("publicKey",n,32);try{const a=Lg(hn(s)),c=hn(r.subarray(0,32));if(!Rg(c))return!1;const u=hn(r.subarray(32,64));if(!YE(u))return!1;const l=Pg(bu(c),Sf(a),i),f=QE(a,u,uo(-l));return!(!f||!f.hasEvenY()||f.toAffine().x!==c)}catch{return!1}}o(Og,"schnorrVerify");const Os=(()=>({getPublicKey:XE,sign:ex,verify:Og,utils:{randomPrivateKey:xs.utils.randomPrivateKey,lift_x:Lg,pointToBytes:Sf,numberToBytesBE:ii,bytesToNumberBE:hn,taggedHash:Ua,mod:Gt}}))(),dl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mf=o(e=>e instanceof Uint8Array,"u8a"),ya=o(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView$1"),Vn=o((e,t)=>e<<32-t|e>>>t,"rotr$1"),tx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!tx)throw new Error("Non little-endian hardware is not supported");const nx=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function fn(e){if(!Mf(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=nx[e[n]];return t}o(fn,"bytesToHex$2");function us(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),a=Number.parseInt(s,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[r]=a}return n}o(us,"hexToBytes$2");function rx(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}o(rx,"utf8ToBytes$2");function Pi(e){if(typeof e=="string"&&(e=rx(e)),!Mf(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}o(Pi,"toBytes$1");function gc(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!Mf(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}o(gc,"concatBytes$2");var wo;let Cg=(wo=class{clone(){return this._cloneInto()}},o(wo,"Hash"),wo);const ix=o(e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object,"isPlainObject$1");function sx(e,t){if(t!==void 0&&(typeof t!="object"||!ix(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}o(sx,"checkOpts$1");function Ss(e){const t=o(r=>e().update(Pi(r)).digest(),"hashC"),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}o(Ss,"wrapConstructor$1");function Bg(e=32){if(dl&&typeof dl.getRandomValues=="function")return dl.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}o(Bg,"randomBytes$1");function _u(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}o(_u,"number$3");function ox(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}o(ox,"bool$1");function Fg(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}o(Fg,"bytes$2");function ax(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_u(e.outputLen),_u(e.blockLen)}o(ax,"hash$1");function cx(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}o(cx,"exists$1");function lx(e,t){Fg(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}o(lx,"output$1");const sn={number:_u,bool:ox,bytes:Fg,hash:ax,exists:cx,output:lx};function ux(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),c=Number(n&s),u=r?4:0,l=r?0:4;e.setUint32(t+u,a,r),e.setUint32(t+l,c,r)}o(ux,"setBigUint64$1");const hd=class hd extends Cg{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ya(this.buffer)}update(t){sn.exists(this);const{view:n,buffer:r,blockLen:i}=this;t=Pi(t);const s=t.length;for(let a=0;a<s;){const c=Math.min(i-this.pos,s-a);if(c===i){const u=ya(t);for(;i<=s-a;a+=i)this.process(u,a);continue}r.set(t.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){sn.exists(this),sn.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let h=a;h<i;h++)n[h]=0;ux(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=ya(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,f=this.get();if(l>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)c.setUint32(4*h,f[h],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:a,pos:c}=this;return t.length=i,t.pos=c,t.finished=s,t.destroyed=a,i%n&&t.buffer.set(r),t}};o(hd,"SHA2");let Da=hd;const fx=o((e,t,n)=>e&t^~e&n,"Chi$1"),dx=o((e,t,n)=>e&t^e&n^t&n,"Maj$1"),hx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ur=new Uint32Array(64);var _o;let Ug=(_o=class extends Da{constructor(){super(64,32,8,!1),this.A=Fr[0]|0,this.B=Fr[1]|0,this.C=Fr[2]|0,this.D=Fr[3]|0,this.E=Fr[4]|0,this.F=Fr[5]|0,this.G=Fr[6]|0,this.H=Fr[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:a,G:c,H:u}=this;return[t,n,r,i,s,a,c,u]}set(t,n,r,i,s,a,c,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=c|0,this.H=u|0}process(t,n){for(let h=0;h<16;h++,n+=4)Ur[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const p=Ur[h-15],y=Ur[h-2],_=Vn(p,7)^Vn(p,18)^p>>>3,x=Vn(y,17)^Vn(y,19)^y>>>10;Ur[h]=x+Ur[h-7]+_+Ur[h-16]|0}let{A:r,B:i,C:s,D:a,E:c,F:u,G:l,H:f}=this;for(let h=0;h<64;h++){const p=Vn(c,6)^Vn(c,11)^Vn(c,25),y=f+p+fx(c,u,l)+hx[h]+Ur[h]|0,x=(Vn(r,2)^Vn(r,13)^Vn(r,22))+dx(r,i,s)|0;f=l,l=u,u=c,c=a+y|0,a=s,s=i,i=r,r=y+x|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,c=c+this.E|0,u=u+this.F|0,l=l+this.G|0,f=f+this.H|0,this.set(r,i,s,a,c,u,l,f)}roundClean(){Ur.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},o(_o,"SHA256"),_o);const pd=class pd extends Ug{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};o(pd,"SHA224");let vu=pd;const As=Ss(()=>new Ug);Ss(()=>new vu);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ms(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}o(Ms,"assertNumber");function Rr(...e){const t=o((i,s)=>a=>i(s(a)),"wrap"),n=Array.from(e).reverse().reduce((i,s)=>i?t(i,s.encode):s.encode,void 0),r=e.reduce((i,s)=>i?t(i,s.decode):s.decode,void 0);return{encode:n,decode:r}}o(Rr,"chain$2");function Lr(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(Ms(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}o(Lr,"alphabet$2");function Pr(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}o(Pr,"join$2");function mc(e,t="="){if(Ms(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}o(mc,"padding$1");function Dg(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}o(Dg,"normalize$1");function kh(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],s=Array.from(e);for(s.forEach(a=>{if(Ms(a),a<0||a>=t)throw new Error(`Wrong integer: ${a}`)});;){let a=0,c=!0;for(let u=r;u<s.length;u++){const l=s[u],f=t*a+l;if(!Number.isSafeInteger(f)||t*a/t!==a||f-l!==t*a)throw new Error("convertRadix: carry overflow");if(a=f%n,s[u]=Math.floor(f/n),!Number.isSafeInteger(s[u])||s[u]*n+a!==f)throw new Error("convertRadix: carry overflow");if(c)s[u]?c=!1:r=u;else continue}if(i.push(a),c)break}for(let a=0;a<e.length-1&&e[a]===0;a++)i.push(0);return i.reverse()}o(kh,"convertRadix$2");const $g=o((e,t)=>t?$g(t,e%t):e,"gcd$1"),$a=o((e,t)=>e+(t-$g(e,t)),"radix2carry$1");function Eu(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if($a(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${$a(t,n)}`);let i=0,s=0;const a=2**n-1,c=[];for(const u of e){if(Ms(u),u>=2**t)throw new Error(`convertRadix2: invalid data word=${u} from=${t}`);if(i=i<<t|u,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)c.push((i>>s-n&a)>>>0);i&=2**s-1}if(i=i<<n-s&a,!r&&s>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}o(Eu,"convertRadix2$1");function px(e){return Ms(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return kh(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(kh(t,e,2**8))}}}o(px,"radix$2");function ci(e,t=!1){if(Ms(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if($a(8,e)>32||$a(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Eu(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Eu(n,e,8,t))}}}o(ci,"radix2$1");function Th(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}o(Th,"unsafeWrapper$1");const gx=Rr(ci(4),Lr("0123456789ABCDEF"),Pr("")),mx=Rr(ci(5),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),mc(5),Pr(""));Rr(ci(5),Lr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),mc(5),Pr(""));Rr(ci(5),Lr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Pr(""),Dg(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Tr=Rr(ci(6),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),mc(6),Pr("")),yx=Rr(ci(6),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),mc(6),Pr("")),kf=o(e=>Rr(px(58),Lr(e),Pr("")),"genBase58$1"),xu=kf("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");kf("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");kf("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Nh=[0,2,3,5,6,7,9,10,11],bx={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=xu.encode(r).padStart(Nh[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=Nh.indexOf(r.length),s=xu.decode(r);for(let a=0;a<s.length-i;a++)if(s[a]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},Su=Rr(Lr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Pr("")),Ih=[996825010,642813549,513874426,1027748829,705979059];function Cs(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<Ih.length;r++)(t>>r&1)===1&&(n^=Ih[r]);return n}o(Cs,"bech32Polymod$1");function Rh(e,t,n=1){const r=e.length;let i=1;for(let s=0;s<r;s++){const a=e.charCodeAt(s);if(a<33||a>126)throw new Error(`Invalid prefix (${e})`);i=Cs(i)^a>>5}i=Cs(i);for(let s=0;s<r;s++)i=Cs(i)^e.charCodeAt(s)&31;for(let s of t)i=Cs(i)^s;for(let s=0;s<6;s++)i=Cs(i);return i^=n,Su.encode(Eu([i%2**30],30,5,!1))}o(Rh,"bechChecksum$1");function Hg(e){const t=e==="bech32"?1:734539939,n=ci(5),r=n.decode,i=n.encode,s=Th(r);function a(f,h,p=90){if(typeof f!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof f}`);if(!Array.isArray(h)||h.length&&typeof h[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof h}`);const y=f.length+7+h.length;if(p!==!1&&y>p)throw new TypeError(`Length ${y} exceeds limit ${p}`);return f=f.toLowerCase(),`${f}1${Su.encode(h)}${Rh(f,h,t)}`}o(a,"encode");function c(f,h=90){if(typeof f!="string")throw new Error(`bech32.decode input should be string, not ${typeof f}`);if(f.length<8||h!==!1&&f.length>h)throw new TypeError(`Wrong string length: ${f.length} (${f}). Expected (8..${h})`);const p=f.toLowerCase();if(f!==p&&f!==f.toUpperCase())throw new Error("String must be lowercase or uppercase");f=p;const y=f.lastIndexOf("1");if(y===0||y===-1)throw new Error('Letter "1" must be present between prefix and data only');const _=f.slice(0,y),x=f.slice(y+1);if(x.length<6)throw new Error("Data must be at least 6 characters long");const w=Su.decode(x).slice(0,-6),v=Rh(_,w,t);if(!x.endsWith(v))throw new Error(`Invalid checksum in ${f}: expected "${v}"`);return{prefix:_,words:w}}o(c,"decode");const u=Th(c);function l(f){const{prefix:h,words:p}=c(f,!1);return{prefix:h,words:p,bytes:r(p)}}return o(l,"decodeToBytes"),{encode:a,decode:c,decodeToBytes:l,decodeUnsafe:u,fromWords:r,fromWordsUnsafe:s,toWords:i}}o(Hg,"genBech32$1");const fs=Hg("bech32");Hg("bech32m");const wx={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},_x=Rr(ci(4),Lr("0123456789abcdef"),Pr(""),Dg(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),vx={utf8:wx,hex:_x,base16:gx,base32:mx,base64:Tr,base64url:yx,base58:xu,base58xmr:bx};`${Object.keys(vx).join(", ")}`;function hl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}o(hl,"number$2");function Lh(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}o(Lh,"bool");function Ex(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}o(Ex,"isBytes$3");function Ar(e,...t){if(!Ex(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}o(Ar,"bytes$1");/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Yt=o(e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),"u32"),xx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!xx)throw new Error("Non little-endian hardware is not supported");function Sx(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}o(Sx,"checkOpts");function Ax(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}o(Ax,"equalBytes$1");const Mx=o((e,t)=>(Object.assign(t,e),t),"wrapCipher"),ei=16,kx=283;function Tf(e){return e<<1^kx&-(e>>7)}o(Tf,"mul2");function Yi(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(t&1),e=Tf(e);return n}o(Yi,"mul");const Au=(()=>{let e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=Tf(r))e[n]=r;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return t})(),Tx=Au.map((e,t)=>Au.indexOf(t)),Nx=o(e=>e<<24|e>>>8,"rotr32_8"),pl=o(e=>e<<8|e>>>24,"rotl32_8");function zg(e,t){if(e.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((l,f)=>t(e[f])),r=n.map(pl),i=r.map(pl),s=i.map(pl),a=new Uint32Array(256*256),c=new Uint32Array(256*256),u=new Uint16Array(256*256);for(let l=0;l<256;l++)for(let f=0;f<256;f++){const h=l*256+f;a[h]=n[l]^r[f],c[h]=i[l]^s[f],u[h]=e[l]<<8|e[f]}return{sbox:e,sbox2:u,T0:n,T1:r,T2:i,T3:s,T01:a,T23:c}}o(zg,"genTtable");const Nf=zg(Au,e=>Yi(e,3)<<24|e<<16|e<<8|Yi(e,2)),Zg=zg(Tx,e=>Yi(e,11)<<24|Yi(e,13)<<16|Yi(e,9)<<8|Yi(e,14)),Ix=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=Tf(n))e[t]=n;return e})();function Wg(e){Ar(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=Nf,r=Yt(e),i=r.length,s=o(c=>or(n,c,c,c,c),"subByte"),a=new Uint32Array(t+28);a.set(r);for(let c=i;c<a.length;c++){let u=a[c-1];c%i===0?u=s(Nx(u))^Ix[c/i-1]:i>6&&c%i===4&&(u=s(u)),a[c]=a[c-i]^u}return a}o(Wg,"expandKeyLE");function Rx(e){const t=Wg(e),n=t.slice(),r=t.length,{sbox2:i}=Nf,{T0:s,T1:a,T2:c,T3:u}=Zg;for(let l=0;l<r;l+=4)for(let f=0;f<4;f++)n[l+f]=t[r-l-4+f];t.fill(0);for(let l=4;l<r-4;l++){const f=n[l],h=or(i,f,f,f,f);n[l]=s[h&255]^a[h>>>8&255]^c[h>>>16&255]^u[h>>>24]}return n}o(Rx,"expandKeyDecLE");function Kr(e,t,n,r,i,s){return e[n<<8&65280|r>>>8&255]^t[i>>>8&65280|s>>>24&255]}o(Kr,"apply0123");function or(e,t,n,r,i){return e[t&255|n&65280]|e[r>>>16&255|i>>>16&65280]<<16}o(or,"applySbox");function Ph(e,t,n,r,i){const{sbox2:s,T01:a,T23:c}=Nf;let u=0;t^=e[u++],n^=e[u++],r^=e[u++],i^=e[u++];const l=e.length/4-2;for(let _=0;_<l;_++){const x=e[u++]^Kr(a,c,t,n,r,i),w=e[u++]^Kr(a,c,n,r,i,t),v=e[u++]^Kr(a,c,r,i,t,n),T=e[u++]^Kr(a,c,i,t,n,r);t=x,n=w,r=v,i=T}const f=e[u++]^or(s,t,n,r,i),h=e[u++]^or(s,n,r,i,t),p=e[u++]^or(s,r,i,t,n),y=e[u++]^or(s,i,t,n,r);return{s0:f,s1:h,s2:p,s3:y}}o(Ph,"encrypt$2");function Lx(e,t,n,r,i){const{sbox2:s,T01:a,T23:c}=Zg;let u=0;t^=e[u++],n^=e[u++],r^=e[u++],i^=e[u++];const l=e.length/4-2;for(let _=0;_<l;_++){const x=e[u++]^Kr(a,c,t,i,r,n),w=e[u++]^Kr(a,c,n,t,i,r),v=e[u++]^Kr(a,c,r,n,t,i),T=e[u++]^Kr(a,c,i,r,n,t);t=x,n=w,r=v,i=T}const f=e[u++]^or(s,t,i,r,n),h=e[u++]^or(s,n,t,i,r),p=e[u++]^or(s,r,n,t,i),y=e[u++]^or(s,i,r,n,t);return{s0:f,s1:h,s2:p,s3:y}}o(Lx,"decrypt$2");function jg(e,t){if(!t)return new Uint8Array(e);if(Ar(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}o(jg,"getDst");function Px(e){if(Ar(e),e.length%ei!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${ei}`)}o(Px,"validateBlockDecrypt");function Ox(e,t,n){let r=e.length;const i=r%ei;if(!t&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const s=Yt(e);if(t){let u=ei-i;u||(u=ei),r=r+u}const a=jg(r,n),c=Yt(a);return{b:s,o:c,out:a}}o(Ox,"validateBlockEncrypt");function Cx(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const i=e.subarray(0,-r);for(let s=0;s<r;s++)if(e[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}o(Cx,"validatePCKS");function Bx(e){const t=new Uint8Array(16),n=Yt(t);t.set(e);const r=ei-e.length;for(let i=ei-r;i<ei;i++)t[i]=r;return n}o(Bx,"padPCKS");const Gg=Mx({blockSize:16,nonceLength:16},o(function(t,n,r={}){Ar(t),Ar(n,16);const i=!r.disablePadding;return{encrypt:(s,a)=>{const c=Wg(t),{b:u,o:l,out:f}=Ox(s,i,a),h=Yt(n);let p=h[0],y=h[1],_=h[2],x=h[3],w=0;for(;w+4<=u.length;)p^=u[w+0],y^=u[w+1],_^=u[w+2],x^=u[w+3],{s0:p,s1:y,s2:_,s3:x}=Ph(c,p,y,_,x),l[w++]=p,l[w++]=y,l[w++]=_,l[w++]=x;if(i){const v=Bx(s.subarray(w*4));p^=v[0],y^=v[1],_^=v[2],x^=v[3],{s0:p,s1:y,s2:_,s3:x}=Ph(c,p,y,_,x),l[w++]=p,l[w++]=y,l[w++]=_,l[w++]=x}return c.fill(0),f},decrypt:(s,a)=>{Px(s);const c=Rx(t),u=Yt(n),l=jg(s.length,a),f=Yt(s),h=Yt(l);let p=u[0],y=u[1],_=u[2],x=u[3];for(let w=0;w+4<=f.length;){const v=p,T=y,N=_,I=x;p=f[w+0],y=f[w+1],_=f[w+2],x=f[w+3];const{s0:C,s1:D,s2:U,s3:H}=Lx(c,p,y,_,x);h[w++]=C^v,h[w++]=D^T,h[w++]=U^N,h[w++]=H^I}return c.fill(0),Cx(l,i)}}},"cbc")),qg=o(e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),"_utf8ToBytes"),Fx=qg("expand 16-byte k"),Ux=qg("expand 32-byte k"),Dx=Yt(Fx),Vg=Yt(Ux);Vg.slice();function Xe(e,t){return e<<t|e>>>32-t}o(Xe,"rotl$1");function Mu(e){return e.byteOffset%4===0}o(Mu,"isAligned32");const Qo=64,$x=16,Kg=2**32-1,Oh=new Uint32Array;function Hx(e,t,n,r,i,s,a,c){const u=i.length,l=new Uint8Array(Qo),f=Yt(l),h=Mu(i)&&Mu(s),p=h?Yt(i):Oh,y=h?Yt(s):Oh;for(let _=0;_<u;a++){if(e(t,n,r,f,a,c),a>=Kg)throw new Error("arx: counter overflow");const x=Math.min(Qo,u-_);if(h&&x===Qo){const w=_/4;if(_%4!==0)throw new Error("arx: invalid block position");for(let v=0,T;v<$x;v++)T=w+v,y[T]=p[T]^f[v];_+=Qo;continue}for(let w=0,v;w<x;w++)v=_+w,s[v]=i[v]^l[w];_+=x}}o(Hx,"runCipher");function zx(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:a}=Sx({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return hl(i),hl(a),Lh(s),Lh(n),(c,u,l,f,h=0)=>{Ar(c),Ar(u),Ar(l);const p=l.length;if(f||(f=new Uint8Array(p)),Ar(f),hl(h),h<0||h>=Kg)throw new Error("arx: counter overflow");if(f.length<p)throw new Error(`arx: output (${f.length}) is shorter than data (${p})`);const y=[];let _=c.length,x,w;if(_===32)x=c.slice(),y.push(x),w=Vg;else if(_===16&&n)x=new Uint8Array(32),x.set(c),x.set(c,16),w=Dx,y.push(x);else throw new Error(`arx: invalid 32-byte key, got length=${_}`);Mu(u)||(u=u.slice(),y.push(u));const v=Yt(x);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,v,Yt(u.subarray(0,16)),v),u=u.subarray(16)}const T=16-i;if(T!==u.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(T!==12){const I=new Uint8Array(12);I.set(u,s?0:12-u.length),u=I,y.push(u)}const N=Yt(u);for(Hx(e,w,v,N,l,f,h,a);y.length>0;)y.pop().fill(0);return f}}o(zx,"createCipher");function Zx(e,t,n,r,i,s=20){let a=e[0],c=e[1],u=e[2],l=e[3],f=t[0],h=t[1],p=t[2],y=t[3],_=t[4],x=t[5],w=t[6],v=t[7],T=i,N=n[0],I=n[1],C=n[2],D=a,U=c,H=u,B=l,z=f,A=h,d=p,m=y,S=_,R=x,k=w,P=v,F=T,M=N,g=I,L=C;for(let ie=0;ie<s;ie+=2)D=D+z|0,F=Xe(F^D,16),S=S+F|0,z=Xe(z^S,12),D=D+z|0,F=Xe(F^D,8),S=S+F|0,z=Xe(z^S,7),U=U+A|0,M=Xe(M^U,16),R=R+M|0,A=Xe(A^R,12),U=U+A|0,M=Xe(M^U,8),R=R+M|0,A=Xe(A^R,7),H=H+d|0,g=Xe(g^H,16),k=k+g|0,d=Xe(d^k,12),H=H+d|0,g=Xe(g^H,8),k=k+g|0,d=Xe(d^k,7),B=B+m|0,L=Xe(L^B,16),P=P+L|0,m=Xe(m^P,12),B=B+m|0,L=Xe(L^B,8),P=P+L|0,m=Xe(m^P,7),D=D+A|0,L=Xe(L^D,16),k=k+L|0,A=Xe(A^k,12),D=D+A|0,L=Xe(L^D,8),k=k+L|0,A=Xe(A^k,7),U=U+d|0,F=Xe(F^U,16),P=P+F|0,d=Xe(d^P,12),U=U+d|0,F=Xe(F^U,8),P=P+F|0,d=Xe(d^P,7),H=H+m|0,M=Xe(M^H,16),S=S+M|0,m=Xe(m^S,12),H=H+m|0,M=Xe(M^H,8),S=S+M|0,m=Xe(m^S,7),B=B+z|0,g=Xe(g^B,16),R=R+g|0,z=Xe(z^R,12),B=B+z|0,g=Xe(g^B,8),R=R+g|0,z=Xe(z^R,7);let V=0;r[V++]=a+D|0,r[V++]=c+U|0,r[V++]=u+H|0,r[V++]=l+B|0,r[V++]=f+z|0,r[V++]=h+A|0,r[V++]=p+d|0,r[V++]=y+m|0,r[V++]=_+S|0,r[V++]=x+R|0,r[V++]=w+k|0,r[V++]=v+P|0,r[V++]=T+F|0,r[V++]=N+M|0,r[V++]=I+g|0,r[V++]=C+L|0}o(Zx,"chachaCore");const Jg=zx(Zx,{counterRight:!1,counterLength:4,allowShortKeys:!1});var vo;let Yg=(vo=class extends Cg{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,sn.hash(t);const r=Pi(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=t.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(t){return sn.exists(this),this.iHash.update(t),this}digestInto(t){sn.exists(this),sn.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:a,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=a,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},o(vo,"HMAC"),vo);const Co=o((e,t,n)=>new Yg(e,t).update(n).digest(),"hmac$1");Co.create=(e,t)=>new Yg(e,t);function Wx(e,t,n){return sn.hash(e),n===void 0&&(n=new Uint8Array(e.outputLen)),Co(e,Pi(n),Pi(t))}o(Wx,"extract");const gl=new Uint8Array([0]),Ch=new Uint8Array;function jx(e,t,n,r=32){if(sn.hash(e),sn.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/e.outputLen);n===void 0&&(n=Ch);const s=new Uint8Array(i*e.outputLen),a=Co.create(e,t),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)gl[0]=l+1,c.update(l===0?Ch:u).update(n).update(gl).digestInto(u),s.set(u,e.outputLen*l),a._cloneInto(c);return a.destroy(),c.destroy(),u.fill(0),gl.fill(0),s.slice(0,r)}o(jx,"expand");var Gx=Object.defineProperty,Nt=o((e,t)=>{for(var n in t)Gx(e,n,{get:t[n],enumerable:!0})},"__export"),Gi=Symbol("verified"),qx=o(e=>e instanceof Object,"isRecord");function Qg(e){if(!qx(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}o(Qg,"validateEvent");var Xg={};Nt(Xg,{Queue:()=>nm,QueueNode:()=>tm,binarySearch:()=>If,insertEventIntoAscendingList:()=>Kx,insertEventIntoDescendingList:()=>Vx,normalizeURL:()=>em,utf8Decoder:()=>rr,utf8Encoder:()=>$n});var rr=new TextDecoder("utf-8"),$n=new TextEncoder;function em(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}o(em,"normalizeURL");function Vx(e,t){const[n,r]=If(e,i=>t.id===i.id?0:t.created_at===i.created_at?-1:i.created_at-t.created_at);return r||e.splice(n,0,t),e}o(Vx,"insertEventIntoDescendingList");function Kx(e,t){const[n,r]=If(e,i=>t.id===i.id?0:t.created_at===i.created_at?-1:t.created_at-i.created_at);return r||e.splice(n,0,t),e}o(Kx,"insertEventIntoAscendingList");function If(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),s=t(e[i]);if(s===0)return[i,!0];s<0?r=i-1:n=i+1}return[n,!1]}o(If,"binarySearch");var Eo,tm=(Eo=class{value;next=null;prev=null;constructor(t){this.value=t}},o(Eo,"QueueNode"),Eo),xo,nm=(xo=class{first;last;constructor(){this.first=null,this.last=null}enqueue(t){const n=new tm(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const t=this.first;return this.first=t.next,t.value}},o(xo,"Queue"),xo),So,Jx=(So=class{generateSecretKey(){return Os.utils.randomPrivateKey()}getPublicKey(t){return fn(Os.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=fn(Os.getPublicKey(n)),r.id=ba(r),r.sig=fn(Os.sign(ba(r),n)),r[Gi]=!0,r}verifyEvent(t){if(typeof t[Gi]=="boolean")return t[Gi];const n=ba(t);if(n!==t.id)return t[Gi]=!1,!1;try{const r=Os.verify(t.sig,n,t.pubkey);return t[Gi]=r,r}catch{return t[Gi]=!1,!1}}},o(So,"JS"),So);function Yx(e){if(!Qg(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}o(Yx,"serializeEvent");function ba(e){let t=As($n.encode(Yx(e)));return fn(t)}o(ba,"getEventHash");var yc=new Jx,tr=yc.generateSecretKey,Rf=yc.getPublicKey,Or=yc.finalizeEvent,Bo=yc.verifyEvent,Qx={};Nt(Qx,{Application:()=>Q2,BadgeAward:()=>a2,BadgeDefinition:()=>j2,BlockedRelaysList:()=>I2,BookmarkList:()=>k2,Bookmarksets:()=>z2,Calendar:()=>sS,CalendarEventRSVP:()=>oS,ChannelCreation:()=>am,ChannelHideMessage:()=>um,ChannelMessage:()=>lm,ChannelMetadata:()=>cm,ChannelMuteUser:()=>fm,ClassifiedListing:()=>tS,ClientAuth:()=>dm,CommunitiesList:()=>T2,CommunityDefinition:()=>lS,CommunityPostApproval:()=>m2,Contacts:()=>r2,CreateOrUpdateProduct:()=>V2,CreateOrUpdateStall:()=>q2,Curationsets:()=>Z2,Date:()=>rS,DraftClassifiedListing:()=>nS,DraftLong:()=>J2,Emojisets:()=>Y2,EncryptedDirectMessage:()=>i2,EncryptedDirectMessages:()=>s2,EventDeletion:()=>o2,FileMetadata:()=>u2,FileServerPreference:()=>O2,Followsets:()=>D2,GenericRepost:()=>c2,Genericlists:()=>$2,HTTPAuth:()=>Of,Handlerinformation:()=>cS,Handlerrecommendation:()=>aS,Highlights:()=>x2,InterestsList:()=>L2,Interestsets:()=>G2,JobFeedback:()=>w2,JobRequest:()=>y2,JobResult:()=>b2,Label:()=>g2,LightningPubRPC:()=>B2,LiveChatMessage:()=>f2,LiveEvent:()=>X2,LongFormArticle:()=>K2,Metadata:()=>e2,Mutelist:()=>S2,NWCWalletInfo:()=>C2,NWCWalletRequest:()=>hm,NWCWalletResponse:()=>F2,NostrConnect:()=>U2,OpenTimestamps:()=>l2,Pinlist:()=>A2,ProblemTracker:()=>d2,ProfileBadges:()=>W2,PublicChatsList:()=>N2,Reaction:()=>Pf,RecommendRelay:()=>n2,RelayList:()=>M2,Relaysets:()=>H2,Report:()=>h2,Reporting:()=>p2,Repost:()=>Lf,SearchRelaysList:()=>R2,ShortTextNote:()=>t2,Time:()=>iS,UserEmojiList:()=>P2,UserStatuses:()=>eS,Zap:()=>E2,ZapGoal:()=>_2,ZapRequest:()=>v2,classifyKind:()=>Xx,isEphemeralKind:()=>sm,isParameterizedReplaceableKind:()=>om,isRegularKind:()=>rm,isReplaceableKind:()=>im});function rm(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}o(rm,"isRegularKind");function im(e){return[0,3].includes(e)||1e4<=e&&e<2e4}o(im,"isReplaceableKind");function sm(e){return 2e4<=e&&e<3e4}o(sm,"isEphemeralKind");function om(e){return 3e4<=e&&e<4e4}o(om,"isParameterizedReplaceableKind");function Xx(e){return rm(e)?"regular":im(e)?"replaceable":sm(e)?"ephemeral":om(e)?"parameterized":"unknown"}o(Xx,"classifyKind");var e2=0,t2=1,n2=2,r2=3,i2=4,s2=4,o2=5,Lf=6,Pf=7,a2=8,c2=16,am=40,cm=41,lm=42,um=43,fm=44,l2=1040,u2=1063,f2=1311,d2=1971,h2=1984,p2=1984,g2=1985,m2=4550,y2=5999,b2=6999,w2=7e3,_2=9041,v2=9734,E2=9735,x2=9802,S2=1e4,A2=10001,M2=10002,k2=10003,T2=10004,N2=10005,I2=10006,R2=10007,L2=10015,P2=10030,O2=10096,C2=13194,B2=21e3,dm=22242,hm=23194,F2=23195,U2=24133,Of=27235,D2=3e4,$2=30001,H2=30002,z2=30003,Z2=30004,W2=30008,j2=30009,G2=30015,q2=30017,V2=30018,K2=30023,J2=30024,Y2=30030,Q2=30078,X2=30311,eS=30315,tS=30402,nS=30403,rS=31922,iS=31923,sS=31924,oS=31925,aS=31989,cS=31990,lS=34550;function uS(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1)return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),i=e[`#${r}`];if(i&&!t.tags.find(([s,a])=>s===n.slice(1)&&i.indexOf(a)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}o(uS,"matchFilter");function fS(e,t){for(let n=0;n<e.length;n++)if(uS(e[n],t))return!0;return!1}o(fS,"matchFilters");var dS={};Nt(dS,{getHex64:()=>bc,getInt:()=>pm,getSubscriptionId:()=>gm,matchEventId:()=>hS,matchEventKind:()=>gS,matchEventPubkey:()=>pS});function bc(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}o(bc,"getHex64");function pm(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,i=e.slice(r),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}o(pm,"getInt");function gm(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(i===-1)return null;let s=r+1+i;return e.slice(r+1,s)}o(gm,"getSubscriptionId");function hS(e,t){return t===bc(e,"id")}o(hS,"matchEventId");function pS(e,t){return t===bc(e,"pubkey")}o(pS,"matchEventPubkey");function gS(e,t){return t===pm(e,"kind")}o(gS,"matchEventKind");var mS={};Nt(mS,{makeAuthEvent:()=>mm});function mm(e,t){return{kind:dm,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}o(mm,"makeAuthEvent");async function yS(){return new Promise(e=>{const t=new MessageChannel,n=o(()=>{t.port1.removeEventListener("message",n),e()},"handler");t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}o(yS,"yieldThread");var Ao,ym=(Ao=class{url;_connected=!1;onclose=null;onnotice=t=>console.debug(`NOTICE from ${this.url}: ${t}`);_onauth=null;baseEoseTimeout=4400;connectionTimeout=4400;openSubs=new Map;connectionTimeoutHandle;connectionPromise;openCountRequests=new Map;openEventPublishes=new Map;ws;incomingMessageQueue=new nm;queueRunning=!1;challenge;serial=0;verifyEvent;_WebSocket;constructor(t,n){this.url=em(t),this.verifyEvent=n.verifyEvent,this._WebSocket=n.websocketImplementation||WebSocket}static async connect(t,n){const r=new ym(t,n);return await r.connect(),r}closeAllSubscriptions(t){for(let[n,r]of this.openSubs)r.close(t);this.openSubs.clear();for(let[n,r]of this.openEventPublishes)r.reject(new Error(t));this.openEventPublishes.clear();for(let[n,r]of this.openCountRequests)r.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,n)=>{this.connectionTimeoutHandle=setTimeout(()=>{n("connection timed out"),this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(r){n(r);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=r=>{n(r.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await yS();this.queueRunning=!1}handleNext(){const t=this.incomingMessageQueue.dequeue();if(!t)return!1;const n=gm(t);if(n){const r=this.openSubs.get(n);if(!r)return;const i=bc(t,"id"),s=r.alreadyHaveEvent?.(i);if(r.receivedEvent?.(this,i),s)return}try{let r=JSON.parse(t);switch(r[0]){case"EVENT":{const i=this.openSubs.get(r[1]),s=r[2];this.verifyEvent(s)&&fS(i.filters,s)&&i.onevent(s);return}case"COUNT":{const i=r[1],s=r[2],a=this.openCountRequests.get(i);a&&(a.resolve(s.count),this.openCountRequests.delete(i));return}case"EOSE":{const i=this.openSubs.get(r[1]);if(!i)return;i.receivedEose();return}case"OK":{const i=r[1],s=r[2],a=r[3],c=this.openEventPublishes.get(i);s?c.resolve(a):c.reject(new Error(a)),this.openEventPublishes.delete(i);return}case"CLOSED":{const i=r[1],s=this.openSubs.get(i);if(!s)return;s.closed=!0,s.close(r[2]);return}case"NOTICE":this.onnotice(r[1]);return;case"AUTH":{this.challenge=r[1],this._onauth?.(r[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{this.ws?.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const n=await t(mm(this.url,this.challenge)),r=new Promise((i,s)=>{this.openEventPublishes.set(n.id,{resolve:i,reject:s})});return this.send('["AUTH",'+JSON.stringify(n)+"]"),r}async publish(t){const n=new Promise((r,i)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:i})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),n}async count(t,n){this.serial++;const r=n?.id||"count:"+this.serial,i=new Promise((s,a)=>{this.openCountRequests.set(r,{resolve:s,reject:a})});return this.send('["COUNT","'+r+'",'+JSON.stringify(t).substring(1)),i}subscribe(t,n){const r=this.prepareSubscription(t,n);return r.fire(),r}prepareSubscription(t,n){this.serial++;const r=n.id||"sub:"+this.serial,i=new bS(this,r,t,n);return this.openSubs.set(r,i),i}close(){this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,this.ws?.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},o(Ao,"AbstractRelay"),Ao),Mo,bS=(Mo=class{relay;id;closed=!1;eosed=!1;filters;alreadyHaveEvent;receivedEvent;onevent;oneose;onclose;eoseTimeout;eoseTimeoutHandle;constructor(t,n,r,i){this.relay=t,this.filters=r,this.id=n,this.alreadyHaveEvent=i.alreadyHaveEvent,this.receivedEvent=i.receivedEvent,this.eoseTimeout=i.eoseTimeout||t.baseEoseTimeout,this.oneose=i.oneose,this.onclose=i.onclose,this.onevent=i.onevent||(s=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,s)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,this.oneose?.())}close(t="closed by caller"){!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),this.onclose?.(t)}},o(Mo,"Subscription"),Mo),bm;try{bm=WebSocket}catch{}var ko,wm=(ko=class extends ym{constructor(t){super(t,{verifyEvent:Bo,websocketImplementation:bm})}static async connect(t){const n=new wm(t);return await n.connect(),n}},o(ko,"Relay"),ko),wS;try{wS=WebSocket}catch{}var Pe={};Nt(Pe,{BECH32_REGEX:()=>_m,Bech32MaxSize:()=>Cf,decode:()=>wc,encodeBytes:()=>_c,naddrEncode:()=>MS,neventEncode:()=>AS,noteEncode:()=>xS,nprofileEncode:()=>SS,npubEncode:()=>ES,nrelayEncode:()=>kS,nsecEncode:()=>vS});var Cf=5e3,_m=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function _S(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}o(_S,"integerToUint8Array");function wc(e){let{prefix:t,words:n}=fs.decode(e,Cf),r=new Uint8Array(fs.fromWords(n));switch(t){case"nprofile":{let i=Xo(r);if(!i[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(i[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:fn(i[0][0]),relays:i[1]?i[1].map(s=>rr.decode(s)):[]}}}case"nevent":{let i=Xo(r);if(!i[0]?.[0])throw new Error("missing TLV 0 for nevent");if(i[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(i[2]&&i[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(i[3]&&i[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:fn(i[0][0]),relays:i[1]?i[1].map(s=>rr.decode(s)):[],author:i[2]?.[0]?fn(i[2][0]):void 0,kind:i[3]?.[0]?parseInt(fn(i[3][0]),16):void 0}}}case"naddr":{let i=Xo(r);if(!i[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!i[2]?.[0])throw new Error("missing TLV 2 for naddr");if(i[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!i[3]?.[0])throw new Error("missing TLV 3 for naddr");if(i[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:rr.decode(i[0][0]),pubkey:fn(i[2][0]),kind:parseInt(fn(i[3][0]),16),relays:i[1]?i[1].map(s=>rr.decode(s)):[]}}}case"nrelay":{let i=Xo(r);if(!i[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:rr.decode(i[0][0])}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:fn(r)};default:throw new Error(`unknown prefix ${t}`)}}o(wc,"decode");function Xo(e){let t={},n=e;for(;n.length>0;){let r=n[0],i=n[1],s=n.slice(2,2+i);if(n=n.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}o(Xo,"parseTLV");function vS(e){return _c("nsec",e)}o(vS,"nsecEncode");function ES(e){return _c("npub",us(e))}o(ES,"npubEncode");function xS(e){return _c("note",us(e))}o(xS,"noteEncode");function Fo(e,t){let n=fs.toWords(t);return fs.encode(e,n,Cf)}o(Fo,"encodeBech32");function _c(e,t){return Fo(e,t)}o(_c,"encodeBytes");function SS(e){let t=vc({0:[us(e.pubkey)],1:(e.relays||[]).map(n=>$n.encode(n))});return Fo("nprofile",t)}o(SS,"nprofileEncode");function AS(e){let t;e.kind!==void 0&&(t=_S(e.kind));let n=vc({0:[us(e.id)],1:(e.relays||[]).map(r=>$n.encode(r)),2:e.author?[us(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return Fo("nevent",n)}o(AS,"neventEncode");function MS(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=vc({0:[$n.encode(e.identifier)],1:(e.relays||[]).map(r=>$n.encode(r)),2:[us(e.pubkey)],3:[new Uint8Array(t)]});return Fo("naddr",n)}o(MS,"naddrEncode");function kS(e){let t=vc({0:[$n.encode(e)]});return Fo("nrelay",t)}o(kS,"nrelayEncode");function vc(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(n)],0),s.set([i.length],1),s.set(i,2),t.push(s)})}),gc(...t)}o(vc,"encodeTLV");var ku={};Nt(ku,{decrypt:()=>TS,encrypt:()=>vm});async function vm(e,t,n){const r=e instanceof Uint8Array?fn(e):e,i=xs.getSharedSecret(r,"02"+t),s=Em(i);let a=Uint8Array.from(Bg(16)),c=$n.encode(n),u=Gg(s,a).encrypt(c),l=Tr.encode(new Uint8Array(u)),f=Tr.encode(new Uint8Array(a.buffer));return`${l}?iv=${f}`}o(vm,"encrypt$1");async function TS(e,t,n){const r=e instanceof Uint8Array?fn(e):e;let[i,s]=n.split("?iv="),a=xs.getSharedSecret(r,"02"+t),c=Em(a),u=Tr.decode(s),l=Tr.decode(i),f=Gg(c,u).decrypt(l);return rr.decode(f)}o(TS,"decrypt$1");function Em(e){return e.slice(1,33)}o(Em,"getNormalizedX");var xm={};Nt(xm,{NIP05_REGEX:()=>Sm,isValid:()=>RS,queryProfile:()=>Am,searchDomain:()=>IS,useFetchImplementation:()=>NS});var Sm=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,Ec;try{Ec=fetch}catch{}function NS(e){Ec=e}o(NS,"useFetchImplementation");async function IS(e,t=""){try{const n=`https://${e}/.well-known/nostr.json?name=${t}`;return(await(await Ec(n,{redirect:"error"})).json()).names}catch{return{}}}o(IS,"searchDomain");async function Am(e){const t=e.match(Sm);if(!t)return null;const[n,r="_",i]=t;try{const s=`https://${i}/.well-known/nostr.json?name=${r}`,a=await(await Ec(s,{redirect:"error"})).json();let c=a.names[r];return c?{pubkey:c,relays:a.relays?.[c]}:null}catch{return null}}o(Am,"queryProfile");async function RS(e,t){let n=await Am(t);return n?n.pubkey===e:!1}o(RS,"isValid");var LS={};Nt(LS,{parse:()=>PS});function PS(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const i=n[r],[s,a,c,u]=i,l={id:a,relays:c?[c]:[]},f=r===0,h=r===n.length-1;if(u==="root"){t.root=l;continue}if(u==="reply"){t.reply=l;continue}if(u==="mention"){t.mentions.push(l);continue}if(f){t.root=l;continue}if(h){t.reply=l;continue}t.mentions.push(l)}return t}o(PS,"parse$1");var OS={};Nt(OS,{fetchRelayInformation:()=>BS,useFetchImplementation:()=>CS});var Mm;try{Mm=fetch}catch{}function CS(e){Mm=e}o(CS,"useFetchImplementation2");async function BS(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}o(BS,"fetchRelayInformation");var FS={};Nt(FS,{getPow:()=>km,minePow:()=>US});function km(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(r===0)t+=4;else{t+=Math.clz32(r)-28;break}}return t}o(km,"getPow");function US(e,t){let n=0;const r=e,i=["nonce",n.toString(),t.toString()];for(r.tags.push(i);;){const s=Math.floor(new Date().getTime()/1e3);if(s!==r.created_at&&(n=0,r.created_at=s),i[1]=(++n).toString(),r.id=ba(r),km(r.id)>=t)break}return r}o(US,"minePow");var DS={};Nt(DS,{finishRepostEvent:()=>$S,getRepostedEvent:()=>HS,getRepostedEventPointer:()=>Tm});function $S(e,t,n,r){return Or({kind:Lf,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:e.content===""?"":JSON.stringify(t),created_at:e.created_at},r)}o($S,"finishRepostEvent");function Tm(e){if(e.kind!==Lf)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const i=e.tags[r];i.length>=2&&(i[0]==="e"&&t===void 0?t=i:i[0]==="p"&&n===void 0&&(n=i))}if(t!==void 0)return{id:t[1],relays:[t[2],n?.[2]].filter(r=>typeof r=="string"),author:n?.[1]}}o(Tm,"getRepostedEventPointer");function HS(e,{skipVerification:t}={}){const n=Tm(e);if(n===void 0||e.content==="")return;let r;try{r=JSON.parse(e.content)}catch{return}if(r.id===n.id&&!(!t&&!Bo(r)))return r}o(HS,"getRepostedEvent");var zS={};Nt(zS,{NOSTR_URI_REGEX:()=>xc,parse:()=>WS,test:()=>ZS});var xc=new RegExp(`nostr:(${_m.source})`);function ZS(e){return typeof e=="string"&&new RegExp(`^${xc.source}$`).test(e)}o(ZS,"test");function WS(e){const t=e.match(new RegExp(`^${xc.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:wc(t[1])}}o(WS,"parse2");var jS={};Nt(jS,{finishReactionEvent:()=>GS,getReactedEventPointer:()=>qS});function GS(e,t,n){const r=t.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return Or({...e,kind:Pf,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}o(GS,"finishReactionEvent");function qS(e){if(e.kind!==Pf)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const i=e.tags[r];i.length>=2&&(i[0]==="e"&&t===void 0?t=i:i[0]==="p"&&n===void 0&&(n=i))}if(!(t===void 0||n===void 0))return{id:t[1],relays:[t[2],n[2]].filter(r=>r!==void 0),author:n[1]}}o(qS,"getReactedEventPointer");var VS={};Nt(VS,{matchAll:()=>KS,regex:()=>Bf,replaceAll:()=>JS});var Bf=o(()=>new RegExp(`\\b${xc.source}\\b`,"g"),"regex");function*KS(e){const t=e.matchAll(Bf());for(const n of t)try{const[r,i]=n;yield{uri:r,value:i,decoded:wc(i),start:n.index,end:n.index+r.length}}catch{}}o(KS,"matchAll");function JS(e,t){return e.replaceAll(Bf(),(n,r)=>t({uri:n,value:r,decoded:wc(r)}))}o(JS,"replaceAll");var YS={};Nt(YS,{channelCreateEvent:()=>QS,channelHideMessageEvent:()=>tA,channelMessageEvent:()=>eA,channelMetadataEvent:()=>XS,channelMuteUserEvent:()=>nA});var QS=o((e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return Or({kind:am,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},"channelCreateEvent"),XS=o((e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return Or({kind:cm,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},"channelMetadataEvent"),eA=o((e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),Or({kind:lm,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},"channelMessageEvent"),tA=o((e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return Or({kind:um,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},"channelHideMessageEvent"),nA=o((e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return Or({kind:fm,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)},"channelMuteUserEvent"),rA={};Nt(rA,{EMOJI_SHORTCODE_REGEX:()=>Nm,matchAll:()=>iA,regex:()=>Ff,replaceAll:()=>sA});var Nm=/:(\w+):/,Ff=o(()=>new RegExp(`\\B${Nm.source}\\B`,"g"),"regex2");function*iA(e){const t=e.matchAll(Ff());for(const n of t)try{const[r,i]=n;yield{shortcode:r,name:i,start:n.index,end:n.index+r.length}}catch{}}o(iA,"matchAll2");function sA(e,t){return e.replaceAll(Ff(),(n,r)=>t({shortcode:n,name:r}))}o(sA,"replaceAll2");var oA={};Nt(oA,{useFetchImplementation:()=>aA,validateGithub:()=>cA});var Uf;try{Uf=fetch}catch{}function aA(e){Uf=e}o(aA,"useFetchImplementation3");async function cA(e,t,n){try{return await(await Uf(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}o(cA,"validateGithub");var lA={};Nt(lA,{decrypt:()=>Bm,encrypt:()=>Cm,getConversationKey:()=>Lm,v2:()=>pA});var Im=1,Rm=65535;function Lm(e,t){const n=xs.getSharedSecret(e,"02"+t).subarray(1,33);return Wx(As,n,"nip44-v2")}o(Lm,"getConversationKey");function Pm(e,t){const n=jx(As,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}o(Pm,"getMessageKeys");function Df(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}o(Df,"calcPaddedLen");function uA(e){if(!Number.isSafeInteger(e)||e<Im||e>Rm)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}o(uA,"writeU16BE");function fA(e){const t=$n.encode(e),n=t.length,r=uA(n),i=new Uint8Array(Df(n)-n);return gc(r,t,i)}o(fA,"pad");function dA(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<Im||t>Rm||n.length!==t||e.length!==2+Df(t))throw new Error("invalid padding");return rr.decode(n)}o(dA,"unpad");function Om(e,t,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=gc(n,t);return Co(As,e,r)}o(Om,"hmacAad");function hA(e){if(typeof e!="string")throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(e[0]==="#")throw new Error("unknown encryption version");let n;try{n=Tr.decode(e)}catch(s){throw new Error("invalid base64: "+s.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const i=n[0];if(i!==2)throw new Error("unknown encryption version "+i);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}o(hA,"decodePayload");function Cm(e,t,n=Bg(32)){const{chacha_key:r,chacha_nonce:i,hmac_key:s}=Pm(t,n),a=fA(e),c=Jg(r,i,a),u=Om(s,c,n);return Tr.encode(gc(new Uint8Array([2]),n,c,u))}o(Cm,"encrypt2");function Bm(e,t){const{nonce:n,ciphertext:r,mac:i}=hA(e),{chacha_key:s,chacha_nonce:a,hmac_key:c}=Pm(t,n),u=Om(c,r,n);if(!Ax(u,i))throw new Error("invalid MAC");const l=Jg(s,a,r);return dA(l)}o(Bm,"decrypt2");var pA={utils:{getConversationKey:Lm,calcPaddedLen:Df},encrypt:Cm,decrypt:Bm},gA={};Nt(gA,{makeNwcRequestEvent:()=>yA,parseConnectionString:()=>mA});function mA(e){const{pathname:t,searchParams:n}=new URL(e),r=t,i=n.get("relay"),s=n.get("secret");if(!r||!i||!s)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:s}}o(mA,"parseConnectionString");async function yA(e,t,n){const i=await vm(t,e,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),s={kind:hm,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e]]};return Or(s,t)}o(yA,"makeNwcRequestEvent");var bA={};Nt(bA,{getZapEndpoint:()=>_A,makeZapReceipt:()=>xA,makeZapRequest:()=>vA,useFetchImplementation:()=>wA,validateZapRequest:()=>EA});var $f;try{$f=fetch}catch{}function wA(e){$f=e}o(wA,"useFetchImplementation4");async function _A(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:a}=fs.decode(n,1e3),c=fs.fromWords(a);t=rr.decode(c)}else if(r){let[a,c]=r.split("@");t=new URL(`/.well-known/lnurlp/${a}`,`https://${c}`).toString()}else return null;let s=await(await $f(t)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}o(_A,"getZapEndpoint");function vA({profile:e,event:t,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&s.tags.push(["e",t]),s}o(vA,"makeZapRequest");function EA(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Qg(t))return"Zap request is not a valid Nostr event.";if(!Bo(t))return"Invalid signature on zap request.";let n=t.tags.find(([s,a])=>s==="p"&&a);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find(([s,a])=>s==="e"&&a);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([s,a])=>s==="relays"&&a)?null:"Zap request doesn't have a 'relays' tag."}o(EA,"validateZapRequest");function xA({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let i=JSON.parse(e),s=i.tags.filter(([c])=>c==="e"||c==="p"||c==="a"),a={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...s,["P",i.pubkey],["bolt11",n],["description",e]]};return t&&a.tags.push(["preimage",t]),a}o(xA,"makeZapReceipt");var SA={};Nt(SA,{getToken:()=>AA,hashPayload:()=>Hf,unpackEventFromToken:()=>Um,validateEvent:()=>Wm,validateEventKind:()=>$m,validateEventMethodTag:()=>zm,validateEventPayloadTag:()=>Zm,validateEventTimestamp:()=>Dm,validateEventUrlTag:()=>Hm,validateToken:()=>MA});var Fm="Nostr ";async function AA(e,t,n,r=!1,i){const s={kind:Of,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};i&&s.tags.push(["payload",Hf(i)]);const a=await n(s);return(r?Fm:"")+Tr.encode($n.encode(JSON.stringify(a)))}o(AA,"getToken");async function MA(e,t,n){const r=await Um(e).catch(s=>{throw s});return await Wm(r,t,n).catch(s=>{throw s})}o(MA,"validateToken");async function Um(e){if(!e)throw new Error("Missing token");e=e.replace(Fm,"");const t=rr.decode(Tr.decode(e));if(!t||t.length===0||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}o(Um,"unpackEventFromToken");function Dm(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}o(Dm,"validateEventTimestamp");function $m(e){return e.kind===Of}o($m,"validateEventKind");function Hm(e,t){const n=e.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===t:!1}o(Hm,"validateEventUrlTag");function zm(e,t){const n=e.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===t.toLowerCase():!1}o(zm,"validateEventMethodTag");function Hf(e){const t=As($n.encode(JSON.stringify(e)));return fn(t)}o(Hf,"hashPayload");function Zm(e,t){const n=e.tags.find(i=>i[0]==="payload");if(!n)return!1;const r=Hf(t);return n.length>0&&n[1]===r}o(Zm,"validateEventPayloadTag");async function Wm(e,t,n,r){if(!Bo(e))throw new Error("Invalid nostr event, signature invalid");if(!$m(e))throw new Error("Invalid nostr event, kind invalid");if(!Dm(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!Hm(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!zm(e,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!Zm(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}o(Wm,"validateEvent2");const Ha=o(e=>new wm(e),"relayInit"),jm=o(()=>Pe.nsecEncode(tr()),"generateNsec"),kA={media:{},mediaStats:{video:0,image:0,other:0},thumbnails:{},windowSize:{w:window.innerWidth,h:window.innerHeight}},Gm=Ht(),TA=o(e=>{const t=new IntersectionObserver(_=>{_.forEach(x=>{if(x.target.tagName!=="VIDEO")return;const w=x.target;x.isIntersecting&&w.paused?w.play():w.pause()})}),n=o((_,x,w)=>{const v=p.media[_]||[],T=o(I=>x?x===I:!0,"isOfSize"),N=o(I=>w!==void 0?w===!!I:!0,"isAnimated");return v.find(I=>T(I.s)&&N(I.a))},"getMedia"),r=o((_,x,w)=>_?n(_,x,w)?.media_url:void 0,"getMediaUrl"),i=o(()=>{y("windowSize",()=>({w:window.innerWidth,h:window.innerHeight}))},"onResize");let s=!1;const a=o(_=>{s&&_.target.scrollIntoView(),s=!s},"onFullscreenChange"),c=o(_=>{_&&t.observe(_)},"addVideo"),u=o(_=>{if(_)return p.thumbnails[_]},"getThumbnail"),l=o(_=>{if(_.kind===W.MediaInfo){const x=JSON.parse(_.content);let w={};for(let v=0;v<x.resources.length;v++){const T=x.resources[v];w[T.url]=T.variants}try{y("media",()=>({...w})),x.thumbnails&&y("thumbnails",v=>({...v,...x.thumbnails}))}catch(v){console.warn("Error updating media: ",v)}}if(_.kind===W.MediaStats){const x=JSON.parse(_.content);y("mediaStats",()=>({...x}))}},"handleMediaEvent"),f=o(async _=>{const x=await Es(_),w=JSON.parse(x),[v,T,N]=w;if(v==="EVENTS")for(let I=0;I<N.length;I++){const C=N[I];l(C)}v==="EVENT"&&l(N)},"onMessage"),h=o(_=>{const x=_.target;ri(x,{message:f,close:h})},"onSocketClose");ai(()=>{window.addEventListener("resize",i),window.addEventListener("fullscreenchange",a)}),on(()=>{window.removeEventListener("resize",i),window.removeEventListener("fullscreenchange",a)}),at(()=>{ni()&&uc(yt(),{message:f,close:h})}),on(()=>{ri(yt(),{message:f,close:h})});const[p,y]=Xt({...kA,actions:{getMedia:n,getMediaUrl:r,addVideo:c,getThumbnail:u}});return pe(Gm.Provider,{value:p,get children(){return e.children}})},"MediaProvider"),zf=o(()=>zt(Gm),"useMediaContext"),Bh=o((e,t)=>{const n=window[e];n&&n(t)},"hook"),Sc=o(e=>localStorage.getItem("devMode")!=="true"?e:t=>{const n=t.id||`${e.name}_${crypto.randomUUID()}`,r={name:e.name,props:t,domId:n};ai(()=>{Bh("onPrimalComponentMount",r)}),on(()=>{Bh("onPrimalComponentCleanup",r)});try{t.id=n}catch(i){en("Error setting hook id:",i)}return e(t)},"hookForDev"),NA="_linkPreview_1slv9_1",IA="_bordered_1slv9_19",RA="_linkPreviewH_1slv9_23",LA="_noImage_1slv9_45",PA="_previewImage_1slv9_48",OA="_previewInfo_1slv9_52",CA="_previewUrlLine_1slv9_58",BA="_previewTitle_1slv9_66",FA="_previewDescription_1slv9_73",UA="_short_1slv9_78",Kn={linkPreview:NA,bordered:IA,linkPreviewH:RA,noImage:LA,previewImage:PA,previewInfo:OA,previewUrlLine:CA,previewTitle:BA,previewDescription:FA,short:UA},DA=qt('<img style="width:180px;height:120px">'),ml=qt("<div>"),$A=qt('<a target="_blank"><div><div>'),Fh=3,HA=o(e=>{const t=zf(),n=encodeURI(new URL(e.preview.url.toLowerCase()).origin),r=o(()=>t?.actions.getMedia(e.preview.images[0]||"","m"),"image"),i=o(()=>{let p=Kn.linkPreviewH;return h()||(p+=` ${Kn.noImage}`),e.bordered&&(p+=` ${Kn.bordered}`),p+=" embeddedContent",p+=e.isLast?" noBottomMargin":"",p},"klass"),[s,a]=lt(0),c=o(p=>{if(s()>Fh)return;a(_=>_+1);const y=p.target;return y.onerror="",y.src=e.preview.images[0],!0},"onError");let u;const[l,f]=lt(!1);at(Bi(()=>e.preview.title,(p,y)=>{!p||p===y||new ResizeObserver(()=>{f(()=>(u?.clientHeight||0)>25)}).observe(u)}));const h=o(()=>s()<Fh&&(r()||e.preview.images[0]),"hasImage");return(()=>{const p=$A(),y=p.firstChild,_=y.firstChild;return Ot(p,pe(Dn,{get when(){return h()},get children(){const x=DA();return x.addEventListener("error",c),ct(w=>{const v=Kn.previewImage,T=r()?.media_url||e.preview.images[0];return v!==w._v$&&pt(x,w._v$=v),T!==w._v$2&&ht(x,"src",w._v$2=T),w},{_v$:void 0,_v$2:void 0}),x}}),y),Ot(y,pe(Dn,{get when(){return e.preview.title},get children(){const x=ml(),w=u;return typeof w=="function"?ic(w,x):u=x,Ot(x,()=>e.preview.title),ct(()=>pt(x,Kn.previewTitle)),x}}),_),Ot(y,pe(Dn,{get when(){return e.preview.description},get children(){const x=ml();return Ot(x,()=>e.preview.description),ct(()=>pt(x,`${Kn.previewDescription} ${l()?Kn.short:""}`)),x}}),_),Ot(_,pe(Dn,{when:n,get children(){const x=ml();return Ot(x,n),ct(()=>pt(x,Kn.previewUrl)),x}})),ct(x=>{const w=e.id,v=e.preview.url,T=i(),N=Kn.previewInfo,I=Kn.previewUrlLine;return w!==x._v$3&&ht(p,"id",x._v$3=w),v!==x._v$4&&ht(p,"href",x._v$4=v),T!==x._v$5&&pt(p,x._v$5=T),N!==x._v$6&&pt(y,x._v$6=N),I!==x._v$7&&pt(_,x._v$7=I),x},{_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0}),p})()},"LinkPreview"),zA=Sc(HA),wn=o(e=>{try{return e?Pe.npubEncode(e):""}catch(t){return console.warn(`Invalid pubkey hex ${e}: `,t),""}},"hexToNpub"),M4=o(e=>e?Pe.nsecEncode(e):"","hexToNsec"),ks=o(e=>{try{const t=Pe.decode(e);return t?typeof t.data=="string"?t.data:t.data.pubkey:""}catch{return console.error("nip19 decode error"),""}},"npubToHex"),Uo=o(e=>{try{return Pe.decode(e)}catch(t){return en("Failed to decode identifier: ",t),{type:"error",data:e}}},"decodeIdentifier"),Tu={small:250,medium:250,large:250,huge:250,final:100},ZA={following:[],followingSince:0,muted:[],mutedPrivate:"",mutedSince:0,relaySettings:{},likes:[],feeds:[],homeFeeds:[],readsFeeds:[],msgContacts:{profiles:{other:{},follows:{},any:{}},counts:{}},dmConversations:{profiles:{},counts:{}},theme:"sunrise",homeSidebarSelection:void 0,userProfile:void 0,recomended:{profiles:[],stats:{}},emojiHistory:[],noteDraft:{},noteDraftUserRefs:{},uploadTime:Tu,selectedFeed:void 0,bookmarks:[],animated:!0,selectedHomeFeed:void 0,selectedReadsFeed:void 0,selectedBookmarksFeed:void 0,dmLastConversation:void 0,dmLastRelation:void 0,premiumReminder:0,dvms:void 0},qm=o(e=>e?`store_${e}`:"anon","storageName"),Oe=o(e=>{if(!e)return{};const t=qm(e),n=localStorage.getItem(t);return n?JSON.parse(n):{...ZA}},"getStorage"),bt=o((e,t)=>{if(!e)return;const n=qm(e),r=JSON.stringify(t);localStorage.setItem(n,r)},"setStorage"),yl=o((e,t,n)=>{if(!e)return;const r=Oe(e);r.following=[...t],r.followingSince=n,bt(e,r)},"saveFollowing"),WA=o((e,t,n,r)=>{if(!e)return;const i=Oe(e);i.muted=[...t],i.mutedPrivate=n,i.mutedSince=r,bt(e,i)},"saveMuteList"),Uh=o((e,t,n)=>{if(!e)return;const r=Oe(e);r.muted=[...t],r.mutedSince=n,bt(e,r)},"saveMuted"),bl=o((e,t)=>{if(!e)return;const n=Oe(e);n.relaySettings={...t},bt(e,n)},"saveRelaySettings"),Dh=o((e,t)=>{if(!e)return;const n=Oe(e);n.likes=[...t],bt(e,n)},"saveLikes"),Ac=o((e,t)=>{if(!e)return;const n=Oe(e);n.feeds=[...t],bt(e,n)},"saveFeeds"),wa=o((e,t)=>{if(!e)return;const n=Oe(e);n.homeFeeds=[...t],bt(e,n)},"saveHomeFeeds"),Vm=o((e,t)=>{if(!e)return;const n=Oe(e);n.readsFeeds=[...t],bt(e,n)},"saveReadsFeeds"),jA=o((e,t)=>{if(!e)return;const n=Oe(e);n.theme=t,bt(e,n)},"saveTheme"),GA=o((e,t)=>{if(!e)return;const n=Oe(e);n.animated=t,bt(e,n)},"saveAnimated"),qA=o((e,t)=>{if(!e)return;const n=Oe(e);n.recomended=t,bt(e,n)},"saveRecomendedUsers"),VA=o(e=>{if(!e)return;const n=Oe(e).recomended;return n||void 0},"readRecomendedUsers"),$h=o((e,t)=>{if(!e)return;const n=Oe(e);n.emojiHistory=t,bt(e,n)},"saveEmojiHistory"),KA=o(e=>e?Oe(e).emojiHistory||[]:[],"readEmojiHistory"),k4=o((e,t,n)=>{if(!e)return;const r=Oe(e),i=n||"root";(!r.noteDraft||typeof r.noteDraft=="string")&&(r.noteDraft={}),r.noteDraft[i]=t,bt(e,r)},"saveNoteDraft"),T4=o((e,t)=>{if(!e)return"";const n=Oe(e);(!n.noteDraft||typeof n.noteDraft=="string")&&(n.noteDraft={});const r=t||"root";return n.noteDraft[r]||""},"readNoteDraft"),N4=o((e,t,n)=>{if(!e)return;const r=Oe(e),i=n||"root";(!r.noteDraftUserRefs||typeof r.noteDraftUserRefs=="string")&&(r.noteDraftUserRefs={}),r.noteDraftUserRefs[i]=t,bt(e,r)},"saveNoteDraftUserRefs"),I4=o((e,t)=>{if(!e)return{};const n=Oe(e);(!n.noteDraftUserRefs||typeof n.noteDraftUserRefs=="string")&&(n.noteDraftUserRefs={});const r=t||"root";return n.noteDraftUserRefs[r]||{}},"readNoteDraftUserRefs"),R4=o((e,t)=>{if(!e)return;const n=Oe(e);n.uploadTime={...n.uploadTime,...t},bt(e,n)},"saveUploadTime"),L4=o(e=>{if(!e)return{...Tu};const t=Oe(e);return{...Tu,...t.uploadTime}},"readUploadTime"),P4=o((e,t)=>{if(!e)return;const n=Oe(e);n.homeSidebarSelection=t?{...t}:void 0,bt(e,n)},"saveHomeSidebarSelection"),O4=o(e=>{if(!e)return;const n=Oe(e).homeSidebarSelection;return n||void 0},"readHomeSidebarSelection"),JA=o((e,t)=>{if(!e)return;const n=Oe(e);n.premiumReminder=t,bt(e,n)},"savePremiumReminder"),YA=o(e=>e?Oe(e).premiumReminder:void 0,"readPremiumReminder"),Zf=o(()=>localStorage.getItem("primalSec")||void 0,"readSecFromStorage"),C4=o(e=>{if(!e){localStorage.removeItem("primalSec");return}localStorage.setItem("primalSec",e)},"storeSec"),QA=o(()=>{localStorage.removeItem("primalSec")},"clearSec"),wl=o(e=>{const n=Oe(e).userProfile;if(n&&n.pubkey===e)return n},"getStoredProfile"),XA=o(e=>{const t=Oe(e.pubkey);t.userProfile={...e},bt(e.pubkey,t)},"setStoredProfile"),eM=o((e,t)=>{const n=Oe(e);n.dmLastConversation=t,bt(e,n)},"saveLastDMConversations"),Hh=o((e,t)=>{const n=Oe(e);n.dmLastRelation=t,bt(e,n)},"saveLastDMRelation"),B4=o((e,t)=>{if(!e)return;const n=Oe(e);return t==="reads"?n.selectedReadsFeed:n.selectedHomeFeed},"fetchStoredFeed"),Km=o((e,t,n)=>{if(!e)return;const r=Oe(e);t==="home"?r.selectedHomeFeed={...n}:t==="reads"&&(r.selectedReadsFeed={...n}),bt(e,r)},"saveStoredFeed"),F4=o(e=>e?Oe(e).selectedBookmarksFeed:void 0,"fetchBookmarksFeed"),U4=o((e,t)=>{if(!e)return;const n=Oe(e);n.selectedBookmarksFeed=t,bt(e,n)},"saveBookmarksFeed"),tM=o((e,t)=>{if(!e)return;const n=Oe(e);n.bookmarks=[...t],bt(e,n)},"saveBookmarks"),nM=o(e=>e?Oe(e).bookmarks||[]:[],"readBookmarks"),D4=o((e,t)=>{if(!e)return;const n=Oe(e);n.dvms=[...t],bt(e,n)},"saveDVMs"),$4=o(e=>e?Oe(e).dvms||[]:[],"readDVMs"),rM=o(e=>{localStorage.setItem("nostrStats",JSON.stringify(e))},"saveNostrStats"),iM=o(()=>{const e=localStorage.getItem("nostrStats")||JSON.stringify({users:0,pubkeys:0,pubnotes:0,reactions:0,reposts:0,any:0,zaps:0,satszapped:0});return JSON.parse(e)},"loadNostrStats"),H4=o(e=>{localStorage.setItem("trendingUsers",JSON.stringify(e))},"saveTrendingUsers"),z4=o(()=>JSON.parse(localStorage.getItem("trendingUsers")||"[]"),"loadTrendingUsers"),sM=o(e=>{localStorage.setItem("hotTopics",JSON.stringify(e))},"saveHotTopics"),oM=o(()=>JSON.parse(localStorage.getItem("hotTopics")||"[]"),"loadHotTopics");/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wf(...e){const t=o((i,s)=>a=>i(s(a)),"wrap"),n=Array.from(e).reverse().reduce((i,s)=>i?t(i,s.encode):s.encode,void 0),r=e.reduce((i,s)=>i?t(i,s.decode):s.decode,void 0);return{encode:n,decode:r}}o(Wf,"chain$1");function jf(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}o(jf,"alphabet$1");function Gf(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}o(Gf,"join$1");function Jm(e,t="="){if(typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}o(Jm,"padding");function zh(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],s=Array.from(e);for(s.forEach(a=>{if(a<0||a>=t)throw new Error(`Wrong integer: ${a}`)});;){let a=0,c=!0;for(let u=r;u<s.length;u++){const l=s[u],f=t*a+l;if(!Number.isSafeInteger(f)||t*a/t!==a||f-l!==t*a)throw new Error("convertRadix: carry overflow");a=f%n;const h=Math.floor(f/n);if(s[u]=h,!Number.isSafeInteger(h)||h*n+a!==f)throw new Error("convertRadix: carry overflow");if(c)h?c=!1:r=u;else continue}if(i.push(a),c)break}for(let a=0;a<e.length-1&&e[a]===0;a++)i.push(0);return i.reverse()}o(zh,"convertRadix$1");const Ym=o((e,t)=>t?Ym(t,e%t):e,"gcd"),za=o((e,t)=>e+(t-Ym(e,t)),"radix2carry");function Nu(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(za(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${za(t,n)}`);let i=0,s=0;const a=2**n-1,c=[];for(const u of e){if(u>=2**t)throw new Error(`convertRadix2: invalid data word=${u} from=${t}`);if(i=i<<t|u,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)c.push((i>>s-n&a)>>>0);i&=2**s-1}if(i=i<<n-s&a,!r&&s>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}o(Nu,"convertRadix2");function aM(e){return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return zh(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(zh(t,e,2**8))}}}o(aM,"radix$1");function qf(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(za(8,e)>32||za(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Nu(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Nu(n,e,8,t))}}}o(qf,"radix2");function Zh(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}o(Zh,"unsafeWrapper");function cM(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),s=n.slice(-e);for(let a=0;a<e;a++)if(i[a]!==s[a])throw new Error("Invalid checksum");return r}}}o(cM,"checksum$1");const ea={alphabet:jf,chain:Wf,checksum:cM,radix:aM,radix2:qf,join:Gf,padding:Jm},Za=Wf(qf(6),jf("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Jm(6),Gf("")),Iu=Wf(jf("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Gf("")),Wh=[996825010,642813549,513874426,1027748829,705979059];function Bs(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<Wh.length;r++)(t>>r&1)===1&&(n^=Wh[r]);return n}o(Bs,"bech32Polymod");function jh(e,t,n=1){const r=e.length;let i=1;for(let s=0;s<r;s++){const a=e.charCodeAt(s);if(a<33||a>126)throw new Error(`Invalid prefix (${e})`);i=Bs(i)^a>>5}i=Bs(i);for(let s=0;s<r;s++)i=Bs(i)^e.charCodeAt(s)&31;for(let s of t)i=Bs(i)^s;for(let s=0;s<6;s++)i=Bs(i);return i^=n,Iu.encode(Nu([i%2**30],30,5,!1))}o(jh,"bechChecksum");function lM(e){const t=e==="bech32"?1:734539939,n=qf(5),r=n.decode,i=n.encode,s=Zh(r);function a(f,h,p=90){if(typeof f!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof f}`);if(!Array.isArray(h)||h.length&&typeof h[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof h}`);const y=f.length+7+h.length;if(p!==!1&&y>p)throw new TypeError(`Length ${y} exceeds limit ${p}`);const _=f.toLowerCase(),x=jh(_,h,t);return`${_}1${Iu.encode(h)}${x}`}o(a,"encode");function c(f,h=90){if(typeof f!="string")throw new Error(`bech32.decode input should be string, not ${typeof f}`);if(f.length<8||h!==!1&&f.length>h)throw new TypeError(`Wrong string length: ${f.length} (${f}). Expected (8..${h})`);const p=f.toLowerCase();if(f!==p&&f!==f.toUpperCase())throw new Error("String must be lowercase or uppercase");f=p;const y=f.lastIndexOf("1");if(y===0||y===-1)throw new Error('Letter "1" must be present between prefix and data only');const _=f.slice(0,y),x=f.slice(y+1);if(x.length<6)throw new Error("Data must be at least 6 characters long");const w=Iu.decode(x).slice(0,-6),v=jh(_,w,t);if(!x.endsWith(v))throw new Error(`Invalid checksum in ${f}: expected "${v}"`);return{prefix:_,words:w}}o(c,"decode");const u=Zh(c);function l(f){const{prefix:h,words:p}=c(f,!1);return{prefix:h,words:p,bytes:r(p)}}return o(l,"decodeToBytes"),{encode:a,decode:c,decodeToBytes:l,decodeUnsafe:u,fromWords:r,fromWordsUnsafe:s,toWords:i}}o(lM,"genBech32");const Z4=lM("bech32"),[uM,W4]=lt(""),[fM,j4]=lt(),G4=o(e=>{const t=e?tr():Zf()||tr(),n=Rf(t);return{sec:t,pubkey:n}},"generateKeys"),q4=o(async(e,t)=>{try{const n=window.crypto;if(!n)throw"not-secure-env";const r=new TextEncoder,i=await n.subtle.digest("SHA-256",r.encode(e));let s=Uint8Array.from(n.getRandomValues(new Uint8Array(16))),a=r.encode(t),c=await n.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),u=await n.subtle.encrypt({name:"AES-CBC",iv:s},c,a),l=Za.encode(new Uint8Array(u)),f=Za.encode(new Uint8Array(s.buffer));return`${eo}${l}${I0}${f}`}catch(n){return nt("Failed to encrypt with PIN: ",n),""}},"encryptWithPin"),dM=o(async(e,t)=>{try{if(!t.startsWith(eo))throw"bad-cipher";const n=window.crypto;if(!n)throw"not-secure-env";const r=new TextEncoder,i=new TextDecoder("utf-8"),s=t.slice(eo.length),a=await n.subtle.digest("SHA-256",r.encode(e));let[c,u]=s.split(I0),l=await n.subtle.importKey("raw",a,{name:"AES-CBC"},!1,["decrypt"]),f=Za.decode(c),h=Za.decode(u),p=await n.subtle.decrypt({name:"AES-CBC",iv:h},l,f);return i.decode(p)}catch(n){return nt("Failed to decrypt with PIN: ",n),""}},"decryptWithPin"),hM=o(e=>{const t=o(async()=>{let c=e||Zf()||fM()||jm();c.startsWith(eo)&&(c=await dM(uM(),c));const u=Pe.decode(c);if(u.type!=="nsec"||!u.data)throw"invalid-nsec";return c=u.data,c.length>0?c:void 0},"getSec");return{getPublicKey:o(async()=>{const c=await t();if(!c)throw"pubkey-no-nsec";return await Rf(c)},"gPk"),getRelays:o(()=>new Promise(c=>{c({})}),"gRl"),nip04:{encrypt:o(async(c,u)=>{const l=await t();if(!l)throw"encrypt-no-nsec";return await ku.encrypt(l,c,u)},"encrypt"),decrypt:o(async(c,u)=>{const l=await t();if(!l)throw"decrypt-no-nsec";return await ku.decrypt(l,c,u)},"decrypt")},signEvent:o(async c=>{const u=await t();if(!u)throw"sign-no-nsec";let l=Or({...c},u);if(!Bo(l))throw"event-sig-not-verified";return l},"signEvent")}},"PrimalNostr");var Si,qr;const gd=class gd{constructor(){Zc(this,Si,void 0);Zc(this,qr,void 0);zi(this,Si,[]),zi(this,qr,!1)}enqueue(t){return new Promise((n,r)=>{Ls(this,Si).push({action:t,resolve:n,reject:r}),this.dequeue()})}async dequeue(){if(Ls(this,qr))return!1;let t=Ls(this,Si).shift();if(!t)return!1;try{zi(this,qr,!0);let n=await t.action();zi(this,qr,!1),t.resolve(n)}catch(n){zi(this,qr,!1),t.reject(n)}finally{this.dequeue()}return!0}get size(){return Ls(this,Si).length}};Si=new WeakMap,qr=new WeakMap,o(gd,"Queue");let Ru=gd;const Qm=new Ru,Xm=o(async e=>{const n=window.webln;if(n===void 0)throw"no_webln_extension";return await Qm.enqueue(()=>e(n))},"enqueueWebLn"),Mc=o(async e=>{const n=window.nostr||hM();if(n===void 0)throw"no_nostr_extension";return await Qm.enqueue(()=>e(n))},"enqueueNostr"),Vt=o(async e=>{try{return await Mc(async t=>{try{return await t.signEvent(e)}catch(n){throw n}})}catch(t){throw t}},"signEvent"),pM=o(async()=>{try{return await Mc(async e=>{try{return await e.getPublicKey()}catch(t){throw t}})}catch(e){throw e}},"getPublicKey"),gM=o(async(e,t)=>{try{return await Mc(async n=>{try{return await n.nip04.encrypt(e,t)}catch(r){throw r}})}catch(n){throw n}},"encrypt"),mM=o(async(e,t)=>{try{return await Mc(async n=>{try{return await n.nip04.decrypt(e,t)}catch(r){throw r}})}catch(n){throw n}},"decrypt"),V4=o(async()=>{try{return await Xm(async e=>{try{return await e.enable()}catch(t){throw t}})}catch(e){throw e}},"enableWebLn"),K4=o(async e=>{try{return await Xm(async t=>{try{return await t.sendPayment(e)}catch(n){throw n}})}catch(t){throw t}},"sendPayment"),yM=o((e,t="o",n=1)=>{if(!e)return;const r=localStorage.getItem("mediaServer");if(!r)return e;const i=encodeURIComponent(e);return`${r}/media-cache?s=${t}&a=${n}&u=${i}`},"getMediaUrl");let bM=[];const J4=o(async(e,t,n,r,i,s,a,c)=>{if(!e)return!1;const u={kind:W.UploadChunk,tags:[["p",e]],created_at:Math.floor(new Date().getTime()/1e3),content:JSON.stringify({file_length:s,upload_id:n,offset:i,data:r})};try{const l=await Vt(u),f=JSON.stringify(["REQ",t,{cache:["upload_chunk",{event_from_user:l}]}]);if(a){const h=new CustomEvent("send",{detail:{message:f,ws:a}});bM[c]=Date.now(),a.send(f),a.dispatchEvent(h)}else throw"no_socket";return!0}catch(l){return console.error("Failed to upload: ",l),!1}},"uploadMediaChunk"),Y4=o(async(e,t,n,r)=>{if(!e)return!1;const i={kind:W.UploadChunk,tags:[["p",e]],created_at:Math.floor(new Date().getTime()/1e3),content:JSON.stringify({upload_id:n})};try{const s=await Vt(i),a=JSON.stringify(["REQ",t,{cache:["upload_chunk",{event_from_user:s}]}]);if(r)r.send(a);else throw"no_socket";return!0}catch(s){return console.error("Failed to cancel upload: ",s),!1}},"uploadMediaCancel"),Q4=o(async(e,t,n,r,i,s)=>{if(!e)return!1;const a={kind:W.UploadChunk,tags:[["p",e]],created_at:Math.floor(new Date().getTime()/1e3),content:JSON.stringify({upload_id:n,file_length:r,sha256:i})};try{const c=await Vt(a),u=JSON.stringify(["REQ",t,{cache:["upload_complete",{event_from_user:c}]}]);if(s)s.send(u);else throw"no_socket";return!0}catch(c){return console.error("Failed to complete upload: ",c),!1}},"uploadMediaConfirm"),wM=qt('<div class="bordered">'),pn=o(e=>e?e.replaceAll("<","&lt;").replaceAll(">","&gt;"):"","sanitize"),[Lu,li]=Xt({}),X4=o(e=>({...Lu[e]}),"getLinkPreview"),_M=o(async e=>{if(Lu[e])return{...Lu[e]};try{const t=window.location.origin.startsWith("http://localhost")?"https://dev.primal.net":window.location.origin,r=await(await fetch(`${t}/link-preview?u=${encodeURIComponent(e)}`)).json();return{url:e,description:r.description,title:r.title,images:[r.image],favicons:[r.icon_url]}}catch{return en("Failed to get preview for: ",e),{url:e}}},"addLinkPreviews"),e8=o(e=>Ww.test(e),"isUrl"),t8=o(e=>Jw.test(e),"isHashtag"),n8=o(e=>Yw.test(e),"isTagMention"),r8=o(e=>Qw.test(e),"isNoteMention"),i8=o(e=>Xw.test(e),"isUserMention"),s8=o(e=>e_.test(e),"isAddrMention"),o8=o(e=>Gw.test(e),"isInterpunction"),a8=o(e=>qw.test(e),"isCustomEmoji"),c8=o(e=>Vw.test(e),"isLnbc"),l8=o(e=>Kw.test(e),"isUnitifedLnAddress"),vM=o(e=>[".jpg",".jpeg",".webp",".png",".gif",".format=png"].some(t=>e.includes(t)),"isImage"),EM=o(e=>[".mp4",".mov"].some(t=>e.includes(t)),"isMp4Video"),xM=o(e=>[".ogg"].some(t=>e.includes(t)),"isOggVideo"),SM=o(e=>[".webm"].some(t=>e.includes(t)),"isWebmVideo"),AM=o(e=>_0.test(e),"isYouTube"),MM=o(e=>Dw.test(e),"isSpotify"),kM=o(e=>$w.test(e),"isTwitch"),TM=o(e=>ru.test(e),"isMixCloud"),NM=o(e=>Hw.test(e),"isSoundCloud"),IM=o(e=>zw.test(e),"isAppleMusic"),RM=o(e=>Zw.test(e),"isWavelake"),LM=o((e,t,n=!1,r=!1,i=!1)=>e.replace(jw,s=>{if(!r){if(vM(s)){const a=localStorage.getItem("devMode")==="true";let c=t&&t(s);return c?`<img src="${c}" class="postImage"/>`:`<img src="${yM(s)}" class="postImage${a?" redBorder":""}"/>`}if(EM(s))return`<video class="w-max" controls><source src="${s}" type="video/mp4"></video>`;if(xM(s))return`<video class="w-max" controls><source src="${s}" type="video/ogg"></video>`;if(SM(s))return`<video class="w-max" controls><source src="${s}" type="video/webm"></video>`;if(AM(s)){const a=_0.test(s)&&RegExp.$1;return`<iframe
          class="w-max"
          src="https://www.youtube.com/embed/${a}"
          title="YouTube video player"
          key="${a}"
          frameBorder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowFullScreen
        ></iframe>`}if(MM(s))return`<iframe style="borderRadius: 12" src="${s.replace(/\/(track|album|playlist|episode)\/([a-zA-Z0-9]+)/,"/embed/$1/$2")}" width="100%" height="352" frameBorder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>`;if(kM(s))return`<iframe src="https://player.twitch.tv/${`?channel=${s.split("/").slice(-1)}&parent=${window.location.hostname}&muted=true`}" className="w-max" allowFullScreen></iframe>`;if(TM(s))return`
            <br />
            <iframe
              title="SoundCloud player"
              width="100%"
              height="120"
              frameBorder="0"
              src="https://www.mixcloud.com/widget/iframe/?hide_cover=1&feed=%2F${(ru.test(s)&&RegExp.$1)+"%2F"+(ru.test(s)&&RegExp.$2)}%2F"
            ></iframe>`;if(NM(s))return`<iframe
            width="100%"
            height="166"
            scrolling="no"
            allow="autoplay"
            src="https://w.soundcloud.com/player/?url=${s}"></iframe>`;if(IM(s)){const a=s.replace("music.apple.com","embed.music.apple.com");return`
          <iframe
            allow="autoplay *; encrypted-media *; fullscreen *; clipboard-write"
            frameBorder="0"
            height="${/\?i=\d+$/.test(a)?175:450}"
            style="width: 100%; maxWidth: 660; overflow: hidden; background: transparent;"
            sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation"
            src="${a}"></iframe>
        `}if(RM(s))return`
          <iframe
            style="borderRadius: 12"
            src="${s.replace(/(?:player\.|www\.)?wavlake\.com/,"embed.wavlake.com")}"
            width="100%"
            height="380"
            frameBorder="0"
            loading="lazy"></iframe>`}return n?`<span class="linkish">${s}</span>`:i?`<a link href="${s}" target="_blank" >${s}</a>`:`__LINK__${s}__LINK__`}),"urlify"),u8=o(async e=>{let t=e;const n=/__LINK__.*?__LINK__/ig,r=t.match(n)||[];for(let i=0;i<r.length;i++){const s=r[i],a=s.split("__LINK__")[1],c=await _M(a),l=c&&c.url&&(c.description&&c.description.length>0||c.image||c.title)?(()=>{const f=wM();return Ot(f,pe(zA,{preview:c})),f})()?.outerHTML:`<a link href="${a}" target="_blank" >${a}</a>`;t=t.replace(s,l)}return t},"replaceLinkPreviews"),PM=o(e=>{const t=/(\r\n|\r|\n)/g;return e.replaceAll(t,"<br> ")},"addlineBreaks"),f8=o((e,t)=>LM(PM(e),t),"parseNote1"),ey=o((e,t)=>{Ee(JSON.stringify(["REQ",t,{cache:["import_events",{events:e}]}]))},"importEvents"),OM=o(async(e,t,n,r)=>{const i={content:"+",kind:W.Reaction,tags:[["e",e.id],["p",e.pubkey]],created_at:Math.floor(new Date().getTime()/1e3)};return e.coordinate&&i.tags.push(["a",e.coordinate]),await Rn(i,n,r,t)},"sendLike"),d8=o(async(e,t,n,r)=>{const i={content:JSON.stringify(e.msg),kind:W.Repost,tags:[["e",e.post.id],["p",e.user.pubkey]],created_at:Math.floor(new Date().getTime()/1e3)};return await Rn(i,n,r,t)},"sendRepost"),h8=o(async(e,t,n,r)=>{const i={content:JSON.stringify(e.msg),kind:W.Repost,tags:[["e",e.id],["a",e.coordinate],["p",e.pubkey]],created_at:Math.floor(new Date().getTime()/1e3)};return await Rn(i,n,r,t)},"sendArticleRepost"),ty=o(async(e,t,n)=>{let r;try{if(r=await Vt(e),!r)throw"event_not_signed"}catch(u){return nt("Failed to send event: ",u),{success:!1,reasons:[u]}}const i=e.tags.reduce((u,l)=>l[0]==="e"&&l[2]&&l[2].length>0&&!t.find(f=>f.url===l[2])?[...u,l[2]]:[...u],[]);let s=n?t.filter(u=>(n[u.url]||{read:!0,write:!0}).write):[...t];const a=new Set([...s.map(u=>u.url),...i]),c=new Promise((u,l)=>{if(!r){l("Note not signed");return}const f=`publish_event_${r.id}`,h=Me(f,{onEvent:()=>{h(),u(!0)},onNotice:()=>{h(),l("Failed to publish note")},onEose:()=>{h(),l("No publish confirmation")}});Ee(JSON.stringify(["REQ",f,{cache:["broadcast_events",{events:[r],relays:Array.from(a)}]}]))});try{return await Promise.race([c]),{success:!0,note:r}}catch(u){return nt("Failed to publish the note: ",u),{success:!1,reasons:[u],note:r}}},"proxyEvent"),p8=o(async(e,t,n,r,i)=>{const s={content:e,kind:W.Text,tags:r,created_at:Math.floor(new Date().getTime()/1e3)};return await Rn(s,n,i,t)},"sendNote"),Gh=o(async(e,t,n,r,i,s)=>{const a={content:n,kind:W.Contacts,tags:[...e],created_at:t};return await Rn(a,i,s,r)},"sendContacts"),qh=o(async(e,t,n,r,i,s)=>{const a={content:n,kind:W.MuteList,tags:e,created_at:t};return await Rn(a,i,s,r)},"sendMuteList"),g8=o(async(e,t,n,r)=>{if(t)return await ty(e,n,r);let i=[],s=[];for(let a=0;a<n.length;a++){const c=n[a];(r&&r[c.url]||{read:!0,write:!0}).write&&i.push(new Promise((l,f)=>{const h=setTimeout(()=>{nt(`Publishing post to ${c.url} has timed out`),s.push("timeout"),f("timeout")},8e3);try{let p=c.publish(e);xt("publishing to relay: ",c),p.on("ok",()=>{xt(`${c.url} has accepted our event`),clearTimeout(h),l("success")}),p.on("failed",y=>{nt(`failed to publish to ${c.url}: ${y}`),clearTimeout(h),s.push(y),f("failed")})}catch(p){nt("Failed publishing note: ",p),clearTimeout(h),s.push(`${p}`),f(p)}}))}try{return await Promise.any(i),{success:!0,note:e}}catch(a){return nt("Error broadcasting note: ",a),{success:!1,reasons:s,note:e}}},"broadcastEvent"),Rn=o(async(e,t,n,r)=>{if(r)return await ty(e,t,n);let i;try{if(i=await Vt(e),!i)throw"event_not_signed"}catch(l){return nt("Failed to send event: ",l),{success:!1,reasons:[l]}}let s=[],a=[];const c=e.tags.reduce((l,f)=>f[0]==="e"&&f[2]&&f[2].length>0&&!t.find(h=>h.url===f[2])?[...l,f[2]]:[...l],[]);let u=[...t];u.length===0&&(u=Object.keys(n||{}));for(let l=0;l<u.length;l++){const f=u[l];(n&&n[f.url]||{read:!0,write:!0}).write&&s.push(new Promise(async(p,y)=>{const _=setTimeout(()=>{nt(`Publishing note to ${f.url} has timed out`),a.push("timeout"),y("timeout")},8e3);try{xt("publishing to relay: ",f,i),await f.publish(i),xt(`${f.url} has accepted our event`),clearTimeout(_),p("success")}catch(x){nt(`Failed publishing note to ${f.url}: `,x),clearTimeout(_),a.push(`${x}`),y(x)}}))}for(let l=0;l<c.length;l++){const f=c[l];new Promise(async(h,p)=>{const y=Ha(f);await y.connect();try{xt("publishing to relay: ",y),await y.publish(i),xt(`${y.url} has accepted our event`),h("success")}catch(_){nt(`Failed publishing note to ${y.url}: `,_),p("success")}y.close()})}try{return await Promise.any(s),{success:!0,note:i}}catch(l){return nt("Failed to publish the note: ",l),{success:!1,reasons:a,note:i}}},"sendEvent"),mr=o((e,t,n)=>{const r=Me(t,{onEose:()=>{r(),n&&n()}});ey(e,t)},"triggerImportEvents"),m8=o((e,t,n,r=0)=>{let i=e,s,a;if(e.startsWith("note1")&&(i=ks(e)),e.startsWith("naddr")){const u=Uo(i);s=u.data.pubkey,a=u.data.identifier,i=void 0}let c={kind:t,limit:20,offset:r};i?c.event_id=i:(c.pubkey=s,c.identifier=a),Ee(JSON.stringify(["REQ",n,{cache:["event_actions",{...c}]}]))},"getEventReactions"),y8=o((e,t,n=0,r)=>{let i=e,s,a;if(e.startsWith("note1")&&(i=ks(e)),e.startsWith("naddr")){const u=Uo(i);s=u.data.pubkey,a=u.data.identifier,i=void 0}let c={limit:20,offset:n};i?c.event_id=i:(c.pubkey=s,c.identifier=a),r&&(c.user_pubkey=r),Ee(JSON.stringify(["REQ",t,{cache:["note_mentions",{...c}]}]))},"getEventQuotes"),CM=o((e,t,n,r,i=0)=>{let s=e,a,c;if(e.startsWith("note1")&&(s=ks(e)),e.startsWith("naddr")){const l=Uo(s);a=l.data.pubkey,c=l.data.identifier,s=void 0}let u={limit:r,offset:i};s?u.event_id=s:(u.pubkey=a,u.identifier=c),t&&(u.user_pubkey=t),Ee(JSON.stringify(["REQ",n,{cache:["event_zaps_by_satszapped",{...u}]}]))},"getEventZaps"),BM=o((e,t)=>{const n=e.startsWith("note1")?ks(e):e;Ee(JSON.stringify(["REQ",t,{cache:["note_mentions_count",{event_id:n}]}]))},"getEventQuoteStats"),b8=o((e,t,n,r)=>{Ee(JSON.stringify(["REQ",r,{cache:["parametrized_replaceable_event",{pubkey:e,kind:n,identifier:t,extended_response:!0}]}]))},"getParametrizedEvent"),FM=o((e,t)=>{Ee(JSON.stringify(["REQ",t,{cache:["parametrized_replaceable_events",{events:e,extended_response:!0}]}]))},"getParametrizedEvents"),w8=o((e,t,n,r,i)=>{Ee(JSON.stringify(["REQ",r,{cache:["get_highlights",{pubkey:e,identifier:t,kind:n,user_pubkey:i}]}]))},"getHighlights"),Wa=o(e=>e.length<24?e:`${e.slice(0,15)}..${e.slice(-10)}`,"truncateNpub"),Je=o((e,t,n)=>{if(!e)return Vf(t);let r={};try{r=JSON.parse(e.content||"{}")}catch(i){nt("Error in user meta JSON: ",i),r={}}return{id:e.id,pubkey:e.pubkey,tags:e.tags,npub:wn(e.pubkey),name:r.name||"",about:r.about||"",picture:r.picture||"",nip05:r.nip05||"",banner:r.banner||"",displayName:r.display_name||"",location:r.location||"",lud06:r.lud06||"",lud16:r.lud16||"",website:r.website||"",msg:{...e},userStats:n?{...n[e.pubkey]}:void 0}},"convertToUser"),Vf=o(e=>({id:"",pubkey:e,tags:[],npub:wn(e),name:"",about:"",picture:"",nip05:"",banner:"",displayName:"",location:"",lud06:"",lud16:"",website:"",msg:{kind:W.Metadata,content:"",id:"",pubkey:e,sig:"",tags:[]}}),"emptyUser"),ny=o(e=>{if(!e)return"";const t=e.npub||wn(e.pubkey)||"",n=e.display_name||e.displayName||e.name||Wa(t);return n||Wa(wn(e.pubkey)||"")},"userName$1"),_8=o(e=>{if(!e)return"";const t=e.npub||wn(e.pubkey)||"",n=e.display_name||e.displayName||e.name||Wa(t);return n||Wa(wn(e.pubkey)||"")},"authorName"),v8=o(e=>!e||typeof e.nip05!="string"?"":e.nip05?.startsWith("_@")?e.nip05.slice(2):e.nip05,"nip05Verification"),si=o((e,t)=>{Ee(JSON.stringify(["REQ",t,{cache:["user_infos",{pubkeys:e}]}]))},"getUserProfiles"),ry=o((e,t,n)=>{if(!e)return;let r={pubkey:e};t&&(r.user_pubkey=t),Ee(JSON.stringify(["REQ",n,{cache:["user_profile",r]}]))},"getUserProfileInfo"),UM=o((e,t,n)=>{!e||!t||Ee(JSON.stringify(["REQ",n,{cache:["is_user_following",{pubkey:e,user_pubkey:t}]}]))},"isUserFollowing"),_a=o((e,t,n=!1)=>{e&&Ee(JSON.stringify(["REQ",t,{cache:["contact_list",{pubkey:e,extended_response:n}]}]))},"getProfileContactList"),DM=o((e,t,n=!1)=>{e&&Ee(JSON.stringify(["REQ",t,{cache:["user_followers",{pubkey:e}]}]))},"getProfileFollowerList"),$M=o((e,t,n=0,r=0,i=20,s=!1)=>{if(!e)return;let a={sender:e,limit:i,offset:r};n>0&&(a.until=n),Ee(JSON.stringify(["REQ",t,{cache:["user_zaps_sent",a]}]))},"getProfileZapList"),_l=o((e,t,n)=>{e&&Ee(JSON.stringify(["REQ",t,{cache:["mutelist",{pubkey:e,extended_response:n}]}]))},"getProfileMuteList"),E8=o((e,t,n,r)=>{e&&Ee(JSON.stringify(["REQ",n,{cache:["parameterized_replaceable_list",{pubkey:e,identifier:t,extended_response:r}]}]))},"getCategorizedList"),HM=o((e,t,n,r=5)=>{e&&Ee(JSON.stringify(["REQ",n,{cache:["user_profile_scored_content",{pubkey:e,limit:r,user_pubkey:t}]}]))},"getProfileScoredNotes"),zM=o((e,t,n,r=5)=>{!e||!t||Ee(JSON.stringify(["REQ",n,{cache:["user_profile_followed_by",{pubkey:e,limit:r,user_pubkey:t}]}]))},"getCommonFollowers"),x8=o((e,t)=>{Ee(JSON.stringify(["REQ",e,{cache:["scored_users_24h",{user_pubkey:t}]}]))},"getTrendingUsers"),S8=o(e=>e===void 0?"":e.split("@"),"trimVerification"),ZM=o((e,t,n)=>{if(!e)return;const i=window.nostr,s=Oe(e);let a=new Set(s.likes);if(!i){n(s.likes);return}try{t.forEach(c=>{const u=c.subscribe([{kinds:[W.Reaction],authors:[e]}],{onevent(l){const f=l.tags.find(h=>h[0]==="e");f&&f[1]&&a.add(f[1])},oneose(){const l=Array.from(a);n(l),u.close()}})})}catch(c){nt("Failed sending note: ",c)}},"getLikes"),WM=o(async e=>{try{const t=e.toLowerCase(),n=window.location.origin.startsWith("http://localhost")?"https://dev.primal.net":window.location.origin;return await(await fetch(`${n}/.well-known/nostr.json?name=${t}`)).json()}catch(t){return nt("Failed to fetch known users: ",e,t),{...sc}}},"fetchKnownProfiles"),jM=o(async e=>{if(!e)return null;try{return await xm.queryProfile(e)||null}catch(t){return nt("Failed to nip05 verify user: ",t),null}},"isAccountVerified"),A8=o(async(e,t,n,r)=>{const i={content:JSON.stringify(e),kind:W.Metadata,tags:[],created_at:Math.floor(new Date().getTime()/1e3)};return await Rn(i,n,r,t)},"sendProfile"),M8=o(async(e,t,n)=>{if(!e)return!1;const r={content:`{ "description": "report user '${ny(n)}'"}`,kind:W.Settings,tags:[["d","Primal-Web App"]],created_at:Math.ceil(new Date().getTime()/1e3)};try{const i=await Vt(r);return Ee(JSON.stringify(["REQ",t,{cache:["report_user",{pubkey:e,event_from_user:i}]}])),!0}catch(i){return console.error("Failed to report user: ",i),!1}},"reportUser"),ta=o((e,t,n)=>{e&&Ee(JSON.stringify(["REQ",t,{cache:["mutelists",{pubkey:e,extended_response:n}]}]))},"getFilterlists"),vl=o(async(e,t,n,r,i,s)=>{const a=e.reduce((u,l)=>{let f=[];return l.content&&f.push("content"),l.trending&&f.push("trending"),l.pubkey?[...u,["p",l.pubkey,l.relay||"",l.petname||"",JSON.stringify(f)]]:u},[["d","mutelists"]]),c={content:n,kind:W.CategorizedPeople,tags:a,created_at:t};return await Rn(c,i,s,r)},"sendFilterlists"),El=o((e,t,n)=>{e&&Ee(JSON.stringify(["REQ",t,{cache:["allowlist",{pubkey:e,extended_response:n}]}]))},"getAllowlist"),Vh=o(async(e,t,n,r,i,s)=>{const a=e.reduce((u,l)=>[...u,["p",l]],[["d","allowlist"]]),c={content:n,kind:W.CategorizedPeople,tags:a,created_at:t};return await Rn(c,i,s,r)},"sendAllowList"),k8=o(async e=>{Ee(JSON.stringify(["REQ",e,{cache:["get_suggested_users"]}]))},"getSuggestions"),va=o(async(e,t)=>{e&&Ee(JSON.stringify(["REQ",t,{cache:["get_user_relays",{pubkey:e}]}]))},"getRelays"),xl=o(async(e,t,n)=>{const r=Object.entries(t).reduce((s,[a,c])=>{if(c.read&&c.write)return[...s,["r",a]];if(!c.read&&!c.write)return s;const u=c.read?"read":"write";return[...s,["r",a,u]]},[]),i={content:"",kind:W.RelayList,tags:[...r],created_at:Math.floor(new Date().getTime()/1e3)};return await Rn(i,e,t,n)},"sendRelays"),T8=o(async(e,t,n,r,i,s)=>{const a={content:n,kind:W.Bookmarks,tags:[...e],created_at:t};return await Rn(a,i,s,r)},"sendBookmarks"),GM=o(async(e,t)=>{e&&Ee(JSON.stringify(["REQ",t,{cache:["get_bookmarks",{pubkey:e}]}]))},"getBookmarks"),iy=o(e=>e.reduce((t,n)=>{if(n[0]!=="r")return t;let r={write:!0,read:!0};return n[2]==="write"&&(r.read=!1),n[2]==="read"&&(r.write=!1),{...t,[n[1]]:r}},{}),"extractRelayConfigFromTags"),qM=o(async(e,t,n,r,i,s)=>{let a={limit:r||10,offset:s||0};n>0&&(a.until=n),i>0&&(a.since=i),t&&(a.user_pubkey=t),Ee(JSON.stringify(["REQ",e,{cache:["explore_people",{...a}]}]))},"getExplorePeople"),VM=o(async(e,t,n,r,i,s)=>{let a={limit:r||20,offset:s||0};n>0&&(a.until=n),i>0&&(a.since=i),Ee(JSON.stringify(["REQ",e,{cache:["explore_zaps",{...a}]}]))},"getExploreZaps"),KM=o(async(e,t,n,r,i,s)=>{let a={limit:r||20,offset:s||0};n>0&&(a.until=n),i>0&&(a.since=i),t&&(a.user_pubkey=t),Ee(JSON.stringify(["REQ",e,{cache:["explore_media",{...a}]}]))},"getExploreMedia"),JM=o(async(e,t)=>{Ee(JSON.stringify(["REQ",e,{cache:["explore_topics"]}]))},"getExploreTopics"),sy=o(async(e,t,n,r,i)=>{e.onclose=()=>{xt("Relay connection closed: ",e),r(e,i?"disconnect":"close")};try{return xt("Connecting relay: ",e),await e.connect(),xt("Connected to relay: ",e),n(e),!0}catch(s){return nt("Failed to initiate connection to relay ",s),r(e,"failed connection"),!1}},"connectToRelay"),YM=o(async(e,t,n,r=!0)=>{const s=Object.keys(e).map(Ha);for(let a=0;a<s.length;a++){const c=s[a];(!c.ws||c.ws.readyState===WebSocket.CLOSED)&&(xt("Connecting to relay: ",c.url),await sy(c,ga,t,n,r))}},"connectRelays"),QM=o(()=>("wss://relay.primal.net".split(",")||[]).reduce((t,n)=>({...t,[n]:{read:!0,write:!0}}),{}),"getPreConfiguredRelays"),XM=o(e=>{Ee(JSON.stringify(["REQ",e,{cache:["get_default_relays"]}]))},"getDefaultRelays"),ek="_toastHolder_1lp3m_1",tk="_toastSuccess_1lp3m_18",nk="_fadein_1lp3m_1",rk="_toastWarning_1lp3m_35",ik="_toastInfo_1lp3m_52",Fs={toastHolder:ek,toastSuccess:tk,fadein:nk,toastWarning:rk,toastInfo:ik};/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:oy,setPrototypeOf:Kh,isFrozen:sk,getPrototypeOf:ok,getOwnPropertyDescriptor:ak}=Object;let{freeze:an,seal:Hn,create:ck}=Object,{apply:Pu,construct:Ou}=typeof Reflect<"u"&&Reflect;Pu||(Pu=o(function(t,n,r){return t.apply(n,r)},"apply"));an||(an=o(function(t){return t},"freeze"));Hn||(Hn=o(function(t){return t},"seal"));Ou||(Ou=o(function(t,n){return new t(...n)},"construct"));const lk=In(Array.prototype.forEach),Jh=In(Array.prototype.pop),Us=In(Array.prototype.push),Ea=In(String.prototype.toLowerCase),Sl=In(String.prototype.toString),uk=In(String.prototype.match),Pn=In(String.prototype.replace),fk=In(String.prototype.indexOf),dk=In(String.prototype.trim),gn=In(RegExp.prototype.test),Ds=hk(TypeError);function In(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Pu(e,t,r)}}o(In,"unapply");function hk(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ou(e,n)}}o(hk,"unconstruct");function De(e,t,n){var r;n=(r=n)!==null&&r!==void 0?r:Ea,Kh&&Kh(e,null);let i=t.length;for(;i--;){let s=t[i];if(typeof s=="string"){const a=n(s);a!==s&&(sk(t)||(t[i]=a),s=a)}e[s]=!0}return e}o(De,"addToSet");function qi(e){const t=ck(null);for(const[n,r]of oy(e))t[n]=r;return t}o(qi,"clone");function na(e,t){for(;e!==null;){const r=ak(e,t);if(r){if(r.get)return In(r.get);if(typeof r.value=="function")return In(r.value)}e=ok(e)}function n(r){return console.warn("fallback value for",r),null}return o(n,"fallbackValue"),n}o(na,"lookupGetter");const Yh=an(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Al=an(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ml=an(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pk=an(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),kl=an(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),gk=an(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Qh=an(["#text"]),Xh=an(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Tl=an(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ep=an(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ra=an(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mk=Hn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),yk=Hn(/<%[\w\W]*|[\w\W]*%>/gm),bk=Hn(/\${[\w\W]*}/gm),wk=Hn(/^data-[\-\w.\u00B7-\uFFFF]/),_k=Hn(/^aria-[\-\w]+$/),ay=Hn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vk=Hn(/^(?:\w+script|data):/i),Ek=Hn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cy=Hn(/^html$/i);var tp=Object.freeze({__proto__:null,MUSTACHE_EXPR:mk,ERB_EXPR:yk,TMPLIT_EXPR:bk,DATA_ATTR:wk,ARIA_ATTR:_k,IS_ALLOWED_URI:ay,IS_SCRIPT_OR_DATA:vk,ATTR_WHITESPACE:Ek,DOCTYPE_NAME:cy});const xk=o(()=>typeof window>"u"?null:window,"getGlobal"),Sk=o(function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return t.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},"_createTrustedTypesPolicy");function ly(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xk();const t=o(ke=>ly(ke),"DOMPurify");if(t.version="3.0.5",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;const n=e.document,r=n.currentScript;let{document:i}=e;const{DocumentFragment:s,HTMLTemplateElement:a,Node:c,Element:u,NodeFilter:l,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:y}=e,_=u.prototype,x=na(_,"cloneNode"),w=na(_,"nextSibling"),v=na(_,"childNodes"),T=na(_,"parentNode");if(typeof a=="function"){const ke=i.createElement("template");ke.content&&ke.content.ownerDocument&&(i=ke.content.ownerDocument)}let N,I="";const{implementation:C,createNodeIterator:D,createDocumentFragment:U,getElementsByTagName:H}=i,{importNode:B}=n;let z={};t.isSupported=typeof oy=="function"&&typeof T=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:A,ERB_EXPR:d,TMPLIT_EXPR:m,DATA_ATTR:S,ARIA_ATTR:R,IS_SCRIPT_OR_DATA:k,ATTR_WHITESPACE:P}=tp;let{IS_ALLOWED_URI:F}=tp,M=null;const g=De({},[...Yh,...Al,...Ml,...kl,...Qh]);let L=null;const V=De({},[...Xh,...Tl,...ep,...ra]);let ie=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),he=null,ge=null,_e=!0,me=!0,te=!1,X=!0,re=!1,xe=!1,fe=!1,le=!1,q=!1,Y=!1,ae=!1,we=!0,ve=!1;const Be="user-content-";let Zt=!0,Ue=!1,Ce={},ut=null;const je=De({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ze=null;const _n=De({},["audio","video","img","source","image","track"]);let O=null;const b=De({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),E="http://www.w3.org/1998/Math/MathML",$="http://www.w3.org/2000/svg",G="http://www.w3.org/1999/xhtml";let Q=G,oe=!1,Ae=null;const j=De({},[E,$,G],Sl);let ee;const Z=["application/xhtml+xml","text/html"],ne="text/html";let J,se=null;const be=i.createElement("form"),ce=o(function(K){return K instanceof RegExp||K instanceof Function},"isRegexOrFunction"),de=o(function(K){if(!(se&&se===K)){if((!K||typeof K!="object")&&(K={}),K=qi(K),ee=Z.indexOf(K.PARSER_MEDIA_TYPE)===-1?ee=ne:ee=K.PARSER_MEDIA_TYPE,J=ee==="application/xhtml+xml"?Sl:Ea,M="ALLOWED_TAGS"in K?De({},K.ALLOWED_TAGS,J):g,L="ALLOWED_ATTR"in K?De({},K.ALLOWED_ATTR,J):V,Ae="ALLOWED_NAMESPACES"in K?De({},K.ALLOWED_NAMESPACES,Sl):j,O="ADD_URI_SAFE_ATTR"in K?De(qi(b),K.ADD_URI_SAFE_ATTR,J):b,ze="ADD_DATA_URI_TAGS"in K?De(qi(_n),K.ADD_DATA_URI_TAGS,J):_n,ut="FORBID_CONTENTS"in K?De({},K.FORBID_CONTENTS,J):je,he="FORBID_TAGS"in K?De({},K.FORBID_TAGS,J):{},ge="FORBID_ATTR"in K?De({},K.FORBID_ATTR,J):{},Ce="USE_PROFILES"in K?K.USE_PROFILES:!1,_e=K.ALLOW_ARIA_ATTR!==!1,me=K.ALLOW_DATA_ATTR!==!1,te=K.ALLOW_UNKNOWN_PROTOCOLS||!1,X=K.ALLOW_SELF_CLOSE_IN_ATTR!==!1,re=K.SAFE_FOR_TEMPLATES||!1,xe=K.WHOLE_DOCUMENT||!1,q=K.RETURN_DOM||!1,Y=K.RETURN_DOM_FRAGMENT||!1,ae=K.RETURN_TRUSTED_TYPE||!1,le=K.FORCE_BODY||!1,we=K.SANITIZE_DOM!==!1,ve=K.SANITIZE_NAMED_PROPS||!1,Zt=K.KEEP_CONTENT!==!1,Ue=K.IN_PLACE||!1,F=K.ALLOWED_URI_REGEXP||ay,Q=K.NAMESPACE||G,ie=K.CUSTOM_ELEMENT_HANDLING||{},K.CUSTOM_ELEMENT_HANDLING&&ce(K.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ie.tagNameCheck=K.CUSTOM_ELEMENT_HANDLING.tagNameCheck),K.CUSTOM_ELEMENT_HANDLING&&ce(K.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ie.attributeNameCheck=K.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),K.CUSTOM_ELEMENT_HANDLING&&typeof K.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ie.allowCustomizedBuiltInElements=K.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),re&&(me=!1),Y&&(q=!0),Ce&&(M=De({},[...Qh]),L=[],Ce.html===!0&&(De(M,Yh),De(L,Xh)),Ce.svg===!0&&(De(M,Al),De(L,Tl),De(L,ra)),Ce.svgFilters===!0&&(De(M,Ml),De(L,Tl),De(L,ra)),Ce.mathMl===!0&&(De(M,kl),De(L,ep),De(L,ra))),K.ADD_TAGS&&(M===g&&(M=qi(M)),De(M,K.ADD_TAGS,J)),K.ADD_ATTR&&(L===V&&(L=qi(L)),De(L,K.ADD_ATTR,J)),K.ADD_URI_SAFE_ATTR&&De(O,K.ADD_URI_SAFE_ATTR,J),K.FORBID_CONTENTS&&(ut===je&&(ut=qi(ut)),De(ut,K.FORBID_CONTENTS,J)),Zt&&(M["#text"]=!0),xe&&De(M,["html","head","body"]),M.table&&(De(M,["tbody"]),delete he.tbody),K.TRUSTED_TYPES_POLICY){if(typeof K.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ds('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof K.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ds('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=K.TRUSTED_TYPES_POLICY,I=N.createHTML("")}else N===void 0&&(N=Sk(y,r)),N!==null&&typeof I=="string"&&(I=N.createHTML(""));an&&an(K),se=K}},"_parseConfig"),Ie=De({},["mi","mo","mn","ms","mtext"]),Te=De({},["foreignobject","desc","title","annotation-xml"]),Ge=De({},["title","style","font","a","script"]),Wt=De({},Al);De(Wt,Ml),De(Wt,pk);const Ye=De({},kl);De(Ye,gk);const st=o(function(K){let ye=T(K);(!ye||!ye.tagName)&&(ye={namespaceURI:Q,tagName:"template"});const Se=Ea(K.tagName),Qe=Ea(ye.tagName);return Ae[K.namespaceURI]?K.namespaceURI===$?ye.namespaceURI===G?Se==="svg":ye.namespaceURI===E?Se==="svg"&&(Qe==="annotation-xml"||Ie[Qe]):!!Wt[Se]:K.namespaceURI===E?ye.namespaceURI===G?Se==="math":ye.namespaceURI===$?Se==="math"&&Te[Qe]:!!Ye[Se]:K.namespaceURI===G?ye.namespaceURI===$&&!Te[Qe]||ye.namespaceURI===E&&!Ie[Qe]?!1:!Ye[Se]&&(Ge[Se]||!Wt[Se]):!!(ee==="application/xhtml+xml"&&Ae[K.namespaceURI]):!1},"_checkValidNamespace"),jn=o(function(K){Us(t.removed,{element:K});try{K.parentNode.removeChild(K)}catch{K.remove()}},"_forceRemove"),gt=o(function(K,ye){try{Us(t.removed,{attribute:ye.getAttributeNode(K),from:ye})}catch{Us(t.removed,{attribute:null,from:ye})}if(ye.removeAttribute(K),K==="is"&&!L[K])if(q||Y)try{jn(ye)}catch{}else try{ye.setAttribute(K,"")}catch{}},"_removeAttribute"),wt=o(function(K){let ye,Se;if(le)K="<remove></remove>"+K;else{const Kt=uk(K,/^[\r\n\t ]+/);Se=Kt&&Kt[0]}ee==="application/xhtml+xml"&&Q===G&&(K='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+K+"</body></html>");const Qe=N?N.createHTML(K):K;if(Q===G)try{ye=new p().parseFromString(Qe,ee)}catch{}if(!ye||!ye.documentElement){ye=C.createDocument(Q,"template",null);try{ye.documentElement.innerHTML=oe?I:Qe}catch{}}const Mt=ye.body||ye.documentElement;return K&&Se&&Mt.insertBefore(i.createTextNode(Se),Mt.childNodes[0]||null),Q===G?H.call(ye,xe?"html":"body")[0]:xe?ye.documentElement:Mt},"_initDocument"),Is=o(function(K){return D.call(K.ownerDocument||K,K,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},"_createIterator"),St=o(function(K){return K instanceof h&&(typeof K.nodeName!="string"||typeof K.textContent!="string"||typeof K.removeChild!="function"||!(K.attributes instanceof f)||typeof K.removeAttribute!="function"||typeof K.setAttribute!="function"||typeof K.namespaceURI!="string"||typeof K.insertBefore!="function"||typeof K.hasChildNodes!="function")},"_isClobbered"),ft=o(function(K){return typeof c=="object"?K instanceof c:K&&typeof K=="object"&&typeof K.nodeType=="number"&&typeof K.nodeName=="string"},"_isNode"),vn=o(function(K,ye,Se){z[K]&&lk(z[K],Qe=>{Qe.call(t,ye,Se,se)})},"_executeHook"),_t=o(function(K){let ye;if(vn("beforeSanitizeElements",K,null),St(K))return jn(K),!0;const Se=J(K.nodeName);if(vn("uponSanitizeElement",K,{tagName:Se,allowedTags:M}),K.hasChildNodes()&&!ft(K.firstElementChild)&&(!ft(K.content)||!ft(K.content.firstElementChild))&&gn(/<[/\w]/g,K.innerHTML)&&gn(/<[/\w]/g,K.textContent))return jn(K),!0;if(!M[Se]||he[Se]){if(!he[Se]&&Rs(Se)&&(ie.tagNameCheck instanceof RegExp&&gn(ie.tagNameCheck,Se)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(Se)))return!1;if(Zt&&!ut[Se]){const Qe=T(K)||K.parentNode,Mt=v(K)||K.childNodes;if(Mt&&Qe){const Kt=Mt.length;for(let ot=Kt-1;ot>=0;--ot)Qe.insertBefore(x(Mt[ot],!0),w(K))}}return jn(K),!0}return K instanceof u&&!st(K)||(Se==="noscript"||Se==="noembed"||Se==="noframes")&&gn(/<\/no(script|embed|frames)/i,K.innerHTML)?(jn(K),!0):(re&&K.nodeType===3&&(ye=K.textContent,ye=Pn(ye,A," "),ye=Pn(ye,d," "),ye=Pn(ye,m," "),K.textContent!==ye&&(Us(t.removed,{element:K.cloneNode()}),K.textContent=ye)),vn("afterSanitizeElements",K,null),!1)},"_sanitizeElements"),vt=o(function(K,ye,Se){if(we&&(ye==="id"||ye==="name")&&(Se in i||Se in be))return!1;if(!(me&&!ge[ye]&&gn(S,ye))){if(!(_e&&gn(R,ye))){if(!L[ye]||ge[ye]){if(!(Rs(K)&&(ie.tagNameCheck instanceof RegExp&&gn(ie.tagNameCheck,K)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(K))&&(ie.attributeNameCheck instanceof RegExp&&gn(ie.attributeNameCheck,ye)||ie.attributeNameCheck instanceof Function&&ie.attributeNameCheck(ye))||ye==="is"&&ie.allowCustomizedBuiltInElements&&(ie.tagNameCheck instanceof RegExp&&gn(ie.tagNameCheck,Se)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(Se))))return!1}else if(!O[ye]){if(!gn(F,Pn(Se,P,""))){if(!((ye==="src"||ye==="xlink:href"||ye==="href")&&K!=="script"&&fk(Se,"data:")===0&&ze[K])){if(!(te&&!gn(k,Pn(Se,P,"")))){if(Se)return!1}}}}}}return!0},"_isValidAttribute"),Rs=o(function(K){return K.indexOf("-")>0},"_basicCustomElementTest"),Et=o(function(K){let ye,Se,Qe,Mt;vn("beforeSanitizeAttributes",K,null);const{attributes:Kt}=K;if(!Kt)return;const ot={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:L};for(Mt=Kt.length;Mt--;){ye=Kt[Mt];const{name:cn,namespaceURI:di}=ye;if(Se=cn==="value"?ye.value:dk(ye.value),Qe=J(cn),ot.attrName=Qe,ot.attrValue=Se,ot.keepAttr=!0,ot.forceKeepAttr=void 0,vn("uponSanitizeAttribute",K,ot),Se=ot.attrValue,ot.forceKeepAttr||(gt(cn,K),!ot.keepAttr))continue;if(!X&&gn(/\/>/i,Se)){gt(cn,K);continue}re&&(Se=Pn(Se,A," "),Se=Pn(Se,d," "),Se=Pn(Se,m," "));const Hi=J(K.nodeName);if(vt(Hi,Qe,Se)){if(ve&&(Qe==="id"||Qe==="name")&&(gt(cn,K),Se=Be+Se),N&&typeof y=="object"&&typeof y.getAttributeType=="function"&&!di)switch(y.getAttributeType(Hi,Qe)){case"TrustedHTML":{Se=N.createHTML(Se);break}case"TrustedScriptURL":{Se=N.createScriptURL(Se);break}}try{di?K.setAttributeNS(di,cn,Se):K.setAttribute(cn,Se),Jh(t.removed)}catch{}}}vn("afterSanitizeAttributes",K,null)},"_sanitizeAttributes"),At=o(function ke(K){let ye;const Se=Is(K);for(vn("beforeSanitizeShadowDOM",K,null);ye=Se.nextNode();)vn("uponSanitizeShadowNode",ye,null),!_t(ye)&&(ye.content instanceof s&&ke(ye.content),Et(ye));vn("afterSanitizeShadowDOM",K,null)},"_sanitizeShadowDOM");return t.sanitize=function(ke){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye,Se,Qe,Mt;if(oe=!ke,oe&&(ke="<!-->"),typeof ke!="string"&&!ft(ke))if(typeof ke.toString=="function"){if(ke=ke.toString(),typeof ke!="string")throw Ds("dirty is not a string, aborting")}else throw Ds("toString is not a function");if(!t.isSupported)return ke;if(fe||de(K),t.removed=[],typeof ke=="string"&&(Ue=!1),Ue){if(ke.nodeName){const cn=J(ke.nodeName);if(!M[cn]||he[cn])throw Ds("root node is forbidden and cannot be sanitized in-place")}}else if(ke instanceof c)ye=wt("<!---->"),Se=ye.ownerDocument.importNode(ke,!0),Se.nodeType===1&&Se.nodeName==="BODY"||Se.nodeName==="HTML"?ye=Se:ye.appendChild(Se);else{if(!q&&!re&&!xe&&ke.indexOf("<")===-1)return N&&ae?N.createHTML(ke):ke;if(ye=wt(ke),!ye)return q?null:ae?I:""}ye&&le&&jn(ye.firstChild);const Kt=Is(Ue?ke:ye);for(;Qe=Kt.nextNode();)_t(Qe)||(Qe.content instanceof s&&At(Qe.content),Et(Qe));if(Ue)return ke;if(q){if(Y)for(Mt=U.call(ye.ownerDocument);ye.firstChild;)Mt.appendChild(ye.firstChild);else Mt=ye;return(L.shadowroot||L.shadowrootmode)&&(Mt=B.call(n,Mt,!0)),Mt}let ot=xe?ye.outerHTML:ye.innerHTML;return xe&&M["!doctype"]&&ye.ownerDocument&&ye.ownerDocument.doctype&&ye.ownerDocument.doctype.name&&gn(cy,ye.ownerDocument.doctype.name)&&(ot="<!DOCTYPE "+ye.ownerDocument.doctype.name+`>
`+ot),re&&(ot=Pn(ot,A," "),ot=Pn(ot,d," "),ot=Pn(ot,m," ")),N&&ae?N.createHTML(ot):ot},t.setConfig=function(ke){de(ke),fe=!0},t.clearConfig=function(){se=null,fe=!1},t.isValidAttribute=function(ke,K,ye){se||de({});const Se=J(ke),Qe=J(K);return vt(Se,Qe,ye)},t.addHook=function(ke,K){typeof K=="function"&&(z[ke]=z[ke]||[],Us(z[ke],K))},t.removeHook=function(ke){if(z[ke])return Jh(z[ke])},t.removeHooks=function(ke){z[ke]&&(z[ke]=[])},t.removeAllHooks=function(){z={}},t}o(ly,"createDOMPurify");var Ak=ly();const Mk=qt("<div>"),uy=Ht(),kk=o(e=>{let t;const n=o((i,s,a=4e3)=>{const c=document.createElement("div");c.innerHTML=Ak.sanitize(i),c.classList.add(s),setTimeout(()=>{t?.append(c)},0),setTimeout(()=>{t?.removeChild(c)},a)},"toastMesage"),r={sendWarning:i=>{n(i,Fs.toastWarning)},sendSuccess:i=>{n(i,Fs.toastSuccess,2e3)},sendInfo:i=>{n(i,Fs.toastInfo)},notImplemented:()=>{n("Feature not available in this preview release. Rest assured, we are working on it. Come back soon!",Fs.toastInfo,2e3)}};return[(()=>{const i=Mk(),s=t;return typeof s=="function"?ic(s,i):t=i,ct(()=>pt(i,Fs.toastHolder)),i})(),pe(uy.Provider,{value:r,get children(){return e.children}})]},"Toaster");function fy(){return zt(uy)}o(fy,"useToastContext");var Cu=o(function(e,t){return Cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Cu(e,t)},"extendStatics");function zn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Cu(e,t);function n(){this.constructor=e}o(n,"__"),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}o(zn,"__extends");var Ne=o(function(){return Ne=Object.assign||o(function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},"__assign"),Ne.apply(this,arguments)},"__assign$3");function Tk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}o(Tk,"__rest$1");function Er(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}o(Er,"__spreadArray$2");var qe;(function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(qe||(qe={}));var dt;(function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"})(dt||(dt={}));var ds;(function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"})(ds||(ds={}));function np(e){return e.type===dt.literal}o(np,"isLiteralElement");function Nk(e){return e.type===dt.argument}o(Nk,"isArgumentElement");function dy(e){return e.type===dt.number}o(dy,"isNumberElement");function hy(e){return e.type===dt.date}o(hy,"isDateElement");function py(e){return e.type===dt.time}o(py,"isTimeElement");function gy(e){return e.type===dt.select}o(gy,"isSelectElement");function my(e){return e.type===dt.plural}o(my,"isPluralElement");function Ik(e){return e.type===dt.pound}o(Ik,"isPoundElement");function yy(e){return e.type===dt.tag}o(yy,"isTagElement");function by(e){return!!(e&&typeof e=="object"&&e.type===ds.number)}o(by,"isNumberSkeleton");function Bu(e){return!!(e&&typeof e=="object"&&e.type===ds.dateTime)}o(Bu,"isDateTimeSkeleton");var wy=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Rk=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function Lk(e){var t={};return e.replace(Rk,function(n){var r=n.length;switch(n[0]){case"G":t.era=r===4?"long":r===5?"narrow":"short";break;case"y":t.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=r===4?"short":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][r-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][r-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][r-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][r-1];break;case"s":t.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}o(Lk,"parseDateTimeSkeleton");var Pk=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function Ok(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");for(var t=e.split(Pk).filter(function(p){return p.length>0}),n=[],r=0,i=t;r<i.length;r++){var s=i[r],a=s.split("/");if(a.length===0)throw new Error("Invalid number skeleton");for(var c=a[0],u=a.slice(1),l=0,f=u;l<f.length;l++){var h=f[l];if(h.length===0)throw new Error("Invalid number skeleton")}n.push({stem:c,options:u})}return n}o(Ok,"parseNumberSkeletonFromString");function Ck(e){return e.replace(/^(.*?)-/,"")}o(Ck,"icuUnitToEcma");var rp=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,_y=/^(@+)?(\+|#+)?[rs]?$/g,Bk=/(\*)(0+)|(#+)(0+)|(0+)/g,vy=/^(0+)$/;function ip(e){var t={};return e[e.length-1]==="r"?t.roundingPriority="morePrecision":e[e.length-1]==="s"&&(t.roundingPriority="lessPrecision"),e.replace(_y,function(n,r,i){return typeof i!="string"?(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length):i==="+"?t.minimumSignificantDigits=r.length:r[0]==="#"?t.maximumSignificantDigits=r.length:(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length+(typeof i=="string"?i.length:0)),""}),t}o(ip,"parseSignificantPrecision");function Ey(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}o(Ey,"parseSign");function Fk(e){var t;if(e[0]==="E"&&e[1]==="E"?(t={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if(n==="+!"?(t.signDisplay="always",e=e.slice(2)):n==="+?"&&(t.signDisplay="exceptZero",e=e.slice(2)),!vy.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}o(Fk,"parseConciseScientificAndEngineeringStem");function sp(e){var t={},n=Ey(e);return n||t}o(sp,"parseNotationOptions");function Uk(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=i.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=Ck(i.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=Ne(Ne(Ne({},t),{notation:"scientific"}),i.options.reduce(function(u,l){return Ne(Ne({},u),sp(l))},{}));continue;case"engineering":t=Ne(Ne(Ne({},t),{notation:"engineering"}),i.options.reduce(function(u,l){return Ne(Ne({},u),sp(l))},{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(Bk,function(u,l,f,h,p,y){if(l)t.minimumIntegerDigits=f.length;else{if(h&&p)throw new Error("We currently do not support maximum integer digits");if(y)throw new Error("We currently do not support exact integer digits")}return""});continue}if(vy.test(i.stem)){t.minimumIntegerDigits=i.stem.length;continue}if(rp.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(rp,function(u,l,f,h,p,y){return f==="*"?t.minimumFractionDigits=l.length:h&&h[0]==="#"?t.maximumFractionDigits=h.length:p&&y?(t.minimumFractionDigits=p.length,t.maximumFractionDigits=p.length+y.length):(t.minimumFractionDigits=l.length,t.maximumFractionDigits=l.length),""});var s=i.options[0];s==="w"?t=Ne(Ne({},t),{trailingZeroDisplay:"stripIfInteger"}):s&&(t=Ne(Ne({},t),ip(s)));continue}if(_y.test(i.stem)){t=Ne(Ne({},t),ip(i.stem));continue}var a=Ey(i.stem);a&&(t=Ne(Ne({},t),a));var c=Fk(i.stem);c&&(t=Ne(Ne({},t),c))}return t}o(Uk,"parseNumberSkeleton");var ia={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","h","K"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TL:["H","hB","hb","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function Dk(e,t){for(var n="",r=0;r<e.length;r++){var i=e.charAt(r);if(i==="j"){for(var s=0;r+1<e.length&&e.charAt(r+1)===i;)s++,r++;var a=1+(s&1),c=s<2?1:3+(s>>1),u="a",l=$k(t);for((l=="H"||l=="k")&&(c=0);c-- >0;)n+=u;for(;a-- >0;)n=l+n}else i==="J"?n+="H":n+=i}return n}o(Dk,"getBestPattern");function $k(e){var t=e.hourCycle;if(t===void 0&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n=e.language,r;n!=="root"&&(r=e.maximize().region);var i=ia[r||""]||ia[n||""]||ia["".concat(n,"-001")]||ia["001"];return i[0]}o($k,"getDefaultHourSymbolFromLocale");var Nl,Hk=new RegExp("^".concat(wy.source,"*")),zk=new RegExp("".concat(wy.source,"*$"));function Ke(e,t){return{start:e,end:t}}o(Ke,"createLocation$1");var Zk=!!String.prototype.startsWith&&"_a".startsWith("a",1),Wk=!!String.fromCodePoint,jk=!!Object.fromEntries,Gk=!!String.prototype.codePointAt,qk=!!String.prototype.trimStart,Vk=!!String.prototype.trimEnd,Kk=!!Number.isSafeInteger,Jk=Kk?Number.isSafeInteger:function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},Fu=!0;try{var Yk=Sy("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Fu=((Nl=Yk.exec("a"))===null||Nl===void 0?void 0:Nl[0])==="a"}catch{Fu=!1}var op=o(Zk?function(t,n,r){return t.startsWith(n,r)}:function(t,n,r){return t.slice(r,r+n.length)===n},"startsWith"),Uu=Wk?String.fromCodePoint:o(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=t.length,s=0,a;i>s;){if(a=t[s++],a>1114111)throw RangeError(a+" is not a valid code point");r+=a<65536?String.fromCharCode(a):String.fromCharCode(((a-=65536)>>10)+55296,a%1024+56320)}return r},"fromCodePoint"),ap=jk?Object.fromEntries:o(function(t){for(var n={},r=0,i=t;r<i.length;r++){var s=i[r],a=s[0],c=s[1];n[a]=c}return n},"fromEntries"),xy=o(Gk?function(t,n){return t.codePointAt(n)}:function(t,n){var r=t.length;if(!(n<0||n>=r)){var i=t.charCodeAt(n),s;return i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?i:(i-55296<<10)+(s-56320)+65536}},"codePointAt"),Qk=o(qk?function(t){return t.trimStart()}:function(t){return t.replace(Hk,"")},"trimStart"),Xk=o(Vk?function(t){return t.trimEnd()}:function(t){return t.replace(zk,"")},"trimEnd");function Sy(e,t){return new RegExp(e,t)}o(Sy,"RE");var Du;if(Fu){var cp=Sy("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Du=o(function(t,n){var r;cp.lastIndex=n;var i=cp.exec(t);return(r=i[1])!==null&&r!==void 0?r:""},"matchIdentifierAtIndex")}else Du=o(function(t,n){for(var r=[];;){var i=xy(t,n);if(i===void 0||Ay(i)||rT(i))break;r.push(i),n+=i>=65536?2:1}return Uu.apply(void 0,r)},"matchIdentifierAtIndex");var eT=function(){function e(t,n){n===void 0&&(n={}),this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}return o(e,"Parser"),e.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(t,n,r){for(var i=[];!this.isEOF();){var s=this.char();if(s===123){var a=this.parseArgument(t,r);if(a.err)return a;i.push(a.val)}else{if(s===125&&t>0)break;if(s===35&&(n==="plural"||n==="selectordinal")){var c=this.clonePosition();this.bump(),i.push({type:dt.pound,location:Ke(c,this.clonePosition())})}else if(s===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(qe.UNMATCHED_CLOSING_TAG,Ke(this.clonePosition(),this.clonePosition()))}else if(s===60&&!this.ignoreTag&&$u(this.peek()||0)){var a=this.parseTag(t,n);if(a.err)return a;i.push(a.val)}else{var a=this.parseLiteral(t,n);if(a.err)return a;i.push(a.val)}}}return{val:i,err:null}},e.prototype.parseTag=function(t,n){var r=this.clonePosition();this.bump();var i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:dt.literal,value:"<".concat(i,"/>"),location:Ke(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(t+1,n,!0);if(s.err)return s;var a=s.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!$u(this.char()))return this.error(qe.INVALID_TAG,Ke(c,this.clonePosition()));var u=this.clonePosition(),l=this.parseTagName();return i!==l?this.error(qe.UNMATCHED_CLOSING_TAG,Ke(u,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:dt.tag,value:i,children:a,location:Ke(r,this.clonePosition())},err:null}:this.error(qe.INVALID_TAG,Ke(c,this.clonePosition())))}else return this.error(qe.UNCLOSED_TAG,Ke(r,this.clonePosition()))}else return this.error(qe.INVALID_TAG,Ke(r,this.clonePosition()))},e.prototype.parseTagName=function(){var t=this.offset();for(this.bump();!this.isEOF()&&nT(this.char());)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(t,n){for(var r=this.clonePosition(),i="";;){var s=this.tryParseQuote(n);if(s){i+=s;continue}var a=this.tryParseUnquoted(t,n);if(a){i+=a;continue}var c=this.tryParseLeftAngleBracket();if(c){i+=c;continue}break}var u=Ke(r,this.clonePosition());return{val:{type:dt.literal,value:i,location:u},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!tT(this.peek()||0))?(this.bump(),"<"):null},e.prototype.tryParseQuote=function(t){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(t==="plural"||t==="selectordinal")break;return null;default:return null}this.bump();var n=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(r);this.bump()}return Uu.apply(void 0,n)},e.prototype.tryParseUnquoted=function(t,n){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(n==="plural"||n==="selectordinal")||r===125&&t>0?null:(this.bump(),Uu(r))},e.prototype.parseArgument=function(t,n){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(qe.EXPECT_ARGUMENT_CLOSING_BRACE,Ke(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(qe.EMPTY_ARGUMENT,Ke(r,this.clonePosition()));var i=this.parseIdentifierIfPossible().value;if(!i)return this.error(qe.MALFORMED_ARGUMENT,Ke(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(qe.EXPECT_ARGUMENT_CLOSING_BRACE,Ke(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:dt.argument,value:i,location:Ke(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(qe.EXPECT_ARGUMENT_CLOSING_BRACE,Ke(r,this.clonePosition())):this.parseArgumentOptions(t,n,i,r);default:return this.error(qe.MALFORMED_ARGUMENT,Ke(r,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var t=this.clonePosition(),n=this.offset(),r=Du(this.message,n),i=n+r.length;this.bumpTo(i);var s=this.clonePosition(),a=Ke(t,s);return{value:r,location:a}},e.prototype.parseArgumentOptions=function(t,n,r,i){var s,a=this.clonePosition(),c=this.parseIdentifierIfPossible().value,u=this.clonePosition();switch(c){case"":return this.error(qe.EXPECT_ARGUMENT_TYPE,Ke(a,u));case"number":case"date":case"time":{this.bumpSpace();var l=null;if(this.bumpIf(",")){this.bumpSpace();var f=this.clonePosition(),h=this.parseSimpleArgStyleIfPossible();if(h.err)return h;var p=Xk(h.val);if(p.length===0)return this.error(qe.EXPECT_ARGUMENT_STYLE,Ke(this.clonePosition(),this.clonePosition()));var y=Ke(f,this.clonePosition());l={style:p,styleLocation:y}}var _=this.tryParseArgumentClose(i);if(_.err)return _;var x=Ke(i,this.clonePosition());if(l&&op(l?.style,"::",0)){var w=Qk(l.style.slice(2));if(c==="number"){var h=this.parseNumberSkeletonFromString(w,l.styleLocation);return h.err?h:{val:{type:dt.number,value:r,location:x,style:h.val},err:null}}else{if(w.length===0)return this.error(qe.EXPECT_DATE_TIME_SKELETON,x);var v=w;this.locale&&(v=Dk(w,this.locale));var p={type:ds.dateTime,pattern:v,location:l.styleLocation,parsedOptions:this.shouldParseSkeletons?Lk(v):{}},T=c==="date"?dt.date:dt.time;return{val:{type:T,value:r,location:x,style:p},err:null}}}return{val:{type:c==="number"?dt.number:c==="date"?dt.date:dt.time,value:r,location:x,style:(s=l?.style)!==null&&s!==void 0?s:null},err:null}}case"plural":case"selectordinal":case"select":{var N=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(qe.EXPECT_SELECT_ARGUMENT_OPTIONS,Ke(N,Ne({},N)));this.bumpSpace();var I=this.parseIdentifierIfPossible(),C=0;if(c!=="select"&&I.value==="offset"){if(!this.bumpIf(":"))return this.error(qe.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Ke(this.clonePosition(),this.clonePosition()));this.bumpSpace();var h=this.tryParseDecimalInteger(qe.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,qe.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(h.err)return h;this.bumpSpace(),I=this.parseIdentifierIfPossible(),C=h.val}var D=this.tryParsePluralOrSelectOptions(t,c,n,I);if(D.err)return D;var _=this.tryParseArgumentClose(i);if(_.err)return _;var U=Ke(i,this.clonePosition());return c==="select"?{val:{type:dt.select,value:r,options:ap(D.val),location:U},err:null}:{val:{type:dt.plural,value:r,options:ap(D.val),offset:C,pluralType:c==="plural"?"cardinal":"ordinal",location:U},err:null}}default:return this.error(qe.INVALID_ARGUMENT_TYPE,Ke(a,u))}},e.prototype.tryParseArgumentClose=function(t){return this.isEOF()||this.char()!==125?this.error(qe.EXPECT_ARGUMENT_CLOSING_BRACE,Ke(t,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var t=0,n=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var i=this.clonePosition();if(!this.bumpUntil("'"))return this.error(qe.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Ke(i,this.clonePosition()));this.bump();break}case 123:{t+=1,this.bump();break}case 125:{if(t>0)t-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(n.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(t,n){var r=[];try{r=Ok(t)}catch{return this.error(qe.INVALID_NUMBER_SKELETON,n)}return{val:{type:ds.number,tokens:r,location:n,parsedOptions:this.shouldParseSkeletons?Uk(r):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(t,n,r,i){for(var s,a=!1,c=[],u=new Set,l=i.value,f=i.location;;){if(l.length===0){var h=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){var p=this.tryParseDecimalInteger(qe.EXPECT_PLURAL_ARGUMENT_SELECTOR,qe.INVALID_PLURAL_ARGUMENT_SELECTOR);if(p.err)return p;f=Ke(h,this.clonePosition()),l=this.message.slice(h.offset,this.offset())}else break}if(u.has(l))return this.error(n==="select"?qe.DUPLICATE_SELECT_ARGUMENT_SELECTOR:qe.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,f);l==="other"&&(a=!0),this.bumpSpace();var y=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?qe.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:qe.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Ke(this.clonePosition(),this.clonePosition()));var _=this.parseMessage(t+1,n,r);if(_.err)return _;var x=this.tryParseArgumentClose(y);if(x.err)return x;c.push([l,{value:_.val,location:Ke(y,this.clonePosition())}]),u.add(l),this.bumpSpace(),s=this.parseIdentifierIfPossible(),l=s.value,f=s.location}return c.length===0?this.error(n==="select"?qe.EXPECT_SELECT_ARGUMENT_SELECTOR:qe.EXPECT_PLURAL_ARGUMENT_SELECTOR,Ke(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!a?this.error(qe.MISSING_OTHER_CLAUSE,Ke(this.clonePosition(),this.clonePosition())):{val:c,err:null}},e.prototype.tryParseDecimalInteger=function(t,n){var r=1,i=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var s=!1,a=0;!this.isEOF();){var c=this.char();if(c>=48&&c<=57)s=!0,a=a*10+(c-48),this.bump();else break}var u=Ke(i,this.clonePosition());return s?(a*=r,Jk(a)?{val:a,err:null}:this.error(n,u)):this.error(t,u)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");var n=xy(this.message,t);if(n===void 0)throw Error("Offset ".concat(t," is at invalid UTF-16 code unit boundary"));return n},e.prototype.error=function(t,n){return{val:null,err:{kind:t,message:this.message,location:n}}},e.prototype.bump=function(){if(!this.isEOF()){var t=this.char();t===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}},e.prototype.bumpIf=function(t){if(op(this.message,t,this.offset())){for(var n=0;n<t.length;n++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(t){var n=this.offset(),r=this.message.indexOf(t,n);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(t){if(this.offset()>t)throw Error("targetOffset ".concat(t," must be greater than or equal to the current offset ").concat(this.offset()));for(t=Math.min(t,this.message.length);;){var n=this.offset();if(n===t)break;if(n>t)throw Error("targetOffset ".concat(t," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&Ay(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var t=this.char(),n=this.offset(),r=this.message.charCodeAt(n+(t>=65536?2:1));return r??null},e}();function $u(e){return e>=97&&e<=122||e>=65&&e<=90}o($u,"_isAlpha");function tT(e){return $u(e)||e===47}o(tT,"_isAlphaOrSlash");function nT(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}o(nT,"_isPotentialElementNameChar");function Ay(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}o(Ay,"_isWhiteSpace");function rT(e){return e>=33&&e<=35||e===36||e>=37&&e<=39||e===40||e===41||e===42||e===43||e===44||e===45||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||e===91||e===92||e===93||e===94||e===96||e===123||e===124||e===125||e===126||e===161||e>=162&&e<=165||e===166||e===167||e===169||e===171||e===172||e===174||e===176||e===177||e===182||e===187||e===191||e===215||e===247||e>=8208&&e<=8213||e>=8214&&e<=8215||e===8216||e===8217||e===8218||e>=8219&&e<=8220||e===8221||e===8222||e===8223||e>=8224&&e<=8231||e>=8240&&e<=8248||e===8249||e===8250||e>=8251&&e<=8254||e>=8257&&e<=8259||e===8260||e===8261||e===8262||e>=8263&&e<=8273||e===8274||e===8275||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||e===8608||e>=8609&&e<=8610||e===8611||e>=8612&&e<=8613||e===8614||e>=8615&&e<=8621||e===8622||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||e===8658||e===8659||e===8660||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||e===8968||e===8969||e===8970||e===8971||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||e===9001||e===9002||e>=9003&&e<=9083||e===9084||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||e===9655||e>=9656&&e<=9664||e===9665||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||e===9839||e>=9840&&e<=10087||e===10088||e===10089||e===10090||e===10091||e===10092||e===10093||e===10094||e===10095||e===10096||e===10097||e===10098||e===10099||e===10100||e===10101||e>=10132&&e<=10175||e>=10176&&e<=10180||e===10181||e===10182||e>=10183&&e<=10213||e===10214||e===10215||e===10216||e===10217||e===10218||e===10219||e===10220||e===10221||e===10222||e===10223||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||e===10627||e===10628||e===10629||e===10630||e===10631||e===10632||e===10633||e===10634||e===10635||e===10636||e===10637||e===10638||e===10639||e===10640||e===10641||e===10642||e===10643||e===10644||e===10645||e===10646||e===10647||e===10648||e>=10649&&e<=10711||e===10712||e===10713||e===10714||e===10715||e>=10716&&e<=10747||e===10748||e===10749||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||e===11158||e>=11159&&e<=11263||e>=11776&&e<=11777||e===11778||e===11779||e===11780||e===11781||e>=11782&&e<=11784||e===11785||e===11786||e===11787||e===11788||e===11789||e>=11790&&e<=11798||e===11799||e>=11800&&e<=11801||e===11802||e===11803||e===11804||e===11805||e>=11806&&e<=11807||e===11808||e===11809||e===11810||e===11811||e===11812||e===11813||e===11814||e===11815||e===11816||e===11817||e>=11818&&e<=11822||e===11823||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||e===11840||e===11841||e===11842||e>=11843&&e<=11855||e>=11856&&e<=11857||e===11858||e>=11859&&e<=11903||e>=12289&&e<=12291||e===12296||e===12297||e===12298||e===12299||e===12300||e===12301||e===12302||e===12303||e===12304||e===12305||e>=12306&&e<=12307||e===12308||e===12309||e===12310||e===12311||e===12312||e===12313||e===12314||e===12315||e===12316||e===12317||e>=12318&&e<=12319||e===12320||e===12336||e===64830||e===64831||e>=65093&&e<=65094}o(rT,"_isPatternSyntax");function Hu(e){e.forEach(function(t){if(delete t.location,gy(t)||my(t))for(var n in t.options)delete t.options[n].location,Hu(t.options[n].value);else dy(t)&&by(t.style)||(hy(t)||py(t))&&Bu(t.style)?delete t.style.location:yy(t)&&Hu(t.children)})}o(Hu,"pruneLocation");function iT(e,t){t===void 0&&(t={}),t=Ne({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new eT(e,t).parse();if(n.err){var r=SyntaxError(qe[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return t?.captureLocation||Hu(n.val),n.val}o(iT,"parse");function Xn(e,t){var n=t&&t.cache?t.cache:uT,r=t&&t.serializer?t.serializer:lT,i=t&&t.strategy?t.strategy:oT;return i(e,{cache:n,serializer:r})}o(Xn,"memoize");function sT(e){return e==null||typeof e=="number"||typeof e=="boolean"}o(sT,"isPrimitive");function My(e,t,n,r){var i=sT(r)?r:n(r),s=t.get(i);return typeof s>"u"&&(s=e.call(this,r),t.set(i,s)),s}o(My,"monadic");function ky(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),s=t.get(i);return typeof s>"u"&&(s=e.apply(this,r),t.set(i,s)),s}o(ky,"variadic");function Kf(e,t,n,r,i){return n.bind(t,e,r,i)}o(Kf,"assemble");function oT(e,t){var n=e.length===1?My:ky;return Kf(e,this,n,t.cache.create(),t.serializer)}o(oT,"strategyDefault");function aT(e,t){return Kf(e,this,ky,t.cache.create(),t.serializer)}o(aT,"strategyVariadic");function cT(e,t){return Kf(e,this,My,t.cache.create(),t.serializer)}o(cT,"strategyMonadic");var lT=o(function(){return JSON.stringify(arguments)},"serializerDefault");function Jf(){this.cache=Object.create(null)}o(Jf,"ObjectWithoutPrototypeCache");Jf.prototype.get=function(e){return this.cache[e]};Jf.prototype.set=function(e,t){this.cache[e]=t};var uT={create:o(function(){return new Jf},"create")},er={variadic:aT,monadic:cT},fr;(function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"})(fr||(fr={}));var ui=function(e){zn(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.code=r,s.originalMessage=i,s}return o(t,"FormatError"),t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),lp=function(e){zn(t,e);function t(n,r,i,s){return e.call(this,'Invalid values for "'.concat(n,'": "').concat(r,'". Options are "').concat(Object.keys(i).join('", "'),'"'),fr.INVALID_VALUE,s)||this}return o(t,"InvalidValueError"),t}(ui),fT=function(e){zn(t,e);function t(n,r,i){return e.call(this,'Value for "'.concat(n,'" must be of type ').concat(r),fr.INVALID_VALUE,i)||this}return o(t,"InvalidValueTypeError"),t}(ui),dT=function(e){zn(t,e);function t(n,r){return e.call(this,'The intl string context variable "'.concat(n,'" was not provided to the string "').concat(r,'"'),fr.MISSING_VALUE,r)||this}return o(t,"MissingValueError"),t}(ui),tn;(function(e){e[e.literal=0]="literal",e[e.object=1]="object"})(tn||(tn={}));function hT(e){return e.length<2?e:e.reduce(function(t,n){var r=t[t.length-1];return!r||r.type!==tn.literal||n.type!==tn.literal?t.push(n):r.value+=n.value,t},[])}o(hT,"mergeLiteral");function pT(e){return typeof e=="function"}o(pT,"isFormatXMLElementFn");function xa(e,t,n,r,i,s,a){if(e.length===1&&np(e[0]))return[{type:tn.literal,value:e[0].value}];for(var c=[],u=0,l=e;u<l.length;u++){var f=l[u];if(np(f)){c.push({type:tn.literal,value:f.value});continue}if(Ik(f)){typeof s=="number"&&c.push({type:tn.literal,value:n.getNumberFormat(t).format(s)});continue}var h=f.value;if(!(i&&h in i))throw new dT(h,a);var p=i[h];if(Nk(f)){(!p||typeof p=="string"||typeof p=="number")&&(p=typeof p=="string"||typeof p=="number"?String(p):""),c.push({type:typeof p=="string"?tn.literal:tn.object,value:p});continue}if(hy(f)){var y=typeof f.style=="string"?r.date[f.style]:Bu(f.style)?f.style.parsedOptions:void 0;c.push({type:tn.literal,value:n.getDateTimeFormat(t,y).format(p)});continue}if(py(f)){var y=typeof f.style=="string"?r.time[f.style]:Bu(f.style)?f.style.parsedOptions:r.time.medium;c.push({type:tn.literal,value:n.getDateTimeFormat(t,y).format(p)});continue}if(dy(f)){var y=typeof f.style=="string"?r.number[f.style]:by(f.style)?f.style.parsedOptions:void 0;y&&y.scale&&(p=p*(y.scale||1)),c.push({type:tn.literal,value:n.getNumberFormat(t,y).format(p)});continue}if(yy(f)){var _=f.children,x=f.value,w=i[x];if(!pT(w))throw new fT(x,"function",a);var v=xa(_,t,n,r,i,s),T=w(v.map(function(C){return C.value}));Array.isArray(T)||(T=[T]),c.push.apply(c,T.map(function(C){return{type:typeof C=="string"?tn.literal:tn.object,value:C}}))}if(gy(f)){var N=f.options[p]||f.options.other;if(!N)throw new lp(f.value,p,Object.keys(f.options),a);c.push.apply(c,xa(N.value,t,n,r,i));continue}if(my(f)){var N=f.options["=".concat(p)];if(!N){if(!Intl.PluralRules)throw new ui(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,fr.MISSING_INTL_API,a);var I=n.getPluralRules(t,{type:f.pluralType}).select(p-(f.offset||0));N=f.options[I]||f.options.other}if(!N)throw new lp(f.value,p,Object.keys(f.options),a);c.push.apply(c,xa(N.value,t,n,r,i,p-(f.offset||0)));continue}}return hT(c)}o(xa,"formatToParts");function gT(e,t){return t?Ne(Ne(Ne({},e||{}),t||{}),Object.keys(e).reduce(function(n,r){return n[r]=Ne(Ne({},e[r]),t[r]||{}),n},{})):e}o(gT,"mergeConfig");function mT(e,t){return t?Object.keys(e).reduce(function(n,r){return n[r]=gT(e[r],t[r]),n},Ne({},e)):e}o(mT,"mergeConfigs");function Il(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}o(Il,"createFastMemoizeCache$1");function yT(e){return e===void 0&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Xn(function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((t=Intl.NumberFormat).bind.apply(t,Er([void 0],n,!1)))},{cache:Il(e.number),strategy:er.variadic}),getDateTimeFormat:Xn(function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((t=Intl.DateTimeFormat).bind.apply(t,Er([void 0],n,!1)))},{cache:Il(e.dateTime),strategy:er.variadic}),getPluralRules:Xn(function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((t=Intl.PluralRules).bind.apply(t,Er([void 0],n,!1)))},{cache:Il(e.pluralRules),strategy:er.variadic})}}o(yT,"createDefaultFormatters");var Ty=function(){function e(t,n,r,i){n===void 0&&(n=e.defaultLocale);var s=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(u){var l=s.formatToParts(u);if(l.length===1)return l[0].value;var f=l.reduce(function(h,p){return!h.length||p.type!==tn.literal||typeof h[h.length-1]!="string"?h.push(p.value):h[h.length-1]+=p.value,h},[]);return f.length<=1?f[0]||"":f},this.formatToParts=function(u){return xa(s.ast,s.locales,s.formatters,s.formats,u,void 0,s.message)},this.resolvedOptions=function(){var u;return{locale:((u=s.resolvedLocale)===null||u===void 0?void 0:u.toString())||Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),typeof t=="string"){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var a=i||{};a.formatters;var c=Tk(a,["formatters"]);this.ast=e.__parse(t,Ne(Ne({},c),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=mT(e.formats,r),this.formatters=i&&i.formatters||yT(this.formatterCache)}return o(e,"IntlMessageFormat"),Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(t){if(!(typeof Intl.Locale>"u")){var n=Intl.NumberFormat.supportedLocalesOf(t);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof t=="string"?t:t[0])}},e.__parse=iT,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}(),Oi;(function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"})(Oi||(Oi={}));var Do=function(e){zn(t,e);function t(n,r,i){var s=this,a=i?i instanceof Error?i:new Error(String(i)):void 0;return s=e.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,`
`).concat(a?`
`.concat(a.message,`
`).concat(a.stack):""))||this,s.code=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(s,t),s}return o(t,"IntlError"),t}(Error),bT=function(e){zn(t,e);function t(n,r){return e.call(this,Oi.UNSUPPORTED_FORMATTER,n,r)||this}return o(t,"UnsupportedFormatterError"),t}(Do),wT=function(e){zn(t,e);function t(n,r){return e.call(this,Oi.INVALID_CONFIG,n,r)||this}return o(t,"InvalidConfigError"),t}(Do),up=function(e){zn(t,e);function t(n,r){return e.call(this,Oi.MISSING_DATA,n,r)||this}return o(t,"MissingDataError"),t}(Do),Ln=function(e){zn(t,e);function t(n,r,i){var s=e.call(this,Oi.FORMAT_ERROR,"".concat(n,`
Locale: `).concat(r,`
`),i)||this;return s.locale=r,s}return o(t,"IntlFormatError"),t}(Do),Rl=function(e){zn(t,e);function t(n,r,i,s){var a=e.call(this,"".concat(n,`
MessageID: `).concat(i?.id,`
Default Message: `).concat(i?.defaultMessage,`
Description: `).concat(i?.description,`
`),r,s)||this;return a.descriptor=i,a.locale=r,a}return o(t,"MessageFormatError"),t}(Ln),_T=function(e){zn(t,e);function t(n,r){var i=e.call(this,Oi.MISSING_TRANSLATION,'Missing message: "'.concat(n.id,'" for locale "').concat(r,'", using ').concat(n.defaultMessage?"default message (".concat(typeof n.defaultMessage=="string"?n.defaultMessage:n.defaultMessage.map(function(s){var a;return(a=s.value)!==null&&a!==void 0?a:JSON.stringify(s)}).join(),")"):"id"," as fallback."))||this;return i.descriptor=n,i}return o(t,"MissingTranslationError"),t}(Do);function $i(e,t,n){return n===void 0&&(n={}),t.reduce(function(r,i){return i in e?r[i]=e[i]:i in n&&(r[i]=n[i]),r},{})}o($i,"filterProps");var vT=o(function(e){},"defaultErrorHandler"),ET=o(function(e){},"defaultWarnHandler"),Ny={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:vT,onWarn:ET};function Iy(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}o(Iy,"createIntlCache");function hi(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}o(hi,"createFastMemoizeCache");function xT(e){e===void 0&&(e=Iy());var t=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,i=Xn(function(){for(var c,u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return new((c=Intl.DateTimeFormat).bind.apply(c,Er([void 0],u,!1)))},{cache:hi(e.dateTime),strategy:er.variadic}),s=Xn(function(){for(var c,u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return new((c=Intl.NumberFormat).bind.apply(c,Er([void 0],u,!1)))},{cache:hi(e.number),strategy:er.variadic}),a=Xn(function(){for(var c,u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return new((c=Intl.PluralRules).bind.apply(c,Er([void 0],u,!1)))},{cache:hi(e.pluralRules),strategy:er.variadic});return{getDateTimeFormat:i,getNumberFormat:s,getMessageFormat:Xn(function(c,u,l,f){return new Ty(c,u,l,Ne({formatters:{getNumberFormat:s,getDateTimeFormat:i,getPluralRules:a}},f||{}))},{cache:hi(e.message),strategy:er.variadic}),getRelativeTimeFormat:Xn(function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return new(t.bind.apply(t,Er([void 0],c,!1)))},{cache:hi(e.relativeTime),strategy:er.variadic}),getPluralRules:a,getListFormat:Xn(function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return new(n.bind.apply(n,Er([void 0],c,!1)))},{cache:hi(e.list),strategy:er.variadic}),getDisplayNames:Xn(function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return new(r.bind.apply(r,Er([void 0],c,!1)))},{cache:hi(e.displayNames),strategy:er.variadic})}}o(xT,"createFormatters");function Yf(e,t,n,r){var i=e&&e[t],s;if(i&&(s=i[n]),s)return s;r(new bT("No ".concat(t," format named: ").concat(n)))}o(Yf,"getNamedFormat");function ST(e,t,n){if(n===void 0&&(n=Error),!e)throw new n(t)}o(ST,"invariant$1");function sa(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=Ne({timeZone:t},e[r]),n},{})}o(sa,"setTimeZoneInOptions");function fp(e,t){var n=Object.keys(Ne(Ne({},e),t));return n.reduce(function(r,i){return r[i]=Ne(Ne({},e[i]||{}),t[i]||{}),r},{})}o(fp,"deepMergeOptions");function dp(e,t){if(!t)return e;var n=Ty.formats;return Ne(Ne(Ne({},n),e),{date:fp(sa(n.date,t),sa(e.date||{},t)),time:fp(sa(n.time,t),sa(e.time||{},t))})}o(dp,"deepMergeFormatsAndSetTimeZone");var hp=o(function(e,t,n,r,i){var s=e.locale,a=e.formats,c=e.messages,u=e.defaultLocale,l=e.defaultFormats,f=e.fallbackOnEmptyString,h=e.onError,p=e.timeZone,y=e.defaultRichTextElements;n===void 0&&(n={id:""});var _=n.id,x=n.defaultMessage;ST(!!_,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var w=String(_),v=c&&Object.prototype.hasOwnProperty.call(c,w)&&c[w];if(Array.isArray(v)&&v.length===1&&v[0].type===dt.literal)return v[0].value;if(!r&&v&&typeof v=="string"&&!y)return v.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=Ne(Ne({},y),r||{}),a=dp(a,p),l=dp(l,p),!v){if(f===!1&&v==="")return v;if((!x||s&&s.toLowerCase()!==u.toLowerCase())&&h(new _T(n,s)),x)try{var T=t.getMessageFormat(x,u,l,i);return T.format(r)}catch(N){return h(new Rl('Error formatting default message for: "'.concat(w,'", rendering default message verbatim'),s,n,N)),typeof x=="string"?x:w}return w}try{var T=t.getMessageFormat(v,s,a,Ne({formatters:t},i||{}));return T.format(r)}catch(N){h(new Rl('Error formatting message: "'.concat(w,'", using ').concat(x?"default message":"id"," as fallback."),s,n,N))}if(x)try{var T=t.getMessageFormat(x,u,l,i);return T.format(r)}catch(N){h(new Rl('Error formatting the default message for: "'.concat(w,'", rendering message verbatim'),s,n,N))}return typeof v=="string"?v:typeof x=="string"?x:w},"formatMessage"),Ry=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function kc(e,t,n,r){var i=e.locale,s=e.formats,a=e.onError,c=e.timeZone;r===void 0&&(r={});var u=r.format,l=Ne(Ne({},c&&{timeZone:c}),u&&Yf(s,t,u,a)),f=$i(r,Ry,l);return t==="time"&&!f.hour&&!f.minute&&!f.second&&!f.timeStyle&&!f.dateStyle&&(f=Ne(Ne({},f),{hour:"numeric",minute:"numeric"})),n(i,f)}o(kc,"getFormatter$2");function AT(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],a=s===void 0?{}:s,c=typeof i=="string"?new Date(i||0):i;try{return kc(e,"date",t,a).format(c)}catch(u){e.onError(new Ln("Error formatting date.",e.locale,u))}return String(c)}o(AT,"formatDate");function MT(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],a=s===void 0?{}:s,c=typeof i=="string"?new Date(i||0):i;try{return kc(e,"time",t,a).format(c)}catch(u){e.onError(new Ln("Error formatting time.",e.locale,u))}return String(c)}o(MT,"formatTime");function kT(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],a=n[2],c=a===void 0?{}:a,u=e.timeZone,l=e.locale,f=e.onError,h=$i(c,Ry,u?{timeZone:u}:{});try{return t(l,h).formatRange(i,s)}catch(p){f(new Ln("Error formatting date time range.",e.locale,p))}return String(i)}o(kT,"formatDateTimeRange");function TT(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],a=s===void 0?{}:s,c=typeof i=="string"?new Date(i||0):i;try{return kc(e,"date",t,a).formatToParts(c)}catch(u){e.onError(new Ln("Error formatting date.",e.locale,u))}return[]}o(TT,"formatDateToParts");function NT(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],a=s===void 0?{}:s,c=typeof i=="string"?new Date(i||0):i;try{return kc(e,"time",t,a).formatToParts(c)}catch(u){e.onError(new Ln("Error formatting time.",e.locale,u))}return[]}o(NT,"formatTimeToParts");var IT=["style","type","fallback","languageDisplay"];function RT(e,t,n,r){var i=e.locale,s=e.onError,a=Intl.DisplayNames;a||s(new ui(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,fr.MISSING_INTL_API));var c=$i(r,IT);try{return t(i,c).of(n)}catch(u){s(new Ln("Error formatting display name.",i,u))}}o(RT,"formatDisplayName");var LT=["type","style"],pp=Date.now();function PT(e){return"".concat(pp,"_").concat(e,"_").concat(pp)}o(PT,"generateToken");function OT(e,t,n,r){r===void 0&&(r={});var i=Ly(e,t,n,r).reduce(function(s,a){var c=a.value;return typeof c!="string"?s.push(c):typeof s[s.length-1]=="string"?s[s.length-1]+=c:s.push(c),s},[]);return i.length===1?i[0]:i.length===0?"":i}o(OT,"formatList");function Ly(e,t,n,r){var i=e.locale,s=e.onError;r===void 0&&(r={});var a=Intl.ListFormat;a||s(new ui(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,fr.MISSING_INTL_API));var c=$i(r,LT);try{var u={},l=n.map(function(f,h){if(typeof f=="object"){var p=PT(h);return u[p]=f,p}return String(f)});return t(i,c).formatToParts(l).map(function(f){return f.type==="literal"?f:Ne(Ne({},f),{value:u[f.value]||f.value})})}catch(f){s(new Ln("Error formatting list.",i,f))}return n}o(Ly,"formatListToParts");var CT=["type"];function BT(e,t,n,r){var i=e.locale,s=e.onError;r===void 0&&(r={}),Intl.PluralRules||s(new ui(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,fr.MISSING_INTL_API));var a=$i(r,CT);try{return t(i,a).select(n)}catch(c){s(new Ln("Error formatting plural.",i,c))}return"other"}o(BT,"formatPlural");var FT=["numeric","style"];function UT(e,t,n){var r=e.locale,i=e.formats,s=e.onError;n===void 0&&(n={});var a=n.format,c=!!a&&Yf(i,"relative",a,s)||{},u=$i(n,FT,c);return t(r,u)}o(UT,"getFormatter$1");function DT(e,t,n,r,i){i===void 0&&(i={}),r||(r="second");var s=Intl.RelativeTimeFormat;s||e.onError(new ui(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,fr.MISSING_INTL_API));try{return UT(e,t,i).format(n,r)}catch(a){e.onError(new Ln("Error formatting relative time.",e.locale,a))}return String(n)}o(DT,"formatRelativeTime");var $T=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function Py(e,t,n){var r=e.locale,i=e.formats,s=e.onError;n===void 0&&(n={});var a=n.format,c=a&&Yf(i,"number",a,s)||{},u=$i(n,$T,c);return t(r,u)}o(Py,"getFormatter");function HT(e,t,n,r){r===void 0&&(r={});try{return Py(e,t,r).format(n)}catch(i){e.onError(new Ln("Error formatting number.",e.locale,i))}return String(n)}o(HT,"formatNumber");function zT(e,t,n,r){r===void 0&&(r={});try{return Py(e,t,r).formatToParts(n)}catch(i){e.onError(new Ln("Error formatting number.",e.locale,i))}return[]}o(zT,"formatNumberToParts");function ZT(e){var t=e?e[Object.keys(e)[0]]:void 0;return typeof t=="string"}o(ZT,"messagesContainString");function WT(e){e.onWarn&&e.defaultRichTextElements&&ZT(e.messages||{})&&e.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}o(WT,"verifyConfigMessages");function gp(e,t){var n=xT(t),r=Ne(Ne({},Ny),e),i=r.locale,s=r.defaultLocale,a=r.onError;return i?!Intl.NumberFormat.supportedLocalesOf(i).length&&a?a(new up('Missing locale data for locale: "'.concat(i,'" in Intl.NumberFormat. Using default locale: "').concat(s,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(i).length&&a&&a(new up('Missing locale data for locale: "'.concat(i,'" in Intl.DateTimeFormat. Using default locale: "').concat(s,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(a&&a(new wT('"locale" was not configured, using "'.concat(s,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),WT(r),Ne(Ne({},r),{formatters:n,formatNumber:HT.bind(null,r,n.getNumberFormat),formatNumberToParts:zT.bind(null,r,n.getNumberFormat),formatRelativeTime:DT.bind(null,r,n.getRelativeTimeFormat),formatDate:AT.bind(null,r,n.getDateTimeFormat),formatDateToParts:TT.bind(null,r,n.getDateTimeFormat),formatTime:MT.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:kT.bind(null,r,n.getDateTimeFormat),formatTimeToParts:NT.bind(null,r,n.getDateTimeFormat),formatPlural:BT.bind(null,r,n.getPluralRules),formatMessage:hp.bind(null,r,n),$t:hp.bind(null,r,n),formatList:OT.bind(null,r,n.getListFormat),formatListToParts:Ly.bind(null,r,n.getListFormat),formatDisplayName:RT.bind(null,r,n.getDisplayNames)})}o(gp,"createIntl");function mp(e){return Ra(Ny,{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,defaultRichTextElements:e.defaultRichTextElements,onError:e.onError,onWarn:e.onWarn})}o(mp,"processConfig");const jT=o(e=>({}).toString.call(e).match(/\s([A-Za-z]+)/)?.[1].toLowerCase()??"","typeOf"),Vi=jT,GT={nullish(e){return e==null},string(e){return Vi(e)==="string"},number(e){return Vi(e)==="number"},bool(e){return Vi(e)==="boolean"},object(e){return Vi(e)==="object"},array(e){return Array.isArray(e)},date(e){return Vi(e)==="date"},function(e){return Vi(e)==="function"}},qT=GT,Oy=Ht(),VT=o(e=>{if(qT.nullish(e.locale))throw new ReferenceError('[solid-intl]: <IntlProvider /> expects a "locale" which was not configured. See https://formatjs.io/docs/react-intl/api#intlshape for more details');const t=Lw(Iy()),[n,r]=Xt(gp(mp(e),t));return Kl(()=>{r(gp(mp(e),t))}),pe(Oy.Provider,{value:n,get children(){return e.children}})},"IntlProvider"),KT=VT,JT=o(()=>{const e=zt(Oy);if(!e)throw new ReferenceError("[solid-intl]: Have you forgot to wrap your application with <IntlProvider /> ?");return e},"useIntl"),Cy=JT,N8={alreadyHaveAccount:{id:"account.alreadyHaveAccount",defaultMessage:"Already have a Nostr account?",description:"Already have a Nostr accountlabel"},prominentNostriches:{id:"actions.prominentNostriches",defaultMessage:"Prominent Nostriches",description:"Prominent Nostriches label"},follow:{id:"actions.follow",defaultMessage:"follow",description:"Follow button label"},unfollow:{id:"actions.unfollow",defaultMessage:"unfollow",description:"Unfollow button label"},followAll:{id:"actions.followAll",defaultMessage:"follow all",description:"Follow all button label"},unfollowAll:{id:"actions.unfollowAll",defaultMessage:"unfollow all",description:"Unfollow all button label"},followFailed:{id:"account.followFailed",defaultMessage:"Failed to complete the follow possibly due to a network error. Please try again.",description:"Feedback to user that the follow action has failed"},unfollowFailed:{id:"account.unfollowFailed",defaultMessage:"Failed to complete the unfollow possibly due to a network error. Please try again.",description:"Feedback to user that the unfollow action has failed"},needToLogin:{id:"account.needToLogin",defaultMessage:"You need to be signed in to perform this action",description:"Message to user that an action cannot be preformed without a public key"},createNewDescription:{id:"account.createNewDescription",defaultMessage:"New to Nostr? Create your account now and join this magical place. It’s quick and easy!",description:"Label inviting users to join Nostr"},create:{title:{id:"settings.account.title",defaultMessage:"Create Account",description:"Title of the create account page"},descriptions:{step_one:{id:"settings.account.descriptions.step_one",defaultMessage:"Let’s start with the basics. Only the username is required!",description:"Description on step one"},step_two:{id:"settings.account.descriptions.step_two",defaultMessage:"Tell us a bit more about yourself. Everything on this page is optional!",description:"Description on step two"},step_three:{id:"settings.account.descriptions.step_three",defaultMessage:"We found some Nostr accounts for you to follow:",description:"Description on step three"}}}},I8={title:{id:"login.title",defaultMessage:"Login",description:"Login "},description:{id:"login.description",defaultMessage:"Enter your Nostr private key (starting with “nsec”):",description:"Label describing the login proccess"},invalidNsec:{id:"login.invalidNsec",defaultMessage:"Please enter a valid Nostr private key",description:"Label informing the user of an invalid nsec key"}},R8={title:{id:"pin.title",defaultMessage:"Create Pin",description:"Create Pin modal title"},description:{id:"pin.description",defaultMessage:"Create a PIN to secure your account. You will need to enter this PIN every time you login to the Primal web app:",description:"Label describing what the pin is used for"},enter:{id:"pin.enter",defaultMessage:"Enter your PIN to login: ",description:"Label instructing the user to enter the pin"},enterTitle:{id:"pin.enterTitle",defaultMessage:"Enter Pin",description:"Enter Pin modal title"},reEnter:{id:"pin.reEnter",defaultMessage:"Re-type your PIN:",description:"Label instructing the user to re-enter the pin"},invalidPin:{id:"pin.invalidPin",defaultMessage:"PIN must be at least 4 characters",description:"Label instructing the user on the valid pin requirements"},invalidRePin:{id:"pin.invalidRePin",defaultMessage:"PINs don't match",description:"Label instructing the user that the two pins don't match"}},L8={resetRelays:{id:"actions.resetRelays",defaultMessage:"Reset relays",description:"Reset relays label"},seeMore:{id:"actions.seeMore",defaultMessage:"see more",description:"See more label"},newNote:{id:"actions.newNote",defaultMessage:"New Note",description:"New note action label"},newArticle:{id:"actions.newArticle",defaultMessage:"New Article",description:"New article action label"},createPin:{id:"actions.createPin",defaultMessage:"Set PIN",description:"Create PIN action, button label"},optoutPin:{id:"actions.optoutPin",defaultMessage:"Continue without a PIN",description:"opt-out of PIN action, button label"},createAccount:{id:"actions.createAccount",defaultMessage:"Create Account",description:"Create account action, button label"},login:{id:"actions.login",defaultMessage:"Login",description:"Login action, button label"},loginNow:{id:"actions.loginNow",defaultMessage:"Login now",description:"Login Now action, button label"},logout:{id:"actions.logout",defaultMessage:"Logout",description:"Logout action, button label"},getStarted:{id:"actions.getStarted",defaultMessage:"Get Started",description:"Get Started action, button label"},forgotPin:{id:"actions.forgotPin",defaultMessage:"I forgot my PIN",description:"Forgot PIN action, button label"},cancel:{id:"actions.cancel",defaultMessage:"Cancel",description:"Cancel action, button label"},copy:{id:"actions.copy",defaultMessage:"copy",description:"Copy action, button label"},copyPubkey:{id:"actions.copyPubkey",defaultMessage:"copy public key",description:"Copy pubkey action, button label"},copyPrivkey:{id:"actions.copyPrivkey",defaultMessage:"copy private key",description:"Copy private key action, button label"},addFeedToHome:{id:"actions.addFeedToHome",defaultMessage:"add this feed to my home page",description:"Add feed to home, button label"},addFeedToHomeNamed:{id:"actions.addFeedToHomeNamed",defaultMessage:"add {name} feed to home page",description:"Add named feed to home, button label"},disabledAddFeedToHome:{id:"actions.disabledHomeFeedAdd",defaultMessage:"Available on your home page",description:"Add feed to home label, when feed is already added"},removeFromHomeFeedNamed:{id:"actions.removeFromHomeFeedNamed",defaultMessage:"remove {name} feed from your home page",description:"Remove named feed from home, button label"},noteCopyNostrLink:{id:"actions.noteCopyNostrLink",defaultMessage:"Copy Nostr link",description:"Label for the copy Nostr note link context menu item"},noteCopyPrimalLink:{id:"actions.noteCopyPrimalLink",defaultMessage:"Copy Primal link",description:"Label for the copy Primal note link context menu item"},notePostNew:{id:"actions.notePostNew",defaultMessage:"Post",description:"Send new note, button label"},noteReply:{id:"actions.noteReply",defaultMessage:"reply to {name}",description:"Reply to button label"},sendDirectMessage:{id:"actions.sendDirectMessage",defaultMessage:"send",description:"Send direct message action, button label"},save:{id:"actions.save",defaultMessage:"save",description:"Save changes action label"},previous:{id:"actions.previous",defaultMessage:"Previous",description:"Go to previous step action label"},next:{id:"actions.next",defaultMessage:"Next",description:"Go to next step action label"},finish:{id:"actions.finish",defaultMessage:"Finish",description:"Finish the wizard action label"},editProfile:{id:"actions.editProfile",defaultMessage:"edit profile",description:"Edit profile action label"},reportUserConfirm:{id:"actions.reportUserConfirm",defaultMessage:"Report user {name}?",description:"Label for report user confirmation"},muteUserConfirm:{id:"actions.muteUserConfirm",defaultMessage:"Add {name} to your mute list?",description:"Label for mute user confirmation"},unmute:{id:"actions.unmute",defaultMessage:"unmute",description:"Label un-mute button"},addToAllowlist:{id:"actions.addToAllowlist",defaultMessage:"Add to allowlist",description:"Label add-to-allowlist button"},addRelay:{id:"actions.addRelay",defaultMessage:"add",description:"Label for add relay action"},removeRelay:{id:"actions.removeRelay",defaultMessage:"remove",description:"Label for remove relay action"},confirmRemoveRelay:{id:"actions.confirmRemoveRelay",defaultMessage:"Remove <b>{url}</b> from your relay list? This will disconnect you from the relay.",description:"Label for remove relay confirmation"},restoreCachingService:{id:"actions.restoreCachingService",defaultMessage:"Restore default caching service",description:"Label for restore default caching service"},profileContext:{copyPubkey:{id:"actions.profileContext.copyPubkey",defaultMessage:"Copy user public key",description:"Label for copy user's pubkey from profile context menu"},copyLink:{id:"actions.profileContext.copyLink",defaultMessage:"Copy user link",description:"Label for copy user's link from profile context menu"},addFeed:{id:"actions.profileContext.addFeed",defaultMessage:"Add user feed",description:"Label for adding user's feed to home, from profile context menu"},removeFeed:{id:"actions.profileContext.removeFeed",defaultMessage:"Remove user feed",description:"Label for removing user's feed from home, from profile context menu"},muteUser:{id:"actions.profileContext.muteUser",defaultMessage:"Mute user",description:"Label for muting user from profile context menu"},unmuteUser:{id:"actions.profileContext.unmuteUser",defaultMessage:"Unmute user",description:"Label for unmuting user from profile context menu"},followMute:{id:"actions.profileContext.followMute",defaultMessage:"Follow user's mute list",description:"Label for following user's mute list"},unfollowMute:{id:"actions.profileContext.unfollowMute",defaultMessage:"Unfollow user's mute list",description:"Label for unfollowing user's mute list"},reportUser:{id:"actions.profileContext.reportUser",defaultMessage:"Report user",description:"Label for reporting user from profile context menu"}},noteContext:{reactions:{id:"actions.noteContext.reactions",defaultMessage:"Reactions",description:"Label for note reactions from context menu"},zap:{id:"actions.noteContext.zapNote",defaultMessage:"Custom Zap",description:"Label for note zap from context menu"},copyLink:{id:"actions.noteContext.copyLink",defaultMessage:"Copy note link",description:"Label for copy note link from context menu"},copyText:{id:"actions.noteContext.copytext",defaultMessage:"Copy note text",description:"Label for copy note text from context menu"},copyId:{id:"actions.noteContext.copyId",defaultMessage:"Copy note ID",description:"Label for copy note ID from context menu"},copyRaw:{id:"actions.noteContext.copyRaw",defaultMessage:"Copy raw data",description:"Label for copy note raw data from context menu"},copyPubkey:{id:"actions.noteContext.copyPubkey",defaultMessage:"Copy user public key",description:"Label for copy note author's pubkey from context menu"},breadcast:{id:"actions.noteContext.breadcast",defaultMessage:"Broadcast note",description:"Label for note broadcast from context menu"},muteAuthor:{id:"actions.noteContext.muteAuthor",defaultMessage:"Mute user",description:"Label for muting user from context menu"},unmuteAuthor:{id:"actions.noteContext.unmuteAuthor",defaultMessage:"Unmute user",description:"Label for unmuting user from context menu"},reportAuthor:{id:"actions.noteContext.reportAuthor",defaultMessage:"Report user",description:"Label for reporting user from context menu"},repostNote:{id:"actions.noteContext.repostNote",defaultMessage:"Repost note",description:"Label for reposting note from context menu"},quoteNote:{id:"actions.noteContext.quoteNote",defaultMessage:"Quote note",description:"Label for quoting note from context menu"}},zap:{id:"actions.zap",defaultMessage:"Zap",description:"Label for zap"},reactions:{id:"actions.reactions",defaultMessage:"Reactions ({count})",description:"Label for reactions"}},P8={id:"branding",defaultMessage:"Primal",description:"Brand name"},O8={title:{id:"downloads.title",defaultMessage:"Downloads",description:"Title of the downloads page"},build:{id:"downloads.build",defaultMessage:"Build",description:"Build label"},released:{id:"downloads.released",defaultMessage:"released",description:"Released label"},getApk:{id:"downloads.getApk",defaultMessage:"Get APK instead",description:"APK download label"},callToActionIOSTitle:{id:"downloads.ctaIOSTitle",defaultMessage:"Primal iOS",description:"Title for the iOS downloads' page call-to-action"},callToActionIOSDescription:{id:"downloads.ctaAndroidDescription",defaultMessage:"The app features easy onboarding, fast & snappy UI, ability to explore Nostr, and create & manage custom feeds",description:"Description for the iOS downloads' page call-to-action"},callToActionAndroidTitle:{id:"downloads.ctaAndroidTitle",defaultMessage:"Primal Android",description:"Title for the Android downloads' page call-to-action"},callToActionAndroidDescription:{id:"downloads.ctaAndroidDescription",defaultMessage:"The app features easy onboarding, fast & snappy UI, ability to explore Nostr, and create & manage custom feeds",description:"Description for the Android downloads' page call-to-action"},callToActionQRTitle:{id:"downloads.ctaQRTitle",defaultMessage:"Scan to install app",description:"Title for the QR code downloads' page call-to-action"},appStoreCaption:{id:"downloads.appStoreCaption",defaultMessage:"TestFlight Available Now",description:"AppStore promo caption"},playStoreCaption:{id:"downloads.playStoreCaption",defaultMessage:"Coming soon to Android",description:"PlayStore promo caption"},apkDownload:{id:"downloads.apkDownload",defaultMessage:"Alpha Build Available Now",description:"APK download caption"},links:{title:{id:"downloads.sidebarTitle",defaultMessage:"Source code",description:"Daownload sidebar links title"},webApp:{id:"downloads.webAppLink",defaultMessage:"Primal Web App",description:"Label for the link to the web app"},iosApp:{id:"downloads.iosAppLink",defaultMessage:"Primal iOS App",description:"Label for the link to the iOS app"},andApp:{id:"downloads.andAppLink",defaultMessage:"Primal Android App",description:"Label for the link to the Android app"},cachingService:{id:"downloads.cachingService",defaultMessage:"Primal Caching Service",description:"Label for the link to the caching service"},primalServer:{id:"downloads.primalServer",defaultMessage:"Primal Server",description:"Label for the link to the primal server"}}},C8={title:{id:"confirm.title",defaultMessage:"Are you sure?",description:"Default title of the confirmation dialog"},confirm:{id:"confirm.yes",defaultMessage:"Yes",description:"Default label for positive response to the confirmation dialog"},abort:{id:"confirm.no",defaultMessage:"No",description:"Default label for negative response to the confirmation dialog"},cancel:{id:"confirm.cancel",defaultMessage:"Cancel",description:"Default label for cancel response to the confirmation dialog"}},B8={id:"explore.sidebar.caption",defaultMessage:"trending users",description:"Caption for the explore page sidebar showing a list of trending users"},F8={genericCaption:{id:"explore.genericCaption",defaultMessage:"explore",description:"Generic caption for the explore page"},pageTitle:{id:"explore.pageTitle",defaultMessage:"Explore",description:"Title of the explore page"},title:{id:"explore.title",defaultMessage:"{timeframe}: {scope}",description:"Title of the explore page"},statDisplay:{users:{id:"explore.stats.users",defaultMessage:"Users",description:"Label for number of users stats"},pubkeys:{id:"explore.stats.pubkeys",defaultMessage:"Public Keys",description:"Label for number of pubkeys stats"},zaps:{id:"explore.stats.zaps",defaultMessage:"Zaps",description:"Label for number of zaps stats"},btcZapped:{id:"explore.stats.btcZapped",defaultMessage:"BTC Zapped",description:"Label for number of zapped bitcoins stats"},pubnotes:{id:"explore.stats.pubnotes",defaultMessage:"Public Notes",description:"Label for number of public notes stats"},reposts:{id:"explore.stats.reposts",defaultMessage:"Reposts",description:"Label for number of repost stats"},reactions:{id:"explore.stats.reactions",defaultMessage:"Reactions",description:"Label for number of reactions stats"},any:{id:"explore.stats.any",defaultMessage:"All Events",description:"Label for number of all stats"}}},YT={id:"feedProfile",defaultMessage:"{name}'s feed",description:"Generic name for a feed created from a profile"},QT={id:"feedProfileDesription",defaultMessage:"Notes feed of {name}",description:"Generic description for a feed created from a profile"},U8={id:"feed.newPosts",defaultMessage:`{number, plural,
    =0 {}
    one {# New Note}
    =99 {99+ New Notes}
    other {# New Notes}}`,description:"Label for a button to load new notes"},D8={dropzone:{id:"feedback.dropzone",defaultMessage:"drop file to upload",description:"Label accompanying the draging file"},uploading:{id:"feedback.uploading",defaultMessage:"uploading...",description:"Label accompanying the uploading spinner"}},$8={title:{id:"messages.title",defaultMessage:"Messages",description:"Title of messages page"},follows:{id:"messages.follows",defaultMessage:"follows",description:"DM relation selection label for follows"},other:{id:"messages.other",defaultMessage:"other",description:"DM relation selection label for other"},markAsRead:{id:"messages.markAsRead",defaultMessage:"Mark All Read",description:"DM mark as read label"}},H8={home:{id:"navbar.home",defaultMessage:"Home",description:"Label for the nav bar item link to Home page"},reads:{id:"navbar.reads",defaultMessage:"Reads",description:"Label for the nav bar item link to Reads page"},explore:{id:"navbar.explore",defaultMessage:"Explore",description:"Label for the nav bar item link to Explore page"},messages:{id:"navbar.messages",defaultMessage:"Messages",description:"Label for the nav bar item link to Messages page"},bookmarks:{id:"navbar.bookmarks",defaultMessage:"Bookmarks",description:"Label for the nav bar item link to Bookmarks page"},notifications:{id:"navbar.notifications",defaultMessage:"Notifications",description:"Label for the nav bar item link to Notifications page"},downloads:{id:"navbar.downloads",defaultMessage:"Downloads",description:"Label for the nav bar item link to Downloads page"},premium:{id:"navbar.premium",defaultMessage:"Premium",description:"Label for the nav bar item link to Premium page"},settings:{id:"navbar.settings",defaultMessage:"Settings",description:"Label for the nav bar item link to Settings page"},help:{id:"navbar.help",defaultMessage:"Help",description:"Label for the nav bar item link to Help page"}},z8={newPreview:{id:"note.newPreview",defaultMessage:"Note preview",description:"Caption for preview when creating a new note"},mentionIndication:{id:"note.mentionIndication",defaultMessage:"[note by {name}]",description:"Label indicating that a note has been metioned in the small note display"},reposted:{id:"note.reposted",defaultMessage:"Reposted",description:"Label indicating that the note is a repost"},repostedOthers:{id:"note.repostedOthers",defaultMessage:`{number, plural,
      =0 {}
      one { and # other}
      other { and # others}}`,description:"Label indicating that the note is reposted more than once"},reply:{id:"note.reply",defaultMessage:"replying to",description:"Label indicating that the note is a reply"},saveNoteDraft:{title:{id:"note.saveNoteDraft.title",defaultMessage:"Save Note Draft?",description:"Title of the confirmation when the note is canceled"},description:{id:"note.saveNoteDraft.description",defaultMessage:"Do you wish to save this note to continue editing it later?",description:"Description of the confirmation when the note is canceled"},optionYes:{id:"note.saveNoteDraft.yes",defaultMessage:"Save",description:"Confirm saving not as draft"},optionNo:{id:"note.saveNoteDraft.no",defaultMessage:"Discard",description:"Decline saving not as draft"},optionCancel:{id:"note.saveNoteDraft.cancel",defaultMessage:"Continue Editing",description:"Continue editing the note"}}},By={[Pt.NEW_USER_FOLLOWED_YOU]:"followed you",[Pt.USER_UNFOLLOWED_YOU]:"unfollowed you",[Pt.YOUR_POST_WAS_ZAPPED]:"zapped your note",[Pt.YOUR_POST_WAS_LIKED]:"liked your note",[Pt.YOUR_POST_WAS_REPOSTED]:"reposted your note",[Pt.YOUR_POST_WAS_REPLIED_TO]:"replied to your note",[Pt.YOU_WERE_MENTIONED_IN_POST]:"mentioned you in a note",[Pt.YOUR_POST_WAS_MENTIONED_IN_POST]:"mentioned your note",[Pt.POST_YOU_WERE_MENTIONED_IN_WAS_ZAPPED]:"zapped a note you were mentioned in",[Pt.POST_YOU_WERE_MENTIONED_IN_WAS_LIKED]:"liked a note you were mentioned in",[Pt.POST_YOU_WERE_MENTIONED_IN_WAS_REPOSTED]:"reposted a note you were mentioned in",[Pt.POST_YOU_WERE_MENTIONED_IN_WAS_REPLIED_TO]:"replied to a note you were mentioned in",[Pt.POST_YOUR_POST_WAS_MENTIONED_IN_WAS_ZAPPED]:"zapped a note your note was mentioned in",[Pt.POST_YOUR_POST_WAS_MENTIONED_IN_WAS_LIKED]:"liked a note your note was mentioned in",[Pt.POST_YOUR_POST_WAS_MENTIONED_IN_WAS_REPOSTED]:"reposted a note your note was mentioned in",[Pt.POST_YOUR_POST_WAS_MENTIONED_IN_WAS_REPLIED_TO]:"replied to a note your note was mentioned in"},Z8=Object.values(Pt).reduce((e,t)=>({...e,[t]:{id:`notifications.new.${t}`,defaultMessage:`{number, plural,
      =0 {}
      one {and # other}
      other {and # others}}
      ${By[t]}`,description:`New Notifiaction label for notifications of type ${t}`}}),{}),W8=Object.values(Pt).reduce((e,t)=>({...e,[t]:{id:`notifications.old.${t}`,defaultMessage:`${By[t]}`,description:`Old Notifiaction label for notifications of type ${t}`}}),{}),j8={activities:{id:"notifications.sidebar.activities",defaultMessage:"Reactions",description:"Sidebar activities stats caption on the notification page"},heading:{id:"notificationsSidebar.heading",defaultMessage:"Summary",description:"Sidebar caption on the notification page"},empty:{id:"notificationsSidebar.empty",defaultMessage:"No new notifications",description:"Sidebar caption indicating no new notifications"},followers:{id:"notificationsSidebar.followers",defaultMessage:"Followers",description:"Sidebar follower stats caption on the notification page"},gainedFollowers:{id:"notificationsSidebar.gainedFollowers",defaultMessage:`new {number, plural,
      =0 {}
      one {follower}
      other {followers}}`,description:"Sidebar new follower stats description on the notification page"},lostFollowers:{id:"notificationsSidebar.lostFollowers",defaultMessage:`lost {number, plural,
      =0 {}
      one {follower}
      other {followers}}`,description:"Sidebar lost follwers stats description on the notification page"},likes:{id:"notifications.sidebar.likes",defaultMessage:`{number, plural,
      =0 {}
      one {like}
      other {likes}}`,description:"Sidebar likes stats caption on the notification page"},mentions:{id:"notifications.sidebar.mentions",defaultMessage:"Mentions",description:"Sidebar mentions stats caption on the notification page"},mentionsYou:{id:"notifications.sidebar.mentionsYou",defaultMessage:`{number, plural,
      =0 {}
      one {mention}
      other {mentions}} of you`,description:"Sidebar mentions you stats description on the notification page"},mentionsYourPost:{id:"notifications.sidebar.mentionsYourPost",defaultMessage:`{number, plural,
      =0 {}
      one {mention of your note}
      other {mentions of your notes}}`,description:"Sidebar mentions your note stats description on the notification page"},replies:{id:"notifications.sidebar.replies",defaultMessage:`{number, plural,
      =0 {}
      one {reply}
      other {replies}}`,description:"Sidebar replies stats caption on the notification page"},reposts:{id:"notifications.sidebar.reposts",defaultMessage:`{number, plural,
      =0 {}
      one {repost}
      other {reposts}}`,description:"Sidebar reposts stats caption on the notification page"},other:{id:"notifications.sidebar.other",defaultMessage:"Other",description:"Sidebar other stats caption on the notification page"},zaps:{id:"notificationsSidebar.zaps",defaultMessage:"Zaps",description:"Sidebar zaps stats caption on the notification page"},zapNumber:{id:"notificationsSidebar.zapNumber",defaultMessage:`{number, plural,
      =0 {}
      one {zap}
      other {zaps}}`,description:"Sidebar zaps stats description on the notification page"},statsNumber:{id:"notificationsSidebar.statsNumber",defaultMessage:`{number, plural,
      =0 {}
      one {sat}
      other {sats}}`,description:"Sidebar sats stats description on the notification page"}},G8={title:{id:"pages.notifications.title",defaultMessage:"Notifications",description:"Title of the notifications page"},newNotifs:{id:"notification.newNotifs",defaultMessage:`{number, plural,
      =0 {}
      one {# new notification}
      =100 {99+ new notifications}
      other {# new notifications}}`,description:"Label for a button to load new notifications"},all:{id:"pages.notifications.all",defaultMessage:"All",description:"Title of the All notifications tab"},zaps:{id:"pages.notifications.zaps",defaultMessage:"Zaps",description:"Title of the Zaps notifications tab"},replies:{id:"pages.notifications.replies",defaultMessage:"Replies",description:"Title of the Replies notifications tab"},mentions:{id:"pages.notifications.mentions",defaultMessage:"Mentions",description:"Title of the Mentions notifications tab"},reposts:{id:"pages.notifications.reposts",defaultMessage:"Reposts",description:"Title of the Reposts notifications tab"}},q8={missingNote:{firstLine:{id:"placeholders.missingNote.firstLine",defaultMessage:"We can't seem to find this note.",description:"Placeholder when the note is missing"},secondLine:{id:"placeholders.missingNote.secondLine",defaultMessage:"It may have been deleted by the author.",description:"Placeholder when the note is missing"}},noReactionDetails:{id:"placeholders.noReactionDetails",defaultMessage:"No details for rections found",description:"Placeholder when there are no reaction details in reactions modal"},noLikeDetails:{id:"placeholders.noLikeDetails",defaultMessage:"No details for likes found",description:"Placeholder when there are no like details in reactions modal"},noZapDetails:{id:"placeholders.noZapDetails",defaultMessage:"No details for zaps found",description:"Placeholder when there are no zap details in reactions modal"},noRepostDetails:{id:"placeholders.noRepostDetails",defaultMessage:"No details for reposts found",description:"Placeholder when there are no repost details in reactions modal"},noQuoteDetails:{id:"placeholders.noQuoteDetails",defaultMessage:"No details for quotes found",description:"Placeholder when there are no quote details in reactions modal"},addComment:{id:"placeholders.addComment",defaultMessage:"Add a comment...",description:"Placeholder for adding a comment"},searchByNpub:{id:"placeholders.searchByNpub",defaultMessage:"search by npub...",description:"Placeholder for searching by npub"},addNpub:{id:"placeholders.addNpub",defaultMessage:"add npub...",description:"Placeholder for adding npub"},mustHaveOneCachingService:{id:"placeholders.mustHaveOneCachingService",defaultMessage:"At this time, client needs to have at least one caching service to operate. In the future we will add the ability to use Primal without a caching service, but this is not yet supported.",description:"Description when trying to remove the last caching service from the pool"},cachingPoolHelp:{id:"placeholders.cachingPoolHelp",defaultMessage:"Client will randomly connect to one of the caching services in this pool. This helps with fail-over if some of the services are down. You can add or remove services. If you wish to always connect to exatly one caching service, you should leave only one entry in this pool.",description:"text for caching pool help bubble"},resetRelaysHelp:{id:"placeholders.resetRelaysHelp",defaultMessage:"This action will disconnect you from any relays you are currently connected to and connect you to a set of recomended relays.",description:"text for caching pool help bubble"},comingSoon:{id:"placeholders.comingSoon",defaultMessage:"Coming soon. Seriously. Help is on the way. ;)",description:"Placholder text for missing content"},endOfFeed:{id:"placeholders.endOfFeed",defaultMessage:"Your reached the end. You are a quick reader",description:"Message displayed when user reaches the end of the feed"},guestUserGreeting:{id:"placeholders.guestUserGreeting",defaultMessage:"Welcome to nostr!",description:"Header placeholder for guest user"},noteCallToAction:{id:"placeholders.callToAction.note",defaultMessage:"Say something on nostr...",description:"Placeholder for new note call-to-action"},pageWIPTitle:{id:"pages.wip.title",defaultMessage:"{title}",description:"Title of page under construction"},welcomeMessage:{id:"placeholders.welcomeMessage",defaultMessage:"Welcome to nostr!",description:"Default welcome message"},findUser:{id:"placeholders.findUser",defaultMessage:"find user",description:"Find user input placeholder"},findUsers:{id:"placeholders.findUsers",defaultMessage:"find users",description:"Find users input placeholder"},search:{id:"placeholders.search",defaultMessage:"Search...",description:"Search input placeholder"},selectFeed:{id:"placeholders.selectFeed",defaultMessage:"Select feed",description:"Placeholder for feed selection"},pageNotFound:{id:"placeholders.pageNotFound",defaultMessage:"Page not found",description:"Placholder text for missing page"},relayUrl:{id:"placeholders.relayUrl",defaultMessage:"wss://relay.url",description:"Placholder relay url input"},cachingServiceUrl:{id:"placeholders.cachingServiceUrl",defaultMessage:"wss://cachingservice.url",description:"Placholder relay url input"}},V8={sidebarCaptionReads:{id:"profile.sidebar.captionReads",defaultMessage:"Latest Reads",description:"Caption for the profile page sidebar showing a list of latest reads by the profile"},sidebarCaptionNotes:{id:"profile.sidebar.captionNotes",defaultMessage:"Popular Notes",description:"Caption for the profile page sidebar showing a list of trending notes by the profile"},sidebarNoNotes:{id:"profile.sidebar.noNotes",defaultMessage:"No trending notes",description:"Placeholde for profile sidebar when the profile is missing trending notes"},title:{id:"profile.title",defaultMessage:"{name} - Nostr Profile",description:"Page title for Profile page"},followsYou:{id:"profile.followsYou",defaultMessage:"Follows you",description:"Label indicating that a profile is following your profile"},jointDate:{id:"profile.joinDate",defaultMessage:"Joined Nostr on {date}",description:"Label indicating when the profile joined Nostr (oldest event)"},stats:{gallery:{id:"profile.gallery",defaultMessage:"Media",description:"Label for gallery profile stat"},follow:{id:"profile.followStats",defaultMessage:"Following",description:"Label for following profile stat"},followers:{id:"profile.stats.followers",defaultMessage:"Followers",description:"Label for followers profile stat"},zaps:{id:"profile.stats.zaps",defaultMessage:"Zaps",description:"Label for zaps profile stat"},sats:{id:"profile.stats.sats",defaultMessage:"Sats",description:"Label for sats profile stat"},totalSats:{id:"profile.stats.totalSats",defaultMessage:"Total",description:"Label for total sats profile stat"},articles:{id:"profile.stats.articles",defaultMessage:"Reads",description:"Label for reads profile stat"},notes:{id:"profile.stats.notes",defaultMessage:"Notes",description:"Label for notes profile stat"},replies:{id:"profile.stats.replies",defaultMessage:"Replies",description:"Label for replies profile stat"},relays:{id:"profile.stats.relays",defaultMessage:"Relays",description:"Label for sats profile relays"}},isMuted:{id:"profile.isMuted",defaultMessage:"{name} is muted",description:"Label indicating that the profile is muted"},isFiltered:{id:"profile.isFiltered",defaultMessage:"This account is hidden per your filter settings.",description:"Label indicating that the profile is filtered"},noNotes:{id:"profile.noNotes",defaultMessage:"{name} hasn't posted any notes",description:"Label indicating that the profile has no notes"},noArticles:{id:"profile.noArticles",defaultMessage:"{name} hasn't published any reads",description:"Label indicating that the profile has no reads"},noReplies:{id:"profile.noReplies",defaultMessage:"{name} hasn't posted any replies",description:"Label indicating that the profile has no replies"},noFollowers:{id:"profile.noFollowers",defaultMessage:"{name} has no followers",description:"Label indicating that the profile has no followers"},noFollows:{id:"profile.noFollows",defaultMessage:"No one is following {name}",description:"Label indicating that the profile has no followers"},noZaps:{id:"profile.noZaps",defaultMessage:"{name} zapped no one",description:"Label indicating that the profile has no zaps"},noRelays:{id:"profile.noRelays",defaultMessage:"{name} is on no relays",description:"Label indicating that the profile has no relays"},qrModal:{pubkey:{id:"profile.qrModal.pubkey",defaultMessage:"Public key",description:"Public key tab title in profile qr code modal"},ln:{id:"profile.qrModal.ln",defaultMessage:"Lightning address",description:"Lightning address tab title in profile qr code modal"}}},K8={followers:{id:"search.followers",defaultMessage:"followers",description:"Followers label for user search results"},invalid:{id:"search.invalid",defaultMessage:"Please enter search term.",description:"Alert letting the user know that the search term is empty"},emptyQueryResult:{id:"search.emptyQueryResult",defaultMessage:"type to",description:"Label shown is search resuls when no term is provided"},searchNostr:{id:"search.searchNostr",defaultMessage:"Search nostr",description:"Label explaining full search action"},sidebarCaption:{id:"search.sidebarCaption",defaultMessage:"Users found",description:"Caption for the search page sidebar showing a list of users"},feedLabel:{id:"search.feedLabel",defaultMessage:"Search: {query}",description:"Label for a search results feed"},title:{id:"search.title",defaultMessage:'search for "{query}"',description:"Title of the Search page"},noResults:{id:"search.noResults",defaultMessage:"No results found",description:"Message shown when no search results were found"}},J8={index:{title:{id:"settings.index.title",defaultMessage:"Settings",description:"Title of the settings page"}},account:{title:{id:"settings.account.title",defaultMessage:"Account",description:"Title of the account settings sub-page"},description:{id:"settings.account.description",defaultMessage:"You can improve your account security by installing a Nostr browser extension, like {link}. By storing your Nostr private key within a browser extension, you will be able to securely sign into any Nostr web app, including Primal.",description:"Warning about account security"},pubkey:{id:"settings.account.pubkey",defaultMessage:"Your Public Key",description:"Your public key section caption"},pubkeyDesc:{id:"settings.account.pubkeyDesc",defaultMessage:"Anyone on Nostr can find you via your public key. Feel free to share anywhere.",description:"Label describing the public key"},privkey:{id:"settings.account.privkey",defaultMessage:"Your Private Key",description:"Your private key section caption"},privkeyDesc:{id:"settings.account.privkeyDesc",defaultMessage:"This key fully controls your Nostr account. Don’t share it with anyone. Only copy this key to store it securely or to login to another Nostr app.",description:"Label describing the private key"}},appearance:{title:{id:"settings.appearance.title",defaultMessage:"Appearance",description:"Title of the appearance settings sub-page"},caption:{id:"settings.appearance.caption",defaultMessage:"Select a theme",description:"Caption for theme selection"}},homeFeeds:{title:{id:"settings.homeFeeds.title",defaultMessage:"Home Feeds",description:"Title of the home feeds settings sub-page"},caption:{id:"settings.homeFeeds.caption",defaultMessage:"Edit and order your home page feeds",description:"Caption for home feed ordering"}},readsFeeds:{title:{id:"settings.readsFeeds.title",defaultMessage:"Reads Feeds",description:"Title of the reads feeds settings sub-page"},caption:{id:"settings.readsFeeds.caption",defaultMessage:"Edit and order your reads page feeds",description:"Caption for reads feed ordering"}},moderation:{title:{id:"settings.filters.title",defaultMessage:"Content Moderation",description:"Title of the content filtering settings sub-page"},description:{id:"settings.filters.description",defaultMessage:"Primal offers customizable content filtering services. In addition to your own mute list, you may subscribe to other users’ mute lists. Primal runs real time spam detection systems as well as Not-Safe-For-Work content, to which you may also subscribe.",description:"Description of the content filtering settings sub-page"},shortDescription:{id:"settings.filters.shortDescription",defaultMessage:"Subscribe to a user’s mute list by going to their profile page:",description:"Short Description of the content filtering settings sub-page"},applyFiltering:{id:"settings.filters.applyFiltering",defaultMessage:"Apply Content Filtering",description:"Caption for home feed ordering"},searchFilteredAccount:{id:"settings.filters.searchFilteredAccount",defaultMessage:"Search Filtered Accounts",description:"Caption for home feed ordering"},allowList:{id:"settings.filters.allowList",defaultMessage:"My Allowlist",description:"Caption for home feed ordering"},moderationItem:{id:"settings.contentModeration.item",defaultMessage:"{name}'s mute list",description:"Caption for my mute list algo"},searchForFiltered:{id:"settings.contentModeration.searchForFiltered",defaultMessage:"Search to find out if a user account is included in any of the filter lists:",description:"Description for search for filtered users"},allowListsDescription:{id:"settings.contentModeration.allowListsDescription",defaultMessage:"Add user accounts that should be excluded from filtering:",description:"Description for allow lists"},table:{mutelists:{id:"settings.contentModeration.table.mutelists",defaultMessage:"Mute Lists",description:"Caption for mutelists column on moderation settings page"},algos:{id:"settings.contentModeration.table.algos",defaultMessage:"Algorithms",description:"Caption for algorithms column on moderation settings page"},content:{id:"settings.contentModeration.table.content",defaultMessage:"Hide Content",description:"Caption for content column on moderation settings page"},trending:{id:"settings.contentModeration.table.trending",defaultMessage:"Don't Recommend",description:"Caption for trending column on moderation settings page"},trendingHelp:{id:"settings.contentModeration.table.trendingHelp",defaultMessage:"Content won't be recommended in trending and most-zapped feeds",description:"Help description for trending filter"},contentHelp:{id:"settings.contentModeration.table.contentHelp",defaultMessage:"Content will be hidden from all feeds, threads, and search results",description:"Help description for content filter"}},algos:{my:{id:"settings.contentModeration.algos.my",defaultMessage:"My mute list",description:"Caption for my mute list algo"},primal_spam:{id:"settings.contentModeration.algos.spam",defaultMessage:"Primal spam filter",description:"Caption for spam algo"},primal_nsfw:{id:"settings.contentModeration.algos.nsfw",defaultMessage:"Primal NSFW filter",description:"Caption for NSFW algo"}}},muted:{title:{id:"settings.muted.title",defaultMessage:"Muted Accounts",description:"Title of the muted accounts settings sub-page"},empty:{id:"settings.muted.empty",defaultMessage:"No muted users",description:"Caption indicating that there are no muted users"},emptyOther:{id:"settings.muted.emptyOther",defaultMessage:"This user didn't mute anyone or they use a non-standard mute list",description:"Caption indicating that there are no muted users on someone else's list"}},network:{title:{id:"settings.network.title",defaultMessage:"Network",description:"Title of the network settings sub-page"},relays:{id:"settings.network.relays",defaultMessage:"Relays",description:"Title of the relays section of the network settings sub-page"},myRelays:{id:"settings.network.myRelays",defaultMessage:"My relays",description:"Title of the my relays section of the network settings sub-page"},noMyRelays:{id:"settings.networks.noMyRelays",defaultMessage:"Your Nostr account doesn't have any relays specified, so we connected you to a default set of relays. To configure your desired set of relays, please select them from the list below.",description:"Caption informing the user that he has no relays configured"},recomended:{id:"settings.network.recomended",defaultMessage:"Recomended Relays",description:"Title of the recomended relays section of the network settings sub-page"},customRelay:{id:"settings.network.customRelay",defaultMessage:"Connect to relay",description:"Title of the custom relays section of the network settings sub-page"},cachingService:{id:"settings.network.cachingService",defaultMessage:"Caching Service",description:"Title of the caching service section of the network settings sub-page"},connectedCachingService:{id:"settings.network.connectedCachingService",defaultMessage:"Connected caching service",description:"Title of the caching service section of the network settings sub-page"},alternativeCachingService:{id:"settings.network.alternativeCachingService",defaultMessage:"Connect to a different caching service",description:"Title of the alternative caching service section of the Network settings sub-page"},proxyEvents:{id:"settings.filters.proxyEvents",defaultMessage:"Use Enhanced Privacy",description:"Caption for option to proy event publishing through Primal"},proxyDescription:{id:"settings.filters.proxyDescription",defaultMessage:"When enabled, your IP address will be visible to the caching service, but not to relays. Your content will be published to your specified relays using the caching service as a proxy. ",description:"Description of the proxy events settings sub-page"}},relays:{id:"settings.relays",defaultMessage:"Relays",description:"Title of the relays sections of the settings sidebar"},cashingService:{id:"settings.cashingService",defaultMessage:"Caching services",description:"Title of the caching service sections of the settings sidebar"},title:{id:"settings.title",defaultMessage:"Settings",description:"Title of the settings page"},theme:{id:"settings.sections.theme",defaultMessage:"Theme",description:"Title of the theme section on the settings page"},feeds:{id:"settings.sections.feeds",defaultMessage:"Home page feeds",description:"Title of the feeds section on the settings page"},feedsAddNew:{id:"settings.feedsAddNew",defaultMessage:"Add New Feed",description:"Label for the button for adding new feed to the feeds list"},feedsRestore:{id:"settings.feedsRestore",defaultMessage:"Restore Default Feeds",description:"Label for the button for restoring default feeds to the feeds list"},feedsRestoreConfirm:{id:"settings.feedsRestoreConfirm",defaultMessage:"Restoring default feeds will erase all your custom feed settings",description:"Label explaining the impact of restoring default feeds"},zapsRestoreConfirm:{id:"settings.zapsRestoreConfirm",defaultMessage:"This action will restore all your zap settings to their default values",description:"Label explaining the impact of restoring default zaps"},zapEmojiFilterTitle:{id:"settings.zapEmojiFilterTitle",defaultMessage:"Select an emoji",description:"Title for the select emoji modal"},zapEmojiFilterPlaceholder:{id:"settings.zapEmojiFilterPlaceholder",defaultMessage:"Search...",description:"Placeholder for the emoji modal filter"},feedLatest:{id:"feeds.feedLatest",defaultMessage:"Latest",description:"Label for the `latest;following` (active user's) feed"},feedLatestWithReplies:{id:"feeds.feedLatestWithReplies",defaultMessage:"Latest with Replies",description:"Label for the `latest;following` with `include_replies` flag (active user's) feed"},zaps:{id:"settings.sections.zaps",defaultMessage:"Zaps",description:"Title of the zaps section on the settings page"},notifications:{title:{id:"pages.settings.sections.notifications",defaultMessage:"Notifications",description:"Title of the notifications section on the settings page"},core:{id:"settings.sections.notifications.core",defaultMessage:"Core notifications:",description:"Title of the notification settings sub-section for core notifications"},yourMentions:{id:"settings.sections.notifications.yourMentions",defaultMessage:"A note you were mentioned in was:",description:"Title of the notification settings sub-section for notes you were mentioned in"},yourPostMentions:{id:"settings.sections.notifications.yourPostMentions",defaultMessage:"A note your note was mentioned in was:",description:"Title of the notification settings sub-section for notes your note was mentioned in"}},profile:{title:{id:"pages.settings.profile.title",defaultMessage:"Edit Profile",description:"Title of the edit profile page"},uploadAvatar:{id:"pages.settings.profile.uploadAvatar",defaultMessage:"Upload Avatar",description:"Label for avatar upload on edit profile page"},uploadBanner:{id:"pages.settings.profile.uploadBanner",defaultMessage:"Upload Banner",description:"Label for banner upload on edit profile page"},displayName:{label:{id:"pages.settings.profile.displayName.label",defaultMessage:"Display Name",description:"Label for display name input on edit profile page"},help:{id:"pages.settings.profile.displayName.help",defaultMessage:"Pick a longer display name (e. g. “Satoshi Nakamoto”)",description:"Help for displayName input on edit profile page"},placeholder:{id:"pages.settings.profile.displayName.placeholder",defaultMessage:"Enter display name",description:"Placeholder for display name input on edit profile page"}},required:{id:"pages.settings.profile.reqired",defaultMessage:"required",description:"Label indicating an input is required"},name:{label:{id:"pages.settings.profile.name.label",defaultMessage:"Username",description:"Label for name input on edit profile page"},help:{id:"pages.settings.profile.name.help",defaultMessage:"Pick a short user handle (e. g. “satoshi”)",description:"Help for name input on edit profile page"},placeholder:{id:"pages.settings.profile.name.placeholder",defaultMessage:"Enter username",description:"Placeholder for name input on edit profile page"},error:{id:"pages.settings.profile.name.error",defaultMessage:"Spaces and special characters are not allowed in the username",description:"Error label for name input on edit profile page"},formError:{id:"pages.settings.profile.name.formError",defaultMessage:"Username is not valid",description:"Error label for invalid form on edit profile page"}},website:{label:{id:"pages.settings.profile.website.label",defaultMessage:"Website",description:"Label for website input on edit profile page"},placeholder:{id:"pages.settings.profile.website.placeholder",defaultMessage:"https://www.mysite.com",description:"Placeholder for website input on edit profile page"}},about:{label:{id:"pages.settings.profile.about.label",defaultMessage:"About Me",description:"Label for about input on edit profile page"},placeholder:{id:"pages.settings.profile.about.placeholder",defaultMessage:"Say something about yourself",description:"Placeholder for about input on edit profile page"}},lud16:{label:{id:"pages.settings.profile.lud16.label",defaultMessage:"Bitcoin Lightning Address",description:"Label for lud16 input on edit profile page"},placeholder:{id:"pages.settings.profile.lud16.placeholder",defaultMessage:"Enter your LN address",description:"Placeholder for lud16 input on edit profile page"}},nip05:{label:{id:"pages.settings.profile.nip05.label",defaultMessage:"Verified Nostr Address (NIP-05)",description:"Label for nip-05 input on edit profile page"},placeholder:{id:"pages.settings.profile.nip05.placeholder",defaultMessage:"Enter your NIP-05 Verified Nostr ID",description:"Placeholder for nip-05 input on edit profile page"}},picture:{label:{id:"pages.settings.profile.picture.label",defaultMessage:"Avatar Image Url",description:"Label for avatar input on edit profile page"},placeholder:{id:"pages.settings.profile.picture.placeholder",defaultMessage:"Enter your avatar url",description:"Placeholder for avatar input on edit profile page"}},banner:{label:{id:"pages.settings.profile.banner.label",defaultMessage:"Banner Image Url",description:"Label for banner input on edit profile page"},placeholder:{id:"pages.settings.profile.banner.placeholder",defaultMessage:"Enter your banner url",description:"Placeholder for banner input on edit profile page"}}}},Y8={id:"toast.zapFail",defaultMessage:"We were unable to send this Zap",description:"Toast message indicating failed zap"},Q8={id:"toast.zapProfile",defaultMessage:"{name} zapped successfully",description:"Toast message indicating successful zap"},X8={sidebar:{id:"thread.sidebar",defaultMessage:"Replying to this Note",description:"Title of the Thread page sidebar"},sidebarMentions:{id:"thread.sidebarMentions",defaultMessage:"People in this Note",description:"Title of the Thread page sidebar"},pageTitle:{id:"thread.page.title",defaultMessage:"Note by {name}",description:"Title of the Thread page sidebar"}},eB={addFeedToHomeSuccess:{id:"toasts.addFeedToHome.success",defaultMessage:'"{name}" has been added to your home page',description:"Toast message confirming successfull adding of the feed to home to the list of available feeds"},removeFeedFromHomeSuccess:{id:"toasts.removeFeedToHome.success",defaultMessage:'"{name}" has been removed from your home page',description:"Toast message confirming successfull removal of the feed from home's list of available feeds"},fileTypeUpsupported:{id:"toast.unsupportedFileType",defaultMessage:"You can only upload images and videos. This file type is not supported.",description:"Feedback when user tries to upload an unsupported file type"},publishNoteSuccess:{id:"toast.publishNoteSuccess",defaultMessage:"Note posted successfully",description:"Toast message confirming successfull publication of the note"},publishNoteTimeout:{id:"toast.publishNoteTimeout",defaultMessage:"No relay confirmed reception of your note after 8 seconds",description:"Toast message indicating that no relay confirmed note reception"},publishNoteFail:{id:"toast.publishNoteFail",defaultMessage:"Failed to publish note",description:"Toast message indicating that note publishing has failed"},noRelays:{id:"toast.noRelays",defaultMessage:"You need to declare at least one relay to perform this action",description:"Toast message indicating user has no relays configured"},noRelaysConnected:{id:"toast.noRelaysConnected",defaultMessage:'"We are trying to connect to your relays. Please try again in a few moments.',description:"Toast message indicating user is not connected to aany relay"},noExtension:{id:"toast.noExtension",defaultMessage:"Nostr extension is required to send events",description:"Toast message indicating no extension was found"},noteNostrLinkCoppied:{id:"toast.noteNostrLinkCoppied",defaultMessage:"Note nostr link copied",description:"Confirmation message that the note's link has been copied"},notePrimalLinkCoppied:{id:"toast.notePrimalLinkCoppied",defaultMessage:"Note link copied",description:"Confirmation message that the note's link has been copied"},notePrimalTextCoppied:{id:"toast.notePrimalTextCoppied",defaultMessage:"Note text copied",description:"Confirmation message that the note's text has been copied"},noteIdCoppied:{id:"toast.noteIdCoppied",defaultMessage:"Note id copied",description:"Confirmation message that the note's id has been copied"},noteRawDataCoppied:{id:"toast.noteRawDataCoppied",defaultMessage:"Note raw data copied",description:"Confirmation message that the note's raw data has been copied"},noteAuthorNpubCoppied:{id:"toast.noteAuthorNpubCoppied",defaultMessage:"Note author npub copied",description:"Confirmation message that the note's author npub has been copied"},profileNpubCoppied:{id:"toast.noteAuthorNpubCoppied",defaultMessage:"User npub copied",description:"Confirmation message that the user's npub has been copied"},noteBroadcastSuccess:{id:"toast.noteBroadcastSuccess",defaultMessage:"Note has been broadcasted to your relays",description:"Confirmation message that the note has been broadcasted"},noteBroadcastFail:{id:"toast.noteBroadcastFail",defaultMessage:"We were unable to broadcast this note",description:"Failure message that the note has not been broadcasted"},repostSuccess:{id:"toast.repostSuccess",defaultMessage:"Reposted successfully",description:"Toast message indicating successfull repost"},repostFailed:{id:"toast.repostFailed",defaultMessage:"Failed to repost",description:"Toast message indicating failed repost"},noteAuthorReported:{id:"toast.noteAuthorReported",defaultMessage:"User {name} reported",description:"Toast message indicating successfull user report"},zapAsGuest:{id:"toast.zapAsGuest",defaultMessage:"You must be logged-in to perform a zap",description:"Toast message indicating user must be logged-in to perform a zap"},zapUnavailable:{id:"toast.zapUnavailable",defaultMessage:"Author of this note cannot be zapped",description:"Toast message indicating user cannot receieve a zap"},zapDVMUnavailable:{id:"toast.zapDVMUnavailable",defaultMessage:"Author of this feed cannot be zapped",description:"Toast message indicating user cannot receieve a zap"},updateProfileSuccess:{id:"toast.updateProfileSuccess",defaultMessage:"Profile updated successfully",description:"Toast message indicating that profile was successfully updated"},updateProfileFail:{id:"toast.updateProfileFail",defaultMessage:"Failed to update profile, please try again",description:"Toast message indicating that profile has failed to updated"}},tB={id:"zap.custom.option",defaultMessage:"Zap {user} ",description:"Caption for custom zap amount modal"},nB={id:"zap.custom.amount",defaultMessage:"Custom amount:",description:"Caption for custom zap amount input"},rB={invalidRelayUrl:{id:"placeholders.invalidRelayUrl",defaultMessage:"Invalid url",description:"Error text for invalid url"}},iB={preset:{id:"emoji.recent",defaultMessage:"Recently Used",description:"Recently used emoji group title"},face:{id:"emoji.face",defaultMessage:"Faces",description:"Faces emoji group title"}},sB={fail:{id:"upload.fail",defaultMessage:"Failed to upload file {file}",description:"Error feedback when upload fails"},fileTooBigRegular:{id:"upload.fileTooBigRegular",defaultMessage:"File too big. Upload limit is 100MB.",description:"Error feedback when file is too big for regular users"},fileTooBigPremium:{id:"upload.fileTooBigPremium",defaultMessage:"File too big. Upload limit is 1GB.",description:"Error feedback when file is too big for premiumUsers"}},oB={title:{id:"forgotPin.title",defaultMessage:"This action will erase you key",description:"Forgot pin modal title"},description:{id:"forgotPin.description",defaultMessage:"You will still be able to browse Nostr through Primal but you will not be able to take any actions (post notes, likes,...) until you re-login with your private key. Are you sure you wish to continue?",description:"Explanation of what happens when pin is erased"},confirm:{id:"forgotPin.confirm",defaultMessage:"Yes, continue",description:"Confirm forgot pin action"},abort:{id:"forgotPin.abort",defaultMessage:"Cancel",description:"Abort forgot pin action"}},aB={title:{id:"followWarning.title",defaultMessage:"This action may result in an error",description:"Follow error modal title"},description:{id:"followWarning.description",defaultMessage:"If you continue, you will end up following just one nostr account. Are you sure you want to continue?",description:"Explanation of what happens when follow error occurs"},confirm:{id:"followWarning.confirm",defaultMessage:"Yes, continue",description:"Confirm forgot pin action"},abort:{id:"followWarning.abort",defaultMessage:"Abort",description:"Abort forgot pin action"}},cB={pageTitle:{id:"reads.pageTitle",defaultMessage:"Reads",description:"Reads page title"}},lB={pageTitle:{id:"bookmarks.pageTitle",defaultMessage:"Bookmarks",description:"Bookmarks page title"},noBookmarks:{id:"bookmarks.noBookmarks",defaultMessage:"You don't have any bookmarks",description:"No bookmarks caption"},confirm:{title:{id:"bookmarks.confirm.title",defaultMessage:"Saving First Bookmark",description:"Follow error modal title"},description:{id:"bookmarks.confirm.description",defaultMessage:"You are about to save your first public bookmark. These bookmarks can be seen by other nostr users. Do you wish to continue?",description:"Explanation of what happens when bookmark error occurs"},confirm:{id:"bookmarks.confirm.confirm",defaultMessage:"Save Bookmark",description:"Confirm forgot pin action"},abort:{id:"bookmarks.confirm.abort",defaultMessage:"Cancel",description:"Abort forgot pin action"},titleZero:{id:"bookmarks.confirm.title",defaultMessage:"Removing Last Bookmark",description:"Follow error modal title"},descriptionZero:{id:"bookmarks.confirm.description",defaultMessage:"You are about to remove your last public bookmark. Do you wish to continue?",description:"Explanation of what happens when bookmark error occurs"},confirmZero:{id:"bookmarks.confirm.confirm",defaultMessage:"Remove Bookmark",description:"Confirm forgot pin action"},abortZero:{id:"bookmarks.confirm.abort",defaultMessage:"Cancel",description:"Abort forgot pin action"}}},uB={pay:{id:"lnInvoice.pay",defaultMessage:"Pay",description:"Pay invoice action"},title:{id:"lnInvoice.title",defaultMessage:"Lightning Invoice",description:"Lightning Invoice title"},expired:{id:"lnInvoice.expired",defaultMessage:"Expired: {date} ago",description:"Expired time"},expires:{id:"lnInvoice.expires",defaultMessage:"Expires: in {date}",description:"Expires time"},confirm:{title:{id:"lnInvoice.confirm.title",defaultMessage:"Are you sure?",description:"Lightning invoice pay confirmation"},description:{id:"lnInvoice.confirm.description",defaultMessage:"Pay {amount}",description:"Lightning Invoice confirm description"},confirmLabel:{id:"lnInvoice.confirm.confirmLabel",defaultMessage:"Yes, pay",description:"Lightning Invoice confirm button label"},abortLabel:{id:"lnInvoice.confirm.abortLabel",defaultMessage:"Cancel",description:"Lightning Invoice confirm button label"}}},fB={redeem:{id:"cashuInvoice.redeem",defaultMessage:"Reedem",description:"Reedem ecash action"},pending:{id:"cashuInvoice.pending",defaultMessage:"Pending",description:"Pending ecash"},spent:{id:"cashuInvoice.spent",defaultMessage:"Spent",description:"Spent ecash"},title:{id:"cashuInvoice.title",defaultMessage:"Cashu Ecash",description:"Cashu Ecash title"},mint:{id:"cashuInvoice.mint",defaultMessage:"Mint: {url}",description:"Mint url"},confirm:{title:{id:"cashuInvoice.confirm.title",defaultMessage:"Are you sure?",description:"Cashu invoice pay confirmation"},description:{id:"cashuInvoice.confirm.description",defaultMessage:"Redeem {amount}",description:"Cashu Invoice confirm description"},confirmLabel:{id:"cashuInvoice.confirm.confirmLabel",defaultMessage:"Yes, redeem",description:"Cashu Invoice confirm button label"},abortLabel:{id:"cashuInvoice.confirm.abortLabel",defaultMessage:"Cancel",description:"Cashu Invoice confirm button label"}}},dB={tabs:{likes:{id:"reactionsModal.tabs.likes",defaultMessage:"Likes ({count})",description:"Likes tab label in reactions modal"},zaps:{id:"reactionsModal.tabs.zaps",defaultMessage:"Zaps ({count})",description:"Zaps tab label in reactions modal"},reposts:{id:"reactionsModal.tabs.reposts",defaultMessage:"Reposts ({count})",description:"Reposts tab label in reactions modal"},quotes:{id:"reactionsModal.tabs.quotes",defaultMessage:"Quotes ({count})",description:"Quotes tab label in reactions modal"}}},hB={labels:{foreverPremium:{id:"pages.premium.labes.foreverPremium",defaultMessage:"Forever Premium",description:"Forever Premium perk title"},foreverPremiumDescription:{id:"pages.premium.labes.foreverPremiumDescription",defaultMessage:"Premium subscription never expires for legends.",description:"Forever Premium perk description"},privateBetaBuilds:{id:"pages.premium.labes.privateBetaBuilds",defaultMessage:"Private Beta Builds",description:"Private Beta Builds perk title"},privateBetaBuildsDescription:{id:"pages.premium.labes.privateBetaBuildsDescription",defaultMessage:"Get access to new features before they are public.",description:"Private Beta perk description"},moreMediaSpace:{id:"pages.premium.labes.moreMediaSpace",defaultMessage:"Way More Storage",description:"More Media perk title"},moreMediaSpaceDescription:{id:"pages.premium.labes.moreMediaSpaceDescription",defaultMessage:"Get 100GB of Primal Premium media storage.",description:"More Media perk description"},customLegendProfile:{id:"pages.premium.labes.customLegendProfile",defaultMessage:"Legendary Custom Profile",description:"Legendary Custom Profile perk title"},customLegendDescription:{id:"pages.premium.labes.customLegendDescription",defaultMessage:"Option to pick the color of your verified badge and set the glow around your avatar",description:"Legendary Custom Profile perk description"},legendPageCaption:{id:"pages.premium.labes.legendPageCaption",defaultMessage:"Donate $1000 or more to gain:",description:"Legend page caption"},legendPageExplanation:{id:"pages.premium.labes.legendPageExplanation",defaultMessage:"The Legend tier was created to recognize users who have made a significant contribution to Primal.",description:"Legend page explanation"},supportFirstLine:{id:"pages.premium.labes.supportFirstLine",defaultMessage:"Are you enjoying Primal?",description:"Support label first line"},supportSecondLine:{id:"pages.premium.labes.supportSecondLine",defaultMessage:"if so, see how you can ",description:"Support label second line"},supportCaption:{id:"pages.premium.labes.supportCaption",defaultMessage:"Be a part of the Nostr revolution and help us continue building for this ecosystem.",description:"Support page caption"},leaveStars:{id:"pages.premium.labes.leaveStars",defaultMessage:"Leave a 5 Star Review",description:"Support page 5 star review caption"},leaveStarsDescription:{id:"pages.premium.labes.leaveStarsDescription",defaultMessage:"App Store reviews really help improve the visibility of Nostr apps at this early stage.",description:"Support page 5 star review description"},extendSubscription:{id:"pages.premium.labes.extendSubscription",defaultMessage:"Extend Subscription",description:"Support page extend subscription caption"},extendSubscriptionDescription:{id:"pages.premium.labes.extendSubscriptionDescription",defaultMessage:"Extend your existing subscription to gain peace of mind and help fund Primal.",description:"Support page extend subscription description"},becomeLegend:{id:"pages.premium.labes.becomeLegend",defaultMessage:"Become a Legend",description:"Support page become legend caption"},becomeLegendDescription:{id:"pages.premium.labes.becomeLegendDescription",defaultMessage:"Donate $1000 or more to gain permanent membership and exclusive perks!",description:"Support page become legend description"}},actions:{payNow:{id:"pages.premium.actions.payNow",defaultMessage:"Pay Now",description:"Action to pay now"},becomeLegend:{id:"pages.premium.actions.becomeLegend",defaultMessage:"Become a Legend Now",description:"Action that takes user to the Become a Legend page"},getIOS:{id:"pages.premium.actions.getIOS",defaultMessage:"Go to iOS App",description:"Action that takes user to the iOS APP page"},getAndroid:{id:"pages.premium.actions.getAndroid",defaultMessage:"Go to Android App",description:"Action that takes user to the Android App page"},support:{id:"pages.premium.actions.support",defaultMessage:"support us",description:"Action that takes user to the support page"},start:{id:"pages.premium.actions.start",defaultMessage:"Find Primal Name",description:"Find primal name action on the premium page"},back:{id:"pages.premium.actions.back",defaultMessage:"Back",description:"To the previous step on the premium page"},next:{id:"pages.premium.actions.next",defaultMessage:"Next",description:"To the next step on the premium page"},subscribe:{id:"pages.premium.actions.subscribe",defaultMessage:"Subscribe",description:"Subscribe action on the premium page"},done:{id:"pages.premium.actions.done",defaultMessage:"Done",description:"Done action on the premium page"},rename:{id:"pages.premium.actions.rename",defaultMessage:"Rename",description:"To the rename step on the premium page"},changeName:{id:"pages.premium.actions.changeName",defaultMessage:"Change Your Primal Name",description:"Change Primal name action on the premium page"},extendPlan:{id:"pages.premium.actions.extendPlan",defaultMessage:"Extend Your Subscription",description:"Extend your subscription action on the premium page"},renewPlan:{id:"pages.premium.actions.renewPlan",defaultMessage:"Renew Your Subscription",description:"Extend your subscription action on the premium page"}},title:{general:{id:"pages.premium.title",defaultMessage:"Primal Premium",description:"Title of the premium page"},name:{id:"pages.premium.name",defaultMessage:"Choose a primal name",description:"Title of the premium find name page"},subscription:{id:"pages.premium.subscription",defaultMessage:"Congrats!",description:"Title of the premium subscription page"},subscriptionSubtitle:{id:"pages.premium.subscriptionSubtitle",defaultMessage:"Your Primal Name is available",description:"Subtitle of the premium subscription page"},rename:{id:"pages.premium.rename",defaultMessage:"Change your primal name",description:"Title of the premium rename page"},support:{id:"pages.premium.support",defaultMessage:"Support Primal",description:"Title of the premium support page"},legend:{id:"pages.premium.legend",defaultMessage:"Become a Primal Legend",description:"Title of the premium legend page"},legendShort:{id:"pages.premium.legendShort",defaultMessage:"Primal Legend",description:"Short title of the premium legend page"},relay:{id:"pages.premium.relay",defaultMessage:"Primal Relay",description:"Title of the premium relay page"},media:{id:"pages.premium.media",defaultMessage:"Media Managment",description:"Title of the premium media managment page"},contacts:{id:"pages.premium.contacts",defaultMessage:"Recover Follow List",description:"Title of the premium recover contacts page"},content:{id:"pages.premium.content",defaultMessage:"Content Backup",description:"Title of the premium content backup page"},og:{id:"pages.premium.og",defaultMessage:"Primal OG",description:"Title of the Primal OG page"},ogLegend:{id:"pages.premium.ogLegend",defaultMessage:"Primal Legend",description:"Title of the Primal Legend page"}},subOptions:{prices:{m7:{id:"pages.premium.subOption.m7",defaultMessage:"$7/month",description:"$7 per month"},m6:{id:"pages.premium.subOption.m6",defaultMessage:"$6/month",description:"$6 per month"}},durations:{m3:{id:"pages.premium.duration.m3",defaultMessage:"3 months",description:"3 month duration"},m12:{id:"pages.premium.duration.m12",defaultMessage:"12 months",description:"12 month duration"}},success:{caption:{id:"pages.premium.success.caption",defaultMessage:"Success!",description:"Payment success caption"},m3:{id:"pages.premium.success.m3",defaultMessage:"You subscribed to Primal Premium for 3 months.",description:"Payment success description for 3 month plan"},m12:{id:"pages.premium.success.m12",defaultMessage:"You subscribed to Primal Premium for 12 months.",description:"Payment success description for 12 month plan"},legend:{id:"pages.premium.success.legend",defaultMessage:"You are now a Primal Legend.",description:"Payment success description for legends"}}},errors:{nameTooShort:{id:"pages.premium.error.nameTooShort",defaultMessage:"Name needs to be at least 3 characters long",description:"Name is too short error"},nameUnavailable:{id:"pages.premium.error.nameUnavailable",defaultMessage:"Sorry, that name is currently unavailable",description:"Name is unavailable error"},nameNotChanged:{id:"pages.premium.error.nameNotChanged",defaultMessage:"Failed to change name",description:"Name is unavailable error"}}},XT=o(async(e,t,n)=>{if(!e)return;const r={kind:W.Settings,tags:[["p",e]],created_at:Math.floor(new Date().getTime()/1e3),content:JSON.stringify({})};try{const i=await Vt(r),s=JSON.stringify(["REQ",t,{cache:["membership_status",{event_from_user:i}]}]);if(n){const a=new CustomEvent("send",{detail:{message:s,ws:n}});n.send(s),n.dispatchEvent(a)}else throw"no_socket";return!0}catch(i){return console.error("Failed to upload: ",i),!1}},"getMembershipStatus"),pB=o(async(e,t,n,r)=>{if(!e)return;const s={content:JSON.stringify(["exchange_rate",{target_currency:n}]),kind:W.WALLET_OPERATION,created_at:Math.ceil(new Date().getTime()/1e3),tags:[]},a=await Vt(s),c=JSON.stringify(["REQ",t,{cache:["wallet",{operation_event:a}]}]);if(r){const u=new CustomEvent("send",{detail:{message:c,ws:r}});r.send(c),r.dispatchEvent(u)}else throw"no_socket"},"getExchangeRate");var e3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}o(gB,"getDefaultExportFromCjs");function t3(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=o(function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)},"a");n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}o(t3,"getAugmentedNamespace");var yp="qpzry9x8gf2tvdw0s3jn54khce6mua7l",bp={};for(var oa=0;oa<yp.length;oa++){var Ll=yp.charAt(oa);if(bp[Ll]!==void 0)throw new TypeError(Ll+" is ambiguous");bp[Ll]=oa}var $o={},Tc={};Tc.byteLength=i3;Tc.toByteArray=o3;Tc.fromByteArray=l3;var ir=[],Sn=[],n3=typeof Uint8Array<"u"?Uint8Array:Array,Pl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ki=0,r3=Pl.length;Ki<r3;++Ki)ir[Ki]=Pl[Ki],Sn[Pl.charCodeAt(Ki)]=Ki;Sn["-".charCodeAt(0)]=62;Sn["_".charCodeAt(0)]=63;function Fy(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}o(Fy,"getLens");function i3(e){var t=Fy(e),n=t[0],r=t[1];return(n+r)*3/4-r}o(i3,"byteLength");function s3(e,t,n){return(t+n)*3/4-n}o(s3,"_byteLength");function o3(e){var t,n=Fy(e),r=n[0],i=n[1],s=new n3(s3(e,r,i)),a=0,c=i>0?r-4:r,u;for(u=0;u<c;u+=4)t=Sn[e.charCodeAt(u)]<<18|Sn[e.charCodeAt(u+1)]<<12|Sn[e.charCodeAt(u+2)]<<6|Sn[e.charCodeAt(u+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=t&255;return i===2&&(t=Sn[e.charCodeAt(u)]<<2|Sn[e.charCodeAt(u+1)]>>4,s[a++]=t&255),i===1&&(t=Sn[e.charCodeAt(u)]<<10|Sn[e.charCodeAt(u+1)]<<4|Sn[e.charCodeAt(u+2)]>>2,s[a++]=t>>8&255,s[a++]=t&255),s}o(o3,"toByteArray");function a3(e){return ir[e>>18&63]+ir[e>>12&63]+ir[e>>6&63]+ir[e&63]}o(a3,"tripletToBase64");function c3(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(a3(r));return i.join("")}o(c3,"encodeChunk");function l3(e){for(var t,n=e.length,r=n%3,i=[],s=16383,a=0,c=n-r;a<c;a+=s)i.push(c3(e,a,a+s>c?c:a+s));return r===1?(t=e[n-1],i.push(ir[t>>2]+ir[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(ir[t>>10]+ir[t>>4&63]+ir[t<<2&63]+"=")),i.join("")}o(l3,"fromByteArray");var Qf={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Qf.read=function(e,t,n,r,i){var s,a,c=i*8-r-1,u=(1<<c)-1,l=u>>1,f=-7,h=n?i-1:0,p=n?-1:1,y=e[t+h];for(h+=p,s=y&(1<<-f)-1,y>>=-f,f+=c;f>0;s=s*256+e[t+h],h+=p,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=r;f>0;a=a*256+e[t+h],h+=p,f-=8);if(s===0)s=1-l;else{if(s===u)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-l}return(y?-1:1)*a*Math.pow(2,s-r)};Qf.write=function(e,t,n,r,i,s){var a,c,u,l=s*8-i-1,f=(1<<l)-1,h=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:s-1,_=r?1:-1,x=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+h>=1?t+=p/u:t+=p*Math.pow(2,1-h),t*u>=2&&(a++,u/=2),a+h>=f?(c=0,a=f):a+h>=1?(c=(t*u-1)*Math.pow(2,i),a=a+h):(c=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+y]=c&255,y+=_,c/=256,i-=8);for(a=a<<i|c,l+=i;l>0;e[n+y]=a&255,y+=_,a/=256,l-=8);e[n+y-_]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Tc,n=Qf,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const O=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(O,b),O.foo()===42}catch{return!1}}o(s,"typedArraySupport"),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function a(O){if(O>i)throw new RangeError('The value "'+O+'" is invalid for option "size"');const b=new Uint8Array(O);return Object.setPrototypeOf(b,c.prototype),b}o(a,"createBuffer");function c(O,b,E){if(typeof O=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(O)}return u(O,b,E)}o(c,"Buffer"),c.poolSize=8192;function u(O,b,E){if(typeof O=="string")return p(O,b);if(ArrayBuffer.isView(O))return _(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Ce(O,ArrayBuffer)||O&&Ce(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(O,SharedArrayBuffer)||O&&Ce(O.buffer,SharedArrayBuffer)))return x(O,b,E);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const $=O.valueOf&&O.valueOf();if($!=null&&$!==O)return c.from($,b,E);const G=w(O);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return c.from(O[Symbol.toPrimitive]("string"),b,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}o(u,"from"),c.from=function(O,b,E){return u(O,b,E)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function l(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}o(l,"assertSize");function f(O,b,E){return l(O),O<=0?a(O):b!==void 0?typeof E=="string"?a(O).fill(b,E):a(O).fill(b):a(O)}o(f,"alloc"),c.alloc=function(O,b,E){return f(O,b,E)};function h(O){return l(O),a(O<0?0:v(O)|0)}o(h,"allocUnsafe"),c.allocUnsafe=function(O){return h(O)},c.allocUnsafeSlow=function(O){return h(O)};function p(O,b){if((typeof b!="string"||b==="")&&(b="utf8"),!c.isEncoding(b))throw new TypeError("Unknown encoding: "+b);const E=N(O,b)|0;let $=a(E);const G=$.write(O,b);return G!==E&&($=$.slice(0,G)),$}o(p,"fromString");function y(O){const b=O.length<0?0:v(O.length)|0,E=a(b);for(let $=0;$<b;$+=1)E[$]=O[$]&255;return E}o(y,"fromArrayLike");function _(O){if(Ce(O,Uint8Array)){const b=new Uint8Array(O);return x(b.buffer,b.byteOffset,b.byteLength)}return y(O)}o(_,"fromArrayView");function x(O,b,E){if(b<0||O.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<b+(E||0))throw new RangeError('"length" is outside of buffer bounds');let $;return b===void 0&&E===void 0?$=new Uint8Array(O):E===void 0?$=new Uint8Array(O,b):$=new Uint8Array(O,b,E),Object.setPrototypeOf($,c.prototype),$}o(x,"fromArrayBuffer");function w(O){if(c.isBuffer(O)){const b=v(O.length)|0,E=a(b);return E.length===0||O.copy(E,0,0,b),E}if(O.length!==void 0)return typeof O.length!="number"||ut(O.length)?a(0):y(O);if(O.type==="Buffer"&&Array.isArray(O.data))return y(O.data)}o(w,"fromObject");function v(O){if(O>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return O|0}o(v,"checked");function T(O){return+O!=O&&(O=0),c.alloc(+O)}o(T,"SlowBuffer"),c.isBuffer=o(function(b){return b!=null&&b._isBuffer===!0&&b!==c.prototype},"isBuffer"),c.compare=o(function(b,E){if(Ce(b,Uint8Array)&&(b=c.from(b,b.offset,b.byteLength)),Ce(E,Uint8Array)&&(E=c.from(E,E.offset,E.byteLength)),!c.isBuffer(b)||!c.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===E)return 0;let $=b.length,G=E.length;for(let Q=0,oe=Math.min($,G);Q<oe;++Q)if(b[Q]!==E[Q]){$=b[Q],G=E[Q];break}return $<G?-1:G<$?1:0},"compare"),c.isEncoding=o(function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),c.concat=o(function(b,E){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(b.length===0)return c.alloc(0);let $;if(E===void 0)for(E=0,$=0;$<b.length;++$)E+=b[$].length;const G=c.allocUnsafe(E);let Q=0;for($=0;$<b.length;++$){let oe=b[$];if(Ce(oe,Uint8Array))Q+oe.length>G.length?(c.isBuffer(oe)||(oe=c.from(oe)),oe.copy(G,Q)):Uint8Array.prototype.set.call(G,oe,Q);else if(c.isBuffer(oe))oe.copy(G,Q);else throw new TypeError('"list" argument must be an Array of Buffers');Q+=oe.length}return G},"concat");function N(O,b){if(c.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Ce(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);const E=O.length,$=arguments.length>2&&arguments[2]===!0;if(!$&&E===0)return 0;let G=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return we(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return Zt(O).length;default:if(G)return $?-1:we(O).length;b=(""+b).toLowerCase(),G=!0}}o(N,"byteLength"),c.byteLength=N;function I(O,b,E){let $=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,b>>>=0,E<=b))return"";for(O||(O="utf8");;)switch(O){case"hex":return M(this,b,E);case"utf8":case"utf-8":return S(this,b,E);case"ascii":return P(this,b,E);case"latin1":case"binary":return F(this,b,E);case"base64":return m(this,b,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,b,E);default:if($)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),$=!0}}o(I,"slowToString"),c.prototype._isBuffer=!0;function C(O,b,E){const $=O[b];O[b]=O[E],O[E]=$}o(C,"swap"),c.prototype.swap16=o(function(){const b=this.length;if(b%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<b;E+=2)C(this,E,E+1);return this},"swap16"),c.prototype.swap32=o(function(){const b=this.length;if(b%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<b;E+=4)C(this,E,E+3),C(this,E+1,E+2);return this},"swap32"),c.prototype.swap64=o(function(){const b=this.length;if(b%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<b;E+=8)C(this,E,E+7),C(this,E+1,E+6),C(this,E+2,E+5),C(this,E+3,E+4);return this},"swap64"),c.prototype.toString=o(function(){const b=this.length;return b===0?"":arguments.length===0?S(this,0,b):I.apply(this,arguments)},"toString"),c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=o(function(b){if(!c.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:c.compare(this,b)===0},"equals"),c.prototype.inspect=o(function(){let b="";const E=e.INSPECT_MAX_BYTES;return b=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(b+=" ... "),"<Buffer "+b+">"},"inspect"),r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=o(function(b,E,$,G,Q){if(Ce(b,Uint8Array)&&(b=c.from(b,b.offset,b.byteLength)),!c.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(E===void 0&&(E=0),$===void 0&&($=b?b.length:0),G===void 0&&(G=0),Q===void 0&&(Q=this.length),E<0||$>b.length||G<0||Q>this.length)throw new RangeError("out of range index");if(G>=Q&&E>=$)return 0;if(G>=Q)return-1;if(E>=$)return 1;if(E>>>=0,$>>>=0,G>>>=0,Q>>>=0,this===b)return 0;let oe=Q-G,Ae=$-E;const j=Math.min(oe,Ae),ee=this.slice(G,Q),Z=b.slice(E,$);for(let ne=0;ne<j;++ne)if(ee[ne]!==Z[ne]){oe=ee[ne],Ae=Z[ne];break}return oe<Ae?-1:Ae<oe?1:0},"compare");function D(O,b,E,$,G){if(O.length===0)return-1;if(typeof E=="string"?($=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,ut(E)&&(E=G?0:O.length-1),E<0&&(E=O.length+E),E>=O.length){if(G)return-1;E=O.length-1}else if(E<0)if(G)E=0;else return-1;if(typeof b=="string"&&(b=c.from(b,$)),c.isBuffer(b))return b.length===0?-1:U(O,b,E,$,G);if(typeof b=="number")return b=b&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(O,b,E):Uint8Array.prototype.lastIndexOf.call(O,b,E):U(O,[b],E,$,G);throw new TypeError("val must be string, number or Buffer")}o(D,"bidirectionalIndexOf");function U(O,b,E,$,G){let Q=1,oe=O.length,Ae=b.length;if($!==void 0&&($=String($).toLowerCase(),$==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(O.length<2||b.length<2)return-1;Q=2,oe/=2,Ae/=2,E/=2}function j(Z,ne){return Q===1?Z[ne]:Z.readUInt16BE(ne*Q)}o(j,"read");let ee;if(G){let Z=-1;for(ee=E;ee<oe;ee++)if(j(O,ee)===j(b,Z===-1?0:ee-Z)){if(Z===-1&&(Z=ee),ee-Z+1===Ae)return Z*Q}else Z!==-1&&(ee-=ee-Z),Z=-1}else for(E+Ae>oe&&(E=oe-Ae),ee=E;ee>=0;ee--){let Z=!0;for(let ne=0;ne<Ae;ne++)if(j(O,ee+ne)!==j(b,ne)){Z=!1;break}if(Z)return ee}return-1}o(U,"arrayIndexOf"),c.prototype.includes=o(function(b,E,$){return this.indexOf(b,E,$)!==-1},"includes"),c.prototype.indexOf=o(function(b,E,$){return D(this,b,E,$,!0)},"indexOf"),c.prototype.lastIndexOf=o(function(b,E,$){return D(this,b,E,$,!1)},"lastIndexOf");function H(O,b,E,$){E=Number(E)||0;const G=O.length-E;$?($=Number($),$>G&&($=G)):$=G;const Q=b.length;$>Q/2&&($=Q/2);let oe;for(oe=0;oe<$;++oe){const Ae=parseInt(b.substr(oe*2,2),16);if(ut(Ae))return oe;O[E+oe]=Ae}return oe}o(H,"hexWrite");function B(O,b,E,$){return Ue(we(b,O.length-E),O,E,$)}o(B,"utf8Write");function z(O,b,E,$){return Ue(ve(b),O,E,$)}o(z,"asciiWrite");function A(O,b,E,$){return Ue(Zt(b),O,E,$)}o(A,"base64Write");function d(O,b,E,$){return Ue(Be(b,O.length-E),O,E,$)}o(d,"ucs2Write"),c.prototype.write=o(function(b,E,$,G){if(E===void 0)G="utf8",$=this.length,E=0;else if($===void 0&&typeof E=="string")G=E,$=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite($)?($=$>>>0,G===void 0&&(G="utf8")):(G=$,$=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Q=this.length-E;if(($===void 0||$>Q)&&($=Q),b.length>0&&($<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");let oe=!1;for(;;)switch(G){case"hex":return H(this,b,E,$);case"utf8":case"utf-8":return B(this,b,E,$);case"ascii":case"latin1":case"binary":return z(this,b,E,$);case"base64":return A(this,b,E,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,b,E,$);default:if(oe)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),oe=!0}},"write"),c.prototype.toJSON=o(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function m(O,b,E){return b===0&&E===O.length?t.fromByteArray(O):t.fromByteArray(O.slice(b,E))}o(m,"base64Slice");function S(O,b,E){E=Math.min(O.length,E);const $=[];let G=b;for(;G<E;){const Q=O[G];let oe=null,Ae=Q>239?4:Q>223?3:Q>191?2:1;if(G+Ae<=E){let j,ee,Z,ne;switch(Ae){case 1:Q<128&&(oe=Q);break;case 2:j=O[G+1],(j&192)===128&&(ne=(Q&31)<<6|j&63,ne>127&&(oe=ne));break;case 3:j=O[G+1],ee=O[G+2],(j&192)===128&&(ee&192)===128&&(ne=(Q&15)<<12|(j&63)<<6|ee&63,ne>2047&&(ne<55296||ne>57343)&&(oe=ne));break;case 4:j=O[G+1],ee=O[G+2],Z=O[G+3],(j&192)===128&&(ee&192)===128&&(Z&192)===128&&(ne=(Q&15)<<18|(j&63)<<12|(ee&63)<<6|Z&63,ne>65535&&ne<1114112&&(oe=ne))}}oe===null?(oe=65533,Ae=1):oe>65535&&(oe-=65536,$.push(oe>>>10&1023|55296),oe=56320|oe&1023),$.push(oe),G+=Ae}return k($)}o(S,"utf8Slice");const R=4096;function k(O){const b=O.length;if(b<=R)return String.fromCharCode.apply(String,O);let E="",$=0;for(;$<b;)E+=String.fromCharCode.apply(String,O.slice($,$+=R));return E}o(k,"decodeCodePointsArray");function P(O,b,E){let $="";E=Math.min(O.length,E);for(let G=b;G<E;++G)$+=String.fromCharCode(O[G]&127);return $}o(P,"asciiSlice");function F(O,b,E){let $="";E=Math.min(O.length,E);for(let G=b;G<E;++G)$+=String.fromCharCode(O[G]);return $}o(F,"latin1Slice");function M(O,b,E){const $=O.length;(!b||b<0)&&(b=0),(!E||E<0||E>$)&&(E=$);let G="";for(let Q=b;Q<E;++Q)G+=je[O[Q]];return G}o(M,"hexSlice");function g(O,b,E){const $=O.slice(b,E);let G="";for(let Q=0;Q<$.length-1;Q+=2)G+=String.fromCharCode($[Q]+$[Q+1]*256);return G}o(g,"utf16leSlice"),c.prototype.slice=o(function(b,E){const $=this.length;b=~~b,E=E===void 0?$:~~E,b<0?(b+=$,b<0&&(b=0)):b>$&&(b=$),E<0?(E+=$,E<0&&(E=0)):E>$&&(E=$),E<b&&(E=b);const G=this.subarray(b,E);return Object.setPrototypeOf(G,c.prototype),G},"slice");function L(O,b,E){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+b>E)throw new RangeError("Trying to access beyond buffer length")}o(L,"checkOffset"),c.prototype.readUintLE=c.prototype.readUIntLE=o(function(b,E,$){b=b>>>0,E=E>>>0,$||L(b,E,this.length);let G=this[b],Q=1,oe=0;for(;++oe<E&&(Q*=256);)G+=this[b+oe]*Q;return G},"readUIntLE"),c.prototype.readUintBE=c.prototype.readUIntBE=o(function(b,E,$){b=b>>>0,E=E>>>0,$||L(b,E,this.length);let G=this[b+--E],Q=1;for(;E>0&&(Q*=256);)G+=this[b+--E]*Q;return G},"readUIntBE"),c.prototype.readUint8=c.prototype.readUInt8=o(function(b,E){return b=b>>>0,E||L(b,1,this.length),this[b]},"readUInt8"),c.prototype.readUint16LE=c.prototype.readUInt16LE=o(function(b,E){return b=b>>>0,E||L(b,2,this.length),this[b]|this[b+1]<<8},"readUInt16LE"),c.prototype.readUint16BE=c.prototype.readUInt16BE=o(function(b,E){return b=b>>>0,E||L(b,2,this.length),this[b]<<8|this[b+1]},"readUInt16BE"),c.prototype.readUint32LE=c.prototype.readUInt32LE=o(function(b,E){return b=b>>>0,E||L(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+this[b+3]*16777216},"readUInt32LE"),c.prototype.readUint32BE=c.prototype.readUInt32BE=o(function(b,E){return b=b>>>0,E||L(b,4,this.length),this[b]*16777216+(this[b+1]<<16|this[b+2]<<8|this[b+3])},"readUInt32BE"),c.prototype.readBigUInt64LE=ze(o(function(b){b=b>>>0,le(b,"offset");const E=this[b],$=this[b+7];(E===void 0||$===void 0)&&q(b,this.length-8);const G=E+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24,Q=this[++b]+this[++b]*2**8+this[++b]*2**16+$*2**24;return BigInt(G)+(BigInt(Q)<<BigInt(32))},"readBigUInt64LE")),c.prototype.readBigUInt64BE=ze(o(function(b){b=b>>>0,le(b,"offset");const E=this[b],$=this[b+7];(E===void 0||$===void 0)&&q(b,this.length-8);const G=E*2**24+this[++b]*2**16+this[++b]*2**8+this[++b],Q=this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+$;return(BigInt(G)<<BigInt(32))+BigInt(Q)},"readBigUInt64BE")),c.prototype.readIntLE=o(function(b,E,$){b=b>>>0,E=E>>>0,$||L(b,E,this.length);let G=this[b],Q=1,oe=0;for(;++oe<E&&(Q*=256);)G+=this[b+oe]*Q;return Q*=128,G>=Q&&(G-=Math.pow(2,8*E)),G},"readIntLE"),c.prototype.readIntBE=o(function(b,E,$){b=b>>>0,E=E>>>0,$||L(b,E,this.length);let G=E,Q=1,oe=this[b+--G];for(;G>0&&(Q*=256);)oe+=this[b+--G]*Q;return Q*=128,oe>=Q&&(oe-=Math.pow(2,8*E)),oe},"readIntBE"),c.prototype.readInt8=o(function(b,E){return b=b>>>0,E||L(b,1,this.length),this[b]&128?(255-this[b]+1)*-1:this[b]},"readInt8"),c.prototype.readInt16LE=o(function(b,E){b=b>>>0,E||L(b,2,this.length);const $=this[b]|this[b+1]<<8;return $&32768?$|4294901760:$},"readInt16LE"),c.prototype.readInt16BE=o(function(b,E){b=b>>>0,E||L(b,2,this.length);const $=this[b+1]|this[b]<<8;return $&32768?$|4294901760:$},"readInt16BE"),c.prototype.readInt32LE=o(function(b,E){return b=b>>>0,E||L(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},"readInt32LE"),c.prototype.readInt32BE=o(function(b,E){return b=b>>>0,E||L(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},"readInt32BE"),c.prototype.readBigInt64LE=ze(o(function(b){b=b>>>0,le(b,"offset");const E=this[b],$=this[b+7];(E===void 0||$===void 0)&&q(b,this.length-8);const G=this[b+4]+this[b+5]*2**8+this[b+6]*2**16+($<<24);return(BigInt(G)<<BigInt(32))+BigInt(E+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24)},"readBigInt64LE")),c.prototype.readBigInt64BE=ze(o(function(b){b=b>>>0,le(b,"offset");const E=this[b],$=this[b+7];(E===void 0||$===void 0)&&q(b,this.length-8);const G=(E<<24)+this[++b]*2**16+this[++b]*2**8+this[++b];return(BigInt(G)<<BigInt(32))+BigInt(this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+$)},"readBigInt64BE")),c.prototype.readFloatLE=o(function(b,E){return b=b>>>0,E||L(b,4,this.length),n.read(this,b,!0,23,4)},"readFloatLE"),c.prototype.readFloatBE=o(function(b,E){return b=b>>>0,E||L(b,4,this.length),n.read(this,b,!1,23,4)},"readFloatBE"),c.prototype.readDoubleLE=o(function(b,E){return b=b>>>0,E||L(b,8,this.length),n.read(this,b,!0,52,8)},"readDoubleLE"),c.prototype.readDoubleBE=o(function(b,E){return b=b>>>0,E||L(b,8,this.length),n.read(this,b,!1,52,8)},"readDoubleBE");function V(O,b,E,$,G,Q){if(!c.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>G||b<Q)throw new RangeError('"value" argument is out of bounds');if(E+$>O.length)throw new RangeError("Index out of range")}o(V,"checkInt"),c.prototype.writeUintLE=c.prototype.writeUIntLE=o(function(b,E,$,G){if(b=+b,E=E>>>0,$=$>>>0,!G){const Ae=Math.pow(2,8*$)-1;V(this,b,E,$,Ae,0)}let Q=1,oe=0;for(this[E]=b&255;++oe<$&&(Q*=256);)this[E+oe]=b/Q&255;return E+$},"writeUIntLE"),c.prototype.writeUintBE=c.prototype.writeUIntBE=o(function(b,E,$,G){if(b=+b,E=E>>>0,$=$>>>0,!G){const Ae=Math.pow(2,8*$)-1;V(this,b,E,$,Ae,0)}let Q=$-1,oe=1;for(this[E+Q]=b&255;--Q>=0&&(oe*=256);)this[E+Q]=b/oe&255;return E+$},"writeUIntBE"),c.prototype.writeUint8=c.prototype.writeUInt8=o(function(b,E,$){return b=+b,E=E>>>0,$||V(this,b,E,1,255,0),this[E]=b&255,E+1},"writeUInt8"),c.prototype.writeUint16LE=c.prototype.writeUInt16LE=o(function(b,E,$){return b=+b,E=E>>>0,$||V(this,b,E,2,65535,0),this[E]=b&255,this[E+1]=b>>>8,E+2},"writeUInt16LE"),c.prototype.writeUint16BE=c.prototype.writeUInt16BE=o(function(b,E,$){return b=+b,E=E>>>0,$||V(this,b,E,2,65535,0),this[E]=b>>>8,this[E+1]=b&255,E+2},"writeUInt16BE"),c.prototype.writeUint32LE=c.prototype.writeUInt32LE=o(function(b,E,$){return b=+b,E=E>>>0,$||V(this,b,E,4,4294967295,0),this[E+3]=b>>>24,this[E+2]=b>>>16,this[E+1]=b>>>8,this[E]=b&255,E+4},"writeUInt32LE"),c.prototype.writeUint32BE=c.prototype.writeUInt32BE=o(function(b,E,$){return b=+b,E=E>>>0,$||V(this,b,E,4,4294967295,0),this[E]=b>>>24,this[E+1]=b>>>16,this[E+2]=b>>>8,this[E+3]=b&255,E+4},"writeUInt32BE");function ie(O,b,E,$,G){fe(b,$,G,O,E,7);let Q=Number(b&BigInt(4294967295));O[E++]=Q,Q=Q>>8,O[E++]=Q,Q=Q>>8,O[E++]=Q,Q=Q>>8,O[E++]=Q;let oe=Number(b>>BigInt(32)&BigInt(4294967295));return O[E++]=oe,oe=oe>>8,O[E++]=oe,oe=oe>>8,O[E++]=oe,oe=oe>>8,O[E++]=oe,E}o(ie,"wrtBigUInt64LE");function he(O,b,E,$,G){fe(b,$,G,O,E,7);let Q=Number(b&BigInt(4294967295));O[E+7]=Q,Q=Q>>8,O[E+6]=Q,Q=Q>>8,O[E+5]=Q,Q=Q>>8,O[E+4]=Q;let oe=Number(b>>BigInt(32)&BigInt(4294967295));return O[E+3]=oe,oe=oe>>8,O[E+2]=oe,oe=oe>>8,O[E+1]=oe,oe=oe>>8,O[E]=oe,E+8}o(he,"wrtBigUInt64BE"),c.prototype.writeBigUInt64LE=ze(o(function(b,E=0){return ie(this,b,E,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),c.prototype.writeBigUInt64BE=ze(o(function(b,E=0){return he(this,b,E,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),c.prototype.writeIntLE=o(function(b,E,$,G){if(b=+b,E=E>>>0,!G){const j=Math.pow(2,8*$-1);V(this,b,E,$,j-1,-j)}let Q=0,oe=1,Ae=0;for(this[E]=b&255;++Q<$&&(oe*=256);)b<0&&Ae===0&&this[E+Q-1]!==0&&(Ae=1),this[E+Q]=(b/oe>>0)-Ae&255;return E+$},"writeIntLE"),c.prototype.writeIntBE=o(function(b,E,$,G){if(b=+b,E=E>>>0,!G){const j=Math.pow(2,8*$-1);V(this,b,E,$,j-1,-j)}let Q=$-1,oe=1,Ae=0;for(this[E+Q]=b&255;--Q>=0&&(oe*=256);)b<0&&Ae===0&&this[E+Q+1]!==0&&(Ae=1),this[E+Q]=(b/oe>>0)-Ae&255;return E+$},"writeIntBE"),c.prototype.writeInt8=o(function(b,E,$){return b=+b,E=E>>>0,$||V(this,b,E,1,127,-128),b<0&&(b=255+b+1),this[E]=b&255,E+1},"writeInt8"),c.prototype.writeInt16LE=o(function(b,E,$){return b=+b,E=E>>>0,$||V(this,b,E,2,32767,-32768),this[E]=b&255,this[E+1]=b>>>8,E+2},"writeInt16LE"),c.prototype.writeInt16BE=o(function(b,E,$){return b=+b,E=E>>>0,$||V(this,b,E,2,32767,-32768),this[E]=b>>>8,this[E+1]=b&255,E+2},"writeInt16BE"),c.prototype.writeInt32LE=o(function(b,E,$){return b=+b,E=E>>>0,$||V(this,b,E,4,2147483647,-2147483648),this[E]=b&255,this[E+1]=b>>>8,this[E+2]=b>>>16,this[E+3]=b>>>24,E+4},"writeInt32LE"),c.prototype.writeInt32BE=o(function(b,E,$){return b=+b,E=E>>>0,$||V(this,b,E,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),this[E]=b>>>24,this[E+1]=b>>>16,this[E+2]=b>>>8,this[E+3]=b&255,E+4},"writeInt32BE"),c.prototype.writeBigInt64LE=ze(o(function(b,E=0){return ie(this,b,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),c.prototype.writeBigInt64BE=ze(o(function(b,E=0){return he(this,b,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function ge(O,b,E,$,G,Q){if(E+$>O.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}o(ge,"checkIEEE754");function _e(O,b,E,$,G){return b=+b,E=E>>>0,G||ge(O,b,E,4),n.write(O,b,E,$,23,4),E+4}o(_e,"writeFloat"),c.prototype.writeFloatLE=o(function(b,E,$){return _e(this,b,E,!0,$)},"writeFloatLE"),c.prototype.writeFloatBE=o(function(b,E,$){return _e(this,b,E,!1,$)},"writeFloatBE");function me(O,b,E,$,G){return b=+b,E=E>>>0,G||ge(O,b,E,8),n.write(O,b,E,$,52,8),E+8}o(me,"writeDouble"),c.prototype.writeDoubleLE=o(function(b,E,$){return me(this,b,E,!0,$)},"writeDoubleLE"),c.prototype.writeDoubleBE=o(function(b,E,$){return me(this,b,E,!1,$)},"writeDoubleBE"),c.prototype.copy=o(function(b,E,$,G){if(!c.isBuffer(b))throw new TypeError("argument should be a Buffer");if($||($=0),!G&&G!==0&&(G=this.length),E>=b.length&&(E=b.length),E||(E=0),G>0&&G<$&&(G=$),G===$||b.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),b.length-E<G-$&&(G=b.length-E+$);const Q=G-$;return this===b&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,$,G):Uint8Array.prototype.set.call(b,this.subarray($,G),E),Q},"copy"),c.prototype.fill=o(function(b,E,$,G){if(typeof b=="string"){if(typeof E=="string"?(G=E,E=0,$=this.length):typeof $=="string"&&(G=$,$=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!c.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(b.length===1){const oe=b.charCodeAt(0);(G==="utf8"&&oe<128||G==="latin1")&&(b=oe)}}else typeof b=="number"?b=b&255:typeof b=="boolean"&&(b=Number(b));if(E<0||this.length<E||this.length<$)throw new RangeError("Out of range index");if($<=E)return this;E=E>>>0,$=$===void 0?this.length:$>>>0,b||(b=0);let Q;if(typeof b=="number")for(Q=E;Q<$;++Q)this[Q]=b;else{const oe=c.isBuffer(b)?b:c.from(b,G),Ae=oe.length;if(Ae===0)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(Q=0;Q<$-E;++Q)this[Q+E]=oe[Q%Ae]}return this},"fill");const te={};function X(O,b,E){var $;te[O]=($=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${O}]`,this.stack,delete this.name}get code(){return O}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${O}]: ${this.message}`}},o($,"NodeError"),$)}o(X,"E"),X("ERR_BUFFER_OUT_OF_BOUNDS",function(O){return O?`${O} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),X("ERR_INVALID_ARG_TYPE",function(O,b){return`The "${O}" argument must be of type number. Received type ${typeof b}`},TypeError),X("ERR_OUT_OF_RANGE",function(O,b,E){let $=`The value of "${O}" is out of range.`,G=E;return Number.isInteger(E)&&Math.abs(E)>2**32?G=re(String(E)):typeof E=="bigint"&&(G=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(G=re(G)),G+="n"),$+=` It must be ${b}. Received ${G}`,$},RangeError);function re(O){let b="",E=O.length;const $=O[0]==="-"?1:0;for(;E>=$+4;E-=3)b=`_${O.slice(E-3,E)}${b}`;return`${O.slice(0,E)}${b}`}o(re,"addNumericalSeparator");function xe(O,b,E){le(b,"offset"),(O[b]===void 0||O[b+E]===void 0)&&q(b,O.length-(E+1))}o(xe,"checkBounds");function fe(O,b,E,$,G,Q){if(O>E||O<b){const oe=typeof b=="bigint"?"n":"";let Ae;throw Q>3?b===0||b===BigInt(0)?Ae=`>= 0${oe} and < 2${oe} ** ${(Q+1)*8}${oe}`:Ae=`>= -(2${oe} ** ${(Q+1)*8-1}${oe}) and < 2 ** ${(Q+1)*8-1}${oe}`:Ae=`>= ${b}${oe} and <= ${E}${oe}`,new te.ERR_OUT_OF_RANGE("value",Ae,O)}xe($,G,Q)}o(fe,"checkIntBI");function le(O,b){if(typeof O!="number")throw new te.ERR_INVALID_ARG_TYPE(b,"number",O)}o(le,"validateNumber");function q(O,b,E){throw Math.floor(O)!==O?(le(O,E),new te.ERR_OUT_OF_RANGE(E||"offset","an integer",O)):b<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${b}`,O)}o(q,"boundsError");const Y=/[^+/0-9A-Za-z-_]/g;function ae(O){if(O=O.split("=")[0],O=O.trim().replace(Y,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}o(ae,"base64clean");function we(O,b){b=b||1/0;let E;const $=O.length;let G=null;const Q=[];for(let oe=0;oe<$;++oe){if(E=O.charCodeAt(oe),E>55295&&E<57344){if(!G){if(E>56319){(b-=3)>-1&&Q.push(239,191,189);continue}else if(oe+1===$){(b-=3)>-1&&Q.push(239,191,189);continue}G=E;continue}if(E<56320){(b-=3)>-1&&Q.push(239,191,189),G=E;continue}E=(G-55296<<10|E-56320)+65536}else G&&(b-=3)>-1&&Q.push(239,191,189);if(G=null,E<128){if((b-=1)<0)break;Q.push(E)}else if(E<2048){if((b-=2)<0)break;Q.push(E>>6|192,E&63|128)}else if(E<65536){if((b-=3)<0)break;Q.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((b-=4)<0)break;Q.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return Q}o(we,"utf8ToBytes");function ve(O){const b=[];for(let E=0;E<O.length;++E)b.push(O.charCodeAt(E)&255);return b}o(ve,"asciiToBytes");function Be(O,b){let E,$,G;const Q=[];for(let oe=0;oe<O.length&&!((b-=2)<0);++oe)E=O.charCodeAt(oe),$=E>>8,G=E%256,Q.push(G),Q.push($);return Q}o(Be,"utf16leToBytes");function Zt(O){return t.toByteArray(ae(O))}o(Zt,"base64ToBytes");function Ue(O,b,E,$){let G;for(G=0;G<$&&!(G+E>=b.length||G>=O.length);++G)b[G+E]=O[G];return G}o(Ue,"blitBuffer");function Ce(O,b){return O instanceof b||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===b.name}o(Ce,"isInstance");function ut(O){return O!==O}o(ut,"numberIsNaN");const je=function(){const O="0123456789abcdef",b=new Array(256);for(let E=0;E<16;++E){const $=E*16;for(let G=0;G<16;++G)b[$+G]=O[E]+O[G]}return b}();function ze(O){return typeof BigInt>"u"?_n:O}o(ze,"defineBigIntMethod");function _n(){throw new Error("BigInt not supported")}o(_n,"BufferBigIntNotDefined")})($o);var Xf={exports:{}};const u3={},f3=Object.freeze(Object.defineProperty({__proto__:null,default:u3},Symbol.toStringTag,{value:"Module"})),d3=t3(f3);Xf.exports;(function(e){(function(t,n){function r(A,d){if(!A)throw new Error(d||"Assertion failed")}o(r,"assert");function i(A,d){A.super_=d;var m=o(function(){},"TempCtor");m.prototype=d.prototype,A.prototype=new m,A.prototype.constructor=A}o(i,"inherits");function s(A,d,m){if(s.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((d==="le"||d==="be")&&(m=d,d=10),this._init(A||0,d||10,m||"be"))}o(s,"BN"),typeof t=="object"?t.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=d3.Buffer}catch{}s.isBN=o(function(d){return d instanceof s?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===s.wordSize&&Array.isArray(d.words)},"isBN"),s.max=o(function(d,m){return d.cmp(m)>0?d:m},"max"),s.min=o(function(d,m){return d.cmp(m)<0?d:m},"min"),s.prototype._init=o(function(d,m,S){if(typeof d=="number")return this._initNumber(d,m,S);if(typeof d=="object")return this._initArray(d,m,S);m==="hex"&&(m=16),r(m===(m|0)&&m>=2&&m<=36),d=d.toString().replace(/\s+/g,"");var R=0;d[0]==="-"&&(R++,this.negative=1),R<d.length&&(m===16?this._parseHex(d,R,S):(this._parseBase(d,m,R),S==="le"&&this._initArray(this.toArray(),m,S)))},"init"),s.prototype._initNumber=o(function(d,m,S){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(r(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),S==="le"&&this._initArray(this.toArray(),m,S)},"_initNumber"),s.prototype._initArray=o(function(d,m,S){if(r(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var k,P,F=0;if(S==="be")for(R=d.length-1,k=0;R>=0;R-=3)P=d[R]|d[R-1]<<8|d[R-2]<<16,this.words[k]|=P<<F&67108863,this.words[k+1]=P>>>26-F&67108863,F+=24,F>=26&&(F-=26,k++);else if(S==="le")for(R=0,k=0;R<d.length;R+=3)P=d[R]|d[R+1]<<8|d[R+2]<<16,this.words[k]|=P<<F&67108863,this.words[k+1]=P>>>26-F&67108863,F+=24,F>=26&&(F-=26,k++);return this.strip()},"_initArray");function c(A,d){var m=A.charCodeAt(d);return m>=65&&m<=70?m-55:m>=97&&m<=102?m-87:m-48&15}o(c,"parseHex4Bits");function u(A,d,m){var S=c(A,m);return m-1>=d&&(S|=c(A,m-1)<<4),S}o(u,"parseHexByte"),s.prototype._parseHex=o(function(d,m,S){this.length=Math.ceil((d.length-m)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var k=0,P=0,F;if(S==="be")for(R=d.length-1;R>=m;R-=2)F=u(d,m,R)<<k,this.words[P]|=F&67108863,k>=18?(k-=18,P+=1,this.words[P]|=F>>>26):k+=8;else{var M=d.length-m;for(R=M%2===0?m+1:m;R<d.length;R+=2)F=u(d,m,R)<<k,this.words[P]|=F&67108863,k>=18?(k-=18,P+=1,this.words[P]|=F>>>26):k+=8}this.strip()},"_parseHex");function l(A,d,m,S){for(var R=0,k=Math.min(A.length,m),P=d;P<k;P++){var F=A.charCodeAt(P)-48;R*=S,F>=49?R+=F-49+10:F>=17?R+=F-17+10:R+=F}return R}o(l,"parseBase"),s.prototype._parseBase=o(function(d,m,S){this.words=[0],this.length=1;for(var R=0,k=1;k<=67108863;k*=m)R++;R--,k=k/m|0;for(var P=d.length-S,F=P%R,M=Math.min(P,P-F)+S,g=0,L=S;L<M;L+=R)g=l(d,L,L+R,m),this.imuln(k),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(F!==0){var V=1;for(g=l(d,L,d.length,m),L=0;L<F;L++)V*=m;this.imuln(V),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this.strip()},"_parseBase"),s.prototype.copy=o(function(d){d.words=new Array(this.length);for(var m=0;m<this.length;m++)d.words[m]=this.words[m];d.length=this.length,d.negative=this.negative,d.red=this.red},"copy"),s.prototype.clone=o(function(){var d=new s(null);return this.copy(d),d},"clone"),s.prototype._expand=o(function(d){for(;this.length<d;)this.words[this.length++]=0;return this},"_expand"),s.prototype.strip=o(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),s.prototype._normSign=o(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),s.prototype.inspect=o(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=o(function(d,m){d=d||10,m=m|0||1;var S;if(d===16||d==="hex"){S="";for(var R=0,k=0,P=0;P<this.length;P++){var F=this.words[P],M=((F<<R|k)&16777215).toString(16);k=F>>>24-R&16777215,k!==0||P!==this.length-1?S=f[6-M.length]+M+S:S=M+S,R+=2,R>=26&&(R-=26,P--)}for(k!==0&&(S=k.toString(16)+S);S.length%m!==0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}if(d===(d|0)&&d>=2&&d<=36){var g=h[d],L=p[d];S="";var V=this.clone();for(V.negative=0;!V.isZero();){var ie=V.modn(L).toString(d);V=V.idivn(L),V.isZero()?S=ie+S:S=f[g-ie.length]+ie+S}for(this.isZero()&&(S="0"+S);S.length%m!==0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}r(!1,"Base should be between 2 and 36")},"toString"),s.prototype.toNumber=o(function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},"toNumber"),s.prototype.toJSON=o(function(){return this.toString(16)},"toJSON"),s.prototype.toBuffer=o(function(d,m){return r(typeof a<"u"),this.toArrayLike(a,d,m)},"toBuffer"),s.prototype.toArray=o(function(d,m){return this.toArrayLike(Array,d,m)},"toArray"),s.prototype.toArrayLike=o(function(d,m,S){var R=this.byteLength(),k=S||Math.max(1,R);r(R<=k,"byte array longer than desired length"),r(k>0,"Requested array length <= 0"),this.strip();var P=m==="le",F=new d(k),M,g,L=this.clone();if(P){for(g=0;!L.isZero();g++)M=L.andln(255),L.iushrn(8),F[g]=M;for(;g<k;g++)F[g]=0}else{for(g=0;g<k-R;g++)F[g]=0;for(g=0;!L.isZero();g++)M=L.andln(255),L.iushrn(8),F[k-g-1]=M}return F},"toArrayLike"),Math.clz32?s.prototype._countBits=o(function(d){return 32-Math.clz32(d)},"_countBits"):s.prototype._countBits=o(function(d){var m=d,S=0;return m>=4096&&(S+=13,m>>>=13),m>=64&&(S+=7,m>>>=7),m>=8&&(S+=4,m>>>=4),m>=2&&(S+=2,m>>>=2),S+m},"_countBits"),s.prototype._zeroBits=o(function(d){if(d===0)return 26;var m=d,S=0;return m&8191||(S+=13,m>>>=13),m&127||(S+=7,m>>>=7),m&15||(S+=4,m>>>=4),m&3||(S+=2,m>>>=2),m&1||S++,S},"_zeroBits"),s.prototype.bitLength=o(function(){var d=this.words[this.length-1],m=this._countBits(d);return(this.length-1)*26+m},"bitLength");function y(A){for(var d=new Array(A.bitLength()),m=0;m<d.length;m++){var S=m/26|0,R=m%26;d[m]=(A.words[S]&1<<R)>>>R}return d}o(y,"toBitArray"),s.prototype.zeroBits=o(function(){if(this.isZero())return 0;for(var d=0,m=0;m<this.length;m++){var S=this._zeroBits(this.words[m]);if(d+=S,S!==26)break}return d},"zeroBits"),s.prototype.byteLength=o(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),s.prototype.toTwos=o(function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},"toTwos"),s.prototype.fromTwos=o(function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},"fromTwos"),s.prototype.isNeg=o(function(){return this.negative!==0},"isNeg"),s.prototype.neg=o(function(){return this.clone().ineg()},"neg"),s.prototype.ineg=o(function(){return this.isZero()||(this.negative^=1),this},"ineg"),s.prototype.iuor=o(function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var m=0;m<d.length;m++)this.words[m]=this.words[m]|d.words[m];return this.strip()},"iuor"),s.prototype.ior=o(function(d){return r((this.negative|d.negative)===0),this.iuor(d)},"ior"),s.prototype.or=o(function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},"or"),s.prototype.uor=o(function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},"uor"),s.prototype.iuand=o(function(d){var m;this.length>d.length?m=d:m=this;for(var S=0;S<m.length;S++)this.words[S]=this.words[S]&d.words[S];return this.length=m.length,this.strip()},"iuand"),s.prototype.iand=o(function(d){return r((this.negative|d.negative)===0),this.iuand(d)},"iand"),s.prototype.and=o(function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},"and"),s.prototype.uand=o(function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},"uand"),s.prototype.iuxor=o(function(d){var m,S;this.length>d.length?(m=this,S=d):(m=d,S=this);for(var R=0;R<S.length;R++)this.words[R]=m.words[R]^S.words[R];if(this!==m)for(;R<m.length;R++)this.words[R]=m.words[R];return this.length=m.length,this.strip()},"iuxor"),s.prototype.ixor=o(function(d){return r((this.negative|d.negative)===0),this.iuxor(d)},"ixor"),s.prototype.xor=o(function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},"xor"),s.prototype.uxor=o(function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},"uxor"),s.prototype.inotn=o(function(d){r(typeof d=="number"&&d>=0);var m=Math.ceil(d/26)|0,S=d%26;this._expand(m),S>0&&m--;for(var R=0;R<m;R++)this.words[R]=~this.words[R]&67108863;return S>0&&(this.words[R]=~this.words[R]&67108863>>26-S),this.strip()},"inotn"),s.prototype.notn=o(function(d){return this.clone().inotn(d)},"notn"),s.prototype.setn=o(function(d,m){r(typeof d=="number"&&d>=0);var S=d/26|0,R=d%26;return this._expand(S+1),m?this.words[S]=this.words[S]|1<<R:this.words[S]=this.words[S]&~(1<<R),this.strip()},"setn"),s.prototype.iadd=o(function(d){var m;if(this.negative!==0&&d.negative===0)return this.negative=0,m=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,m=this.isub(d),d.negative=1,m._normSign();var S,R;this.length>d.length?(S=this,R=d):(S=d,R=this);for(var k=0,P=0;P<R.length;P++)m=(S.words[P]|0)+(R.words[P]|0)+k,this.words[P]=m&67108863,k=m>>>26;for(;k!==0&&P<S.length;P++)m=(S.words[P]|0)+k,this.words[P]=m&67108863,k=m>>>26;if(this.length=S.length,k!==0)this.words[this.length]=k,this.length++;else if(S!==this)for(;P<S.length;P++)this.words[P]=S.words[P];return this},"iadd"),s.prototype.add=o(function(d){var m;return d.negative!==0&&this.negative===0?(d.negative=0,m=this.sub(d),d.negative^=1,m):d.negative===0&&this.negative!==0?(this.negative=0,m=d.sub(this),this.negative=1,m):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},"add"),s.prototype.isub=o(function(d){if(d.negative!==0){d.negative=0;var m=this.iadd(d);return d.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var S=this.cmp(d);if(S===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,k;S>0?(R=this,k=d):(R=d,k=this);for(var P=0,F=0;F<k.length;F++)m=(R.words[F]|0)-(k.words[F]|0)+P,P=m>>26,this.words[F]=m&67108863;for(;P!==0&&F<R.length;F++)m=(R.words[F]|0)+P,P=m>>26,this.words[F]=m&67108863;if(P===0&&F<R.length&&R!==this)for(;F<R.length;F++)this.words[F]=R.words[F];return this.length=Math.max(this.length,F),R!==this&&(this.negative=1),this.strip()},"isub"),s.prototype.sub=o(function(d){return this.clone().isub(d)},"sub");function _(A,d,m){m.negative=d.negative^A.negative;var S=A.length+d.length|0;m.length=S,S=S-1|0;var R=A.words[0]|0,k=d.words[0]|0,P=R*k,F=P&67108863,M=P/67108864|0;m.words[0]=F;for(var g=1;g<S;g++){for(var L=M>>>26,V=M&67108863,ie=Math.min(g,d.length-1),he=Math.max(0,g-A.length+1);he<=ie;he++){var ge=g-he|0;R=A.words[ge]|0,k=d.words[he]|0,P=R*k+V,L+=P/67108864|0,V=P&67108863}m.words[g]=V|0,M=L|0}return M!==0?m.words[g]=M|0:m.length--,m.strip()}o(_,"smallMulTo");var x=o(function(d,m,S){var R=d.words,k=m.words,P=S.words,F=0,M,g,L,V=R[0]|0,ie=V&8191,he=V>>>13,ge=R[1]|0,_e=ge&8191,me=ge>>>13,te=R[2]|0,X=te&8191,re=te>>>13,xe=R[3]|0,fe=xe&8191,le=xe>>>13,q=R[4]|0,Y=q&8191,ae=q>>>13,we=R[5]|0,ve=we&8191,Be=we>>>13,Zt=R[6]|0,Ue=Zt&8191,Ce=Zt>>>13,ut=R[7]|0,je=ut&8191,ze=ut>>>13,_n=R[8]|0,O=_n&8191,b=_n>>>13,E=R[9]|0,$=E&8191,G=E>>>13,Q=k[0]|0,oe=Q&8191,Ae=Q>>>13,j=k[1]|0,ee=j&8191,Z=j>>>13,ne=k[2]|0,J=ne&8191,se=ne>>>13,be=k[3]|0,ce=be&8191,de=be>>>13,Ie=k[4]|0,Te=Ie&8191,Ge=Ie>>>13,Wt=k[5]|0,Ye=Wt&8191,st=Wt>>>13,jn=k[6]|0,gt=jn&8191,wt=jn>>>13,Is=k[7]|0,St=Is&8191,ft=Is>>>13,vn=k[8]|0,_t=vn&8191,vt=vn>>>13,Rs=k[9]|0,Et=Rs&8191,At=Rs>>>13;S.negative=d.negative^m.negative,S.length=19,M=Math.imul(ie,oe),g=Math.imul(ie,Ae),g=g+Math.imul(he,oe)|0,L=Math.imul(he,Ae);var ke=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(ke>>>26)|0,ke&=67108863,M=Math.imul(_e,oe),g=Math.imul(_e,Ae),g=g+Math.imul(me,oe)|0,L=Math.imul(me,Ae),M=M+Math.imul(ie,ee)|0,g=g+Math.imul(ie,Z)|0,g=g+Math.imul(he,ee)|0,L=L+Math.imul(he,Z)|0;var K=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(K>>>26)|0,K&=67108863,M=Math.imul(X,oe),g=Math.imul(X,Ae),g=g+Math.imul(re,oe)|0,L=Math.imul(re,Ae),M=M+Math.imul(_e,ee)|0,g=g+Math.imul(_e,Z)|0,g=g+Math.imul(me,ee)|0,L=L+Math.imul(me,Z)|0,M=M+Math.imul(ie,J)|0,g=g+Math.imul(ie,se)|0,g=g+Math.imul(he,J)|0,L=L+Math.imul(he,se)|0;var ye=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(ye>>>26)|0,ye&=67108863,M=Math.imul(fe,oe),g=Math.imul(fe,Ae),g=g+Math.imul(le,oe)|0,L=Math.imul(le,Ae),M=M+Math.imul(X,ee)|0,g=g+Math.imul(X,Z)|0,g=g+Math.imul(re,ee)|0,L=L+Math.imul(re,Z)|0,M=M+Math.imul(_e,J)|0,g=g+Math.imul(_e,se)|0,g=g+Math.imul(me,J)|0,L=L+Math.imul(me,se)|0,M=M+Math.imul(ie,ce)|0,g=g+Math.imul(ie,de)|0,g=g+Math.imul(he,ce)|0,L=L+Math.imul(he,de)|0;var Se=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Se>>>26)|0,Se&=67108863,M=Math.imul(Y,oe),g=Math.imul(Y,Ae),g=g+Math.imul(ae,oe)|0,L=Math.imul(ae,Ae),M=M+Math.imul(fe,ee)|0,g=g+Math.imul(fe,Z)|0,g=g+Math.imul(le,ee)|0,L=L+Math.imul(le,Z)|0,M=M+Math.imul(X,J)|0,g=g+Math.imul(X,se)|0,g=g+Math.imul(re,J)|0,L=L+Math.imul(re,se)|0,M=M+Math.imul(_e,ce)|0,g=g+Math.imul(_e,de)|0,g=g+Math.imul(me,ce)|0,L=L+Math.imul(me,de)|0,M=M+Math.imul(ie,Te)|0,g=g+Math.imul(ie,Ge)|0,g=g+Math.imul(he,Te)|0,L=L+Math.imul(he,Ge)|0;var Qe=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,M=Math.imul(ve,oe),g=Math.imul(ve,Ae),g=g+Math.imul(Be,oe)|0,L=Math.imul(Be,Ae),M=M+Math.imul(Y,ee)|0,g=g+Math.imul(Y,Z)|0,g=g+Math.imul(ae,ee)|0,L=L+Math.imul(ae,Z)|0,M=M+Math.imul(fe,J)|0,g=g+Math.imul(fe,se)|0,g=g+Math.imul(le,J)|0,L=L+Math.imul(le,se)|0,M=M+Math.imul(X,ce)|0,g=g+Math.imul(X,de)|0,g=g+Math.imul(re,ce)|0,L=L+Math.imul(re,de)|0,M=M+Math.imul(_e,Te)|0,g=g+Math.imul(_e,Ge)|0,g=g+Math.imul(me,Te)|0,L=L+Math.imul(me,Ge)|0,M=M+Math.imul(ie,Ye)|0,g=g+Math.imul(ie,st)|0,g=g+Math.imul(he,Ye)|0,L=L+Math.imul(he,st)|0;var Mt=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,M=Math.imul(Ue,oe),g=Math.imul(Ue,Ae),g=g+Math.imul(Ce,oe)|0,L=Math.imul(Ce,Ae),M=M+Math.imul(ve,ee)|0,g=g+Math.imul(ve,Z)|0,g=g+Math.imul(Be,ee)|0,L=L+Math.imul(Be,Z)|0,M=M+Math.imul(Y,J)|0,g=g+Math.imul(Y,se)|0,g=g+Math.imul(ae,J)|0,L=L+Math.imul(ae,se)|0,M=M+Math.imul(fe,ce)|0,g=g+Math.imul(fe,de)|0,g=g+Math.imul(le,ce)|0,L=L+Math.imul(le,de)|0,M=M+Math.imul(X,Te)|0,g=g+Math.imul(X,Ge)|0,g=g+Math.imul(re,Te)|0,L=L+Math.imul(re,Ge)|0,M=M+Math.imul(_e,Ye)|0,g=g+Math.imul(_e,st)|0,g=g+Math.imul(me,Ye)|0,L=L+Math.imul(me,st)|0,M=M+Math.imul(ie,gt)|0,g=g+Math.imul(ie,wt)|0,g=g+Math.imul(he,gt)|0,L=L+Math.imul(he,wt)|0;var Kt=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,M=Math.imul(je,oe),g=Math.imul(je,Ae),g=g+Math.imul(ze,oe)|0,L=Math.imul(ze,Ae),M=M+Math.imul(Ue,ee)|0,g=g+Math.imul(Ue,Z)|0,g=g+Math.imul(Ce,ee)|0,L=L+Math.imul(Ce,Z)|0,M=M+Math.imul(ve,J)|0,g=g+Math.imul(ve,se)|0,g=g+Math.imul(Be,J)|0,L=L+Math.imul(Be,se)|0,M=M+Math.imul(Y,ce)|0,g=g+Math.imul(Y,de)|0,g=g+Math.imul(ae,ce)|0,L=L+Math.imul(ae,de)|0,M=M+Math.imul(fe,Te)|0,g=g+Math.imul(fe,Ge)|0,g=g+Math.imul(le,Te)|0,L=L+Math.imul(le,Ge)|0,M=M+Math.imul(X,Ye)|0,g=g+Math.imul(X,st)|0,g=g+Math.imul(re,Ye)|0,L=L+Math.imul(re,st)|0,M=M+Math.imul(_e,gt)|0,g=g+Math.imul(_e,wt)|0,g=g+Math.imul(me,gt)|0,L=L+Math.imul(me,wt)|0,M=M+Math.imul(ie,St)|0,g=g+Math.imul(ie,ft)|0,g=g+Math.imul(he,St)|0,L=L+Math.imul(he,ft)|0;var ot=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(ot>>>26)|0,ot&=67108863,M=Math.imul(O,oe),g=Math.imul(O,Ae),g=g+Math.imul(b,oe)|0,L=Math.imul(b,Ae),M=M+Math.imul(je,ee)|0,g=g+Math.imul(je,Z)|0,g=g+Math.imul(ze,ee)|0,L=L+Math.imul(ze,Z)|0,M=M+Math.imul(Ue,J)|0,g=g+Math.imul(Ue,se)|0,g=g+Math.imul(Ce,J)|0,L=L+Math.imul(Ce,se)|0,M=M+Math.imul(ve,ce)|0,g=g+Math.imul(ve,de)|0,g=g+Math.imul(Be,ce)|0,L=L+Math.imul(Be,de)|0,M=M+Math.imul(Y,Te)|0,g=g+Math.imul(Y,Ge)|0,g=g+Math.imul(ae,Te)|0,L=L+Math.imul(ae,Ge)|0,M=M+Math.imul(fe,Ye)|0,g=g+Math.imul(fe,st)|0,g=g+Math.imul(le,Ye)|0,L=L+Math.imul(le,st)|0,M=M+Math.imul(X,gt)|0,g=g+Math.imul(X,wt)|0,g=g+Math.imul(re,gt)|0,L=L+Math.imul(re,wt)|0,M=M+Math.imul(_e,St)|0,g=g+Math.imul(_e,ft)|0,g=g+Math.imul(me,St)|0,L=L+Math.imul(me,ft)|0,M=M+Math.imul(ie,_t)|0,g=g+Math.imul(ie,vt)|0,g=g+Math.imul(he,_t)|0,L=L+Math.imul(he,vt)|0;var cn=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(cn>>>26)|0,cn&=67108863,M=Math.imul($,oe),g=Math.imul($,Ae),g=g+Math.imul(G,oe)|0,L=Math.imul(G,Ae),M=M+Math.imul(O,ee)|0,g=g+Math.imul(O,Z)|0,g=g+Math.imul(b,ee)|0,L=L+Math.imul(b,Z)|0,M=M+Math.imul(je,J)|0,g=g+Math.imul(je,se)|0,g=g+Math.imul(ze,J)|0,L=L+Math.imul(ze,se)|0,M=M+Math.imul(Ue,ce)|0,g=g+Math.imul(Ue,de)|0,g=g+Math.imul(Ce,ce)|0,L=L+Math.imul(Ce,de)|0,M=M+Math.imul(ve,Te)|0,g=g+Math.imul(ve,Ge)|0,g=g+Math.imul(Be,Te)|0,L=L+Math.imul(Be,Ge)|0,M=M+Math.imul(Y,Ye)|0,g=g+Math.imul(Y,st)|0,g=g+Math.imul(ae,Ye)|0,L=L+Math.imul(ae,st)|0,M=M+Math.imul(fe,gt)|0,g=g+Math.imul(fe,wt)|0,g=g+Math.imul(le,gt)|0,L=L+Math.imul(le,wt)|0,M=M+Math.imul(X,St)|0,g=g+Math.imul(X,ft)|0,g=g+Math.imul(re,St)|0,L=L+Math.imul(re,ft)|0,M=M+Math.imul(_e,_t)|0,g=g+Math.imul(_e,vt)|0,g=g+Math.imul(me,_t)|0,L=L+Math.imul(me,vt)|0,M=M+Math.imul(ie,Et)|0,g=g+Math.imul(ie,At)|0,g=g+Math.imul(he,Et)|0,L=L+Math.imul(he,At)|0;var di=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(di>>>26)|0,di&=67108863,M=Math.imul($,ee),g=Math.imul($,Z),g=g+Math.imul(G,ee)|0,L=Math.imul(G,Z),M=M+Math.imul(O,J)|0,g=g+Math.imul(O,se)|0,g=g+Math.imul(b,J)|0,L=L+Math.imul(b,se)|0,M=M+Math.imul(je,ce)|0,g=g+Math.imul(je,de)|0,g=g+Math.imul(ze,ce)|0,L=L+Math.imul(ze,de)|0,M=M+Math.imul(Ue,Te)|0,g=g+Math.imul(Ue,Ge)|0,g=g+Math.imul(Ce,Te)|0,L=L+Math.imul(Ce,Ge)|0,M=M+Math.imul(ve,Ye)|0,g=g+Math.imul(ve,st)|0,g=g+Math.imul(Be,Ye)|0,L=L+Math.imul(Be,st)|0,M=M+Math.imul(Y,gt)|0,g=g+Math.imul(Y,wt)|0,g=g+Math.imul(ae,gt)|0,L=L+Math.imul(ae,wt)|0,M=M+Math.imul(fe,St)|0,g=g+Math.imul(fe,ft)|0,g=g+Math.imul(le,St)|0,L=L+Math.imul(le,ft)|0,M=M+Math.imul(X,_t)|0,g=g+Math.imul(X,vt)|0,g=g+Math.imul(re,_t)|0,L=L+Math.imul(re,vt)|0,M=M+Math.imul(_e,Et)|0,g=g+Math.imul(_e,At)|0,g=g+Math.imul(me,Et)|0,L=L+Math.imul(me,At)|0;var Hi=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,M=Math.imul($,J),g=Math.imul($,se),g=g+Math.imul(G,J)|0,L=Math.imul(G,se),M=M+Math.imul(O,ce)|0,g=g+Math.imul(O,de)|0,g=g+Math.imul(b,ce)|0,L=L+Math.imul(b,de)|0,M=M+Math.imul(je,Te)|0,g=g+Math.imul(je,Ge)|0,g=g+Math.imul(ze,Te)|0,L=L+Math.imul(ze,Ge)|0,M=M+Math.imul(Ue,Ye)|0,g=g+Math.imul(Ue,st)|0,g=g+Math.imul(Ce,Ye)|0,L=L+Math.imul(Ce,st)|0,M=M+Math.imul(ve,gt)|0,g=g+Math.imul(ve,wt)|0,g=g+Math.imul(Be,gt)|0,L=L+Math.imul(Be,wt)|0,M=M+Math.imul(Y,St)|0,g=g+Math.imul(Y,ft)|0,g=g+Math.imul(ae,St)|0,L=L+Math.imul(ae,ft)|0,M=M+Math.imul(fe,_t)|0,g=g+Math.imul(fe,vt)|0,g=g+Math.imul(le,_t)|0,L=L+Math.imul(le,vt)|0,M=M+Math.imul(X,Et)|0,g=g+Math.imul(X,At)|0,g=g+Math.imul(re,Et)|0,L=L+Math.imul(re,At)|0;var Wo=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Wo>>>26)|0,Wo&=67108863,M=Math.imul($,ce),g=Math.imul($,de),g=g+Math.imul(G,ce)|0,L=Math.imul(G,de),M=M+Math.imul(O,Te)|0,g=g+Math.imul(O,Ge)|0,g=g+Math.imul(b,Te)|0,L=L+Math.imul(b,Ge)|0,M=M+Math.imul(je,Ye)|0,g=g+Math.imul(je,st)|0,g=g+Math.imul(ze,Ye)|0,L=L+Math.imul(ze,st)|0,M=M+Math.imul(Ue,gt)|0,g=g+Math.imul(Ue,wt)|0,g=g+Math.imul(Ce,gt)|0,L=L+Math.imul(Ce,wt)|0,M=M+Math.imul(ve,St)|0,g=g+Math.imul(ve,ft)|0,g=g+Math.imul(Be,St)|0,L=L+Math.imul(Be,ft)|0,M=M+Math.imul(Y,_t)|0,g=g+Math.imul(Y,vt)|0,g=g+Math.imul(ae,_t)|0,L=L+Math.imul(ae,vt)|0,M=M+Math.imul(fe,Et)|0,g=g+Math.imul(fe,At)|0,g=g+Math.imul(le,Et)|0,L=L+Math.imul(le,At)|0;var Bc=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Bc>>>26)|0,Bc&=67108863,M=Math.imul($,Te),g=Math.imul($,Ge),g=g+Math.imul(G,Te)|0,L=Math.imul(G,Ge),M=M+Math.imul(O,Ye)|0,g=g+Math.imul(O,st)|0,g=g+Math.imul(b,Ye)|0,L=L+Math.imul(b,st)|0,M=M+Math.imul(je,gt)|0,g=g+Math.imul(je,wt)|0,g=g+Math.imul(ze,gt)|0,L=L+Math.imul(ze,wt)|0,M=M+Math.imul(Ue,St)|0,g=g+Math.imul(Ue,ft)|0,g=g+Math.imul(Ce,St)|0,L=L+Math.imul(Ce,ft)|0,M=M+Math.imul(ve,_t)|0,g=g+Math.imul(ve,vt)|0,g=g+Math.imul(Be,_t)|0,L=L+Math.imul(Be,vt)|0,M=M+Math.imul(Y,Et)|0,g=g+Math.imul(Y,At)|0,g=g+Math.imul(ae,Et)|0,L=L+Math.imul(ae,At)|0;var Fc=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Fc>>>26)|0,Fc&=67108863,M=Math.imul($,Ye),g=Math.imul($,st),g=g+Math.imul(G,Ye)|0,L=Math.imul(G,st),M=M+Math.imul(O,gt)|0,g=g+Math.imul(O,wt)|0,g=g+Math.imul(b,gt)|0,L=L+Math.imul(b,wt)|0,M=M+Math.imul(je,St)|0,g=g+Math.imul(je,ft)|0,g=g+Math.imul(ze,St)|0,L=L+Math.imul(ze,ft)|0,M=M+Math.imul(Ue,_t)|0,g=g+Math.imul(Ue,vt)|0,g=g+Math.imul(Ce,_t)|0,L=L+Math.imul(Ce,vt)|0,M=M+Math.imul(ve,Et)|0,g=g+Math.imul(ve,At)|0,g=g+Math.imul(Be,Et)|0,L=L+Math.imul(Be,At)|0;var Uc=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Uc>>>26)|0,Uc&=67108863,M=Math.imul($,gt),g=Math.imul($,wt),g=g+Math.imul(G,gt)|0,L=Math.imul(G,wt),M=M+Math.imul(O,St)|0,g=g+Math.imul(O,ft)|0,g=g+Math.imul(b,St)|0,L=L+Math.imul(b,ft)|0,M=M+Math.imul(je,_t)|0,g=g+Math.imul(je,vt)|0,g=g+Math.imul(ze,_t)|0,L=L+Math.imul(ze,vt)|0,M=M+Math.imul(Ue,Et)|0,g=g+Math.imul(Ue,At)|0,g=g+Math.imul(Ce,Et)|0,L=L+Math.imul(Ce,At)|0;var Dc=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Dc>>>26)|0,Dc&=67108863,M=Math.imul($,St),g=Math.imul($,ft),g=g+Math.imul(G,St)|0,L=Math.imul(G,ft),M=M+Math.imul(O,_t)|0,g=g+Math.imul(O,vt)|0,g=g+Math.imul(b,_t)|0,L=L+Math.imul(b,vt)|0,M=M+Math.imul(je,Et)|0,g=g+Math.imul(je,At)|0,g=g+Math.imul(ze,Et)|0,L=L+Math.imul(ze,At)|0;var $c=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+($c>>>26)|0,$c&=67108863,M=Math.imul($,_t),g=Math.imul($,vt),g=g+Math.imul(G,_t)|0,L=Math.imul(G,vt),M=M+Math.imul(O,Et)|0,g=g+Math.imul(O,At)|0,g=g+Math.imul(b,Et)|0,L=L+Math.imul(b,At)|0;var Hc=(F+M|0)+((g&8191)<<13)|0;F=(L+(g>>>13)|0)+(Hc>>>26)|0,Hc&=67108863,M=Math.imul($,Et),g=Math.imul($,At),g=g+Math.imul(G,Et)|0,L=Math.imul(G,At);var zc=(F+M|0)+((g&8191)<<13)|0;return F=(L+(g>>>13)|0)+(zc>>>26)|0,zc&=67108863,P[0]=ke,P[1]=K,P[2]=ye,P[3]=Se,P[4]=Qe,P[5]=Mt,P[6]=Kt,P[7]=ot,P[8]=cn,P[9]=di,P[10]=Hi,P[11]=Wo,P[12]=Bc,P[13]=Fc,P[14]=Uc,P[15]=Dc,P[16]=$c,P[17]=Hc,P[18]=zc,F!==0&&(P[19]=F,S.length++),S},"comb10MulTo");Math.imul||(x=_);function w(A,d,m){m.negative=d.negative^A.negative,m.length=A.length+d.length;for(var S=0,R=0,k=0;k<m.length-1;k++){var P=R;R=0;for(var F=S&67108863,M=Math.min(k,d.length-1),g=Math.max(0,k-A.length+1);g<=M;g++){var L=k-g,V=A.words[L]|0,ie=d.words[g]|0,he=V*ie,ge=he&67108863;P=P+(he/67108864|0)|0,ge=ge+F|0,F=ge&67108863,P=P+(ge>>>26)|0,R+=P>>>26,P&=67108863}m.words[k]=F,S=P,P=R}return S!==0?m.words[k]=S:m.length--,m.strip()}o(w,"bigMulTo");function v(A,d,m){var S=new T;return S.mulp(A,d,m)}o(v,"jumboMulTo"),s.prototype.mulTo=o(function(d,m){var S,R=this.length+d.length;return this.length===10&&d.length===10?S=x(this,d,m):R<63?S=_(this,d,m):R<1024?S=w(this,d,m):S=v(this,d,m),S},"mulTo");function T(A,d){this.x=A,this.y=d}o(T,"FFTM"),T.prototype.makeRBT=o(function(d){for(var m=new Array(d),S=s.prototype._countBits(d)-1,R=0;R<d;R++)m[R]=this.revBin(R,S,d);return m},"makeRBT"),T.prototype.revBin=o(function(d,m,S){if(d===0||d===S-1)return d;for(var R=0,k=0;k<m;k++)R|=(d&1)<<m-k-1,d>>=1;return R},"revBin"),T.prototype.permute=o(function(d,m,S,R,k,P){for(var F=0;F<P;F++)R[F]=m[d[F]],k[F]=S[d[F]]},"permute"),T.prototype.transform=o(function(d,m,S,R,k,P){this.permute(P,d,m,S,R,k);for(var F=1;F<k;F<<=1)for(var M=F<<1,g=Math.cos(2*Math.PI/M),L=Math.sin(2*Math.PI/M),V=0;V<k;V+=M)for(var ie=g,he=L,ge=0;ge<F;ge++){var _e=S[V+ge],me=R[V+ge],te=S[V+ge+F],X=R[V+ge+F],re=ie*te-he*X;X=ie*X+he*te,te=re,S[V+ge]=_e+te,R[V+ge]=me+X,S[V+ge+F]=_e-te,R[V+ge+F]=me-X,ge!==M&&(re=g*ie-L*he,he=g*he+L*ie,ie=re)}},"transform"),T.prototype.guessLen13b=o(function(d,m){var S=Math.max(m,d)|1,R=S&1,k=0;for(S=S/2|0;S;S=S>>>1)k++;return 1<<k+1+R},"guessLen13b"),T.prototype.conjugate=o(function(d,m,S){if(!(S<=1))for(var R=0;R<S/2;R++){var k=d[R];d[R]=d[S-R-1],d[S-R-1]=k,k=m[R],m[R]=-m[S-R-1],m[S-R-1]=-k}},"conjugate"),T.prototype.normalize13b=o(function(d,m){for(var S=0,R=0;R<m/2;R++){var k=Math.round(d[2*R+1]/m)*8192+Math.round(d[2*R]/m)+S;d[R]=k&67108863,k<67108864?S=0:S=k/67108864|0}return d},"normalize13b"),T.prototype.convert13b=o(function(d,m,S,R){for(var k=0,P=0;P<m;P++)k=k+(d[P]|0),S[2*P]=k&8191,k=k>>>13,S[2*P+1]=k&8191,k=k>>>13;for(P=2*m;P<R;++P)S[P]=0;r(k===0),r((k&-8192)===0)},"convert13b"),T.prototype.stub=o(function(d){for(var m=new Array(d),S=0;S<d;S++)m[S]=0;return m},"stub"),T.prototype.mulp=o(function(d,m,S){var R=2*this.guessLen13b(d.length,m.length),k=this.makeRBT(R),P=this.stub(R),F=new Array(R),M=new Array(R),g=new Array(R),L=new Array(R),V=new Array(R),ie=new Array(R),he=S.words;he.length=R,this.convert13b(d.words,d.length,F,R),this.convert13b(m.words,m.length,L,R),this.transform(F,P,M,g,R,k),this.transform(L,P,V,ie,R,k);for(var ge=0;ge<R;ge++){var _e=M[ge]*V[ge]-g[ge]*ie[ge];g[ge]=M[ge]*ie[ge]+g[ge]*V[ge],M[ge]=_e}return this.conjugate(M,g,R),this.transform(M,g,he,P,R,k),this.conjugate(he,P,R),this.normalize13b(he,R),S.negative=d.negative^m.negative,S.length=d.length+m.length,S.strip()},"mulp"),s.prototype.mul=o(function(d){var m=new s(null);return m.words=new Array(this.length+d.length),this.mulTo(d,m)},"mul"),s.prototype.mulf=o(function(d){var m=new s(null);return m.words=new Array(this.length+d.length),v(this,d,m)},"mulf"),s.prototype.imul=o(function(d){return this.clone().mulTo(d,this)},"imul"),s.prototype.imuln=o(function(d){r(typeof d=="number"),r(d<67108864);for(var m=0,S=0;S<this.length;S++){var R=(this.words[S]|0)*d,k=(R&67108863)+(m&67108863);m>>=26,m+=R/67108864|0,m+=k>>>26,this.words[S]=k&67108863}return m!==0&&(this.words[S]=m,this.length++),this},"imuln"),s.prototype.muln=o(function(d){return this.clone().imuln(d)},"muln"),s.prototype.sqr=o(function(){return this.mul(this)},"sqr"),s.prototype.isqr=o(function(){return this.imul(this.clone())},"isqr"),s.prototype.pow=o(function(d){var m=y(d);if(m.length===0)return new s(1);for(var S=this,R=0;R<m.length&&m[R]===0;R++,S=S.sqr());if(++R<m.length)for(var k=S.sqr();R<m.length;R++,k=k.sqr())m[R]!==0&&(S=S.mul(k));return S},"pow"),s.prototype.iushln=o(function(d){r(typeof d=="number"&&d>=0);var m=d%26,S=(d-m)/26,R=67108863>>>26-m<<26-m,k;if(m!==0){var P=0;for(k=0;k<this.length;k++){var F=this.words[k]&R,M=(this.words[k]|0)-F<<m;this.words[k]=M|P,P=F>>>26-m}P&&(this.words[k]=P,this.length++)}if(S!==0){for(k=this.length-1;k>=0;k--)this.words[k+S]=this.words[k];for(k=0;k<S;k++)this.words[k]=0;this.length+=S}return this.strip()},"iushln"),s.prototype.ishln=o(function(d){return r(this.negative===0),this.iushln(d)},"ishln"),s.prototype.iushrn=o(function(d,m,S){r(typeof d=="number"&&d>=0);var R;m?R=(m-m%26)/26:R=0;var k=d%26,P=Math.min((d-k)/26,this.length),F=67108863^67108863>>>k<<k,M=S;if(R-=P,R=Math.max(0,R),M){for(var g=0;g<P;g++)M.words[g]=this.words[g];M.length=P}if(P!==0)if(this.length>P)for(this.length-=P,g=0;g<this.length;g++)this.words[g]=this.words[g+P];else this.words[0]=0,this.length=1;var L=0;for(g=this.length-1;g>=0&&(L!==0||g>=R);g--){var V=this.words[g]|0;this.words[g]=L<<26-k|V>>>k,L=V&F}return M&&L!==0&&(M.words[M.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),s.prototype.ishrn=o(function(d,m,S){return r(this.negative===0),this.iushrn(d,m,S)},"ishrn"),s.prototype.shln=o(function(d){return this.clone().ishln(d)},"shln"),s.prototype.ushln=o(function(d){return this.clone().iushln(d)},"ushln"),s.prototype.shrn=o(function(d){return this.clone().ishrn(d)},"shrn"),s.prototype.ushrn=o(function(d){return this.clone().iushrn(d)},"ushrn"),s.prototype.testn=o(function(d){r(typeof d=="number"&&d>=0);var m=d%26,S=(d-m)/26,R=1<<m;if(this.length<=S)return!1;var k=this.words[S];return!!(k&R)},"testn"),s.prototype.imaskn=o(function(d){r(typeof d=="number"&&d>=0);var m=d%26,S=(d-m)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=S)return this;if(m!==0&&S++,this.length=Math.min(S,this.length),m!==0){var R=67108863^67108863>>>m<<m;this.words[this.length-1]&=R}return this.strip()},"imaskn"),s.prototype.maskn=o(function(d){return this.clone().imaskn(d)},"maskn"),s.prototype.iaddn=o(function(d){return r(typeof d=="number"),r(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},"iaddn"),s.prototype._iaddn=o(function(d){this.words[0]+=d;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},"_iaddn"),s.prototype.isubn=o(function(d){if(r(typeof d=="number"),r(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this.strip()},"isubn"),s.prototype.addn=o(function(d){return this.clone().iaddn(d)},"addn"),s.prototype.subn=o(function(d){return this.clone().isubn(d)},"subn"),s.prototype.iabs=o(function(){return this.negative=0,this},"iabs"),s.prototype.abs=o(function(){return this.clone().iabs()},"abs"),s.prototype._ishlnsubmul=o(function(d,m,S){var R=d.length+S,k;this._expand(R);var P,F=0;for(k=0;k<d.length;k++){P=(this.words[k+S]|0)+F;var M=(d.words[k]|0)*m;P-=M&67108863,F=(P>>26)-(M/67108864|0),this.words[k+S]=P&67108863}for(;k<this.length-S;k++)P=(this.words[k+S]|0)+F,F=P>>26,this.words[k+S]=P&67108863;if(F===0)return this.strip();for(r(F===-1),F=0,k=0;k<this.length;k++)P=-(this.words[k]|0)+F,F=P>>26,this.words[k]=P&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),s.prototype._wordDiv=o(function(d,m){var S=this.length-d.length,R=this.clone(),k=d,P=k.words[k.length-1]|0,F=this._countBits(P);S=26-F,S!==0&&(k=k.ushln(S),R.iushln(S),P=k.words[k.length-1]|0);var M=R.length-k.length,g;if(m!=="mod"){g=new s(null),g.length=M+1,g.words=new Array(g.length);for(var L=0;L<g.length;L++)g.words[L]=0}var V=R.clone()._ishlnsubmul(k,1,M);V.negative===0&&(R=V,g&&(g.words[M]=1));for(var ie=M-1;ie>=0;ie--){var he=(R.words[k.length+ie]|0)*67108864+(R.words[k.length+ie-1]|0);for(he=Math.min(he/P|0,67108863),R._ishlnsubmul(k,he,ie);R.negative!==0;)he--,R.negative=0,R._ishlnsubmul(k,1,ie),R.isZero()||(R.negative^=1);g&&(g.words[ie]=he)}return g&&g.strip(),R.strip(),m!=="div"&&S!==0&&R.iushrn(S),{div:g||null,mod:R}},"_wordDiv"),s.prototype.divmod=o(function(d,m,S){if(r(!d.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var R,k,P;return this.negative!==0&&d.negative===0?(P=this.neg().divmod(d,m),m!=="mod"&&(R=P.div.neg()),m!=="div"&&(k=P.mod.neg(),S&&k.negative!==0&&k.iadd(d)),{div:R,mod:k}):this.negative===0&&d.negative!==0?(P=this.divmod(d.neg(),m),m!=="mod"&&(R=P.div.neg()),{div:R,mod:P.mod}):this.negative&d.negative?(P=this.neg().divmod(d.neg(),m),m!=="div"&&(k=P.mod.neg(),S&&k.negative!==0&&k.isub(d)),{div:P.div,mod:k}):d.length>this.length||this.cmp(d)<0?{div:new s(0),mod:this}:d.length===1?m==="div"?{div:this.divn(d.words[0]),mod:null}:m==="mod"?{div:null,mod:new s(this.modn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new s(this.modn(d.words[0]))}:this._wordDiv(d,m)},"divmod"),s.prototype.div=o(function(d){return this.divmod(d,"div",!1).div},"div"),s.prototype.mod=o(function(d){return this.divmod(d,"mod",!1).mod},"mod"),s.prototype.umod=o(function(d){return this.divmod(d,"mod",!0).mod},"umod"),s.prototype.divRound=o(function(d){var m=this.divmod(d);if(m.mod.isZero())return m.div;var S=m.div.negative!==0?m.mod.isub(d):m.mod,R=d.ushrn(1),k=d.andln(1),P=S.cmp(R);return P<0||k===1&&P===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},"divRound"),s.prototype.modn=o(function(d){r(d<=67108863);for(var m=(1<<26)%d,S=0,R=this.length-1;R>=0;R--)S=(m*S+(this.words[R]|0))%d;return S},"modn"),s.prototype.idivn=o(function(d){r(d<=67108863);for(var m=0,S=this.length-1;S>=0;S--){var R=(this.words[S]|0)+m*67108864;this.words[S]=R/d|0,m=R%d}return this.strip()},"idivn"),s.prototype.divn=o(function(d){return this.clone().idivn(d)},"divn"),s.prototype.egcd=o(function(d){r(d.negative===0),r(!d.isZero());var m=this,S=d.clone();m.negative!==0?m=m.umod(d):m=m.clone();for(var R=new s(1),k=new s(0),P=new s(0),F=new s(1),M=0;m.isEven()&&S.isEven();)m.iushrn(1),S.iushrn(1),++M;for(var g=S.clone(),L=m.clone();!m.isZero();){for(var V=0,ie=1;!(m.words[0]&ie)&&V<26;++V,ie<<=1);if(V>0)for(m.iushrn(V);V-- >0;)(R.isOdd()||k.isOdd())&&(R.iadd(g),k.isub(L)),R.iushrn(1),k.iushrn(1);for(var he=0,ge=1;!(S.words[0]&ge)&&he<26;++he,ge<<=1);if(he>0)for(S.iushrn(he);he-- >0;)(P.isOdd()||F.isOdd())&&(P.iadd(g),F.isub(L)),P.iushrn(1),F.iushrn(1);m.cmp(S)>=0?(m.isub(S),R.isub(P),k.isub(F)):(S.isub(m),P.isub(R),F.isub(k))}return{a:P,b:F,gcd:S.iushln(M)}},"egcd"),s.prototype._invmp=o(function(d){r(d.negative===0),r(!d.isZero());var m=this,S=d.clone();m.negative!==0?m=m.umod(d):m=m.clone();for(var R=new s(1),k=new s(0),P=S.clone();m.cmpn(1)>0&&S.cmpn(1)>0;){for(var F=0,M=1;!(m.words[0]&M)&&F<26;++F,M<<=1);if(F>0)for(m.iushrn(F);F-- >0;)R.isOdd()&&R.iadd(P),R.iushrn(1);for(var g=0,L=1;!(S.words[0]&L)&&g<26;++g,L<<=1);if(g>0)for(S.iushrn(g);g-- >0;)k.isOdd()&&k.iadd(P),k.iushrn(1);m.cmp(S)>=0?(m.isub(S),R.isub(k)):(S.isub(m),k.isub(R))}var V;return m.cmpn(1)===0?V=R:V=k,V.cmpn(0)<0&&V.iadd(d),V},"_invmp"),s.prototype.gcd=o(function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var m=this.clone(),S=d.clone();m.negative=0,S.negative=0;for(var R=0;m.isEven()&&S.isEven();R++)m.iushrn(1),S.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;S.isEven();)S.iushrn(1);var k=m.cmp(S);if(k<0){var P=m;m=S,S=P}else if(k===0||S.cmpn(1)===0)break;m.isub(S)}while(!0);return S.iushln(R)},"gcd"),s.prototype.invm=o(function(d){return this.egcd(d).a.umod(d)},"invm"),s.prototype.isEven=o(function(){return(this.words[0]&1)===0},"isEven"),s.prototype.isOdd=o(function(){return(this.words[0]&1)===1},"isOdd"),s.prototype.andln=o(function(d){return this.words[0]&d},"andln"),s.prototype.bincn=o(function(d){r(typeof d=="number");var m=d%26,S=(d-m)/26,R=1<<m;if(this.length<=S)return this._expand(S+1),this.words[S]|=R,this;for(var k=R,P=S;k!==0&&P<this.length;P++){var F=this.words[P]|0;F+=k,k=F>>>26,F&=67108863,this.words[P]=F}return k!==0&&(this.words[P]=k,this.length++),this},"bincn"),s.prototype.isZero=o(function(){return this.length===1&&this.words[0]===0},"isZero"),s.prototype.cmpn=o(function(d){var m=d<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this.strip();var S;if(this.length>1)S=1;else{m&&(d=-d),r(d<=67108863,"Number is too big");var R=this.words[0]|0;S=R===d?0:R<d?-1:1}return this.negative!==0?-S|0:S},"cmpn"),s.prototype.cmp=o(function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var m=this.ucmp(d);return this.negative!==0?-m|0:m},"cmp"),s.prototype.ucmp=o(function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var m=0,S=this.length-1;S>=0;S--){var R=this.words[S]|0,k=d.words[S]|0;if(R!==k){R<k?m=-1:R>k&&(m=1);break}}return m},"ucmp"),s.prototype.gtn=o(function(d){return this.cmpn(d)===1},"gtn"),s.prototype.gt=o(function(d){return this.cmp(d)===1},"gt"),s.prototype.gten=o(function(d){return this.cmpn(d)>=0},"gten"),s.prototype.gte=o(function(d){return this.cmp(d)>=0},"gte"),s.prototype.ltn=o(function(d){return this.cmpn(d)===-1},"ltn"),s.prototype.lt=o(function(d){return this.cmp(d)===-1},"lt"),s.prototype.lten=o(function(d){return this.cmpn(d)<=0},"lten"),s.prototype.lte=o(function(d){return this.cmp(d)<=0},"lte"),s.prototype.eqn=o(function(d){return this.cmpn(d)===0},"eqn"),s.prototype.eq=o(function(d){return this.cmp(d)===0},"eq"),s.red=o(function(d){return new B(d)},"red"),s.prototype.toRed=o(function(d){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},"toRed"),s.prototype.fromRed=o(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),s.prototype._forceRed=o(function(d){return this.red=d,this},"_forceRed"),s.prototype.forceRed=o(function(d){return r(!this.red,"Already a number in reduction context"),this._forceRed(d)},"forceRed"),s.prototype.redAdd=o(function(d){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},"redAdd"),s.prototype.redIAdd=o(function(d){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},"redIAdd"),s.prototype.redSub=o(function(d){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},"redSub"),s.prototype.redISub=o(function(d){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},"redISub"),s.prototype.redShl=o(function(d){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},"redShl"),s.prototype.redMul=o(function(d){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},"redMul"),s.prototype.redIMul=o(function(d){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},"redIMul"),s.prototype.redSqr=o(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),s.prototype.redISqr=o(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),s.prototype.redSqrt=o(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),s.prototype.redInvm=o(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),s.prototype.redNeg=o(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),s.prototype.redPow=o(function(d){return r(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)},"redPow");var N={k256:null,p224:null,p192:null,p25519:null};function I(A,d){this.name=A,this.p=new s(d,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}o(I,"MPrime"),I.prototype._tmp=o(function(){var d=new s(null);return d.words=new Array(Math.ceil(this.n/13)),d},"_tmp"),I.prototype.ireduce=o(function(d){var m=d,S;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),S=m.bitLength();while(S>this.n);var R=S<this.n?-1:m.ucmp(this.p);return R===0?(m.words[0]=0,m.length=1):R>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},"ireduce"),I.prototype.split=o(function(d,m){d.iushrn(this.n,0,m)},"split"),I.prototype.imulK=o(function(d){return d.imul(this.k)},"imulK");function C(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(C,"K256"),i(C,I),C.prototype.split=o(function(d,m){for(var S=4194303,R=Math.min(d.length,9),k=0;k<R;k++)m.words[k]=d.words[k];if(m.length=R,d.length<=9){d.words[0]=0,d.length=1;return}var P=d.words[9];for(m.words[m.length++]=P&S,k=10;k<d.length;k++){var F=d.words[k]|0;d.words[k-10]=(F&S)<<4|P>>>22,P=F}P>>>=22,d.words[k-10]=P,P===0&&d.length>10?d.length-=10:d.length-=9},"split"),C.prototype.imulK=o(function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var m=0,S=0;S<d.length;S++){var R=d.words[S]|0;m+=R*977,d.words[S]=m&67108863,m=R*64+(m/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d},"imulK");function D(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(D,"P224"),i(D,I);function U(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(U,"P192"),i(U,I);function H(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(H,"P25519"),i(H,I),H.prototype.imulK=o(function(d){for(var m=0,S=0;S<d.length;S++){var R=(d.words[S]|0)*19+m,k=R&67108863;R>>>=26,d.words[S]=k,m=R}return m!==0&&(d.words[d.length++]=m),d},"imulK"),s._prime=o(function(d){if(N[d])return N[d];var m;if(d==="k256")m=new C;else if(d==="p224")m=new D;else if(d==="p192")m=new U;else if(d==="p25519")m=new H;else throw new Error("Unknown prime "+d);return N[d]=m,m},"prime");function B(A){if(typeof A=="string"){var d=s._prime(A);this.m=d.p,this.prime=d}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}o(B,"Red"),B.prototype._verify1=o(function(d){r(d.negative===0,"red works only with positives"),r(d.red,"red works only with red numbers")},"_verify1"),B.prototype._verify2=o(function(d,m){r((d.negative|m.negative)===0,"red works only with positives"),r(d.red&&d.red===m.red,"red works only with red numbers")},"_verify2"),B.prototype.imod=o(function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):d.umod(this.m)._forceRed(this)},"imod"),B.prototype.neg=o(function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},"neg"),B.prototype.add=o(function(d,m){this._verify2(d,m);var S=d.add(m);return S.cmp(this.m)>=0&&S.isub(this.m),S._forceRed(this)},"add"),B.prototype.iadd=o(function(d,m){this._verify2(d,m);var S=d.iadd(m);return S.cmp(this.m)>=0&&S.isub(this.m),S},"iadd"),B.prototype.sub=o(function(d,m){this._verify2(d,m);var S=d.sub(m);return S.cmpn(0)<0&&S.iadd(this.m),S._forceRed(this)},"sub"),B.prototype.isub=o(function(d,m){this._verify2(d,m);var S=d.isub(m);return S.cmpn(0)<0&&S.iadd(this.m),S},"isub"),B.prototype.shl=o(function(d,m){return this._verify1(d),this.imod(d.ushln(m))},"shl"),B.prototype.imul=o(function(d,m){return this._verify2(d,m),this.imod(d.imul(m))},"imul"),B.prototype.mul=o(function(d,m){return this._verify2(d,m),this.imod(d.mul(m))},"mul"),B.prototype.isqr=o(function(d){return this.imul(d,d.clone())},"isqr"),B.prototype.sqr=o(function(d){return this.mul(d,d)},"sqr"),B.prototype.sqrt=o(function(d){if(d.isZero())return d.clone();var m=this.m.andln(3);if(r(m%2===1),m===3){var S=this.m.add(new s(1)).iushrn(2);return this.pow(d,S)}for(var R=this.m.subn(1),k=0;!R.isZero()&&R.andln(1)===0;)k++,R.iushrn(1);r(!R.isZero());var P=new s(1).toRed(this),F=P.redNeg(),M=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new s(2*g*g).toRed(this);this.pow(g,M).cmp(F)!==0;)g.redIAdd(F);for(var L=this.pow(g,R),V=this.pow(d,R.addn(1).iushrn(1)),ie=this.pow(d,R),he=k;ie.cmp(P)!==0;){for(var ge=ie,_e=0;ge.cmp(P)!==0;_e++)ge=ge.redSqr();r(_e<he);var me=this.pow(L,new s(1).iushln(he-_e-1));V=V.redMul(me),L=me.redSqr(),ie=ie.redMul(L),he=_e}return V},"sqrt"),B.prototype.invm=o(function(d){var m=d._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},"invm"),B.prototype.pow=o(function(d,m){if(m.isZero())return new s(1).toRed(this);if(m.cmpn(1)===0)return d.clone();var S=4,R=new Array(1<<S);R[0]=new s(1).toRed(this),R[1]=d;for(var k=2;k<R.length;k++)R[k]=this.mul(R[k-1],d);var P=R[0],F=0,M=0,g=m.bitLength()%26;for(g===0&&(g=26),k=m.length-1;k>=0;k--){for(var L=m.words[k],V=g-1;V>=0;V--){var ie=L>>V&1;if(P!==R[0]&&(P=this.sqr(P)),ie===0&&F===0){M=0;continue}F<<=1,F|=ie,M++,!(M!==S&&(k!==0||V!==0))&&(P=this.mul(P,R[F]),M=0,F=0)}g=26}return P},"pow"),B.prototype.convertTo=o(function(d){var m=d.umod(this.m);return m===d?m.clone():m},"convertTo"),B.prototype.convertFrom=o(function(d){var m=d.clone();return m.red=null,m},"convertFrom"),s.mont=o(function(d){return new z(d)},"mont");function z(A){B.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(z,"Mont"),i(z,B),z.prototype.convertTo=o(function(d){return this.imod(d.ushln(this.shift))},"convertTo"),z.prototype.convertFrom=o(function(d){var m=this.imod(d.mul(this.rinv));return m.red=null,m},"convertFrom"),z.prototype.imul=o(function(d,m){if(d.isZero()||m.isZero())return d.words[0]=0,d.length=1,d;var S=d.imul(m),R=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=S.isub(R).iushrn(this.shift),P=k;return k.cmp(this.m)>=0?P=k.isub(this.m):k.cmpn(0)<0&&(P=k.iadd(this.m)),P._forceRed(this)},"imul"),z.prototype.mul=o(function(d,m){if(d.isZero()||m.isZero())return new s(0)._forceRed(this);var S=d.mul(m),R=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=S.isub(R).iushrn(this.shift),P=k;return k.cmp(this.m)>=0?P=k.isub(this.m):k.cmpn(0)<0&&(P=k.iadd(this.m)),P._forceRed(this)},"mul"),z.prototype.invm=o(function(d){var m=this.imod(d._invmp(this.m).mul(this.r2));return m._forceRed(this)},"invm")})(e,e3)})(Xf);var Qi=Xf.exports;new Qi.BN(1e3,10),new Qi.BN(1e6,10),new Qi.BN(1e9,10),new Qi.BN(1e12,10);new Qi.BN("2100000000000000000",10);new Qi.BN(1e11,10);var wp={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27};for(var aa=0,Ol=Object.keys(wp);aa<Ol.length;aa++)Ol[aa],wp[Ol[aa]].toString();function Uy(e){return $o.Buffer.from(e).toString("base64")}o(Uy,"encodeUint8toBase64");function h3(e){return $o.Buffer.from(e,"base64")}o(h3,"encodeBase64toUint8");function p3(e){var t=$o.Buffer.from(g3(e),"base64").toString(),n=JSON.parse(t);return n}o(p3,"encodeBase64ToJson");function g3(e){return e.replace(/-/g,"+").replace(/_/g,"/")}o(g3,"base64urlToBase64");/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dy=BigInt(0),Nc=BigInt(1),m3=BigInt(2);function Ci(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}o(Ci,"isBytes$2");function Ho(e){if(!Ci(e))throw new Error("Uint8Array expected")}o(Ho,"abytes");const y3=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function oi(e){Ho(e);let t="";for(let n=0;n<e.length;n++)t+=y3[e[n]];return t}o(oi,"bytesToHex$1");function $y(e){const t=e.toString(16);return t.length&1?`0${t}`:t}o($y,"numberToHexUnpadded");function Ic(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}o(Ic,"hexToNumber$1");const yr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function _p(e){if(e>=yr._0&&e<=yr._9)return e-yr._0;if(e>=yr._A&&e<=yr._F)return e-(yr._A-10);if(e>=yr._a&&e<=yr._f)return e-(yr._a-10)}o(_p,"asciiToBase16$1");function hs(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const a=_p(e.charCodeAt(s)),c=_p(e.charCodeAt(s+1));if(a===void 0||c===void 0){const u=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=a*16+c}return r}o(hs,"hexToBytes$1");function Ai(e){return Ic(oi(e))}o(Ai,"bytesToNumberBE");function ed(e){return Ho(e),Ic(oi(Uint8Array.from(e).reverse()))}o(ed,"bytesToNumberLE");function ps(e,t){return hs(e.toString(16).padStart(t*2,"0"))}o(ps,"numberToBytesBE");function td(e,t){return ps(e,t).reverse()}o(td,"numberToBytesLE");function b3(e){return hs($y(e))}o(b3,"numberToVarBytesBE");function Fn(e,t,n){let r;if(typeof t=="string")try{r=hs(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(Ci(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}o(Fn,"ensureBytes");function fo(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Ho(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}o(fo,"concatBytes$1");function w3(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}o(w3,"equalBytes");function _3(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}o(_3,"utf8ToBytes$1");function v3(e){let t;for(t=0;e>Dy;e>>=Nc,t+=1);return t}o(v3,"bitLen");function E3(e,t){return e>>BigInt(t)&Nc}o(E3,"bitGet");function x3(e,t,n){return e|(n?Nc:Dy)<<BigInt(t)}o(x3,"bitSet");const nd=o(e=>(m3<<BigInt(e-1))-Nc,"bitMask"),Cl=o(e=>new Uint8Array(e),"u8n"),vp=o(e=>Uint8Array.from(e),"u8fr");function Hy(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Cl(e),i=Cl(e),s=0;const a=o(()=>{r.fill(1),i.fill(0),s=0},"reset"),c=o((...h)=>n(i,r,...h),"h"),u=o((h=Cl())=>{i=c(vp([0]),h),r=c(),h.length!==0&&(i=c(vp([1]),h),r=c())},"reseed"),l=o(()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const p=[];for(;h<t;){r=c();const y=r.slice();p.push(y),h+=r.length}return fo(...p)},"gen");return o((h,p)=>{a(),u(h);let y;for(;!(y=p(l()));)u();return a(),y},"genUntil")}o(Hy,"createHmacDrbg");const S3={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Ci(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function zo(e,t,n={}){const r=o((i,s,a)=>{const c=S3[s];if(typeof c!="function")throw new Error(`Invalid validator "${s}", expected function`);const u=e[i];if(!(a&&u===void 0)&&!c(u,e))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${s}`)},"checkField");for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}o(zo,"validateObject");const A3=Object.freeze(Object.defineProperty({__proto__:null,abytes:Ho,bitGet:E3,bitLen:v3,bitMask:nd,bitSet:x3,bytesToHex:oi,bytesToNumberBE:Ai,bytesToNumberLE:ed,concatBytes:fo,createHmacDrbg:Hy,ensureBytes:Fn,equalBytes:w3,hexToBytes:hs,hexToNumber:Ic,isBytes:Ci,numberToBytesBE:ps,numberToBytesLE:td,numberToHexUnpadded:$y,numberToVarBytesBE:b3,utf8ToBytes:_3,validateObject:zo},Symbol.toStringTag,{value:"Module"}));function Ep(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}o(Ep,"number$1");function M3(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}o(M3,"isBytes$1");function sr(e,...t){if(!M3(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}o(sr,"bytes");function k3(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ep(e.outputLen),Ep(e.blockLen)}o(k3,"hash");function ja(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}o(ja,"exists");function T3(e,t){sr(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}o(T3,"output");const Bl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ts=o(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView"),Jn=o((e,t)=>e<<32-t|e>>>t,"rotr"),ca=o((e,t)=>e<<t|e>>>32-t>>>0,"rotl");new Uint8Array(new Uint32Array([287454020]).buffer)[0];const N3=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function I3(e){sr(e);let t="";for(let n=0;n<e.length;n++)t+=N3[e[n]];return t}o(I3,"bytesToHex");const br={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function xp(e){if(e>=br._0&&e<=br._9)return e-br._0;if(e>=br._A&&e<=br._F)return e-(br._A-10);if(e>=br._a&&e<=br._f)return e-(br._a-10)}o(xp,"asciiToBase16");function R3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const a=xp(e.charCodeAt(s)),c=xp(e.charCodeAt(s+1));if(a===void 0||c===void 0){const u=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=a*16+c}return r}o(R3,"hexToBytes");function zy(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}o(zy,"utf8ToBytes");function rd(e){return typeof e=="string"&&(e=zy(e)),sr(e),e}o(rd,"toBytes");function js(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];sr(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}o(js,"concatBytes");const md=class md{clone(){return this._cloneInto()}};o(md,"Hash");let Ga=md;function id(e){const t=o(r=>e().update(rd(r)).digest(),"hashC"),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}o(id,"wrapConstructor");function Zy(e=32){if(Bl&&typeof Bl.getRandomValues=="function")return Bl.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}o(Zy,"randomBytes");function L3(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),c=Number(n&s),u=r?4:0,l=r?0:4;e.setUint32(t+u,a,r),e.setUint32(t+l,c,r)}o(L3,"setBigUint64");const P3=o((e,t,n)=>e&t^~e&n,"Chi"),O3=o((e,t,n)=>e&t^e&n^t&n,"Maj"),yd=class yd extends Ga{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ts(this.buffer)}update(t){ja(this);const{view:n,buffer:r,blockLen:i}=this;t=rd(t);const s=t.length;for(let a=0;a<s;){const c=Math.min(i-this.pos,s-a);if(c===i){const u=ts(t);for(;i<=s-a;a+=i)this.process(u,a);continue}r.set(t.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ja(this),T3(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let h=a;h<i;h++)n[h]=0;L3(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=ts(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,f=this.get();if(l>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)c.setUint32(4*h,f[h],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:a,pos:c}=this;return t.length=i,t.pos=c,t.finished=s,t.destroyed=a,i%n&&t.buffer.set(r),t}};o(yd,"HashMD");let ho=yd;const C3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$r=new Uint32Array(64),bd=class bd extends ho{constructor(){super(64,32,8,!1),this.A=Dr[0]|0,this.B=Dr[1]|0,this.C=Dr[2]|0,this.D=Dr[3]|0,this.E=Dr[4]|0,this.F=Dr[5]|0,this.G=Dr[6]|0,this.H=Dr[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:a,G:c,H:u}=this;return[t,n,r,i,s,a,c,u]}set(t,n,r,i,s,a,c,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=c|0,this.H=u|0}process(t,n){for(let h=0;h<16;h++,n+=4)$r[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const p=$r[h-15],y=$r[h-2],_=Jn(p,7)^Jn(p,18)^p>>>3,x=Jn(y,17)^Jn(y,19)^y>>>10;$r[h]=x+$r[h-7]+_+$r[h-16]|0}let{A:r,B:i,C:s,D:a,E:c,F:u,G:l,H:f}=this;for(let h=0;h<64;h++){const p=Jn(c,6)^Jn(c,11)^Jn(c,25),y=f+p+P3(c,u,l)+C3[h]+$r[h]|0,x=(Jn(r,2)^Jn(r,13)^Jn(r,22))+O3(r,i,s)|0;f=l,l=u,u=c,c=a+y|0,a=s,s=i,i=r,r=y+x|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,c=c+this.E|0,u=u+this.F|0,l=l+this.G|0,f=f+this.H|0,this.set(r,i,s,a,c,u,l,f)}roundClean(){$r.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};o(bd,"SHA256");let zu=bd;const gs=id(()=>new zu);var qa=globalThis&&globalThis.__assign||function(){return qa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qa.apply(this,arguments)},Sp=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function Wy(e,t){var n=[];t&&(n.push.apply(n,F3(e,t)),e=e-n.reduce(function(s,a){return s+a},0));for(var r=0;r<32;r++){var i=1<<r;e&i&&n.push(Math.pow(2,r))}return n}o(Wy,"splitAmount");function B3(e){return e&&!(e&e-1)}o(B3,"isPowerOfTwo");function F3(e,t){var n=[],r=0;return t.forEach(function(i){if(!B3(i.amount))throw new Error("Provided amount preferences contain non-power-of-2 numbers. Use only ^2 numbers");for(var s=1;s<=i.count;s++){if(r+=i.amount,r>e)return;n.push(i.amount)}}),n}o(F3,"getPreference");function U3(e){var t=Wy(e);return t.map(function(n){return{amount:n,count:1}})}o(U3,"getDefaultAmountPreference");function sd(e){return D3(oi(e))}o(sd,"bytesToNumber$1");function D3(e){return BigInt("0x".concat(e))}o(D3,"hexToNumber");function Ap(e){var t=["web+cashu://","cashu://","cashu:","cashuA"];return t.forEach(function(n){e.startsWith(n)&&(e=e.slice(n.length))}),$3(e)}o(Ap,"getDecodedToken");function $3(e){var t,n,r=p3(e);return"token"in r?r:Array.isArray(r)?{token:[{proofs:r,mint:""}]}:{token:[{proofs:r.proofs,mint:(n=(t=r?.mints[0])===null||t===void 0?void 0:t.url)!==null&&n!==void 0?n:""}]}}o($3,"handleTokens");function la(e){var t=Object.entries(e).sort(function(r,i){return+r[0]-+i[0]}).map(function(r){var i=r[1];return i}).join(""),n=gs(new TextEncoder().encode(t));return $o.Buffer.from(n).toString("base64").slice(0,12)}o(la,"deriveKeysetId");function H3(e){for(var t,n,r={},i=0,s=e.token;i<s.length;i++){var a=s[i];if(!(!(!((n=a?.proofs)===null||n===void 0)&&n.length)||!a?.mint)){if(r[a.mint]){(t=r[a.mint].proofs).push.apply(t,Sp([],a.proofs,!0));continue}r[a.mint]={mint:a.mint,proofs:Sp([],a.proofs,!0)}}}return{memo:e?.memo,token:Object.values(r).map(function(c){return qa(qa({},c),{proofs:z3(c.proofs)})})}}o(H3,"cleanToken");function z3(e){return e.sort(function(t,n){return t.id.localeCompare(n.id)})}o(z3,"sortProofsById");function gi(e){return typeof e=="object"}o(gi,"isObj");function Z3(e){if(gi(e)){if("error"in e&&e.error)throw new Error(e.error);if("detail"in e&&e.detail)throw new Error(e.detail)}}o(Z3,"checkResponse");function On(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map(function(n){return n.replace(/(^\/+|\/+$)/g,"")}).join("/")}o(On,"joinUrls");var Mi=globalThis&&globalThis.__assign||function(){return Mi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Mi.apply(this,arguments)},jy=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return o(i,"adopt"),new(n||(n=Promise))(function(s,a){function c(f){try{l(r.next(f))}catch(h){a(h)}}o(c,"fulfilled");function u(f){try{l(r.throw(f))}catch(h){a(h)}}o(u,"rejected");function l(f){f.done?s(f.value):i(f.value).then(c,u)}o(l,"step"),l((r=r.apply(e,t||[])).next())})},Gy=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(f){l=[6,f],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},W3=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},j3={};function G3(e){var t=e.endpoint,n=e.requestBody,r=e.headers,i=W3(e,["endpoint","requestBody","headers"]);return jy(this,void 0,void 0,function(){var s,a,c,u,l,f,h;return Gy(this,function(p){switch(p.label){case 0:return s=n?JSON.stringify(n):void 0,a=Mi(Mi({Accept:"application/json, text/plain, */*"},s?{"Content-Type":"application/json"}:void 0),r),[4,fetch(t,Mi({body:s,headers:a},i))];case 1:return c=p.sent(),c.ok?[3,3]:[4,c.json()];case 2:throw u=p.sent(),l=u.error,f=u.detail,h=l||f||"bad response",new Error(h);case 3:return[2,c]}})})}o(G3,"_request");function Yn(e){return jy(this,void 0,void 0,function(){var t,n;return Gy(this,function(r){switch(r.label){case 0:return[4,G3(Mi(Mi({},e),j3))];case 1:return t=r.sent(),[4,t.json().catch(function(){return{error:"bad response"}})];case 2:return n=r.sent(),Z3(n),[2,n]}})})}o(Yn,"request");var It=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return o(i,"adopt"),new(n||(n=Promise))(function(s,a){function c(f){try{l(r.next(f))}catch(h){a(h)}}o(c,"fulfilled");function u(f){try{l(r.throw(f))}catch(h){a(h)}}o(u,"rejected");function l(f){f.done?s(f.value):i(f.value).then(c,u)}o(l,"step"),l((r=r.apply(e,t||[])).next())})},Rt=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(f){l=[6,f],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Zu=function(){function e(t){this._mintUrl=t}return o(e,"CashuMint"),Object.defineProperty(e.prototype,"mintUrl",{get:function(){return this._mintUrl},enumerable:!1,configurable:!0}),e.getInfo=function(t){return It(this,void 0,void 0,function(){return Rt(this,function(n){return[2,Yn({endpoint:On(t,"info")})]})})},e.prototype.getInfo=function(){return It(this,void 0,void 0,function(){return Rt(this,function(t){return[2,e.getInfo(this._mintUrl)]})})},e.requestMint=function(t,n){return It(this,void 0,void 0,function(){return Rt(this,function(r){return[2,Yn({endpoint:"".concat(On(t,"mint"),"?amount=").concat(n)})]})})},e.prototype.requestMint=function(t){return It(this,void 0,void 0,function(){return Rt(this,function(n){return[2,e.requestMint(this._mintUrl,t)]})})},e.mint=function(t,n,r){return It(this,void 0,void 0,function(){var i;return Rt(this,function(s){switch(s.label){case 0:return[4,Yn({endpoint:"".concat(On(t,"mint"),"?hash=").concat(r),method:"POST",requestBody:n})];case 1:if(i=s.sent(),!gi(i)||!Array.isArray(i?.promises))throw new Error("bad response");return[2,i]}})})},e.prototype.mint=function(t,n){return It(this,void 0,void 0,function(){return Rt(this,function(r){return[2,e.mint(this._mintUrl,t,n)]})})},e.getKeys=function(t,n){return It(this,void 0,void 0,function(){return Rt(this,function(r){return n&&(n=n.replace(/\//g,"_").replace(/\+/g,"-")),[2,Yn({endpoint:n?On(t,"keys",n):On(t,"keys")})]})})},e.prototype.getKeys=function(t){return It(this,void 0,void 0,function(){return Rt(this,function(n){return[2,e.getKeys(this._mintUrl,t)]})})},e.getKeySets=function(t){return It(this,void 0,void 0,function(){return Rt(this,function(n){return[2,Yn({endpoint:On(t,"keysets")})]})})},e.prototype.getKeySets=function(){return It(this,void 0,void 0,function(){return Rt(this,function(t){return[2,e.getKeySets(this._mintUrl)]})})},e.split=function(t,n){return It(this,void 0,void 0,function(){var r;return Rt(this,function(i){switch(i.label){case 0:return[4,Yn({endpoint:On(t,"split"),method:"POST",requestBody:n})];case 1:if(r=i.sent(),!gi(r)||!Array.isArray(r?.promises))throw new Error("bad response");return[2,r]}})})},e.prototype.split=function(t){return It(this,void 0,void 0,function(){return Rt(this,function(n){return[2,e.split(this._mintUrl,t)]})})},e.melt=function(t,n){return It(this,void 0,void 0,function(){var r;return Rt(this,function(i){switch(i.label){case 0:return[4,Yn({endpoint:On(t,"melt"),method:"POST",requestBody:n})];case 1:if(r=i.sent(),!gi(r)||typeof r?.paid!="boolean"||r?.preimage!==null&&typeof r?.preimage!="string")throw new Error("bad response");return[2,r]}})})},e.prototype.melt=function(t){return It(this,void 0,void 0,function(){return Rt(this,function(n){return[2,e.melt(this._mintUrl,t)]})})},e.checkFees=function(t,n){return It(this,void 0,void 0,function(){var r;return Rt(this,function(i){switch(i.label){case 0:return[4,Yn({endpoint:On(t,"checkfees"),method:"POST",requestBody:n})];case 1:if(r=i.sent(),!gi(r)||typeof r?.fee!="number")throw new Error("bad response");return[2,r]}})})},e.prototype.checkFees=function(t){return It(this,void 0,void 0,function(){return Rt(this,function(n){return[2,e.checkFees(this._mintUrl,t)]})})},e.check=function(t,n){return It(this,void 0,void 0,function(){var r;return Rt(this,function(i){switch(i.label){case 0:return[4,Yn({endpoint:On(t,"check"),method:"POST",requestBody:n})];case 1:if(r=i.sent(),!gi(r)||!Array.isArray(r?.spendable))throw new Error("bad response");return[2,r]}})})},e.prototype.check=function(t){return It(this,void 0,void 0,function(){return Rt(this,function(n){return[2,e.check(this._mintUrl,t)]})})},e.restore=function(t,n){return It(this,void 0,void 0,function(){var r;return Rt(this,function(i){switch(i.label){case 0:return[4,Yn({endpoint:On(t,"restore"),method:"POST",requestBody:n})];case 1:if(r=i.sent(),!gi(r)||!Array.isArray(r?.outputs)||!Array.isArray(r?.promises))throw new Error("bad response");return[2,r]}})})},e.prototype.restore=function(t){return It(this,void 0,void 0,function(){return Rt(this,function(n){return[2,e.restore(this._mintUrl,t)]})})},e}();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ut=BigInt(0),Tt=BigInt(1),yi=BigInt(2),q3=BigInt(3),Wu=BigInt(4),Mp=BigInt(5),kp=BigInt(8);BigInt(9);BigInt(16);function nn(e,t){const n=e%t;return n>=Ut?n:t+n}o(nn,"mod");function V3(e,t,n){if(n<=Ut||t<Ut)throw new Error("Expected power/modulo > 0");if(n===Tt)return Ut;let r=Tt;for(;t>Ut;)t&Tt&&(r=r*e%n),e=e*e%n,t>>=Tt;return r}o(V3,"pow");function xn(e,t,n){let r=e;for(;t-- >Ut;)r*=r,r%=n;return r}o(xn,"pow2");function ju(e,t){if(e===Ut||t<=Ut)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=nn(e,t),r=t,i=Ut,s=Tt;for(;n!==Ut;){const c=r/n,u=r%n,l=i-s*c;r=n,n=u,i=s,s=l}if(r!==Tt)throw new Error("invert: does not exist");return nn(i,t)}o(ju,"invert");function K3(e){const t=(e-Tt)/yi;let n,r,i;for(n=e-Tt,r=0;n%yi===Ut;n/=yi,r++);for(i=yi;i<e&&V3(i,t,e)!==e-Tt;i++);if(r===1){const a=(e+Tt)/Wu;return o(function(u,l){const f=u.pow(l,a);if(!u.eql(u.sqr(f),l))throw new Error("Cannot find square root");return f},"tonelliFast")}const s=(n+Tt)/yi;return o(function(c,u){if(c.pow(u,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let l=r,f=c.pow(c.mul(c.ONE,i),n),h=c.pow(u,s),p=c.pow(u,n);for(;!c.eql(p,c.ONE);){if(c.eql(p,c.ZERO))return c.ZERO;let y=1;for(let x=c.sqr(p);y<l&&!c.eql(x,c.ONE);y++)x=c.sqr(x);const _=c.pow(f,Tt<<BigInt(l-y-1));f=c.sqr(_),h=c.mul(h,_),p=c.mul(p,f),l=y}return h},"tonelliSlow")}o(K3,"tonelliShanks");function J3(e){if(e%Wu===q3){const t=(e+Tt)/Wu;return o(function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s},"sqrt3mod4")}if(e%kp===Mp){const t=(e-Mp)/kp;return o(function(r,i){const s=r.mul(i,yi),a=r.pow(s,t),c=r.mul(i,a),u=r.mul(r.mul(c,yi),a),l=r.mul(c,r.sub(u,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l},"sqrt5mod8")}return K3(e)}o(J3,"FpSqrt");const Y3=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Q3(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Y3.reduce((r,i)=>(r[i]="function",r),t);return zo(e,n)}o(Q3,"validateField");function X3(e,t,n){if(n<Ut)throw new Error("Expected power > 0");if(n===Ut)return e.ONE;if(n===Tt)return t;let r=e.ONE,i=t;for(;n>Ut;)n&Tt&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Tt;return r}o(X3,"FpPow");function eN(e,t){const n=new Array(t.length),r=t.reduce((s,a,c)=>e.is0(a)?s:(n[c]=s,e.mul(s,a)),e.ONE),i=e.inv(r);return t.reduceRight((s,a,c)=>e.is0(a)?s:(n[c]=e.mul(s,n[c]),e.mul(s,a)),i),n}o(eN,"FpInvertBatch");function qy(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}o(qy,"nLength");function tN(e,t,n=!1,r={}){if(e<=Ut)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=qy(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=J3(e),c=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:nd(i),ZERO:Ut,ONE:Tt,create:u=>nn(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return Ut<=u&&u<e},is0:u=>u===Ut,isOdd:u=>(u&Tt)===Tt,neg:u=>nn(-u,e),eql:(u,l)=>u===l,sqr:u=>nn(u*u,e),add:(u,l)=>nn(u+l,e),sub:(u,l)=>nn(u-l,e),mul:(u,l)=>nn(u*l,e),pow:(u,l)=>X3(c,u,l),div:(u,l)=>nn(u*ju(l,e),e),sqrN:u=>u*u,addN:(u,l)=>u+l,subN:(u,l)=>u-l,mulN:(u,l)=>u*l,inv:u=>ju(u,e),sqrt:r.sqrt||(u=>a(c,u)),invertBatch:u=>eN(c,u),cmov:(u,l,f)=>f?l:u,toBytes:u=>n?td(u,s):ps(u,s),fromBytes:u=>{if(u.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${u.length}`);return n?ed(u):Ai(u)}});return Object.freeze(c)}o(tN,"Field");function Vy(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}o(Vy,"getFieldBytesLength");function Ky(e){const t=Vy(e);return t+Math.ceil(t/2)}o(Ky,"getMinHashLength");function nN(e,t,n=!1){const r=e.length,i=Vy(t),s=Ky(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const a=n?Ai(e):ed(e),c=nn(a,t-Tt)+Tt;return n?td(c,i):ps(c,i)}o(nN,"mapHashToField");/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rN=BigInt(0),Fl=BigInt(1);function iN(e,t){const n=o((i,s)=>{const a=s.negate();return i?a:s},"constTimeNegate"),r=o(i=>{const s=Math.ceil(t/i)+1,a=2**(i-1);return{windows:s,windowSize:a}},"opts");return{constTimeNegate:n,unsafeLadder(i,s){let a=e.ZERO,c=i;for(;s>rN;)s&Fl&&(a=a.add(c)),c=c.double(),s>>=Fl;return a},precomputeWindow(i,s){const{windows:a,windowSize:c}=r(s),u=[];let l=i,f=l;for(let h=0;h<a;h++){f=l,u.push(f);for(let p=1;p<c;p++)f=f.add(l),u.push(f);l=f.double()}return u},wNAF(i,s,a){const{windows:c,windowSize:u}=r(i);let l=e.ZERO,f=e.BASE;const h=BigInt(2**i-1),p=2**i,y=BigInt(i);for(let _=0;_<c;_++){const x=_*u;let w=Number(a&h);a>>=y,w>u&&(w-=p,a+=Fl);const v=x,T=x+Math.abs(w)-1,N=_%2!==0,I=w<0;w===0?f=f.add(n(N,s[v])):l=l.add(n(I,s[T]))}return{p:l,f}},wNAFCached(i,s,a,c){const u=i._WINDOW_SIZE||1;let l=s.get(i);return l||(l=this.precomputeWindow(i,u),u!==1&&s.set(i,c(l))),this.wNAF(u,l,a)}}}o(iN,"wNAF");function Jy(e){return Q3(e.Fp),zo(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...qy(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}o(Jy,"validateBasic");/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function sN(e){const t=Jy(e);zo(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}o(sN,"validatePointOpts");const{bytesToNumberBE:oN,hexToBytes:aN}=A3;var To;const xi={Err:(To=class extends Error{constructor(t=""){super(t)}},o(To,"DERErr"),To),_parseInt(e){const{Err:t}=xi;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:oN(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=xi,n=typeof e=="string"?aN(e):e;Ho(n);let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=xi._parseInt(n.subarray(2)),{d:a,l:c}=xi._parseInt(s);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){const t=o(l=>Number.parseInt(l[0],16)&8?"00"+l:l,"slice"),n=o(l=>{const f=l.toString(16);return f.length&1?`0${f}`:f},"h"),r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,a=i.length/2,c=n(s),u=n(a);return`30${n(a+s+4)}02${u}${i}02${c}${r}`}},Sr=BigInt(0),Mn=BigInt(1);BigInt(2);const Tp=BigInt(3);BigInt(4);function cN(e){const t=sN(e),{Fp:n}=t,r=t.toBytes||((x,w,v)=>{const T=w.toAffine();return fo(Uint8Array.from([4]),n.toBytes(T.x),n.toBytes(T.y))}),i=t.fromBytes||(x=>{const w=x.subarray(1),v=n.fromBytes(w.subarray(0,n.BYTES)),T=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:v,y:T}});function s(x){const{a:w,b:v}=t,T=n.sqr(x),N=n.mul(T,x);return n.add(n.add(N,n.mul(x,w)),v)}if(o(s,"weierstrassEquation"),!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(x){return typeof x=="bigint"&&Sr<x&&x<t.n}o(a,"isWithinCurveOrder");function c(x){if(!a(x))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}o(c,"assertGE");function u(x){const{allowedPrivateKeyLengths:w,nByteLength:v,wrapPrivateKey:T,n:N}=t;if(w&&typeof x!="bigint"){if(Ci(x)&&(x=oi(x)),typeof x!="string"||!w.includes(x.length))throw new Error("Invalid key");x=x.padStart(v*2,"0")}let I;try{I=typeof x=="bigint"?x:Ai(Fn("private key",x,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof x}`)}return T&&(I=nn(I,N)),c(I),I}o(u,"normPrivateKeyToScalar");const l=new Map;function f(x){if(!(x instanceof h))throw new Error("ProjectivePoint expected")}o(f,"assertPrjPoint");const _=class _{constructor(w,v,T){if(this.px=w,this.py=v,this.pz=T,w==null||!n.isValid(w))throw new Error("x required");if(v==null||!n.isValid(v))throw new Error("y required");if(T==null||!n.isValid(T))throw new Error("z required")}static fromAffine(w){const{x:v,y:T}=w||{};if(!w||!n.isValid(v)||!n.isValid(T))throw new Error("invalid affine point");if(w instanceof _)throw new Error("projective point not allowed");const N=o(I=>n.eql(I,n.ZERO),"is0");return N(v)&&N(T)?_.ZERO:new _(v,T,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const v=n.invertBatch(w.map(T=>T.pz));return w.map((T,N)=>T.toAffine(v[N])).map(_.fromAffine)}static fromHex(w){const v=_.fromAffine(i(Fn("pointHex",w)));return v.assertValidity(),v}static fromPrivateKey(w){return _.BASE.multiply(u(w))}_setWindowSize(w){this._WINDOW_SIZE=w,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:w,y:v}=this.toAffine();if(!n.isValid(w)||!n.isValid(v))throw new Error("bad point: x or y not FE");const T=n.sqr(v),N=s(w);if(!n.eql(T,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){f(w);const{px:v,py:T,pz:N}=this,{px:I,py:C,pz:D}=w,U=n.eql(n.mul(v,D),n.mul(I,N)),H=n.eql(n.mul(T,D),n.mul(C,N));return U&&H}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:v}=t,T=n.mul(v,Tp),{px:N,py:I,pz:C}=this;let D=n.ZERO,U=n.ZERO,H=n.ZERO,B=n.mul(N,N),z=n.mul(I,I),A=n.mul(C,C),d=n.mul(N,I);return d=n.add(d,d),H=n.mul(N,C),H=n.add(H,H),D=n.mul(w,H),U=n.mul(T,A),U=n.add(D,U),D=n.sub(z,U),U=n.add(z,U),U=n.mul(D,U),D=n.mul(d,D),H=n.mul(T,H),A=n.mul(w,A),d=n.sub(B,A),d=n.mul(w,d),d=n.add(d,H),H=n.add(B,B),B=n.add(H,B),B=n.add(B,A),B=n.mul(B,d),U=n.add(U,B),A=n.mul(I,C),A=n.add(A,A),B=n.mul(A,d),D=n.sub(D,B),H=n.mul(A,z),H=n.add(H,H),H=n.add(H,H),new _(D,U,H)}add(w){f(w);const{px:v,py:T,pz:N}=this,{px:I,py:C,pz:D}=w;let U=n.ZERO,H=n.ZERO,B=n.ZERO;const z=t.a,A=n.mul(t.b,Tp);let d=n.mul(v,I),m=n.mul(T,C),S=n.mul(N,D),R=n.add(v,T),k=n.add(I,C);R=n.mul(R,k),k=n.add(d,m),R=n.sub(R,k),k=n.add(v,N);let P=n.add(I,D);return k=n.mul(k,P),P=n.add(d,S),k=n.sub(k,P),P=n.add(T,N),U=n.add(C,D),P=n.mul(P,U),U=n.add(m,S),P=n.sub(P,U),B=n.mul(z,k),U=n.mul(A,S),B=n.add(U,B),U=n.sub(m,B),B=n.add(m,B),H=n.mul(U,B),m=n.add(d,d),m=n.add(m,d),S=n.mul(z,S),k=n.mul(A,k),m=n.add(m,S),S=n.sub(d,S),S=n.mul(z,S),k=n.add(k,S),d=n.mul(m,k),H=n.add(H,d),d=n.mul(P,k),U=n.mul(R,U),U=n.sub(U,d),d=n.mul(R,m),B=n.mul(P,B),B=n.add(B,d),new _(U,H,B)}subtract(w){return this.add(w.negate())}is0(){return this.equals(_.ZERO)}wNAF(w){return y.wNAFCached(this,l,w,v=>{const T=n.invertBatch(v.map(N=>N.pz));return v.map((N,I)=>N.toAffine(T[I])).map(_.fromAffine)})}multiplyUnsafe(w){const v=_.ZERO;if(w===Sr)return v;if(c(w),w===Mn)return this;const{endo:T}=t;if(!T)return y.unsafeLadder(this,w);let{k1neg:N,k1:I,k2neg:C,k2:D}=T.splitScalar(w),U=v,H=v,B=this;for(;I>Sr||D>Sr;)I&Mn&&(U=U.add(B)),D&Mn&&(H=H.add(B)),B=B.double(),I>>=Mn,D>>=Mn;return N&&(U=U.negate()),C&&(H=H.negate()),H=new _(n.mul(H.px,T.beta),H.py,H.pz),U.add(H)}multiply(w){c(w);let v=w,T,N;const{endo:I}=t;if(I){const{k1neg:C,k1:D,k2neg:U,k2:H}=I.splitScalar(v);let{p:B,f:z}=this.wNAF(D),{p:A,f:d}=this.wNAF(H);B=y.constTimeNegate(C,B),A=y.constTimeNegate(U,A),A=new _(n.mul(A.px,I.beta),A.py,A.pz),T=B.add(A),N=z.add(d)}else{const{p:C,f:D}=this.wNAF(v);T=C,N=D}return _.normalizeZ([T,N])[0]}multiplyAndAddUnsafe(w,v,T){const N=_.BASE,I=o((D,U)=>U===Sr||U===Mn||!D.equals(N)?D.multiplyUnsafe(U):D.multiply(U),"mul"),C=I(this,v).add(I(w,T));return C.is0()?void 0:C}toAffine(w){const{px:v,py:T,pz:N}=this,I=this.is0();w==null&&(w=I?n.ONE:n.inv(N));const C=n.mul(v,w),D=n.mul(T,w),U=n.mul(N,w);if(I)return{x:n.ZERO,y:n.ZERO};if(!n.eql(U,n.ONE))throw new Error("invZ was invalid");return{x:C,y:D}}isTorsionFree(){const{h:w,isTorsionFree:v}=t;if(w===Mn)return!0;if(v)return v(_,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:v}=t;return w===Mn?this:v?v(_,this):this.multiplyUnsafe(t.h)}toRawBytes(w=!0){return this.assertValidity(),r(_,this,w)}toHex(w=!0){return oi(this.toRawBytes(w))}};o(_,"Point");let h=_;h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const p=t.nBitLength,y=iN(h,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:a}}o(cN,"weierstrassPoints");function lN(e){const t=Jy(e);return zo(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}o(lN,"validateOpts");function uN(e){const t=lN(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function a(k){return Sr<k&&k<n.ORDER}o(a,"isValidFieldElement");function c(k){return nn(k,r)}o(c,"modN");function u(k){return ju(k,r)}o(u,"invN");const{ProjectivePoint:l,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:p}=cN({...t,toBytes(k,P,F){const M=P.toAffine(),g=n.toBytes(M.x),L=fo;return F?L(Uint8Array.from([P.hasEvenY()?2:3]),g):L(Uint8Array.from([4]),g,n.toBytes(M.y))},fromBytes(k){const P=k.length,F=k[0],M=k.subarray(1);if(P===i&&(F===2||F===3)){const g=Ai(M);if(!a(g))throw new Error("Point is not on curve");const L=h(g);let V;try{V=n.sqrt(L)}catch(ge){const _e=ge instanceof Error?": "+ge.message:"";throw new Error("Point is not on curve"+_e)}const ie=(V&Mn)===Mn;return(F&1)===1!==ie&&(V=n.neg(V)),{x:g,y:V}}else if(P===s&&F===4){const g=n.fromBytes(M.subarray(0,n.BYTES)),L=n.fromBytes(M.subarray(n.BYTES,2*n.BYTES));return{x:g,y:L}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=o(k=>oi(ps(k,t.nByteLength)),"numToNByteStr");function _(k){const P=r>>Mn;return k>P}o(_,"isBiggerThanHalfOrder");function x(k){return _(k)?c(-k):k}o(x,"normalizeS");const w=o((k,P,F)=>Ai(k.slice(P,F)),"slcNum"),R=class R{constructor(P,F,M){this.r=P,this.s=F,this.recovery=M,this.assertValidity()}static fromCompact(P){const F=t.nByteLength;return P=Fn("compactSignature",P,F*2),new R(w(P,0,F),w(P,F,2*F))}static fromDER(P){const{r:F,s:M}=xi.toSig(Fn("DER",P));return new R(F,M)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new R(this.r,this.s,P)}recoverPublicKey(P){const{r:F,s:M,recovery:g}=this,L=U(Fn("msgHash",P));if(g==null||![0,1,2,3].includes(g))throw new Error("recovery id invalid");const V=g===2||g===3?F+t.n:F;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ie=g&1?"03":"02",he=l.fromHex(ie+y(V)),ge=u(V),_e=c(-L*ge),me=c(M*ge),te=l.BASE.multiplyAndAddUnsafe(he,_e,me);if(!te)throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return hs(this.toDERHex())}toDERHex(){return xi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hs(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}};o(R,"Signature");let v=R;const T={isValidPrivateKey(k){try{return f(k),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const k=Ky(t.n);return nN(t.randomBytes(k),t.n)},precompute(k=8,P=l.BASE){return P._setWindowSize(k),P.multiply(BigInt(3)),P}};function N(k,P=!0){return l.fromPrivateKey(k).toRawBytes(P)}o(N,"getPublicKey");function I(k){const P=Ci(k),F=typeof k=="string",M=(P||F)&&k.length;return P?M===i||M===s:F?M===2*i||M===2*s:k instanceof l}o(I,"isProbPub");function C(k,P,F=!0){if(I(k))throw new Error("first arg must be private key");if(!I(P))throw new Error("second arg must be public key");return l.fromHex(P).multiply(f(k)).toRawBytes(F)}o(C,"getSharedSecret");const D=t.bits2int||function(k){const P=Ai(k),F=k.length*8-t.nBitLength;return F>0?P>>BigInt(F):P},U=t.bits2int_modN||function(k){return c(D(k))},H=nd(t.nBitLength);function B(k){if(typeof k!="bigint")throw new Error("bigint expected");if(!(Sr<=k&&k<H))throw new Error(`bigint expected < 2^${t.nBitLength}`);return ps(k,t.nByteLength)}o(B,"int2octets");function z(k,P,F=A){if(["recovered","canonical"].some(re=>re in F))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:g}=t;let{lowS:L,prehash:V,extraEntropy:ie}=F;L==null&&(L=!0),k=Fn("msgHash",k),V&&(k=Fn("prehashed msgHash",M(k)));const he=U(k),ge=f(P),_e=[B(ge),B(he)];if(ie!=null&&ie!==!1){const re=ie===!0?g(n.BYTES):ie;_e.push(Fn("extraEntropy",re))}const me=fo(..._e),te=he;function X(re){const xe=D(re);if(!p(xe))return;const fe=u(xe),le=l.BASE.multiply(xe).toAffine(),q=c(le.x);if(q===Sr)return;const Y=c(fe*c(te+q*ge));if(Y===Sr)return;let ae=(le.x===q?0:2)|Number(le.y&Mn),we=Y;return L&&_(Y)&&(we=x(Y),ae^=1),new v(q,we,ae)}return o(X,"k2sig"),{seed:me,k2sig:X}}o(z,"prepSig");const A={lowS:t.lowS,prehash:!1},d={lowS:t.lowS,prehash:!1};function m(k,P,F=A){const{seed:M,k2sig:g}=z(k,P,F),L=t;return Hy(L.hash.outputLen,L.nByteLength,L.hmac)(M,g)}o(m,"sign"),l.BASE._setWindowSize(8);function S(k,P,F,M=d){const g=k;if(P=Fn("msgHash",P),F=Fn("publicKey",F),"strict"in M)throw new Error("options.strict was renamed to lowS");const{lowS:L,prehash:V}=M;let ie,he;try{if(typeof g=="string"||Ci(g))try{ie=v.fromDER(g)}catch(le){if(!(le instanceof xi.Err))throw le;ie=v.fromCompact(g)}else if(typeof g=="object"&&typeof g.r=="bigint"&&typeof g.s=="bigint"){const{r:le,s:q}=g;ie=new v(le,q)}else throw new Error("PARSE");he=l.fromHex(F)}catch(le){if(le.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(L&&ie.hasHighS())return!1;V&&(P=t.hash(P));const{r:ge,s:_e}=ie,me=U(P),te=u(_e),X=c(me*te),re=c(ge*te),xe=l.BASE.multiplyAndAddUnsafe(he,X,re)?.toAffine();return xe?c(xe.x)===ge:!1}return o(S,"verify"),{CURVE:t,getPublicKey:N,getSharedSecret:C,sign:m,verify:S,ProjectivePoint:l,Signature:v,utils:T}}o(uN,"weierstrass");const wd=class wd extends Ga{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,k3(t);const r=rd(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=t.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(t){return ja(this),this.iHash.update(t),this}digestInto(t){ja(this),sr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:a,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=a,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};o(wd,"HMAC");let Va=wd;const Ka=o((e,t,n)=>new Va(e,t).update(n).digest(),"hmac");Ka.create=(e,t)=>new Va(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fN(e){return{hash:e,hmac:(t,...n)=>Ka(e,t,js(...n)),randomBytes:Zy}}o(fN,"getHash");function dN(e,t){const n=o(r=>uN({...e,...fN(r)}),"create");return Object.freeze({...n(t),create:n})}o(dN,"createCurve");/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yy=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Np=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),hN=BigInt(1),Gu=BigInt(2),Ip=o((e,t)=>(e+t/Gu)/t,"divNearest");function pN(e){const t=Yy,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),c=BigInt(44),u=BigInt(88),l=e*e*e%t,f=l*l*e%t,h=xn(f,n,t)*f%t,p=xn(h,n,t)*f%t,y=xn(p,Gu,t)*l%t,_=xn(y,i,t)*y%t,x=xn(_,s,t)*_%t,w=xn(x,c,t)*x%t,v=xn(w,u,t)*w%t,T=xn(v,c,t)*x%t,N=xn(T,n,t)*f%t,I=xn(N,a,t)*_%t,C=xn(I,r,t)*l%t,D=xn(C,Gu,t);if(!qu.eql(qu.sqr(D),e))throw new Error("Cannot find square root");return D}o(pN,"sqrtMod");const qu=tN(Yy,void 0,void 0,{sqrt:pN}),yn=dN({a:BigInt(0),b:BigInt(7),Fp:qu,n:Np,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Np,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-hN*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,a=BigInt("0x100000000000000000000000000000000"),c=Ip(s*e,t),u=Ip(-r*e,t);let l=nn(e-c*n-u*i,t),f=nn(-c*r-u*s,t);const h=l>a,p=f>a;if(h&&(l=t-l),p&&(f=t-f),l>a||f>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:p,k2:f}}}},gs);BigInt(0);yn.ProjectivePoint;function Qy(e){for(var t;!t;){var n=gs(e),r=oi(n),i="02"+r;try{t=Ja(i)}catch{e=gs(e)}}return t}o(Qy,"hashToCurve");function Ja(e){return yn.ProjectivePoint.fromHex(e)}o(Ja,"pointFromHex");function Xy(e,t){var n=Uy(e),r=new TextEncoder().encode(n),i=Qy(r);t||(t=sd(yn.utils.randomPrivateKey()));var s=yn.ProjectivePoint.BASE.multiply(t),a=i.add(s);return{B_:a,r:t}}o(Xy,"blindMessage");function eb(e,t,n){var r=e.subtract(n.multiply(t));return r}o(eb,"unblindSignature");function gN(e,t,n,r){return e.map(function(i,s){var a=Ja(i.C_),c=Ja(r[i.amount]),u=eb(a,t[s],c),l={id:i.id,amount:i.amount,secret:Uy(n[s]),C:u.toHex(!0)};return l})}o(gN,"constructProofs");const $s=Object.freeze(Object.defineProperty({__proto__:null,blindMessage:Xy,constructProofs:gN,hashToCurve:Qy,pointFromHex:Ja,unblindSignature:eb},Symbol.toStringTag,{value:"Module"}));var mN=function(){function e(t,n){this.amount=t,this.B_=n}return o(e,"BlindedMessage"),e.prototype.getSerializedBlindedMessage=function(){return{amount:this.amount,B_:this.B_.toHex(!0)}},e}();const yN=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),tb=new Uint8Array(new Array(16).fill(0).map((e,t)=>t)),bN=tb.map(e=>(9*e+5)%16);let od=[tb],ad=[bN];for(let e=0;e<4;e++)for(let t of[od,ad])t.push(t[e].map(n=>yN[n]));const nb=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),wN=od.map((e,t)=>e.map(n=>nb[t][n])),_N=ad.map((e,t)=>e.map(n=>nb[t][n])),vN=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),EN=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function Rp(e,t,n,r){return e===0?t^n^r:e===1?t&n|~t&r:e===2?(t|~n)^r:e===3?t&r|n&~r:t^(n|~r)}o(Rp,"f");const ua=new Uint32Array(16),_d=class _d extends ho{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:r,h3:i,h4:s}=this;return[t,n,r,i,s]}set(t,n,r,i,s){this.h0=t|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(t,n){for(let y=0;y<16;y++,n+=4)ua[y]=t.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,a=s,c=this.h2|0,u=c,l=this.h3|0,f=l,h=this.h4|0,p=h;for(let y=0;y<5;y++){const _=4-y,x=vN[y],w=EN[y],v=od[y],T=ad[y],N=wN[y],I=_N[y];for(let C=0;C<16;C++){const D=ca(r+Rp(y,s,c,l)+ua[v[C]]+x,N[C])+h|0;r=h,h=l,l=ca(c,10)|0,c=s,s=D}for(let C=0;C<16;C++){const D=ca(i+Rp(_,a,u,f)+ua[T[C]]+w,I[C])+p|0;i=p,p=f,f=ca(u,10)|0,u=a,a=D}}this.set(this.h1+c+f|0,this.h2+l+p|0,this.h3+h+i|0,this.h4+r+a|0,this.h0+s+u|0)}roundClean(){ua.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};o(_d,"RIPEMD160");let Vu=_d;const xN=id(()=>new Vu),fa=BigInt(2**32-1),Ku=BigInt(32);function rb(e,t=!1){return t?{h:Number(e&fa),l:Number(e>>Ku&fa)}:{h:Number(e>>Ku&fa)|0,l:Number(e&fa)|0}}o(rb,"fromBig$1");function SN(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=rb(e[i],t);[n[i],r[i]]=[s,a]}return[n,r]}o(SN,"split$1");const AN=o((e,t)=>BigInt(e>>>0)<<Ku|BigInt(t>>>0),"toBig$1"),MN=o((e,t,n)=>e>>>n,"shrSH$1"),kN=o((e,t,n)=>e<<32-n|t>>>n,"shrSL$1"),TN=o((e,t,n)=>e>>>n|t<<32-n,"rotrSH$1"),NN=o((e,t,n)=>e<<32-n|t>>>n,"rotrSL$1"),IN=o((e,t,n)=>e<<64-n|t>>>n-32,"rotrBH$1"),RN=o((e,t,n)=>e>>>n-32|t<<64-n,"rotrBL$1"),LN=o((e,t)=>t,"rotr32H$1"),PN=o((e,t)=>e,"rotr32L$1"),ON=o((e,t,n)=>e<<n|t>>>32-n,"rotlSH$1"),CN=o((e,t,n)=>t<<n|e>>>32-n,"rotlSL$1"),BN=o((e,t,n)=>t<<n-32|e>>>64-n,"rotlBH$1"),FN=o((e,t,n)=>e<<n-32|t>>>64-n,"rotlBL$1");function UN(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}o(UN,"add$1");const DN=o((e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),"add3L$1"),$N=o((e,t,n,r)=>t+n+r+(e/2**32|0)|0,"add3H$1"),HN=o((e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),"add4L$1"),zN=o((e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,"add4H$1"),ZN=o((e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),"add5L$1"),WN=o((e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,"add5H$1"),jN={fromBig:rb,split:SN,toBig:AN,shrSH:MN,shrSL:kN,rotrSH:TN,rotrSL:NN,rotrBH:IN,rotrBL:RN,rotr32H:LN,rotr32L:PN,rotlSH:ON,rotlSL:CN,rotlBH:BN,rotlBL:FN,add:UN,add3L:DN,add3H:$N,add4L:HN,add4H:zN,add5H:WN,add5L:ZN},$e=jN,[GN,qN]=(()=>$e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),Hr=new Uint32Array(80),zr=new Uint32Array(80);var No;let VN=(No=class extends ho{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:f,Fh:h,Fl:p,Gh:y,Gl:_,Hh:x,Hl:w}=this;return[t,n,r,i,s,a,c,u,l,f,h,p,y,_,x,w]}set(t,n,r,i,s,a,c,u,l,f,h,p,y,_,x,w){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=c|0,this.Dl=u|0,this.Eh=l|0,this.El=f|0,this.Fh=h|0,this.Fl=p|0,this.Gh=y|0,this.Gl=_|0,this.Hh=x|0,this.Hl=w|0}process(t,n){for(let N=0;N<16;N++,n+=4)Hr[N]=t.getUint32(n),zr[N]=t.getUint32(n+=4);for(let N=16;N<80;N++){const I=Hr[N-15]|0,C=zr[N-15]|0,D=$e.rotrSH(I,C,1)^$e.rotrSH(I,C,8)^$e.shrSH(I,C,7),U=$e.rotrSL(I,C,1)^$e.rotrSL(I,C,8)^$e.shrSL(I,C,7),H=Hr[N-2]|0,B=zr[N-2]|0,z=$e.rotrSH(H,B,19)^$e.rotrBH(H,B,61)^$e.shrSH(H,B,6),A=$e.rotrSL(H,B,19)^$e.rotrBL(H,B,61)^$e.shrSL(H,B,6),d=$e.add4L(U,A,zr[N-7],zr[N-16]),m=$e.add4H(d,D,z,Hr[N-7],Hr[N-16]);Hr[N]=m|0,zr[N]=d|0}let{Ah:r,Al:i,Bh:s,Bl:a,Ch:c,Cl:u,Dh:l,Dl:f,Eh:h,El:p,Fh:y,Fl:_,Gh:x,Gl:w,Hh:v,Hl:T}=this;for(let N=0;N<80;N++){const I=$e.rotrSH(h,p,14)^$e.rotrSH(h,p,18)^$e.rotrBH(h,p,41),C=$e.rotrSL(h,p,14)^$e.rotrSL(h,p,18)^$e.rotrBL(h,p,41),D=h&y^~h&x,U=p&_^~p&w,H=$e.add5L(T,C,U,qN[N],zr[N]),B=$e.add5H(H,v,I,D,GN[N],Hr[N]),z=H|0,A=$e.rotrSH(r,i,28)^$e.rotrBH(r,i,34)^$e.rotrBH(r,i,39),d=$e.rotrSL(r,i,28)^$e.rotrBL(r,i,34)^$e.rotrBL(r,i,39),m=r&s^r&c^s&c,S=i&a^i&u^a&u;v=x|0,T=w|0,x=y|0,w=_|0,y=h|0,_=p|0,{h,l:p}=$e.add(l|0,f|0,B|0,z|0),l=c|0,f=u|0,c=s|0,u=a|0,s=r|0,a=i|0;const R=$e.add3L(z,d,S);r=$e.add3H(R,B,A,m),i=R|0}({h:r,l:i}=$e.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:a}=$e.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:c,l:u}=$e.add(this.Ch|0,this.Cl|0,c|0,u|0),{h:l,l:f}=$e.add(this.Dh|0,this.Dl|0,l|0,f|0),{h,l:p}=$e.add(this.Eh|0,this.El|0,h|0,p|0),{h:y,l:_}=$e.add(this.Fh|0,this.Fl|0,y|0,_|0),{h:x,l:w}=$e.add(this.Gh|0,this.Gl|0,x|0,w|0),{h:v,l:T}=$e.add(this.Hh|0,this.Hl|0,v|0,T|0),this.set(r,i,s,a,c,u,l,f,h,p,y,_,x,w,v,T)}roundClean(){Hr.fill(0),zr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},o(No,"SHA512"),No);const Lp=id(()=>new VN);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ju(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}o(Ju,"isBytes");function ib(...e){const t=o(s=>s,"id"),n=o((s,a)=>c=>s(a(c)),"wrap"),r=e.map(s=>s.encode).reduceRight(n,t),i=e.map(s=>s.decode).reduce(n,t);return{encode:r,decode:i}}o(ib,"chain");function KN(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}o(KN,"alphabet");function JN(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}o(JN,"join");function Pp(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],s=Array.from(e);for(s.forEach(a=>{if(a<0||a>=t)throw new Error(`Wrong integer: ${a}`)});;){let a=0,c=!0;for(let u=r;u<s.length;u++){const l=s[u],f=t*a+l;if(!Number.isSafeInteger(f)||t*a/t!==a||f-l!==t*a)throw new Error("convertRadix: carry overflow");a=f%n;const h=Math.floor(f/n);if(s[u]=h,!Number.isSafeInteger(h)||h*n+a!==f)throw new Error("convertRadix: carry overflow");if(c)h?c=!1:r=u;else continue}if(i.push(a),c)break}for(let a=0;a<e.length-1&&e[a]===0;a++)i.push(0);return i.reverse()}o(Pp,"convertRadix");function YN(e){return{encode:t=>{if(!Ju(t))throw new Error("radix.encode input should be Uint8Array");return Pp(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(Pp(t,e,2**8))}}}o(YN,"radix");function QN(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(n){if(!Ju(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!Ju(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),s=n.slice(-e);for(let a=0;a<e;a++)if(i[a]!==s[a])throw new Error("Invalid checksum");return r}}}o(QN,"checksum");const XN=o(e=>ib(YN(58),KN(e),JN("")),"genBase58"),eI=XN("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),tI=o(e=>ib(QN(4,t=>e(e(t))),eI),"createBase58check");/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const da=yn.ProjectivePoint,Ul=tI(gs);function Op(e){return BigInt(`0x${I3(e)}`)}o(Op,"bytesToNumber");function nI(e){return R3(e.toString(16).padStart(64,"0"))}o(nI,"numberToBytes");const rI=zy("Bitcoin seed"),Dl={private:76066276,public:76067358},$l=2147483648,iI=o(e=>xN(gs(e)),"hash160"),sI=o(e=>ts(e).getUint32(0,!1),"fromU32"),ha=o(e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return ts(t).setUint32(0,e,!1),t},"toU32"),jr=class jr{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return sI(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const t=this.privateKey;if(!t)throw new Error("No private key");return Ul.encode(this.serialize(this.versions.private,js(new Uint8Array([0]),t)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Ul.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(t,n=Dl){if(sr(t),8*t.length<128||8*t.length>512)throw new Error(`HDKey: wrong seed length=${t.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const r=Ka(Lp,rI,t);return new jr({versions:n,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(t,n=Dl){const r=Ul.decode(t),i=ts(r),s=i.getUint32(0,!1),a={versions:n,depth:r[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:r.slice(13,45)},c=r.slice(45),u=c[0]===0;if(s!==n[u?"private":"public"])throw new Error("Version mismatch");return u?new jr({...a,privateKey:c.slice(1)}):new jr({...a,publicKey:c})}static fromJSON(t){return jr.fromExtendedKey(t.xpriv)}constructor(t){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!t||typeof t!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=t.versions||Dl,this.depth=t.depth||0,this.chainCode=t.chainCode||null,this.index=t.index||0,this.parentFingerprint=t.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(t.publicKey&&t.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(t.privateKey){if(!yn.utils.isValidPrivateKey(t.privateKey))throw new Error("Invalid private key");this.privKey=typeof t.privateKey=="bigint"?t.privateKey:Op(t.privateKey),this.privKeyBytes=nI(this.privKey),this.pubKey=yn.getPublicKey(t.privateKey,!0)}else if(t.publicKey)this.pubKey=da.fromHex(t.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=iI(this.pubKey)}derive(t){if(!/^[mM]'?/.test(t))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(t))return this;const n=t.replace(/^[mM]'?\//,"").split("/");let r=this;for(const i of n){const s=/^(\d+)('?)$/.exec(i),a=s&&s[1];if(!s||s.length!==3||typeof a!="string")throw new Error(`Invalid child index: ${i}`);let c=+a;if(!Number.isSafeInteger(c)||c>=$l)throw new Error("Invalid index");s[2]==="'"&&(c+=$l),r=r.deriveChild(c)}return r}deriveChild(t){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let n=ha(t);if(t>=$l){const c=this.privateKey;if(!c)throw new Error("Could not derive hardened child key");n=js(new Uint8Array([0]),c,n)}else n=js(this.pubKey,n);const r=Ka(Lp,this.chainCode,n),i=Op(r.slice(0,32)),s=r.slice(32);if(!yn.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const a={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:t};try{if(this.privateKey){const c=nn(this.privKey+i,yn.CURVE.n);if(!yn.utils.isValidPrivateKey(c))throw new Error("The tweak was out of range or the resulted private key is invalid");a.privateKey=c}else{const c=da.fromHex(this.pubKey).add(da.fromPrivateKey(i));if(c.equals(da.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");a.publicKey=c.toRawBytes(!0)}return new jr(a)}catch{return this.deriveChild(t+1)}}sign(t){if(!this.privateKey)throw new Error("No privateKey set!");return sr(t,32),yn.sign(t,this.privKey).toCompactRawBytes()}verify(t,n){if(sr(t,32),sr(n,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=yn.Signature.fromCompact(n)}catch{return!1}return yn.verify(r,t,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(t,n){if(!this.chainCode)throw new Error("No chainCode set");return sr(n,33),js(ha(t),new Uint8Array([this.depth]),ha(this.parentFingerprint),ha(this.index),this.chainCode,n)}};o(jr,"HDKey");let Yu=jr;function oI(e,t,n,r){sn.hash(e);const i=sx({dkLen:32,asyncTick:10},r),{c:s,dkLen:a,asyncTick:c}=i;if(sn.number(s),sn.number(a),sn.number(c),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const u=Pi(t),l=Pi(n),f=new Uint8Array(a),h=Co.create(e,u),p=h._cloneInto().update(l);return{c:s,dkLen:a,asyncTick:c,DK:f,PRF:h,PRFSalt:p}}o(oI,"pbkdf2Init");function aI(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}o(aI,"pbkdf2Output");function cI(e,t,n,r){const{c:i,dkLen:s,DK:a,PRF:c,PRFSalt:u}=oI(e,t,n,r);let l;const f=new Uint8Array(4),h=ya(f),p=new Uint8Array(c.outputLen);for(let y=1,_=0;_<s;y++,_+=c.outputLen){const x=a.subarray(_,_+c.outputLen);h.setInt32(0,y,!1),(l=u._cloneInto(l)).update(f).digestInto(p),x.set(p.subarray(0,x.length));for(let w=1;w<i;w++){c._cloneInto(l).update(p).digestInto(p);for(let v=0;v<x.length;v++)x[v]^=p[v]}}return aI(c,u,a,l,p)}o(cI,"pbkdf2");const pa=BigInt(2**32-1),Qu=BigInt(32);function sb(e,t=!1){return t?{h:Number(e&pa),l:Number(e>>Qu&pa)}:{h:Number(e>>Qu&pa)|0,l:Number(e&pa)|0}}o(sb,"fromBig");function lI(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=sb(e[i],t);[n[i],r[i]]=[s,a]}return[n,r]}o(lI,"split");const uI=o((e,t)=>BigInt(e>>>0)<<Qu|BigInt(t>>>0),"toBig"),fI=o((e,t,n)=>e>>>n,"shrSH"),dI=o((e,t,n)=>e<<32-n|t>>>n,"shrSL"),hI=o((e,t,n)=>e>>>n|t<<32-n,"rotrSH"),pI=o((e,t,n)=>e<<32-n|t>>>n,"rotrSL"),gI=o((e,t,n)=>e<<64-n|t>>>n-32,"rotrBH"),mI=o((e,t,n)=>e>>>n-32|t<<64-n,"rotrBL"),yI=o((e,t)=>t,"rotr32H"),bI=o((e,t)=>e,"rotr32L"),wI=o((e,t,n)=>e<<n|t>>>32-n,"rotlSH"),_I=o((e,t,n)=>t<<n|e>>>32-n,"rotlSL"),vI=o((e,t,n)=>t<<n-32|e>>>64-n,"rotlBH"),EI=o((e,t,n)=>e<<n-32|t>>>64-n,"rotlBL");function xI(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}o(xI,"add");const SI=o((e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),"add3L"),AI=o((e,t,n,r)=>t+n+r+(e/2**32|0)|0,"add3H"),MI=o((e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),"add4L"),kI=o((e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,"add4H"),TI=o((e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),"add5L"),NI=o((e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,"add5H"),He={fromBig:sb,split:lI,toBig:uI,shrSH:fI,shrSL:dI,rotrSH:hI,rotrSL:pI,rotrBH:gI,rotrBL:mI,rotr32H:yI,rotr32L:bI,rotlSH:wI,rotlSL:_I,rotlBH:vI,rotlBL:EI,add:xI,add3L:SI,add3H:AI,add4L:MI,add4H:kI,add5H:NI,add5L:TI},[II,RI]=He.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Zr=new Uint32Array(80),Wr=new Uint32Array(80),vd=class vd extends Da{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:f,Fh:h,Fl:p,Gh:y,Gl:_,Hh:x,Hl:w}=this;return[t,n,r,i,s,a,c,u,l,f,h,p,y,_,x,w]}set(t,n,r,i,s,a,c,u,l,f,h,p,y,_,x,w){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=c|0,this.Dl=u|0,this.Eh=l|0,this.El=f|0,this.Fh=h|0,this.Fl=p|0,this.Gh=y|0,this.Gl=_|0,this.Hh=x|0,this.Hl=w|0}process(t,n){for(let N=0;N<16;N++,n+=4)Zr[N]=t.getUint32(n),Wr[N]=t.getUint32(n+=4);for(let N=16;N<80;N++){const I=Zr[N-15]|0,C=Wr[N-15]|0,D=He.rotrSH(I,C,1)^He.rotrSH(I,C,8)^He.shrSH(I,C,7),U=He.rotrSL(I,C,1)^He.rotrSL(I,C,8)^He.shrSL(I,C,7),H=Zr[N-2]|0,B=Wr[N-2]|0,z=He.rotrSH(H,B,19)^He.rotrBH(H,B,61)^He.shrSH(H,B,6),A=He.rotrSL(H,B,19)^He.rotrBL(H,B,61)^He.shrSL(H,B,6),d=He.add4L(U,A,Wr[N-7],Wr[N-16]),m=He.add4H(d,D,z,Zr[N-7],Zr[N-16]);Zr[N]=m|0,Wr[N]=d|0}let{Ah:r,Al:i,Bh:s,Bl:a,Ch:c,Cl:u,Dh:l,Dl:f,Eh:h,El:p,Fh:y,Fl:_,Gh:x,Gl:w,Hh:v,Hl:T}=this;for(let N=0;N<80;N++){const I=He.rotrSH(h,p,14)^He.rotrSH(h,p,18)^He.rotrBH(h,p,41),C=He.rotrSL(h,p,14)^He.rotrSL(h,p,18)^He.rotrBL(h,p,41),D=h&y^~h&x,U=p&_^~p&w,H=He.add5L(T,C,U,RI[N],Wr[N]),B=He.add5H(H,v,I,D,II[N],Zr[N]),z=H|0,A=He.rotrSH(r,i,28)^He.rotrBH(r,i,34)^He.rotrBH(r,i,39),d=He.rotrSL(r,i,28)^He.rotrBL(r,i,34)^He.rotrBL(r,i,39),m=r&s^r&c^s&c,S=i&a^i&u^a&u;v=x|0,T=w|0,x=y|0,w=_|0,y=h|0,_=p|0,{h,l:p}=He.add(l|0,f|0,B|0,z|0),l=c|0,f=u|0,c=s|0,u=a|0,s=r|0,a=i|0;const R=He.add3L(z,d,S);r=He.add3H(R,B,A,m),i=R|0}({h:r,l:i}=He.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:a}=He.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:c,l:u}=He.add(this.Ch|0,this.Cl|0,c|0,u|0),{h:l,l:f}=He.add(this.Dh|0,this.Dl|0,l|0,f|0),{h,l:p}=He.add(this.Eh|0,this.El|0,h|0,p|0),{h:y,l:_}=He.add(this.Fh|0,this.Fl|0,y|0,_|0),{h:x,l:w}=He.add(this.Gh|0,this.Gl|0,x|0,w|0),{h:v,l:T}=He.add(this.Hh|0,this.Hl|0,v|0,T|0),this.set(r,i,s,a,c,u,l,f,h,p,y,_,x,w,v,T)}roundClean(){Zr.fill(0),Wr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};o(vd,"SHA512");let ms=vd;const Ed=class Ed extends ms{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}};o(Ed,"SHA512_224");let Xu=Ed;const xd=class xd extends ms{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}};o(xd,"SHA512_256");let ef=xd;const Sd=class Sd extends ms{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};o(Sd,"SHA384");let tf=Sd;const LI=Ss(()=>new ms);Ss(()=>new Xu);Ss(()=>new ef);Ss(()=>new tf);function ob(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}o(ob,"nfkd");function ab(e){const t=ob(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}o(ab,"normalize");function PI(e){sn.bytes(e,16,20,24,28,32)}o(PI,"assertEntropy");const OI=o(e=>{const t=8-e.length/4;return new Uint8Array([As(e)[0]>>t<<t])},"calcChecksum");function CI(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),ea.chain(ea.checksum(1,OI),ea.radix2(11,!0),ea.alphabet(e))}o(CI,"getCoder");function BI(e,t){const{words:n}=ab(e),r=CI(t).decode(n);return PI(r),r}o(BI,"mnemonicToEntropy");function FI(e,t){try{BI(e,t)}catch{return!1}return!0}o(FI,"validateMnemonic");const UI=o(e=>ob(`mnemonic${e}`),"salt");function DI(e,t=""){return cI(LI,ab(e).nfkd,UI(t),{c:2048,dkLen:64})}o(DI,"mnemonicToSeedSync");const $I=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var HI="m/129372'/0'",Ya;(function(e){e[e.SECRET=0]="SECRET",e[e.BLINDING_FACTOR=1]="BLINDING_FACTOR"})(Ya||(Ya={}));var zI=o(function(e){var t=DI(e);return t},"deriveSeedFromMnemonic"),ZI=o(function(e,t,n){return cb(e,t,n,Ya.SECRET)},"deriveSecret"),WI=o(function(e,t,n){return cb(e,t,n,Ya.BLINDING_FACTOR)},"deriveBlindingFactor"),cb=o(function(e,t,n,r){var i=Yu.fromMasterSeed(e),s=jI(t),a="".concat(HI,"/").concat(s,"'/").concat(n,"'/").concat(r),c=i.derive(a);if(c.privateKey===null)throw new Error("Could not derive private key");return c.privateKey},"derive"),jI=o(function(e){var t;return/^[a-fA-F0-9]+$/.test(e)?t=Ic(e)%BigInt(Math.pow(2,31)-1):t=sd(h3(e))%BigInt(Math.pow(2,31)-1),t},"getKeysetIdInt"),Qa=globalThis&&globalThis.__assign||function(){return Qa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Qa.apply(this,arguments)},Cn=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return o(i,"adopt"),new(n||(n=Promise))(function(s,a){function c(f){try{l(r.next(f))}catch(h){a(h)}}o(c,"fulfilled");function u(f){try{l(r.throw(f))}catch(h){a(h)}}o(u,"rejected");function l(f){f.done?s(f.value):i(f.value).then(c,u)}o(l,"step"),l((r=r.apply(e,t||[])).next())})},Bn=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(l){return function(f){return u([l,f])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(f){l=[6,f],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},ln=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};(function(){function e(t,n,r){if(this._keysetId="",this._keys=n||{},this.mint=t,n&&(this._keysetId=la(this._keys)),!!r){if(r instanceof Uint8Array){this._seed=r;return}if(!FI(r,$I))throw new Error("Tried to instantiate with mnemonic, but mnemonic was invalid");this._seed=zI(r)}}return o(e,"CashuWallet"),Object.defineProperty(e.prototype,"keys",{get:function(){return this._keys},set:function(t){this._keys=t,this._keysetId=la(this._keys)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keysetId",{get:function(){return this._keysetId},enumerable:!1,configurable:!0}),e.prototype.checkProofsSpent=function(t){return Cn(this,void 0,void 0,function(){var n,r;return Bn(this,function(i){switch(i.label){case 0:return n={proofs:t.map(function(s){return{secret:s.secret}})},[4,this.mint.check(n)];case 1:return r=i.sent().spendable,[2,t.filter(function(s,a){return!r[a]})]}})})},e.prototype.requestMint=function(t){return this.mint.requestMint(t)},e.prototype.payLnInvoice=function(t,n,r,i){var s;return Cn(this,void 0,void 0,function(){var a,c,u,l,f,h,p,y,_,x,w;return Bn(this,function(v){switch(v.label){case 0:return a=this.createPaymentPayload(t,n),r?[3,2]:[4,this.getFee(t)];case 1:r=v.sent(),v.label=2;case 2:return c=this.createBlankOutputs(r,i),u=c.blindedMessages,l=c.secrets,f=c.rs,[4,this.mint.melt(Qa(Qa({},a),{outputs:u}))];case 3:return h=v.sent(),w={isPaid:(s=h.paid)!==null&&s!==void 0?s:!1,preimage:h.preimage},h?.change?(_=(y=$s).constructProofs,x=[h.change,f,l],[4,this.getKeys(h.change)]):[3,5];case 4:return p=_.apply(y,x.concat([v.sent()])),[3,6];case 5:p=[],v.label=6;case 6:return w.change=p,[4,this.changedKeys(h?.change)];case 7:return[2,(w.newKeys=v.sent(),w)]}})})},e.prototype.getFee=function(t){return Cn(this,void 0,void 0,function(){var n;return Bn(this,function(r){switch(r.label){case 0:return[4,this.mint.checkFees({pr:t})];case 1:return n=r.sent().fee,[2,n]}})})},e.prototype.createPaymentPayload=function(t,n){return{pr:t,proofs:n}},e.prototype.payLnInvoiceWithToken=function(t,n,r){var i=this,s=Ap(n),a=s.token.filter(function(c){return c.mint===i.mint.mintUrl}).flatMap(function(c){return c.proofs});return this.payLnInvoice(t,a,void 0,r)},e.prototype.receive=function(t,n,r){var i;return Cn(this,void 0,void 0,function(){var s,a,c,u,l,f,h,p,y,_,x,w;return Bn(this,function(v){switch(v.label){case 0:typeof t=="string"?s=H3(Ap(t)).token:s=t.token,a=[],c=[],l=0,f=s,v.label=1;case 1:if(!(l<f.length))return[3,6];if(h=f[l],!(!((i=h?.proofs)===null||i===void 0)&&i.length))return[3,5];v.label=2;case 2:return v.trys.push([2,4,,5]),[4,this.receiveTokenEntry(h,n,r)];case 3:return p=v.sent(),y=p.proofsWithError,_=p.proofs,x=p.newKeys,y?.length?(c.push(h),[3,5]):(a.push({mint:h.mint,proofs:ln([],_,!0)}),u||(u=x),[3,5]);case 4:return w=v.sent(),console.error(w),c.push(h),[3,5];case 5:return l++,[3,1];case 6:return[2,{token:{token:a},tokensWithErrors:c.length?{token:c}:void 0,newKeys:u}]}})})},e.prototype.receiveTokenEntry=function(t,n,r){return Cn(this,void 0,void 0,function(){var i,s,a,c,u,l,f,h,p,y,_,x,w,v,T;return Bn(this,function(N){switch(N.label){case 0:i=[],s=[],N.label=1;case 1:return N.trys.push([1,7,,8]),c=t.proofs.reduce(function(I,C){return I+C.amount},0),n||(n=U3(c)),u=this.createSplitPayload(c,t.proofs,n,r),l=u.payload,f=u.blindedMessages,[4,Zu.split(t.mint,l)];case 2:return h=N.sent(),p=h.promises,h.error,x=(_=$s).constructProofs,w=[p,f.rs,f.secrets],[4,this.getKeys(p,t.mint)];case 3:return y=x.apply(_,w.concat([N.sent()])),s.push.apply(s,y),t.mint!==this.mint.mintUrl?[3,5]:[4,this.changedKeys(ln([],p||[],!0))];case 4:return v=N.sent(),[3,6];case 5:v=void 0,N.label=6;case 6:return a=v,[3,8];case 7:return T=N.sent(),console.error(T),i.push.apply(i,t.proofs),[3,8];case 8:return[2,{proofs:s,proofsWithError:i.length?i:void 0,newKeys:a}]}})})},e.prototype.send=function(t,n,r,i){return Cn(this,void 0,void 0,function(){var s,a,c,u,l,f,h,p,y,_,x,w,v,T,N,I,C,D;return Bn(this,function(U){switch(U.label){case 0:if(r&&(t=r?.reduce(function(H,B){return H+B.amount*B.count},0)),s=0,a=[],c=[],n.forEach(function(H){if(s>=t){c.push(H);return}s=s+H.amount,a.push(H)}),t>s)throw new Error("Not enough funds available");return t<s||r?(u=this.splitReceive(t,s),l=u.amountKeep,f=u.amountSend,h=this.createSplitPayload(f,a,r,i),p=h.payload,y=h.blindedMessages,[4,this.mint.split(p)]):[3,4];case 1:return _=U.sent().promises,v=(w=$s).constructProofs,T=[_,y.rs,y.secrets],[4,this.getKeys(_)];case 2:return x=v.apply(w,T.concat([U.sent()])),N=[],I=[],C=0,x.forEach(function(H){if(C<l){C+=H.amount,N.push(H);return}I.push(H)}),D={returnChange:ln(ln([],N,!0),c,!0),send:I},[4,this.changedKeys(ln([],_||[],!0))];case 3:return[2,(D.newKeys=U.sent(),D)];case 4:return[2,{returnChange:c,send:a}]}})})},e.prototype.requestTokens=function(t,n,r,i){return Cn(this,void 0,void 0,function(){var s,a,c,u,l,f,h,p,y,_;return Bn(this,function(x){switch(x.label){case 0:return s=this.createRandomBlindedMessages(t,r,i),a=s.blindedMessages,c=s.secrets,u=s.rs,l={outputs:a},[4,this.mint.mint(l,n)];case 1:return f=x.sent().promises,_={},p=(h=$s).constructProofs,y=[f,u,c],[4,this.getKeys(f)];case 2:return _.proofs=p.apply(h,y.concat([x.sent()])),[4,this.changedKeys(f)];case 3:return[2,(_.newKeys=x.sent(),_)]}})})},e.prototype.restore=function(t,n,r){return Cn(this,void 0,void 0,function(){var i,s,a,c,u,l,f,h,p,y,_,x,w,v;return Bn(this,function(T){switch(T.label){case 0:if(!this._seed)throw new Error("CashuWallet must be initialized with mnemonic to use restore");return i=Array(n).fill(0),s=this.createBlindedMessages(i,t,r),a=s.blindedMessages,c=s.rs,u=s.secrets,[4,this.mint.restore({outputs:a})];case 1:return l=T.sent(),f=l.outputs,h=l.promises,p=c.filter(function(N,I){return f.map(function(C){return C.B_}).includes(a[I].B_)}),y=u.filter(function(N,I){return f.map(function(C){return C.B_}).includes(a[I].B_)}),v={},x=(_=$s).constructProofs,w=[h,p,y],[4,this.getKeys(h)];case 2:return v.proofs=x.apply(_,w.concat([T.sent()])),[4,this.changedKeys(h)];case 3:return[2,(v.newKeys=T.sent(),v)]}})})},e.prototype.initKeys=function(){return Cn(this,void 0,void 0,function(){var t;return Bn(this,function(n){switch(n.label){case 0:return!this.keysetId||!Object.keys(this.keys).length?(t=this,[4,this.mint.getKeys()]):[3,2];case 1:t.keys=n.sent(),this._keysetId=la(this.keys),n.label=2;case 2:return[2]}})})},e.prototype.changedKeys=function(t){return t===void 0&&(t=[]),Cn(this,void 0,void 0,function(){var n,r,i=this;return Bn(this,function(s){switch(s.label){case 0:return[4,this.initKeys()];case 1:return s.sent(),t?.length?t.some(function(a){return a.id!==i.keysetId})?[4,this.mint.getKeys()]:[2,void 0]:[2,void 0];case 2:return n=s.sent(),r=la(n),[2,r===this.keysetId?void 0:n]}})})},e.prototype.getKeys=function(t,n){var r;return Cn(this,void 0,void 0,function(){var i,s,a;return Bn(this,function(c){switch(c.label){case 0:return[4,this.initKeys()];case 1:return c.sent(),!t?.length||!(!((r=t[0])===null||r===void 0)&&r.id)?[2,this.keys]:(i=t[0].id,this.keysetId===i?[2,this.keys]:!n||n===this.mint.mintUrl?[4,this.mint.getKeys(t[0].id)]:[3,3]);case 2:return a=c.sent(),[3,5];case 3:return[4,Zu.getKeys(n,t[0].id)];case 4:a=c.sent(),c.label=5;case 5:return s=a,[2,s]}})})},e.prototype.createSplitPayload=function(t,n,r,i){var s=n.reduce(function(f,h){return f+h.amount},0),a=this.createRandomBlindedMessages(s-t,void 0,i);this._seed&&i&&(i=i+a.secrets.length);var c=this.createRandomBlindedMessages(t,r,i),u={blindedMessages:ln(ln([],a.blindedMessages,!0),c.blindedMessages,!0),secrets:ln(ln([],a.secrets,!0),c.secrets,!0),rs:ln(ln([],a.rs,!0),c.rs,!0),amounts:ln(ln([],a.amounts,!0),c.amounts,!0)},l={proofs:n,outputs:ln([],u.blindedMessages,!0)};return{payload:l,blindedMessages:u}},e.prototype.splitReceive=function(t,n){var r=n-t,i=t;return{amountKeep:r,amountSend:i}},e.prototype.createRandomBlindedMessages=function(t,n,r){var i=Wy(t,n);return this.createBlindedMessages(i,r)},e.prototype.createBlindedMessages=function(t,n,r){if(n!=null&&!this._seed)throw new Error("Cannot create deterministic messages without seed. Instantiate CashuWallet with a mnemonic, or omit counter param.");for(var i=[],s=[],a=[],c=0;c<t.length;c++){var u=void 0,l=void 0;this._seed&&n!=null?(l=ZI(this._seed,r??this.keysetId,n+c),u=sd(WI(this._seed,r??this.keysetId,n+c))):l=Zy(32),s.push(l);var f=Xy(l,u),h=f.B_,p=f.r;a.push(p);var y=new mN(t[c],h);i.push(y.getSerializedBlindedMessage())}return{blindedMessages:i,secrets:s,rs:a,amounts:t}},e.prototype.createBlankOutputs=function(t,n){var r=Math.ceil(Math.log2(t))||1;r<0&&(r=0);var i=r?Array(r).fill(1):[],s=this.createBlindedMessages(i,n),a=s.blindedMessages,c=s.rs,u=s.secrets;return{blindedMessages:a,secrets:u,rs:c}},e})();const GI={events:{},isInactive:!1,appState:"woke",showReactionsModal:void 0,reactionStats:{likes:0,zaps:0,reposts:0,quotes:0,openOn:"default"},showCustomZapModal:!1,customZap:void 0,showNoteContextMenu:!1,noteContextMenuInfo:void 0,showLnInvoiceModal:!1,lnbc:void 0,showCashuInvoiceModal:!1,cashu:void 0,showConfirmModal:!1,confirmInfo:void 0,cashuMints:new Map,subscribeToAuthor:void 0,connectedRelays:[],verifiedUsers:{},legendCustomization:{},memberCohortInfo:{},subscribeToTier:()=>{}},lb=Ht(),qI=o(e=>{let t=0;const n=o(()=>{clearTimeout(t),A.isInactive&&d("isInactive",()=>!1),t=setTimeout(()=>{d("isInactive",()=>!0)},5*6e4)},"monitorActivity"),r=o((m,S)=>{d("reactionStats",()=>({...S})),d("showReactionsModal",()=>m)},"openReactionModal"),i=o(()=>{d("reactionStats",()=>({likes:0,zaps:0,reposts:0,quotes:0})),d("showReactionsModal",()=>{})},"closeReactionModal"),s=o(m=>{d("customZap",()=>({...m})),d("showCustomZapModal",()=>!0)},"openCustomZapModal"),a=o(()=>{d("showCustomZapModal",()=>!1)},"closeCustomZapModal"),c=o(()=>{d("customZap",()=>{})},"resetCustomZap"),u=o((m,S,R,k)=>{d("noteContextMenuInfo",Qn({note:m,position:S,openCustomZap:R,openReactions:k})),d("showNoteContextMenu",()=>!0)},"openContextMenu"),l=o((m,S)=>{d("showLnInvoiceModal",()=>!0),d("lnbc",()=>({invoice:m,onPay:S,onCancel:()=>d("showLnInvoiceModal",()=>!1)}))},"openLnbcModal"),f=o(()=>{d("showLnInvoiceModal",()=>!1),d("lnbc",()=>{})},"closeLnbcModal"),h=o((m,S)=>{d("showCashuInvoiceModal",()=>!0),d("cashu",()=>({invoice:m,onPay:S,onCancel:()=>d("showCashuInvoiceModal",()=>!1)}))},"openCashuModal"),p=o(()=>{d("showCashuInvoiceModal",()=>!1),d("cashu",()=>{})},"closeCashuModal"),y=o(m=>{d("showConfirmModal",()=>!0),d("confirmInfo",()=>({...m}))},"openConfirmModal"),_=o(()=>{d("showConfirmModal",()=>!1),d("confirmInfo",()=>{})},"closeConfirmModal"),x=o(()=>{d("showNoteContextMenu",()=>!1)},"closeContextMenu"),w=o(m=>{const S=new URL(m).toString();if(!A.cashuMints.has(S)){const R=new Zu(S);A.cashuMints.set(S,R)}return A.cashuMints.get(S)},"getCashuMint"),v=o((m,S)=>{m&&(d("subscribeToAuthor",()=>({...m})),d("subscribeToTier",()=>S))},"openAuthorSubscribeModal"),T=o(()=>{d("subscribeToAuthor",()=>{})},"closeAuthorSubscribeModal"),N=o(m=>{A.connectedRelays.find(S=>S.url===m.url)||d("connectedRelays",A.connectedRelays.length,()=>({...m}))},"addConnectedRelay"),I=o(m=>{A.connectedRelays.find(S=>S.url===m.url)&&d("connectedRelays",S=>S.filter(R=>R.url!==m.url))},"removeConnectedRelay"),C=o(m=>{if(!m)return"/home";let S=`${m}`;S.startsWith("npub")&&(S=Pe.decode(S).data);const R=A.verifiedUsers[S];if(R)return`/${R}`;try{return`/p/${Pe.npubEncode(S)}`}catch{return`/p/${S}`}},"profileLink"),D=o((m,S)=>{d("legendCustomization",()=>({[m]:{...S}}))},"setLegendCustomization"),U=o((m,S)=>{if(m.kind===W.VerifiedUsersDict){const k=JSON.parse(m.content);d("verifiedUsers",P=>({...P,...k}))}if(m.kind===W.LegendCustomization){const k=JSON.parse(m.content);d("legendCustomization",P=>({...P,...k}))}if(m.kind===W.MembershipCohortInfo){const k=JSON.parse(m.content);d("memberCohortInfo",P=>({...P,...k}))}const R=A.events[m.kind]||[];R.length===0?d("events",m.kind,()=>[{...m}]):R.find(k=>k.id===m.id)||d("events",m.kind,R.length,()=>({...m}))},"handleVerifiedUsersEvent"),H=o(async m=>{const S=await Es(m),R=JSON.parse(S),[k,P,F]=R;if(k==="EVENTS")for(let M=0;M<F.length;M++){const g=F[M];U(g)}k==="EVENT"&&U(F)},"onMessage"),B=o(m=>{const S=m.target;ri(S,{message:H,close:B})},"onSocketClose");ai(()=>{document.addEventListener("mousemove",n),document.addEventListener("scroll",n),document.addEventListener("keydown",n)}),on(()=>{document.removeEventListener("mousemove",n),document.removeEventListener("scroll",n),document.removeEventListener("keydown",n)});let z=0;at(()=>{A.isInactive?(d("appState",()=>"sleep"),clearTimeout(z)):(d("appState",()=>"waking"),z=setTimeout(()=>{d("appState",()=>"woke")},36e3))}),at(()=>{if(A.appState==="sleep"){xt("Disconnected from Primal socket due to inactivity at: ",new Date().toLocaleTimeString()),bf(!1);return}A.appState==="waking"&&yt()?.readyState===WebSocket.CLOSED&&(xt("Reconnected to Primal socket at: ",new Date().toLocaleTimeString()),lc())}),at(()=>{ni()&&uc(yt(),{message:H,close:B})}),on(()=>{ri(yt(),{message:H,close:B})});const[A,d]=Xt({...GI,actions:{openReactionModal:r,closeReactionModal:i,openCustomZapModal:s,closeCustomZapModal:a,resetCustomZap:c,openContextMenu:u,closeContextMenu:x,openLnbcModal:l,closeLnbcModal:f,openConfirmModal:y,closeConfirmModal:_,openCashuModal:h,closeCashuModal:p,getCashuMint:w,openAuthorSubscribeModal:v,closeAuthorSubscribeModal:T,addConnectedRelay:N,removeConnectedRelay:I,profileLink:C,setLegendCustomization:D}});return pe(lb.Provider,{value:A,get children(){return e.children}})},"AppProvider"),Ts=o(()=>zt(lb),"useAppContext");let Hl=0;const mB=o((e,t)=>{Hl&&window.clearTimeout(Hl),Hl=window.setTimeout(e,t)},"debounce"),yB=o((e,t)=>{const{bottom:n,height:r,top:i}=e.getBoundingClientRect(),s=t.getBoundingClientRect();return i<=s.top?s.top-i<=r:n-s.bottom<=r},"isVisibleInContainer"),bB=o(()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),"uuidv4"),dr=o(e=>{if(!e.startsWith("lnbc"))return;let t=[],n="",r=4;do{const a=e[r],c=parseInt(a);if(c!==0&&!c)break;t.push(a),r++}while(r<e.length);n=e[r];let s=parseInt(t.join(""))*1e8;switch(n){case"m":s=s/1e3;break;case"u":s=s/1e6;break;case"n":s=s/1e9;break;case"p":s=s/1e12;break;default:s=s;break}return s},"parseBolt11"),wB=o(e=>{let t={};for(t.x=e.offsetLeft,t.y=e.offsetTop;e.offsetParent&&(t.x=t.x+e.offsetParent.offsetLeft,t.y=t.y+e.offsetParent.offsetTop,e!=document.getElementsByTagName("body")[0]);)e=e.offsetParent;return t},"getScreenCordinates"),VI=o(()=>Math.floor(new Date().getTime()/1e3),"timeNow"),_B=o(async e=>{const t=await e.arrayBuffer();return crypto.subtle.digest("SHA-256",t).then(n=>Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join(""))},"sha256"),vB=o(e=>/&(lt|gt);/.test(e)?e.replace(/&lt;/g,"<").replace(/&gt;/g,">"):e,"convertHtmlEntityToAngleBrackets"),EB=o((e,t,n)=>{let r=new Set,i=n;for(n>t&&(i=t);r.size<i;){const s=e+Math.floor(Math.random()*t);r.add(s)}return[...r]},"getRandomIntegers"),xB=o(()=>localStorage.getItem("devMode")==="true","isDev$1"),SB=o(e=>{if(e<1)return"0";let t=1;const n=["","bytes","KB","MB","GB","TB"];for(let s=1;s<6;s++)if(e<Math.pow(1024,s)){t=s;break}const r=Math.round(e/Math.pow(1024,t-1));return`${new Intl.NumberFormat("en-US").format(r)} ${n[t]}`},"formatStorage"),Ct=o((e,t,n,r)=>{const i=Me(e,{onEvent:(s,a)=>{n&&n(a)},onEose:()=>{r&&r(),i()}});t()},"handleSubscription"),Cp=o((e,t,n,r)=>new Promise(i=>{const s=Me(e,{onEvent:(a,c)=>{n&&n(c)},onEose:()=>{r&&r(),s(),i(!0)}});t()}),"handleSubscriptionAsync"),AB=o(e=>{const t=String(Math.floor(e/60)).padStart(2,"0"),n=String(Math.ceil(e%60)).padStart(2,"0");return`${t}:${n}`},"humanizeTime"),nf=o((e,t)=>{let n=0;for(let r=e.length-1;r>=0;r--){const i=e[r];if(t.sortBy==="created_at"&&i.msg.created_at!==t.since||t.sortBy==="satszapped"&&i.post.satszapped!==t.since||t.sortBy==="score"&&i.post.score!==t.since)break;n++}return n},"calculateNotesOffset"),Xa=o((e,t)=>{let n=0;for(let r=e.length-1;r>=0;r--){const i=e[r];if(t.sortBy==="created_at"&&i.msg.created_at!==t.since||t.sortBy==="satszapped"&&i.satszapped!==t.since||t.sortBy==="score"&&i.score!==t.since)break;n++}return n},"calculateReadsOffset"),MB=o((e,t)=>{let n=0;for(let r=e.length-1;r>=0;r--){const i=e[r];if(t.sortBy==="created_at"&&i.created_at!==t.since||t.sortBy==="satszapped"&&i.amount!==t.since||t.sortBy==="amount_sats"&&i.amount!==t.since)break;n++}return n},"calculateZapsOffset"),KI=o((e,t)=>{let n=0;for(let r=e.length-1;r>=0;r--){const i=e[r];if(t.sortBy==="created_at"&&i.created_at!==t.since)break;n++}return n},"calculateDMConversationOffset"),JI=o((e,t)=>{let n=0;for(let r=e.length-1;r>=0;r--){const i=e[r];if(t.sortBy==="latest_at"&&i.dmInfo.latest_at!==t.since)break;n++}return n},"calculateDMContactsOffset"),kB=o(e=>/(\s+|\r\n|\r|\n|^)lnbc[a-zA-Z0-9]+/.test(e),"msgHasInvoice"),TB=o(e=>/(\s+|\r\n|\r|\n|^)cashuA[a-zA-Z0-9]+/.test(e),"msgHasCashu"),NB=o(()=>Math.floor(new Date().getTime()/1e3),"now"),YI={likes:[],defaultRelays:[],relays:[],activeRelays:[],suspendedRelays:[],relaySettings:{},publicKey:void 0,activeUser:void 0,showNewNoteForm:!1,following:[],followingSince:0,followInProgress:"",muted:[],mutedTags:[],mutedPrivate:"",mutedSince:0,isKeyLookupDone:!1,quotedNote:void 0,connectToPrimaryRelays:!0,contactsTags:[],contactsContent:"",mutelists:[],mutelistSince:0,allowlist:[],allowlistSince:0,sec:void 0,showPin:"",showForgot:!1,showGettingStarted:!1,showLogin:!1,emojiHistory:[],membershipStatus:{},bookmarks:[],proxyThroughPrimal:!1,proxySettingSet:!1,premiumReminder:!1,followData:{tags:[],date:0,relayInfo:"",openDialog:!1,following:[]}},ub=Ht();function QI(e){const t=Ts();fy(),Cy();let n={};const r=10;let i=[],s={},a=[],c;const u=o(()=>{if(j.relays.length===0){const J=Object.keys(j.relaySettings||{}).map(Xg.normalizeURL).map(Ha);ee("suspendedRelays",()=>J)}else{ee("suspendedRelays",()=>j.relays);for(let ne=0;ne<j.relays.length;ne++)j.relays[ne].close()}const Z="wss://relay.primal.net".split(",")||[];for(let ne=0;ne<Z.length;ne++){const J=Z[ne];j.suspendedRelays.find(se=>se.url===J)||ee("suspendedRelays",j.suspendedRelays.length,()=>Ha(J))}ee("relays",()=>[]),ee("activeRelays",()=>[...j.suspendedRelays])},"suspendRelays"),l=o(async()=>{const Z=j.suspendedRelays.length>0?j.suspendedRelays.reduce((ne,J)=>({...ne,[J.url]:{...j.relaySettings[J.url]??{read:!0,write:!0}}}),{}):j.relaySettings;await B(Z),ee("suspendedRelays",()=>[]),ee("activeRelays",()=>j.relays)},"reconnectSuspendedRelays"),f=o(async Z=>{ee("proxyThroughPrimal",()=>Z),j.proxySettingSet||ee("proxySettingSet",()=>!0),Z?u():l()},"setProxyThroughPrimal");at(Bi(()=>t?.appState,(Z,ne)=>{if(Z==="sleep"){u();return}Z==="waking"&&ne==="sleep"&&l()}));const h=o(Z=>{if(Z!==j.publicKey)return;const ne=`user_profile_${ue}`;Ct(ne,()=>si([Z],ne),ze)},"updateAccountProfile"),p=o(Z=>{c=new WebSocket("wss://wallet.primal.net/v1"),c.addEventListener("close",()=>{xt("MEMBERSHIP SOCKET CLOSED")}),c.addEventListener("open",()=>{xt("MEMBERSHIP SOCKET OPENED"),Z()})},"openMembershipSocket"),y=o(()=>{p(()=>{if(!c||c.readyState!==WebSocket.OPEN)return;const Z=`ps_${ue}`;let ne=!1;const J=cE(c,Z,(se,be,ce)=>{if(se==="EVENT"){const de=JSON.parse(ce?.content||"{}");ne=!0,ee("membershipStatus",()=>({...de}))}se==="EOSE"&&(J(),c?.close(),ne||ee("membershipStatus",()=>({tier:"none"})),_())});XT(j.publicKey,Z,c)})},"checkMembershipStatus"),_=o(()=>{if(["premium","premium-legend"].includes(j.membershipStatus.tier||"")){ee("premiumReminder",()=>!1);return}const Z=new Date().getTime(),ne=YA(j.publicKey)||0;Z-ne>Pd&&ee("premiumReminder",()=>!0)},"checkPremiumRemider"),x=o(()=>{const Z=new Date().getTime();ee("premiumReminder",()=>!1),JA(j.publicKey,Z),setTimeout(()=>{_()},Pd)},"clearPremiumRemider"),w=o(()=>{ee("showGettingStarted",()=>!0)},"showGetStarted"),v=o(()=>{ee("sec",()=>{}),ee("publicKey",()=>{}),localStorage.removeItem("pubkey"),QA()},"logout"),T=o(Z=>{if(!Z){v();return}const ne=Pe.decode(Z);if(ne.type==="nsec"&&ne.data){ee("sec",()=>Z);const J=Rf(ne.data);J!==j.publicKey&&N(J);const se=wl(J);se&&ee("activeUser",()=>({...se})),h(J)}},"setSec"),N=o(Z=>{if(Z&&Z.length>0){ee("publicKey",()=>Z),localStorage.setItem("pubkey",Z),y();const ne=nM(Z);ee("bookmarks",()=>[...ne]),Ue()}else ee("publicKey",()=>{}),localStorage.removeItem("pubkey");ee("isKeyLookupDone",()=>!0)},"setPublicKey"),I=o(()=>!!j.publicKey,"hasPublicKey"),C=o(Z=>{const ne=Z.reduce((J,se)=>({...J,[se.url]:{write:!0,read:!0}}),{});D({...ne},!0),B({...ne},!0)},"resetRelays"),D=o((Z,ne)=>{let J={...Z};if(Object.keys(J).length===0&&(J=U(J)),ne){for(let ce in j.relaySettings){if(J[ce])continue;ee("relaySettings",()=>({[ce]:void 0}));const de=j.relays.find(Ie=>Ie.url===ce);if(de){de.close();const Ie=j.relays.filter(Te=>Te.url!==ce);ee("relays",()=>Ie)}}return ee("relaySettings",()=>({...J})),B(J),bl(j.publicKey,J),!0}const se=j.relaySettings;let be=Object.keys(J).reduce((ce,de)=>se[de]?ce:{...ce,[de]:J[de]},se);return Object.keys(be).length===0||(ee("relaySettings",()=>({...be})),bl(j.publicKey,be)),!0},"setRelaySettings"),U=o(Z=>{const ne=QM();return{...Z,...ne}},"attachDefaultRelays"),H=o(Z=>{ee("connectToPrimaryRelays",()=>Z)},"setConnectToPrimaryRelays"),B=o(async(Z,ne)=>{if(!j.proxySettingSet||j.proxyThroughPrimal)return;if(Object.keys(Z).length===0){const ce=`default_relays_${ue}`;Ct(ce,()=>XM(ce),E);return}const J=j.connectToPrimaryRelays?U(Z):Z;for(let ce=0;ce<a.length;ce++){const de=a[ce];J[de.url]&&delete J[de.url]}const se=o(ce=>{ne&&xl([ce],Z,j.proxyThroughPrimal),!j.relays.find(de=>de.url===ce.url)&&(s[ce.url]=setTimeout(()=>{n[ce.url]=0},3*ga),ee("relays",de=>[...de,ce]))},"onConnect"),be=o((ce,de)=>{if(en("Connection failed to relay ",ce.url," because: ",de),s[ce.url]&&clearTimeout(s[ce.url]),ee("relays",Ie=>Ie.filter(Te=>Te.url!==ce.url)),i.includes(ce.url)){i=i.filter(Ie=>Ie!==ce.url);return}if(de!=="close"){if((n[ce.url]||0)<r){n[ce.url]=(n[ce.url]||0)+1,setTimeout(()=>{xt("Reconnect to ",ce.url," , try",n[ce.url],"/",r),sy(ce,ga*n[ce.url],se,be,!0)},ga*n[ce.url]);return}en("Reached atempt limit ",ce.url)}},"onFail");await YM(J,se,be)},"connectToRelays");let z=0;const A=o(async()=>{const ne=window.nostr,J=localStorage.getItem("pubkey");if(J){N(J);const se=wl(J);se&&ee("activeUser",()=>({...se}))}if(ne===void 0){if(nt("Nostr extension not found"),z<4){z+=1,xt("Nostr extension retry attempt: ",z),setTimeout(A,250);return}const se=Zf();se?se.startsWith(eo)?ee("showPin",()=>se):T(se):ee("publicKey",()=>{}),ee("isKeyLookupDone",()=>!0);return}try{const se=await pM();if(se===void 0)setTimeout(A,250);else{if(se!==J){N(se);const be=wl(se);be&&ee("activeUser",()=>({...be}))}h(se)}}catch(se){N(void 0),localStorage.removeItem("pubkey"),nt("error fetching public key: ",se)}},"fetchNostrKey"),d=o(Z=>{ee("activeUser",()=>({...Z}))},"setActiveUser"),m=o(()=>{ee("showNewNoteForm",()=>!0)},"showNewNoteForm"),S=o(()=>{ee("showNewNoteForm",()=>!1)},"hideNewNoteForm"),R=o(async Z=>{if(j.likes.includes(Z.id))return!1;const{success:ne}=await OM(Z,j.proxyThroughPrimal,j.activeRelays,j.relaySettings);return ne&&(ee("likes",J=>[...J,Z.id]),Dh(j.publicKey,j.likes)),ne},"addLike"),k=o(Z=>{const ne={[Z]:{write:!0,read:!0}};D(ne),B(ne),i=i.filter(se=>se!==Z);const J=Me(`before_add_relay_${ue}`,{onEvent:(se,be)=>{const ce=JSON.parse(be?.content||"{}"),de={...j.relaySettings,...ce};D(de,!0)},onEose:()=>{xl(j.activeRelays,j.relaySettings,j.proxyThroughPrimal),J()}});va(j.publicKey,`before_add_relay_${ue}`)},"addRelay"),P=o(Z=>{const ne=j.relays.find(se=>se.url===Z||`${se.url}/`===Z);if(ne){ne.close();const se=j.relays.filter(be=>be.url!==Z);ee("relays",()=>se)}i.push(Z),n[Z]=0,ee("relaySettings",()=>({[Z]:void 0})),bl(j.publicKey,j.relaySettings);const J=Me(`before_remove_relay_${ue}`,{onEvent:(se,be)=>{let ce=JSON.parse(be?.content||"{}");delete ce[Z];const de={...j.relaySettings,...ce};D(de,!0)},onEose:()=>{xl(j.activeRelays,j.relaySettings,j.proxyThroughPrimal),J()}});va(j.publicKey,`before_remove_relay_${ue}`)},"removeRelay"),F=o(Z=>{const ne=Z.created_at,J=Z.tags,se=Z.content,be=J.reduce((ce,de)=>de[0]==="p"?[...ce,de[1]]:ce,[]);ee("following",()=>be),ee("followingSince",()=>ne||0),ee("contactsTags",()=>[...J]),ee("contactsContent",()=>se),yl(j.publicKey,be,ne||0)},"updateContacts"),M=o(Z=>{if(Z.created_at&&Z.created_at<j.followingSince){const J=Oe(j.publicKey);return{following:J.following,created_at:J.followingSince||0,tags:j.contactsTags,content:j.contactsContent}}return{following:Z.tags.reduce((J,se)=>se[0]==="p"?[...J,se[1]]:J,[]),created_at:Z.created_at||0,tags:Z.tags,content:Z.content}},"extractContacts"),g=o(Z=>{const ne=Z.created_at,J=Z.tags;if(Z.kind===W.CategorizedPeople&&J.find(be=>be[0]==="d"&&be[1]==="mute"))return;const se=J.reduce((be,ce)=>{if(ce[0]!=="p")return be;const de=ce[1];return j.muted.includes(de)?be:[...be,de]},[]);ee("mutedTags",()=>[...J]),ee("muted",be=>[...be,...se]),ee("mutedPrivate",()=>Z.content),ee("mutedSince",()=>ne||0),WA(j.publicKey,se,Z.content,ne||0)},"updateMuted"),L=o(async(Z,ne,J,se,be,ce)=>{const{success:de,note:Ie}=await Gh(se,J,be,j.proxyThroughPrimal,j.activeRelays,j.relaySettings);de&&Ie&&(ee("following",()=>ne),ee("followingSince",()=>J),ee("contactsTags",()=>[...se]),ee("contactsContent",()=>be),yl(j.publicKey,ne,J),mr([Ie],`import_follow_contacts_${ue}`,()=>{ce&&ce(!1,Z)}))},"resolveContacts"),V=o(async(Z,ne,J,se)=>{const{success:be,note:ce}=await Gh(ne,Z,J,j.proxyThroughPrimal,j.activeRelays,j.relaySettings);if(be&&ce){const de=ce.tags.reduce((Ie,Te)=>Te[0]==="p"?[...Ie,Te[1]]:Ie,[]);ee("following",()=>de),ee("followingSince",()=>Z),ee("contactsTags",()=>[...ne]),ee("contactsContent",()=>J),yl(j.publicKey,de,Z),mr([ce],`import_follow_contacts_${ue}`,()=>{se&&se(!1,j.publicKey)})}},"replaceContactList"),ie=o((Z,ne)=>{if(!j.publicKey||j.following.includes(Z))return;ee("followInProgress",()=>Z);let J={content:"",created_at:0,tags:[],following:[]},se=[];const be=Me(`before_follow_${ue}`,{onEvent:(ce,de)=>{if(!(!de||de.kind!==W.Contacts)&&(se.push(de),xt("FOLLOW DATE CONTENT: ",de.created_at),xt("FOLLOW DATE STORE: ",j.followingSince),xt("FOLLOW DATE DIFF: ",(de.created_at||0)-j.followingSince),J=M(de),en("FOLLOW DATA PRE CHANGE: ",J),!J.following.includes(Z))){const Ie=J.content,Te=Math.floor(new Date().getTime()/1e3),Ge=J.tags,Wt=[...J.following,Z],Ye=[...Ge,["p",Z]];Wt.length<2||Ye.length<2?(en("FOLLOW ISSUE: ",`before_follow_${ue}`),en("FOLLOW CONTENT: ",se),en("FOLLOW DATA: ",J),ee("followData",()=>({openDialog:!0,date:Te,tags:Ye,relayInfo:Ie,following:Wt}))):L(Z,Wt,Te,Ye,Ie,ne)}},onEose:()=>{if(j.following.length===0){const ce=Math.floor(new Date().getTime()/1e3);L(Z,[Z],ce,[["p",Z]],j.relays[0].url,ne)}ee("followInProgress",()=>""),be()}});_a(j.publicKey,`before_follow_${ue}`)},"addFollow"),he=o((Z,ne)=>{if(!j.publicKey||!j.following.includes(Z)||j.publicKey===Z)return;ee("followInProgress",()=>Z);let J={content:"",created_at:0,tags:[],following:[]},se=[];const be=Me(`before_unfollow_${ue}`,{onEvent:(ce,de)=>{if(!(!de||de.kind!==W.Contacts)&&(se.push(de),xt("FOLLOW DATE CONTENT: ",de.created_at),xt("FOLLOW DATE STORE: ",j.followingSince),xt("FOLLOW DATE DIFF: ",(de.created_at||0)-j.followingSince),J=M(de),en("FOLLOW DATA PRE CHANGE: ",J),J.following.includes(Z))){const Ie=J.content,Te=Math.floor(new Date().getTime()/1e3),Ge=J.tags,Wt=J.following.filter(st=>st!==Z),Ye=Ge.filter(st=>st[0]!=="p"||st[1]!==Z);Wt.length<2||Ye.length<2?(en("FOLLOW ISSUE: ",`before_unfollow_${ue}`),en("FOLLOW CONTENT: ",se),en("FOLLOW DATA: ",J),ee("followData",()=>({openDialog:!0,date:Te,tags:Ye,relayInfo:Ie,following:Wt}))):L(Z,Wt,Te,Ye,Ie,ne)}},onEose:()=>{ee("followInProgress",()=>""),be()}});_a(j.publicKey,`before_unfollow_${ue}`)},"removeFollow"),ge=o(Z=>{ee("quotedNote",()=>Z)},"quoteNote"),_e=o(Z=>{if(!j.publicKey||!j.muted||j.muted.includes(Z))return;const ne=Me(`before_mute_${ue}`,{onEvent:(J,se)=>{se&&(se.kind===W.MuteList||se.kind===W.CategorizedPeople)&&se.created_at&&se.created_at>j.mutedSince&&g(se)},onEose:async()=>{if(!j.muted.includes(Z)){const J=Math.floor(new Date().getTime()/1e3),se=[...j.muted,Z],be=[...j.mutedTags,["p",Z]],{success:ce,note:de}=await qh(be,J,j.mutedPrivate,j.proxyThroughPrimal,j.activeRelays,j.relaySettings);ce&&(ee("muted",()=>se),ee("mutedSince",()=>J),Uh(j.publicKey,se,J),de&&mr([de],`import_mutelists_event_add_${ue}`))}ne()}});_l(j.publicKey,`before_mute_${ue}`)},"addToMuteList"),me=o((Z,ne)=>{if(!j.publicKey||!j.muted||!j.muted.includes(Z))return;const J=Me(`before_unmute_${ue}`,{onEvent:(se,be)=>{be&&[W.MuteList,W.CategorizedPeople].includes(be.kind)&&be.created_at&&be.created_at>j.followingSince&&g(be)},onEose:async()=>{if(j.muted.includes(Z)){const se=Math.floor(new Date().getTime()/1e3),be=j.muted.filter(Te=>Te!==Z),ce=j.mutedTags.filter(Te=>Te[0]!=="p"||Te[1]!==Z),{success:de,note:Ie}=await qh(ce,se,j.mutedPrivate,j.proxyThroughPrimal,j.activeRelays,j.relaySettings);de&&(ee("muted",()=>be),ee("mutedSince",()=>se),Uh(j.publicKey,be,se),Ie&&mr([Ie],`import_mute_list_remove_${ue}`))}ne&&ne(),J()}});_l(j.publicKey,`before_unmute_${ue}`)},"removeFromMuteList"),te=o(Z=>{Z?localStorage.setItem("cacheServer",Z):localStorage.removeItem("cacheServer"),oE()},"changeCachingService"),X=o(()=>{for(let Z=0;Z<j.defaultRelays.length;Z++){const ne=j.defaultRelays[Z],J=j.relays.find(se=>se.url===ne);if(J){J.close();const se=j.relays.filter(be=>be.url!==ne);ee("relays",()=>se)}i.push(ne),n[ne]=0}},"dissconnectDefaultRelays"),re=o(Z=>{let ne=[...j.mutelists];const J=Z.created_at,se=Z.tags;if(Z.kind!==W.CategorizedPeople||!se.find(be=>be[0]==="d"&&be[1]==="mutelists"))return[...j.mutelists];if(ee("mutelistSince",()=>J||0),!se||se.length===0)return[];for(let be=0;be<se.length;be++){const ce=se[be];if(ce[0]!=="d"&&ce[0]==="p"){const de=!!(ce[4]&&ce[4].includes("content")),Ie=!!(ce[4]&&ce[4].includes("trending")),Te=j.mutelists.findIndex(Wt=>Wt.pubkey===ce[1]),Ge={pubkey:ce[1],relay:ce[2]||"",petname:ce[3]||"",content:de,trending:Ie};if(Te===-1){ne.push(Ge);continue}ne[Te]=Ge;continue}}return ne},"updateFilterlists"),xe=o(Z=>{if(!Z)return;const J=`fl_${tr()}_${ue}`;let se=[];const be=Me(J,{onEvent:(ce,de)=>{se=re(de)},onEose:()=>{j.publicKey&&!se.find(ce=>ce.pubkey===j.publicKey)&&se.unshift({pubkey:j.publicKey,content:!0,trending:!0}),ee("mutelists",()=>[...se]),be()}});ta(Z,J)},"getFilterLists"),fe=o(async Z=>{if(!Z)return;const J=`bma_${tr()}_${ue}`;let se=[...j.mutelists];const be=Me(J,{onEvent:(ce,de)=>{de&&de.kind===W.CategorizedPeople&&de.created_at&&de.created_at>j.mutelistSince&&(se=[...re(de)])},onEose:async()=>{if(ee("mutelists",()=>[...se]),j.mutelists.find(Te=>Te.pubkey===Z))return;const ce=Math.floor(new Date().getTime()/1e3);ee("mutelists",Te=>[...Te,{pubkey:Z,content:!0,trending:!0}]);const{success:de,note:Ie}=await vl(j.mutelists,ce,"",j.proxyThroughPrimal,j.activeRelays,j.relaySettings);de&&Ie&&mr([Ie],`import_mutelists_event_add_${ue}`),be()}});ta(j.publicKey,J)},"addFilterList"),le=o(Z=>{if(!Z||Z===j.publicKey)return;const J=`bmr_${tr()}_${ue}`;let se=[...j.mutelists];const be=Me(J,{onEvent:(ce,de)=>{de&&de.kind===W.CategorizedPeople&&de.created_at&&de.created_at>j.mutelistSince&&(se=re(de))},onEose:async()=>{ee("mutelists",()=>[...se]);const ce=j.mutelists.filter(Ge=>Ge.pubkey!==Z),de=Math.floor(new Date().getTime()/1e3);ee("mutelists",()=>[...ce]);const{success:Ie,note:Te}=await vl(j.mutelists,de,"",j.proxyThroughPrimal,j.activeRelays,j.relaySettings);Ie&&Te&&mr([Te],`import_mutelists_event_remove_${ue}`),be()}});ta(j.publicKey,J)},"removeFilterList"),q=o((Z,ne=!0,J=!0)=>{if(!Z)return;const be=`bmu_${tr()}_${ue}`,ce=Me(be,{onEvent:(de,Ie)=>{Ie&&Ie.kind===W.CategorizedPeople&&Ie.created_at&&Ie.created_at>j.mutelistSince&&re(Ie)},onEose:async()=>{if(!j.mutelists.find(Ge=>Ge.pubkey===Z)){ce();return}const de=Math.floor(new Date().getTime()/1e3);ee("mutelists",Ge=>Ge.pubkey===Z,()=>({content:ne,trending:J}));const{success:Ie,note:Te}=await vl(j.mutelists,de,"",j.proxyThroughPrimal,j.activeRelays,j.relaySettings);Ie&&Te&&mr([Te],`import_mutelists_event_update_${ue}`),ce()}});ta(j.publicKey,be)},"updateFilterList"),Y=o(Z=>{const ne=Z.created_at,J=Z.tags;if(Z.kind!==W.CategorizedPeople||!J.find(be=>be[0]==="d"&&be[1]==="allowlist"))return;ee("mutelistSince",()=>ne||0);const se=J.reduce((be,ce)=>ce[0]==="p"?[...be,ce[1]]:be,[]);ee("allowlist",()=>se)},"updateAllowlist"),ae=o(Z=>{if(!Z)return;const ne=`allowlist_${ue}`,J=Me(ne,{onEvent:(se,be)=>{Y(be)},onEose:()=>{J()}});El(Z,ne)},"getAllowList"),we=o((Z,ne)=>{if(!Z)return;const se=`baa_${tr()}_${ue}`,be=Me(se,{onEvent:(ce,de)=>{de&&de.kind===W.CategorizedPeople&&de.created_at&&de.created_at>j.allowlistSince&&Y(de)},onEose:async()=>{if(j.allowlist.includes(Z))return;const ce=Math.floor(new Date().getTime()/1e3);ee("allowlist",j.allowlist.length,()=>Z);const{success:de,note:Ie}=await Vh(j.allowlist,ce,"",j.proxyThroughPrimal,j.activeRelays,j.relaySettings);de&&Ie&&mr([Ie],`import_allowlist_event_add_${ue}`),ne&&ne(),be()}});El(j.publicKey,se)},"addToAllowlist"),ve=o(Z=>{if(!Z)return;const J=`allow_list_remove_${tr()}_${ue}`,se=Me(J,{onEvent:(be,ce)=>{ce&&ce.kind===W.CategorizedPeople&&ce.created_at&&ce.created_at>j.allowlistSince&&Y(ce)},onEose:async()=>{if(!j.allowlist.includes(Z))return;const be=Math.floor(new Date().getTime()/1e3),ce=j.allowlist.filter(Te=>Te!==Z);ee("allowlist",()=>[...ce]);const{success:de,note:Ie}=await Vh(j.allowlist,be,"",j.proxyThroughPrimal,j.activeRelays,j.relaySettings);if(de){Ie&&mr([Ie],`import_allowlist_event_remove_${ue}`);return}se()}});El(j.publicKey,J)},"removeFromAllowlist"),Be=o(Z=>{const ne=j.emojiHistory;if(ne.find(J=>J.name===Z.name)){let J=[...ne];J.sort((se,be)=>se.name===Z.name?-1:be.name===Z.name?1:0),ee("emojiHistory",()=>[...J]),$h(j.publicKey,j.emojiHistory);return}ee("emojiHistory",J=>[Z,...J].slice(0,40)),$h(j.publicKey,j.emojiHistory)},"saveEmoji"),Zt=o(()=>{j.publicKey||(ee("isKeyLookupDone",()=>!1),A())},"checkNostrKey"),Ue=o(()=>{const Z=`user_bookmarks_${ue}`;Ct(Z,()=>GM(j.publicKey,Z),$,G)},"fetchBookmarks"),Ce=o(Z=>{ee("bookmarks",()=>[...Z])},"updateBookmarks"),ut=o(()=>{const Z=`user_relays_${ue}`;Ct(Z,()=>va(j.publicKey,Z),O)},"updateRelays"),je=o(()=>{const Z=`user_contacts_${ue}`;Ct(Z,()=>_a(j.publicKey,Z),_n)},"updateContactsList");at(()=>{const Z=j.publicKey;if(!Z)return;const ne=Oe(Z);let J={...ne.relaySettings};if(ee("relaySettings",()=>({...ne.relaySettings})),Object.keys(J).length>0){B(J);return}if(j.isKeyLookupDone&&j.publicKey){J={...Oe(j.publicKey).relaySettings},B(J);return}}),at(()=>{if(j.isKeyLookupDone&&j.publicKey){const Z=Oe(j.publicKey);j.followingSince<Z.followingSince&&(ee("following",()=>({...Z.following})),ee("followingSince",()=>Z.followingSince)),je(),ut(),ee("emojiHistory",()=>KA(j.publicKey))}}),at(()=>{if(j.isKeyLookupDone&&I()){const Z=Oe(j.publicKey);j.mutedSince<Z.mutedSince&&(ee("muted",()=>({...Z.muted})),ee("mutedSince",()=>Z.mutedSince),ee("mutedPrivate",()=>Z.mutedPrivate));const ne=`mutelist_${ue}`;Ct(ne,()=>_l(j.publicKey,ne),b),xe(j.publicKey),ae(j.publicKey)}}),at(()=>{setTimeout(()=>{a=[...j.relays],!(!j.publicKey||j.relays.length===0||!j.proxySettingSet||j.proxyThroughPrimal)&&ZM(j.publicKey,j.activeRelays,Z=>{ee("likes",()=>[...Z]),Dh(j.publicKey,Z)})},100)}),at(()=>{const Z="wss://relay.primal.net".split(",")||[];if(j.connectToPrimaryRelays){const ne=j.suspendedRelays.map(se=>se.url),J=Z.filter(se=>!ne.includes(se)&&!ne.includes(`${se}/`)).reduce((se,be)=>({...se,[be]:{read:!0,write:!0}}),{});B(J)}else for(let ne=0;ne<Z.length;ne++){const J=Z[ne],se=j.relays.find(be=>be.url===J);if(se){se.close();const be=j.relays.filter(ce=>ce.url!==J);ee("relays",()=>be)}}});const ze=o(Z=>{if(Z?.content&&Z.kind===W.Metadata){const ne=JSON.parse(Z.content);ee("activeUser",()=>({...ne,pubkey:Z.pubkey})),XA(ne),ut()}},"handleUserProfileEvent"),_n=o(Z=>{if(Z&&Z.kind===W.Contacts){if(!Z.created_at||Z.created_at<j.followingSince)return;F(Z)}},"handleUserContactsEvent"),O=o(Z=>{if(Z&&Z.kind===W.UserRelays){const ne=iy(Z.tags);D(ne,!0)}},"handleUserRelaysEvent"),b=o(Z=>{if(Z&&[W.MuteList,W.CategorizedPeople].includes(Z.kind)){if(!Z.created_at||Z.created_at<j.mutedSince)return;g(Z)}},"handleMuteListEvent"),E=o(Z=>{const ne=JSON.parse(Z.content||"[]");ee("defaultRelays",()=>[...ne]);const J=ne.reduce((se,be)=>({...se,[be]:{read:!0,write:!0}}),{});Object.keys(J).length>0&&B(J)},"handleDefaultRelaysEvent"),$=o(Z=>{if(!Z||Z.kind!==W.Bookmarks||!Z.created_at||Z.created_at<j.followingSince)return;const ne=Z.tags.reduce((J,se)=>r_.includes(se[0])?[...J,se[1]]:[...J],[]);ee("bookmarks",()=>[...ne])},"handleUserBookmarksEvent"),G=o(()=>{tM(j.publicKey,j.bookmarks)},"handleUserBookmarksEose"),Q=o((Z,ne)=>{ee(Z,()=>ne)},"setString"),oe=o((Z,ne)=>{ee(Z,()=>ne)},"setFlag"),Ae=o(Z=>{ee("followData",()=>({...Z}))},"setFollowData"),[j,ee]=Xt({...YI,hasPublicKey:I,actions:{showNewNoteForm:m,hideNewNoteForm:S,setActiveUser:d,addLike:R,setPublicKey:N,updateAccountProfile:h,addFollow:ie,removeFollow:he,quoteNote:ge,addToMuteList:_e,removeFromMuteList:me,addRelay:k,removeRelay:P,setConnectToPrimaryRelays:H,changeCachingService:te,dissconnectDefaultRelays:X,connectToRelays:B,addFilterList:fe,removeFilterList:le,updateFilterList:q,addToAllowlist:we,removeFromAllowlist:ve,setSec:T,logout:v,showGetStarted:w,saveEmoji:Be,checkNostrKey:Zt,fetchBookmarks:Ue,updateBookmarks:Ce,resetRelays:C,setProxyThroughPrimal:f,updateRelays:ut,updateContactsList:je,setString:Q,setFlag:oe,setFollowData:Ae,resolveContacts:L,replaceContactList:V,clearPremiumRemider:x}});return pe(ub.Provider,{value:j,get children(){return e.children}})}o(QI,"AccountProvider");function Zn(){return zt(ub)}o(Zn,"useAccountContext");const XI=o((e,t,n,r=0,i=20,s=0,a=0)=>{let c={spec:t,limit:i,offset:a};r>0&&(c.until=r),s>0&&(c.since=s),e&&(c.user_pubkey=e),Ee(JSON.stringify(["REQ",n,{cache:["mega_feed_directive",c]}]))},"getMegaFeed"),Rc=o((e,t,n,r)=>{let i={event_ids:t};e&&(i.user_pubkey=e),r&&(i.extended_response=r),Ee(JSON.stringify(["REQ",n,{cache:["events",i]}]))},"getEvents"),eR=o((e,t,n,r,i=0,s=20,a=0)=>{if(!t)return;let c={pubkey:t,limit:s,notes:r};e&&(c.user_pubkey=e),i>0&&(c.until=i),a>0&&(c.offset=a),Ee(JSON.stringify(["REQ",n,{cache:["long_form_content_feed",c]}]))},"getUserArticleFeed"),tR=o((e,t,n,r)=>{if(!t)return;let i={pubkey:t,since:r,notes:"authored",limit:100};e&&(i.user_pubkey=e),Ee(JSON.stringify(["REQ",n,{cache:["feed",i]}]))},"getFutureUserFeed"),Bp=o((e,t,n,r=0,i=100)=>{const s=Pe.decode(t).data;let a="";if(typeof s=="string"&&(a=s),typeof s!="string"&&"id"in s&&(a=s.id),a.length===0)return;let c={event_id:a,limit:i};e&&(c.user_pubkey=e),Ee(JSON.stringify(["REQ",n,{cache:["thread_view",c]}]))},"getThread"),nR=o((e,t,n,r,i,s=0,a=100)=>{let c={pubkey:t,identifier:n,kind:r,limit:a};e&&(c.user_pubkey=e),Ee(JSON.stringify(["REQ",i,{cache:["long_form_content_thread_view",c]}]))},"getArticleThread"),rR=o((e,t,n,r,i=0,s=20)=>{let a={timeframe:r,scope:n,limit:s};if(e&&(a.user_pubkey=e),i>0&&(a.until=i),r==="trending"){const c=Math.floor((new Date().getTime()-Cw)/1e3);a.created_after=c}if(r==="mostzapped4h"){const c=Math.floor((new Date().getTime()-4*w0)/1e3);a.timeframe="mostzapped",a.created_after=c}Ee(JSON.stringify(["REQ",t,{cache:["explore",a]}]))},"getExploreFeed"),IB=o(e=>{Ee(JSON.stringify(["REQ",e,{cache:["get_reads_topics"]}]))},"getReadsTopics"),RB=o(e=>{Ee(JSON.stringify(["REQ",e,{cache:["get_featured_authors"]}]))},"getFeaturedAuthors"),LB=o((e,t)=>{e&&Ee(JSON.stringify(["REQ",t,{cache:["creator_paid_tiers",{pubkey:e}]}]))},"getAuthorSubscriptionTiers"),Fp=o(e=>{Ee(JSON.stringify(["REQ",e,{cache:["get_reads_feeds"]}]))},"fetchDefaultArticleFeeds"),Up=o(e=>{Ee(JSON.stringify(["REQ",e,{cache:["get_home_feeds"]}]))},"fetchDefaultHomeFeeds"),PB=o((e,t,n)=>{const r=n?{kind:n}:{};e&&(r.user_pubkey=e),Ee(JSON.stringify(["REQ",t,{cache:["get_featured_dvm_feeds",{...r}]}]))},"fetchDVMFeeds"),OB=o((e,t,n,r)=>{const i={identifier:n,pubkey:r};e&&(i.user_pubkey=e),Ee(JSON.stringify(["REQ",t,{cache:["dvm_feed_info",{...i}]}]))},"fetchDVM"),iR=o((e,t)=>{const n=e?.users[t.pubkey],r=JSON.parse(n?.content||"{}"),i=e?.postStats[t.id];return{user:{id:n?.id||"",pubkey:n?.pubkey||t.pubkey,npub:wn(n?.pubkey||t.pubkey),name:r.name||n?.pubkey,about:r.about||"",picture:r.picture||"",nip05:r.nip05||"",banner:r.banner||"",displayName:r.display_name||"",location:r.location||"",lud06:r.lud06||"",lud16:r.lud16||"",website:r.website||"",tags:n?.tags||[],msg:{...n}},note:{id:t.id,pubkey:t.pubkey,created_at:t.created_at||0,tags:t.tags,content:pn(t.content),kind:t.kind,sig:t.sig,likes:i?.likes||0,mentions:i?.mentions||0,reposts:i?.reposts||0,replies:i?.replies||0,zaps:i?.zaps||0,score:i?.score||0,score24h:i?.score24h||0,satszapped:i?.satszapped||0,noteId:Pe.noteEncode(t.id),noteActions:e.noteActions&&e.noteActions[t.id]||cd(t.id),relayHints:e.relayHints}}},"getRepostInfo"),Dp=o((e,t)=>{const n=e.reduce((r,i)=>{if(i.kind!==W.Repost)return r;const s=i.tags.find(a=>a[0]==="e");return s?[...r,s]:r},[]);if(t.kind===W.Repost){const r=t.tags.find(i=>i[0]==="e");return r&&!!n.find(i=>i[1]===r[1])}if(t.kind===W.Text){const r=t.id;return!!n.find(i=>i[1]===r)}return!1},"isRepostInCollection"),fb=o(e=>{let t={};return e.messages.forEach(n=>{if(n.kind===6&&n.content.length===0){const r=n.tags.find(i=>i[0]==="e");r&&(t[r[1]]=n.id)}}),t},"parseEmptyReposts$1"),db=o((e,t=1)=>{try{return JSON.parse(e.content)}catch{return{kind:t,content:"",id:e.id,created_at:e.created_at,pubkey:e.pubkey,sig:e.sig,tags:e.tags}}},"parseKind6"),cd=o(e=>({event_id:e,liked:!1,replied:!1,reposted:!1,zapped:!1}),"noActions$1"),fi=o((e,t)=>{if(e===void 0)return[];const n=e.mentions||{};return e.messages.filter(i=>[W.Text,W.Repost].includes(i.kind)).map(i=>{const s=i.kind===W.Repost?db(i):i,a=e?.users[s.pubkey],c=e?.postStats[s.id];let u={};try{u=JSON.parse(a?.content||"{}")}catch(N){nt("Error in user meta JSON: ",N),u={}}const l=Object.keys(n);let f=s.tags?.reduce((N,I)=>I[0]==="p"?[...N,I[1]]:N,[]);const h=i.kind===W.Repost?iR(e,i):void 0;let p;const y=s.tags||[];for(let N=0;N<y.length;N++){const I=y[N];if(I[0]==="e"&&I[3]!=="mention"){if(I[3]==="reply"){p=[...I];break}if(I[3]==="root"){p=[...I];continue}}}if(!p){const N=y.filter(I=>I[0]==="e"&&I[3]!=="mention");N.length===1?p=[...N[0]]:N.length>1&&(p=[...N[N.length-1]])}let _=[];if(t&&t[s.id]){_=t[s.id]||[];for(let N=0;N<_.length;N++)f.includes(_[N].pubkey)||f.push(_[N].pubkey)}let x={},w={},v={},T={};if(l.length>0)for(let N=0;N<l.length;N++){let I=l[N];const C=n&&n[I];if(C){for(let D=0;D<C.tags.length;D++){const U=C.tags[D];U[0]==="p"&&(w[U[1]]=Je(e.users[U[1]],U[1]))}if([W.Text].includes(C.kind)){const D=e.postStats[I],U=(e.noteActions&&e.noteActions[I])??{event_id:I,liked:!1,replied:!1,reposted:!1,zapped:!1};x[I]={post:{...C,noteId:Pe.noteEncode(C.id),likes:D?.likes||0,mentions:D?.mentions||0,reposts:D?.reposts||0,replies:D?.replies||0,zaps:D?.zaps||0,score:D?.score||0,score24h:D?.score24h||0,satszapped:D?.satszapped||0,noteActions:U},msg:{...C},content:C.content,user:Je(e.users[C.pubkey],C.pubkey),mentionedUsers:w,pubkey:C.pubkey,id:C.id,noteId:Pe.noteEncode(C.id)}}if([W.LongForm,W.LongFormShell].includes(C.kind)){e.postStats[I];const D=(e.noteActions&&e.noteActions[I])??{event_id:I,liked:!1,replied:!1,reposted:!1,zapped:!1},U=(C.tags.find(d=>d[0]==="d")||[])[1],H=C.pubkey,B=W.LongForm,z=e.wordCount&&e.wordCount[C.id]||0;let A={id:C.id,pubkey:C.pubkey,title:"",summary:"",image:"",tags:[],published:C.created_at||0,content:pn(C.content||""),user:Je(a,C.pubkey),topZaps:[..._],naddr:Pe.naddrEncode({identifier:U,pubkey:H,kind:B}),noteId:Pe.naddrEncode({identifier:U,pubkey:H,kind:B}),coordinate:`${B}:${H}:${U}`,msg:C,mentionedNotes:x,mentionedUsers:w,wordCount:z,noteActions:D,likes:c?.likes||0,mentions:c?.mentions||0,reposts:c?.reposts||0,replies:c?.replies||0,zaps:c?.zaps||0,score:c?.score||0,score24h:c?.score24h||0,satszapped:c?.satszapped||0,relayHints:e.relayHints};C.tags.forEach(d=>{switch(d[0]){case"t":A.tags.push(d[1]);break;case"title":A.title=d[1];break;case"summary":A.summary=d[1];break;case"image":A.image=d[1];break;case"published":A.published=parseInt(d[1]);break;case"client":A.client=d[1];break}}),T[A.naddr]={...A}}[W.Highlight].includes(C.kind)&&(v[I]={user:Je(e.users[C.pubkey],C.pubkey),event:{...C}})}}if(f&&f.length>0)for(let N=0;N<f.length;N++){const I=f[N],C=e.users&&e.users[I];w[I]=Je(C,I)}return{user:{id:a?.id||"",pubkey:a?.pubkey||s.pubkey,npub:wn(a?.pubkey||s.pubkey),name:u.name||a?.pubkey||"",about:u.about||"",picture:u.picture||"",nip05:u.nip05||"",banner:u.banner||"",displayName:u.display_name||"",location:u.location||"",lud06:u.lud06||"",lud16:u.lud16||"",website:u.website||"",tags:a?.tags||[],msg:{...a}},post:{id:s.id,pubkey:s.pubkey,created_at:s.created_at||0,tags:s.tags,content:pn(s.content),kind:s.kind,sig:s.sig,likes:c?.likes||0,mentions:c?.mentions||0,reposts:c?.reposts||0,replies:c?.replies||0,zaps:c?.zaps||0,score:c?.score||0,score24h:c?.score24h||0,satszapped:c?.satszapped||0,noteId:Pe.noteEncode(s.id),noteActions:(e.noteActions&&e.noteActions[s.id])??cd(s.id),relayHints:e.relayHints},repost:h,msg:s,mentionedNotes:x,mentionedUsers:w,mentionedHighlights:v,mentionedArticles:T,replyTo:p&&p[1],tags:s.tags,id:s.id,noteId:Pe.noteEncode(s.id),pubkey:s.pubkey,topZaps:[..._],content:pn(s.content),relayHints:e.relayHints}})},"convertToNotes"),Zo=o((e,t)=>{if(e===void 0)return[];const n=e.mentions||{};return e.messages.filter(i=>[W.LongForm,W.Repost,W.LongFormShell].includes(i.kind)).map(i=>{const s=i.kind===W.Repost?db(i,W.LongForm):i,a=s.pubkey,c=(s.tags.find(C=>C[0]==="d")||[])[1],u=W.LongForm,l=Pe.naddrEncode({identifier:c,pubkey:a,kind:u}),f=e?.users[s.pubkey],h=e?.postStats[s.id],p=Object.keys(n);let y=s.tags?.reduce((C,D)=>D[0]==="p"?[...C,D[1]]:C,[]),_=[];if(t&&(t[l]||t[s.id])){_=t[l]||t[s.id]||[];for(let C=0;C<_.length;C++)y.includes(_[C].pubkey)||y.push(_[C].pubkey)}let x={},w={},v={},T={};if(p.length>0)for(let C=0;C<p.length;C++){let D=p[C];const U=n&&n[D];if(U){for(let H=0;H<U.tags.length;H++){const B=U.tags[H];B[0]==="p"&&(w[B[1]]=Je(e.users[B[1]],B[1]))}if([W.Text].includes(U.kind)){const H=e.postStats[D],B=(e.noteActions&&e.noteActions[D])??{event_id:D,liked:!1,replied:!1,reposted:!1,zapped:!1};x[D]={post:{...U,noteId:Pe.noteEncode(U.id),likes:H?.likes||0,mentions:H?.mentions||0,reposts:H?.reposts||0,replies:H?.replies||0,zaps:H?.zaps||0,score:H?.score||0,score24h:H?.score24h||0,satszapped:H?.satszapped||0,noteActions:B},user:Je(e.users[U.pubkey],U.pubkey),mentionedUsers:w,pubkey:U.pubkey,id:U.id,noteId:Pe.noteEncode(U.id)}}if([W.LongForm,W.LongFormShell].includes(U.kind)){e.postStats[D];const H=(e.noteActions&&e.noteActions[D])??{event_id:D,liked:!1,replied:!1,reposted:!1,zapped:!1},B=(U.tags.find(S=>S[0]==="d")||[])[1],z=U.pubkey,A=W.LongForm,d=e.wordCount&&e.wordCount[U.id]||0;let m={id:U.id,pubkey:U.pubkey,title:"",summary:"",image:"",tags:[],published:U.created_at||0,content:pn(U.content||""),user:Je(f,U.pubkey),topZaps:[..._],naddr:Pe.naddrEncode({identifier:B,pubkey:z,kind:A}),noteId:Pe.naddrEncode({identifier:B,pubkey:z,kind:A}),coordinate:`${A}:${z}:${B}`,msg:U,mentionedNotes:x,mentionedUsers:w,wordCount:d,noteActions:H,likes:h?.likes||0,mentions:h?.mentions||0,reposts:h?.reposts||0,replies:h?.replies||0,zaps:h?.zaps||0,score:h?.score||0,score24h:h?.score24h||0,satszapped:h?.satszapped||0,relayHints:e.relayHints};U.tags.forEach(S=>{switch(S[0]){case"t":m.tags.push(S[1]);break;case"title":m.title=S[1];break;case"summary":m.summary=S[1];break;case"image":m.image=S[1];break;case"published":m.published=parseInt(S[1]);break;case"client":m.client=S[1];break}}),T[m.naddr]={...m}}[W.Highlight].includes(U.kind)&&(v[D]={user:Je(e.users[U.pubkey],U.pubkey),event:{...U}})}}if(y&&y.length>0)for(let C=0;C<y.length;C++){const D=y[C],U=e.users&&e.users[D];w[D]=Je(U,D)}const N=e.wordCount&&e.wordCount[i.id]||0;let I={id:s.id,pubkey:s.pubkey,title:"",summary:"",image:"",tags:[],published:parseInt((s.tags.find(C=>C[0]==="published_at")||[])[1]||`${s.created_at}`||"0"),content:pn(s.content||""),user:Je(f,s.pubkey),topZaps:[..._],naddr:Pe.naddrEncode({identifier:c,pubkey:a,kind:u}),noteId:Pe.naddrEncode({identifier:c,pubkey:a,kind:u}),coordinate:`${u}:${a}:${c}`,msg:{...s,kind:u},mentionedNotes:x,mentionedUsers:w,mentionedHighlights:v,mentionedArticles:T,wordCount:N,noteActions:(e.noteActions&&e.noteActions[s.id])??cd(s.id),likes:h?.likes||0,mentions:h?.mentions||0,reposts:h?.reposts||0,replies:h?.replies||0,zaps:h?.zaps||0,score:h?.score||0,score24h:h?.score24h||0,satszapped:h?.satszapped||0,relayHints:e.relayHints};return s.tags.forEach(C=>{switch(C[0]){case"t":I.tags.push(C[1]);break;case"title":I.title=C[1];break;case"summary":I.summary=C[1];break;case"image":I.image=C[1];break;case"published":I.published=parseInt(C[1]);break;case"client":I.client=C[1];break}}),I})},"convertToArticles"),Lc=o((e,t,n)=>{const r=e.repost?e.repost.note:e.post;return(t.repost?t.repost.note:t.post)[n]-r[n]},"sortBy"),hb=o((e,t=!1)=>e.sort((n,r)=>{const i=Lc(n,r,"created_at");return t?-1*i:i}),"sortByRecency"),sR=o((e,t=!1)=>e.sort((n,r)=>{const i=Lc(n,r,"score24h");return t?-1*i:i}),"sortByScore24h"),pb=o((e,t=!1)=>e.sort((n,r)=>{const i=Lc(n,r,"score");return t?-1*i:i}),"sortByScore"),$p=o((e,t=!1)=>e.sort((n,r)=>{const i=Lc(n,r,"satszapped");return t?-1*i:i}),"sortByZapped"),oR=o((e="")=>{const t={trending:sR,popular:pb,latest:hb,mostzapped:$p,mostzapped4h:$p};return t[e||"latest"]||t.latest},"sortingPlan"),aR=o(e=>{const t={trending:"score24h",popular:"score",latest:"created_at",mostzapped:"satszapped",mostzapped4h:"satszapped"};return t[e||"latest"]||t.latest},"paginationPlan"),CB=o((e,t)=>{const n=/(?:\s|^)#[^\s!@#$%^&*(),.?":{}|<>]+/ig,r=/\bnostr:((note|npub|nevent|nprofile|naddr)1\w+)\b|#\[(\d+)\]/g;let i=[],s=[],a;for(;(a=n.exec(e))!=null;)s.push(["t",a[0].trim().slice(1)]);for(;(a=r.exec(e))!==null;)i.push(a[0]);return i.forEach(c=>{const u=Pe.decode(c.split("nostr:")[1]);if(u.type==="npub"){s.push(["p",u.data,"","mention"]);return}if(u.type==="nprofile"){const l=u.data.relays&&u.data.relays[0]||"";s.push(["p",u.data.pubkey,l,"mention"]);return}if(u.type==="note"){s.push(["e",u.data,t&&t[u.data]||"","mention"]);return}if(u.type==="nevent"){const l=u.data.relays&&u.data.relays[0]||"";s.push(["e",u.data.id,l,"mention"]);return}if(u.type==="naddr"){const l=u.data.relays&&u.data.relays[0]||"";s.push(["a",`${u.data.kind}:${u.data.pubkey}:${u.data.identifier}`,l,"mention"]);return}}),s},"referencesToTags"),Pc=o(e=>({event_id:e,liked:!1,replied:!1,reposted:!1,zapped:!1}),"noActions"),cR=o((e,t=1)=>{try{return JSON.parse(e.content)}catch{return{kind:t,content:"",id:e.id,created_at:e.created_at,pubkey:e.pubkey,sig:e.sig,tags:e.tags}}},"parseRepost"),gb=o((e,t)=>{const n=(e.tags.find(c=>c[0]==="d")||[])[1],r=e.pubkey,i=t||e.kind,s=`${i}:${n}:${r}`,a=Pe.naddrEncode({kind:i,pubkey:r,identifier:n});return{coordinate:s,naddr:a}},"encodeCoordinate"),mb=o((e,t)=>{const n=e?.users[t.pubkey],r=JSON.parse(n?.content||"{}"),i=e?.noteStats[t.id];return{user:{id:n?.id||"",pubkey:n?.pubkey||t.pubkey,npub:wn(n?.pubkey||t.pubkey),name:r.name||n?.pubkey,about:r.about||"",picture:r.picture||"",nip05:r.nip05||"",banner:r.banner||"",displayName:r.display_name||"",location:r.location||"",lud06:r.lud06||"",lud16:r.lud16||"",website:r.website||"",tags:n?.tags||[],msg:{...n}},note:{id:t.id,pubkey:t.pubkey,created_at:t.created_at||0,tags:t.tags,content:pn(t.content),kind:t.kind,sig:t.sig,likes:i?.likes||0,mentions:i?.mentions||0,reposts:i?.reposts||0,replies:i?.replies||0,zaps:i?.zaps||0,score:i?.score||0,score24h:i?.score24h||0,satszapped:i?.satszapped||0,noteId:Pe.noteEncode(t.id),noteActions:e.noteActions&&e.noteActions[t.id]||Pc(t.id),relayHints:e.relayHints}}},"extractRepostInfo"),yb=o(e=>{let t=[];for(let n=0;n<e.length;n++){const r=e[n];if(r[0]==="e"&&r[3]!=="mention"){if(r[3]==="reply"){t=[...r];break}if(r[3]==="root"){t=[...r];continue}}}if(!t){const n=e.filter(r=>r[0]==="e"&&r[3]!=="mention");n.length===1?t=[...n[0]]:n.length>1&&(t=[...n[n.length-1]])}return t},"extractReplyTo"),bb=o((e,t)=>{const n=Object.keys(e.mentions||{}),r=t.tags.reduce((f,h)=>h[0]==="p"?[...f,h[1]]:f,[]),i=e.wordCount||{},s=e.topZaps[t.id]||[];let a={},c={},u={},l={};for(let f=0;f<n.length;f++){let h=n[f];const p=e.mentions&&e.mentions[h];if(!p)continue;const y=e.noteStats[h];c[p.pubkey]=Je(e.users[p.pubkey],p.pubkey);for(let w=0;w<p.tags.length;w++){const v=p.tags[w];v[0]!=="p"||c[v[1]]||(c[v[1]]=Je(e.users[v[1]],v[1]))}const _=e.noteStats[h],x=(e.noteActions&&e.noteActions[h])??Pc(h);if([W.Text].includes(p.kind)&&(a[h]={post:{...p,noteId:Pe.noteEncode(p.id),likes:_?.likes||0,mentions:_?.mentions||0,reposts:_?.reposts||0,replies:_?.replies||0,zaps:_?.zaps||0,score:_?.score||0,score24h:_?.score24h||0,satszapped:_?.satszapped||0,noteActions:x},msg:{...p},content:p.content,user:c[p.pubkey],mentionedUsers:c,pubkey:p.pubkey,id:p.id,noteId:Pe.noteEncode(p.id)}),[W.LongForm,W.LongFormShell].includes(p.kind)){const{coordinate:w,naddr:v}=gb(p,W.LongForm),T=i[p.id]||0,N=p.tags.reduce((C,D)=>{if(D[0]!=="published_at")return C;const U=parseInt(D[1]);return U>C?U:C},0);let I={id:p.id,pubkey:p.pubkey,title:"",summary:"",image:"",tags:[],published:N||p.created_at||0,content:pn(p.content||""),user:c[p.pubkey],topZaps:e.topZaps[p.id]||[],naddr:v,noteId:v,coordinate:w,msg:p,mentionedNotes:a,mentionedUsers:c,wordCount:T,noteActions:x,likes:y?.likes||0,mentions:y?.mentions||0,reposts:y?.reposts||0,replies:y?.replies||0,zaps:y?.zaps||0,score:y?.score||0,score24h:y?.score24h||0,satszapped:y?.satszapped||0,relayHints:e.relayHints};p.tags.forEach(C=>{switch(C[0]){case"t":I.tags.push(C[1]);break;case"title":I.title=C[1];break;case"summary":I.summary=C[1];break;case"image":I.image=C[1];break;case"published":I.published=parseInt(C[1]);break;case"client":I.client=C[1];break}}),l[I.naddr]={...I}}[W.Highlight].includes(p.kind)&&(u[h]={user:Je(e.users[p.pubkey],p.pubkey),event:{...p}})}if(r&&r.length>0)for(let f=0;f<r.length;f++){const h=r[f],p=e.users&&e.users[h];c[h]=Je(p,h)}for(let f=0;f<s.length;f++){const h=s[f];c[h.pubkey]||(c[h.pubkey]=Je(e.users[h.pubkey],h.pubkey))}return{mentionedNotes:a,mentionedArticles:l,mentionedUsers:c,mentionedHighlights:u}},"extractMentions"),lR=o(e=>{if(e===void 0)return[];let t=e.userStats||{},n=Object.keys(e.userFollowerCounts);return n.length>0&&n.forEach(r=>{t[r]?t[r].followers_count=e.userFollowerCounts[r]:t[r]={pubkey:r,followers_count:e.userFollowerCounts[r],follows_count:0,note_count:0,reply_count:0,time_joined:0,total_zap_count:0,total_satszapped:0,relay_count:0,media_count:0,long_form_note_count:0,followers_increase:{increase:0,ratio:0,count:0}}}),n=Object.keys(e.userFollowerIncrease),n.length>0&&n.forEach(r=>{t[r]?t[r].followers_increase=e.userFollowerIncrease[r]:t[r]={pubkey:r,followers_count:0,follows_count:0,note_count:0,reply_count:0,time_joined:0,total_zap_count:0,total_satszapped:0,relay_count:0,media_count:0,long_form_note_count:0,followers_increase:e.userFollowerIncrease[r]}}),Object.values(e.users).map(r=>Je(r,r.pubkey,t))},"convertToUsersMega"),uR=o(e=>{if(e===void 0)return[];let t=0,n=[];for(t=0;t<e.notes.length;t++){const r=e.notes[t],i=r.kind===W.Repost?cR(r):r,s=r.kind===W.Repost?mb(e,r):void 0,a=Je(e.users[i.pubkey],i.pubkey),c=e.noteStats[i.id],u=e.topZaps[i.id]||[],l=i.tags||[],f=yb(l);let{mentionedNotes:h,mentionedArticles:p,mentionedUsers:y,mentionedHighlights:_}=bb(e,i);const x={user:a,post:{id:i.id,pubkey:i.pubkey,created_at:i.created_at||0,tags:i.tags,content:pn(i.content),kind:i.kind,sig:i.sig,likes:c?.likes||0,mentions:c?.mentions||0,reposts:c?.reposts||0,replies:c?.replies||0,zaps:c?.zaps||0,score:c?.score||0,score24h:c?.score24h||0,satszapped:c?.satszapped||0,noteId:Pe.noteEncode(i.id),noteActions:(e.noteActions&&e.noteActions[i.id])??Pc(i.id),relayHints:e.relayHints},repost:s,msg:i,mentionedNotes:h,mentionedUsers:y,mentionedHighlights:_,mentionedArticles:p,replyTo:f&&f[1],tags:i.tags,id:i.id,noteId:Pe.noteEncode(i.id),pubkey:i.pubkey,topZaps:u,content:pn(i.content),relayHints:e.relayHints};n.push(x)}return n},"convertToNotesMega"),fR=o(e=>{if(e===void 0)return[];let t=0,n=[];for(t=0;t<e.reads.length;t++){const r=e.reads[t],i=Je(e.users[r.pubkey],r.pubkey),s=e.noteStats[r.id],a=e.topZaps[r.id]||[],c=(e.wordCount||{})[r.id]||0,{coordinate:u,naddr:l}=gb(r,W.LongForm);r.kind===W.Repost&&mb(e,r);const f=r.tags||[],h=f.reduce((T,N)=>N[0]==="p"?[...T,N[1]]:T,[]);yb(f);for(let T=0;T<a.length;T++)h.includes(a[T].pubkey)||h.push(a[T].pubkey);const{mentionedNotes:p,mentionedArticles:y,mentionedUsers:_,mentionedHighlights:x}=bb(e,r),w=r.tags.reduce((T,N)=>{if(N[0]!=="published_at")return T;const I=parseInt(N[1]);return I>T?I:T},0);let v={id:r.id,pubkey:r.pubkey,title:"",summary:"",image:"",tags:[],published:w||r.created_at||0,content:pn(r.content||""),user:i,topZaps:a,naddr:l,noteId:l,coordinate:u,msg:{...r,kind:W.LongForm},mentionedNotes:p,mentionedUsers:_,mentionedHighlights:x,mentionedArticles:y,wordCount:c,noteActions:(e.noteActions&&e.noteActions[r.id])??Pc(r.id),likes:s?.likes||0,mentions:s?.mentions||0,reposts:s?.reposts||0,replies:s?.replies||0,zaps:s?.zaps||0,score:s?.score||0,score24h:s?.score24h||0,satszapped:s?.satszapped||0,relayHints:e.relayHints};f.forEach(T=>{switch(T[0]){case"t":v.tags.push(T[1]);break;case"title":v.title=T[1];break;case"summary":v.summary=T[1];break;case"image":v.image=T[1];break;case"published":v.published=parseInt(T[1]);break;case"client":v.client=T[1];break}}),n.push(v)}return n},"convertToReadsMega"),wb=o(e=>pn(e),"cleanQuery"),rf=o((e,t,n,r=10)=>{let i={query:wb(n),limit:r};e&&(i.pubkey=e),Ee(JSON.stringify(["REQ",t,{cache:["user_search",i]}]))},"searchUsers"),dR=o((e,t,n,r=100)=>{let i={query:wb(n),limit:r};e&&(i.user_pubkey=e),Ee(JSON.stringify(["REQ",t,{cache:["search",i]}]))},"searchContent"),_b=o((e,t,n)=>{!e||!t||Ee(JSON.stringify(["REQ",n,{cache:["search_filterlist",{pubkey:e,user_pubkey:t}]}]))},"searchFilteredUsers"),hR=o((e,t,n,r)=>{e||(e=sc.names.primal),Ee(JSON.stringify(["REQ",r,{cache:["scored",{user_pubkey:e,selector:t}]}]))},"getScoredUsers"),pR=o(e=>{Ee(JSON.stringify(["REQ",e,{cache:["get_recommended_reads"]}]))},"getRecomendedArticleIds"),BB=o(e=>{Ee(JSON.stringify(["REQ",e,{cache:["get_advanced_feeds"]}]))},"getAdvancedFeeds"),vb=o((e,t,n,r=20,i=0,s=0)=>{let a={specification:t,limit:r};n&&(a.user_pubkey=n),i>0&&(a.until=i),s>0&&(a.offset=s),Ee(JSON.stringify(["REQ",e,{cache:["advanced_feed",a]}]))},"getFeedItems"),FB=o((e,t,n)=>new Promise((r,i)=>{e||i("Missing pubkey");let s={users:{},messages:[],postStats:{},mentions:{},noteActions:{},relayHints:{},topZaps:{},since:0,until:0},a;const c=Me(n,{onEvent:(l,f)=>{f&&u(f)},onEose:()=>{c();const l=fi(s,s.topZaps);r(l)}});Rc(e,[...t],n,!0);const u=o(l=>{if(l.kind===W.Metadata){const f=l;s.users[f.pubkey]={...f};return}if([W.Text,W.Repost].includes(l.kind)){const f=l;a?.post?.noteId!==Pe.noteEncode(f.id)&&s.messages.push({...f});return}if(l.kind===W.NoteStats){const h=JSON.parse(l.content);s.postStats[h.event_id]={...h};return}if(l.kind===W.Mentions){const h=JSON.parse(l.content);s.mentions||(s.mentions={}),s.mentions[h.id]={...h};return}if(l.kind===W.NoteActions){const h=JSON.parse(l.content);s.noteActions[h.event_id]={...h};return}if(l.kind===W.LinkMetadata){const h=JSON.parse(l.content).resources[0];if(!h)return;const p={url:h.url,title:h.md_title,description:h.md_description,mediaType:h.mimetype,contentType:h.mimetype,images:[h.md_image],favicons:[h.icon_url]};li(()=>({[h.url]:p}));return}if(l.kind===W.RelayHint){const f=JSON.parse(l.content);s.relayHints={...s.relayHints,...f};return}if(l?.kind===W.Zap){const f=l.tags.find(v=>v[0]==="description");if(!f)return;const h=JSON.parse(f[1]||"{}");let p="0",y=l?.tags?.find(v=>v[0]==="bolt11");if(y)try{p=`${dr(y[1])||0}`}catch{const T=h.tags.find(N=>N[0]==="amount");p=T?T[1]:"0"}const _=(h.tags.find(v=>v[0]==="e")||[])[1],x={id:h.id,amount:parseInt(p||"0"),pubkey:h.pubkey,message:h.content,eventId:_};if(s.topZaps[_]===void 0){s.topZaps[_]=[{...x}];return}if(s.topZaps[_].find(v=>v.id===x.id))return;const w=[...s.topZaps[_],{...x}].sort((v,T)=>T.amount-v.amount);s.topZaps[_]=[...w];return}if(l.kind===W.NoteQuoteStats){JSON.parse(l.content);return}},"updatePage")}),"fetchNotes"),gR=o((e,t)=>new Promise((n,r)=>{let i={users:{},messages:[],postStats:{},mentions:{},noteActions:{},relayHints:{},topZaps:{},since:0,until:0,wordCount:{}};const s=e.reduce((l,f)=>{const h=Uo(f);if(!h.data||h.type!=="naddr")return l;const{pubkey:p,identifier:y,kind:_}=h.data;return[...l,{identifier:y,pubkey:p,kind:_}]},[]);let a;const c=Me(t,{onEvent:(l,f)=>{f&&u(f)},onEose:()=>{c();const l=Zo(i,i.topZaps);n(l)}});FM(s,t);const u=o(l=>{if(l.kind===W.Metadata){const f=l;i.users[f.pubkey]={...f};return}if([W.LongForm,W.LongFormShell,W.Repost].includes(l.kind)){const f=l;a?.noteId!==Pe.noteEncode(f.id)&&i.messages.push({...f});return}if(l.kind===W.NoteStats){const h=JSON.parse(l.content);i.postStats[h.event_id]={...h};return}if(l.kind===W.Mentions){const h=JSON.parse(l.content);i.mentions||(i.mentions={}),i.mentions[h.id]={...h};return}if(l.kind===W.NoteActions){const h=JSON.parse(l.content);i.noteActions[h.event_id]={...h};return}if(l.kind===W.LinkMetadata){const h=JSON.parse(l.content).resources[0];if(!h)return;const p={url:h.url,title:h.md_title,description:h.md_description,mediaType:h.mimetype,contentType:h.mimetype,images:[h.md_image],favicons:[h.icon_url]};li(()=>({[h.url]:p}));return}if(l.kind===W.RelayHint){const f=JSON.parse(l.content);i.relayHints={...i.relayHints,...f};return}if(l?.kind===W.Zap){const f=l.tags.find(v=>v[0]==="description");if(!f)return;const h=JSON.parse(f[1]||"{}");let p="0",y=l?.tags?.find(v=>v[0]==="bolt11");if(y)try{p=`${dr(y[1])||0}`}catch{const T=h.tags.find(N=>N[0]==="amount");p=T?T[1]:"0"}const _=(h.tags.find(v=>v[0]==="e")||[])[1],x={id:h.id,amount:parseInt(p||"0"),pubkey:h.pubkey,message:h.content,eventId:_};if(i.topZaps[_]===void 0){i.topZaps[_]=[{...x}];return}if(i.topZaps[_].find(v=>v.id===x.id))return;const w=[...i.topZaps[_],{...x}].sort((v,T)=>T.amount-v.amount);i.topZaps[_]=[...w];return}if(l.kind===W.WordCount){const f=JSON.parse(l.content);i.wordCount||(i.wordCount={}),i.wordCount[f.event_id]=f.words;return}if(l.kind===W.NoteQuoteStats){JSON.parse(l.content);return}},"updatePage")}),"fetchArticles"),UB=o((e,t,n,r,i=0,s=10)=>new Promise((a,c)=>{t||c("Missing pubkey");let u={users:{},messages:[],postStats:{},mentions:{},noteActions:{},relayHints:{},topZaps:{},since:0,until:0,wordCount:{}},l;const f=Me(r,{onEvent:(p,y)=>{y&&h(y)},onEose:()=>{f();const p=Zo(u,u.topZaps);a(p)}});eR(e,t,r,n,i,s);const h=o(p=>{if(p.kind===W.Metadata){const y=p;u.users[y.pubkey]={...y};return}if([W.LongForm,W.LongFormShell,W.LongFormShell,W.Repost].includes(p.kind)){const y=p;l?.noteId!==Pe.noteEncode(y.id)&&u.messages.push({...y});return}if(p.kind===W.NoteStats){const _=JSON.parse(p.content);u.postStats[_.event_id]={..._};return}if(p.kind===W.Mentions){const _=JSON.parse(p.content);u.mentions||(u.mentions={}),u.mentions[_.id]={..._};return}if(p.kind===W.NoteActions){const _=JSON.parse(p.content);u.noteActions[_.event_id]={..._};return}if(p.kind===W.LinkMetadata){const _=JSON.parse(p.content).resources[0];if(!_)return;const x={url:_.url,title:_.md_title,description:_.md_description,mediaType:_.mimetype,contentType:_.mimetype,images:[_.md_image],favicons:[_.icon_url]};li(()=>({[_.url]:x}));return}if(p.kind===W.RelayHint){const y=JSON.parse(p.content);u.relayHints={...u.relayHints,...y};return}if(p?.kind===W.Zap){const y=p.tags.find(I=>I[0]==="description");if(!y)return;const _=JSON.parse(y[1]||"{}");let x="0",w=p?.tags?.find(I=>I[0]==="bolt11");if(w)try{x=`${dr(w[1])||0}`}catch{const C=_.tags.find(D=>D[0]==="amount");x=C?C[1]:"0"}const v=(_.tags.find(I=>I[0]==="e")||[])[1],T={id:_.id,amount:parseInt(x||"0"),pubkey:_.pubkey,message:_.content,eventId:v};if(u.topZaps[v]===void 0){u.topZaps[v]=[{...T}];return}if(u.topZaps[v].find(I=>I.id===T.id))return;const N=[...u.topZaps[v],{...T}].sort((I,C)=>C.amount-I.amount);u.topZaps[v]=[...N];return}if(p.kind===W.WordCount){const y=JSON.parse(p.content);u.wordCount||(u.wordCount={}),u.wordCount[y.event_id]=y.words;return}if(p.kind===W.NoteQuoteStats){JSON.parse(p.content);return}},"updatePage")}),"fetchUserArticles"),mR=o((e,t,n)=>new Promise((r,i)=>{t||i("Missing pubkey");let s,a;const c=Me(n,{onEvent:(l,f)=>{f&&u(f)},onEose:()=>{if(c(),!s){i("user not found");return}a&&(s.userStats=a),r(s)}});ry(t,e,n);const u=o(l=>{if(l?.kind===W.Metadata){let f=JSON.parse(l.content);(!f.displayName||typeof f.displayName=="string"&&f.displayName.trim().length===0)&&(f.displayName=f.display_name),f.pubkey=l.pubkey,f.npub=wn(l.pubkey),f.created_at=l.created_at,s={...f};return}l.kind===W.UserStats&&(a={...JSON.parse(l.content)})},"updatePage")}),"fetchUserProfile"),DB=o((e,t,n,r=20,i=0,s=0)=>new Promise((a,c)=>{let u={users:{},messages:[],postStats:{},mentions:{},noteActions:{},relayHints:{},topZaps:{},since:0,until:0},l;const f=Me(n,{onEvent:(p,y)=>{y&&h(y)},onEose:()=>{f();const p=fi(u,u.topZaps);a(p)}});vb(n,t,e,r,i,s);const h=o(p=>{if(p.kind===W.Metadata){const y=p;u.users[y.pubkey]={...y};return}if([W.Text,W.Repost].includes(p.kind)){const y=p;l?.post?.noteId!==Pe.noteEncode(y.id)&&u.messages.push({...y});return}if(p.kind===W.NoteStats){const _=JSON.parse(p.content);u.postStats[_.event_id]={..._};return}if(p.kind===W.Mentions){const _=JSON.parse(p.content);u.mentions||(u.mentions={}),u.mentions[_.id]={..._};return}if(p.kind===W.NoteActions){const _=JSON.parse(p.content);u.noteActions[_.event_id]={..._};return}if(p.kind===W.LinkMetadata){const _=JSON.parse(p.content).resources[0];if(!_)return;const x={url:_.url,title:_.md_title,description:_.md_description,mediaType:_.mimetype,contentType:_.mimetype,images:[_.md_image],favicons:[_.icon_url]};li(()=>({[_.url]:x}));return}if(p.kind===W.RelayHint){const y=JSON.parse(p.content);u.relayHints={...u.relayHints,...y};return}if(p?.kind===W.Zap){const y=p.tags.find(I=>I[0]==="description");if(!y)return;const _=JSON.parse(y[1]||"{}");let x="0",w=p?.tags?.find(I=>I[0]==="bolt11");if(w)try{x=`${dr(w[1])||0}`}catch{const C=_.tags.find(D=>D[0]==="amount");x=C?C[1]:"0"}const v=(_.tags.find(I=>I[0]==="e")||[])[1],T={id:_.id,amount:parseInt(x||"0"),pubkey:_.pubkey,message:_.content,eventId:v};if(u.topZaps[v]===void 0){u.topZaps[v]=[{...T}];return}if(u.topZaps[v].find(I=>I.id===T.id))return;const N=[...u.topZaps[v],{...T}].sort((I,C)=>C.amount-I.amount);u.topZaps[v]=[...N];return}if(p.kind===W.NoteQuoteStats){JSON.parse(p.content);return}},"updatePage")}),"fetchNotesFeed"),$B=o((e,t,n,r=20,i=0,s=0)=>new Promise((a,c)=>{let u={users:{},messages:[],postStats:{},mentions:{},noteActions:{},relayHints:{},topZaps:{},since:0,until:0,wordCount:{}},l;const f=Me(n,{onEvent:(p,y)=>{y&&h(y)},onEose:()=>{f();const p=Zo(u,u.topZaps);a(p)}});vb(n,t,e,r,i,s);const h=o(p=>{if(p.kind===W.Metadata){const y=p;u.users[y.pubkey]={...y};return}if([W.LongForm,W.LongFormShell,W.Repost].includes(p.kind)){const y=p;l?.noteId!==Pe.noteEncode(y.id)&&u.messages.push({...y});return}if(p.kind===W.NoteStats){const _=JSON.parse(p.content);u.postStats[_.event_id]={..._};return}if(p.kind===W.Mentions){const _=JSON.parse(p.content);u.mentions||(u.mentions={}),u.mentions[_.id]={..._};return}if(p.kind===W.NoteActions){const _=JSON.parse(p.content);u.noteActions[_.event_id]={..._};return}if(p.kind===W.LinkMetadata){const _=JSON.parse(p.content).resources[0];if(!_)return;const x={url:_.url,title:_.md_title,description:_.md_description,mediaType:_.mimetype,contentType:_.mimetype,images:[_.md_image],favicons:[_.icon_url]};li(()=>({[_.url]:x}));return}if(p.kind===W.RelayHint){const y=JSON.parse(p.content);u.relayHints={...u.relayHints,...y};return}if(p?.kind===W.Zap){const y=p.tags.find(I=>I[0]==="description");if(!y)return;const _=JSON.parse(y[1]||"{}");let x="0",w=p?.tags?.find(I=>I[0]==="bolt11");if(w)try{x=`${dr(w[1])||0}`}catch{const C=_.tags.find(D=>D[0]==="amount");x=C?C[1]:"0"}const v=(_.tags.find(I=>I[0]==="e")||[])[1],T={id:_.id,amount:parseInt(x||"0"),pubkey:_.pubkey,message:_.content,eventId:v};if(u.topZaps[v]===void 0){u.topZaps[v]=[{...T}];return}if(u.topZaps[v].find(I=>I.id===T.id))return;const N=[...u.topZaps[v],{...T}].sort((I,C)=>C.amount-I.amount);u.topZaps[v]=[...N];return}if(p.kind===W.WordCount){const y=JSON.parse(p.content);u.wordCount||(u.wordCount={}),u.wordCount[y.event_id]=y.words;return}if(p.kind===W.NoteQuoteStats){JSON.parse(p.content);return}},"updatePage")}),"fetchArticlesFeed"),yR=o((e,t,n=0,r=0,i=10)=>new Promise((s,a)=>{e||a("Missing pubkey");let c=[],u={users:{},messages:[],postStats:{},mentions:{},noteActions:{},relayHints:{},topZaps:{},since:0,until:0,sortBy:"created_at",wordCount:{},elements:[]};const l=Me(t,{onEvent:(h,p)=>{p&&f(p)},onEose:()=>{l();const h=u.messages.filter(v=>v.kind===W.Text),p=u.messages.filter(v=>v.kind===W.LongForm),y=fi({...u,messages:[...h]},u.topZaps),_=Zo({...u,messages:[...p]},u.topZaps),x={since:u.since||0,until:u.until||0,sortBy:u.sortBy||"created_at",elements:u.elements||[]};let w=[];for(let v=0;v<c.length;v++){const T=c[v],N=(T.tags.find(S=>S[0]==="bolt11")||[])[1],I=JSON.parse((T.tags.find(S=>S[0]==="description")||[])[1]||"{}"),C=I.pubkey,D=I.tags.find(S=>S[0]==="p")[1];let U="",H=0;const B=I.tags.find(S=>S[0]==="a"),z=I.tags.find(S=>S[0]==="e");if(B){const[S,R,k]=B[1].split(":");U=Pe.naddrEncode({kind:S,pubkey:R,identifier:k}),H=p.find(F=>F.id===U)?.kind||0}else if(z){U=z[1];const S=p.find(k=>k.id===U),R=h.find(k=>k.id===U);H=S?.kind||R?.kind||0}if(![W.Text,W.LongForm].includes(H))continue;const A=u.users[C]?Je(u.users[C],C):C,d=u.users[D]?Je(u.users[D],D):D,m={id:T.id,message:I.content||"",amount:dr(N)||0,sender:A,reciver:d,created_at:T.created_at,zappedId:U,zappedKind:H};w.find(S=>S.id===m.id)||w.push(m)}s({notes:y,articles:_,zaps:w,paging:x})}});$M(e,t,n,0,i);const f=o(h=>{if(h?.kind===W.Zap){c.push(h);return}if(h.kind===W.Metadata){const p=h;u.users[p.pubkey]={...p};return}if([W.Text,W.Repost,W.LongForm,W.LongFormShell,W.Repost].includes(h.kind)){const p=h;u.messages.push({...p});return}if(h.kind===W.NoteStats){const y=JSON.parse(h.content);u.postStats[y.event_id]={...y};return}if(h.kind===W.Mentions){const y=JSON.parse(h.content);u.mentions||(u.mentions={}),u.mentions[y.id]={...y};return}if(h.kind===W.NoteActions){const y=JSON.parse(h.content);u.noteActions[y.event_id]={...y};return}if(h.kind===W.LinkMetadata){const y=JSON.parse(h.content).resources[0];if(!y)return;const _={url:y.url,title:y.md_title,description:y.md_description,mediaType:y.mimetype,contentType:y.mimetype,images:[y.md_image],favicons:[y.icon_url]};li(()=>({[y.url]:_}));return}if(h.kind===W.RelayHint){const p=JSON.parse(h.content);u.relayHints={...u.relayHints,...p};return}if(h.kind===W.WordCount){const p=JSON.parse(h.content);u.wordCount||(u.wordCount={}),u.wordCount[p.event_id]=p.words;return}if(h.kind===W.NoteQuoteStats){JSON.parse(h.content);return}if(h.kind===W.FeedRange){const p=JSON.parse(h.content||"{}");u.since=p.since,u.until=p.until,u.sortBy=p.order_by,u.elements=[...p.elements];return}},"updatePage")}),"fetchUserZaps");function Eb(){let e=new Set;function t(i){return e.add(i),()=>e.delete(i)}o(t,"subscribe");let n=!1;function r(i,s){if(n)return!(n=!1);const a={to:i,options:s,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const c of e)c.listener({...a,from:c.location,retry:u=>{u&&(n=!0),c.navigate(i,{...s,resolve:!1})}});return!a.defaultPrevented}return o(r,"confirm"),{subscribe:t,confirm:r}}o(Eb,"createBeforeLeave");let sf;function ld(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),sf=window.history.state._depth}o(ld,"saveCurrentDepth");ld();function bR(e){return{...e,_depth:window.history.state&&window.history.state._depth}}o(bR,"keepDepth");function wR(e,t){let n=!1;return()=>{const r=sf;ld();const i=r==null?null:sf-r;if(n){n=!1;return}i&&t(i)?(n=!0,window.history.go(-i)):e()}}o(wR,"notifyIfNotBlocked");const _R=/^(?:[a-z0-9]+:)?\/\//i,vR=/^\/+|(\/)\/+$/g,xb="http://sr";function ki(e,t=!1){const n=e.replace(vR,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}o(ki,"normalizePath");function Sa(e,t,n){if(_R.test(t))return;const r=ki(e),i=n&&ki(n);let s="";return!i||t.startsWith("/")?s=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+i:s=i,(s||"/")+ki(t,!s)}o(Sa,"resolvePath");function ER(e,t){if(e==null)throw new Error(t);return e}o(ER,"invariant");function xR(e,t){return ki(e).replace(/\/*(\*.*)?$/g,"")+ki(t)}o(xR,"joinPaths");function Sb(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}o(Sb,"extractSearchParams");function SR(e,t,n){const[r,i]=e.split("/*",2),s=r.split("/").filter(Boolean),a=s.length;return c=>{const u=c.split("/").filter(Boolean),l=u.length-a;if(l<0||l>0&&i===void 0&&!t)return null;const f={path:a?"":"/",params:{}},h=o(p=>n===void 0?void 0:n[p],"matchFilter");for(let p=0;p<a;p++){const y=s[p],_=y[0]===":",x=_?u[p]:u[p].toLowerCase(),w=_?y.slice(1):y.toLowerCase();if(_&&zl(x,h(w)))f.params[w]=x;else if(_||!zl(x,w))return null;f.path+=`/${x}`}if(i){const p=l?u.slice(-l).join("/"):"";if(zl(p,h(i)))f.params[i]=p;else return null}return f}}o(SR,"createMatcher");function zl(e,t){const n=o(r=>r===e,"isEqual");return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}o(zl,"matchSegment");function AR(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,s)=>i+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}o(AR,"scoreRoute");function Ab(e){const t=new Map,n=Ys();return new Proxy({},{get(r,i){return t.has(i)||af(n,()=>t.set(i,it(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}o(Ab,"createMemoObject");function MR(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([i,s])=>{s==null||s===""||s instanceof Array&&!s.length?n.delete(i):s instanceof Array?(n.delete(i),s.forEach(a=>{n.append(i,String(a))})):n.set(i,String(s))});const r=n.toString();return r?`?${r}`:""}o(MR,"mergeSearchString");function Mb(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return Mb(r).reduce((s,a)=>[...s,...i.map(c=>c+a)],[])}o(Mb,"expandOptionals");const kR=100,kb=Ht(),ud=Ht(),Ns=o(()=>ER(zt(kb),"<A> and 'use' router primitives can be only used inside a Route."),"useRouter"),TR=o(()=>zt(ud)||Ns().base,"useRoute"),NR=o(e=>{const t=TR();return it(()=>t.resolvePath(e()))},"useResolvedPath"),IR=o(e=>{const t=Ns();return it(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},"useHref"),Oc=o(()=>Ns().navigatorFactory(),"useNavigate"),Cc=o(()=>Ns().location,"useLocation"),HB=o(()=>Ns().params,"useParams"),zB=o(()=>{const e=Cc(),t=Oc(),n=o((r,i)=>{const s=Lt(()=>MR(e.search,r)+e.hash);t(s,{scroll:!1,resolve:!1,...i})},"setSearchParams");return[e.query,n]},"useSearchParams"),ZB=o(e=>{const t=Ns().beforeLeave.subscribe({listener:e,location:Cc(),navigate:Oc()});on(t)},"useBeforeLeave");function RR(e,t=""){const{component:n,preload:r,load:i,children:s,info:a}=e,c=!s||Array.isArray(s)&&!s.length,u={key:e,component:n,preload:r||i,info:a};return Tb(e.path).reduce((l,f)=>{for(const h of Mb(f)){const p=xR(t,h);let y=c?p:p.split("/*",1)[0];y=y.split("/").map(_=>_.startsWith(":")||_.startsWith("*")?_:encodeURIComponent(_)).join("/"),l.push({...u,originalPath:f,pattern:y,matcher:SR(y,!c,e.matchFilters)})}return l},[])}o(RR,"createRoutes");function LR(e,t=0){return{routes:e,score:AR(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const s=e[i],a=s.matcher(n);if(!a)return null;r.unshift({...a,route:s})}return r}}}o(LR,"createBranch");function Tb(e){return Array.isArray(e)?e:[e]}o(Tb,"asArray");function Nb(e,t="",n=[],r=[]){const i=Tb(e);for(let s=0,a=i.length;s<a;s++){const c=i[s];if(c&&typeof c=="object"){c.hasOwnProperty("path")||(c.path="");const u=RR(c,t);for(const l of u){n.push(l);const f=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!f)Nb(c.children,l.pattern,n,r);else{const h=LR([...n],r.length);r.push(h)}n.pop()}}}return n.length?r:r.sort((s,a)=>a.score-s.score)}o(Nb,"createBranches");function Zl(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}o(Zl,"getRouteMatches");function PR(e,t,n){const r=new URL(xb),i=it(f=>{const h=e();try{return new URL(h,r)}catch{return console.error(`Invalid path ${h}`),f}},r,{equals:(f,h)=>f.href===h.href}),s=it(()=>i().pathname),a=it(()=>i().search,!0),c=it(()=>i().hash),u=o(()=>"","key"),l=Bi(a,()=>Sb(i()));return{get pathname(){return s()},get search(){return a()},get hash(){return c()},get state(){return t()},get key(){return u()},query:n?n(l):Ab(l)}}o(PR,"createLocation");let bi;function Ib(){return bi}o(Ib,"getIntent");let ys=!1;function OR(){return ys}o(OR,"getInPreloadFn");function Hp(e){ys=e}o(Hp,"setInPreloadFn");function CR(e,t,n,r={}){const{signal:[i,s],utils:a={}}=e,c=a.parsePath||(S=>S),u=a.renderPath||(S=>S),l=a.beforeLeave||Eb(),f=Sa("",r.base||"");if(f===void 0)throw new Error(`${f} is not a valid base path`);f&&!i().value&&s({value:f,replace:!0,scroll:!1});const[h,p]=lt(!1);let y;const _=o((S,R)=>{R.value===x()&&R.state===v()||(y===void 0&&p(!0),bi=S,y=R,Gs(()=>{y===R&&(w(y.value),T(y.state),C[1]([]))}).finally(()=>{y===R&&Jr(()=>{bi=void 0,S==="navigate"&&d(y),p(!1),y=void 0})}))},"transition"),[x,w]=lt(i().value),[v,T]=lt(i().state),N=PR(x,v,a.queryWrapper),I=[],C=lt([]),D=it(()=>typeof r.transformUrl=="function"?Zl(t(),r.transformUrl(N.pathname)):Zl(t(),N.pathname)),U=o(()=>{const S=D(),R={};for(let k=0;k<S.length;k++)Object.assign(R,S[k].params);return R},"buildParams"),H=a.paramsWrapper?a.paramsWrapper(U,t):Ab(U),B={pattern:f,path:()=>f,outlet:()=>null,resolvePath(S){return Sa(f,S)}};return ct(Bi(i,S=>_("native",S),{defer:!0})),{base:B,location:N,params:H,isRouting:h,renderPath:u,parsePath:c,navigatorFactory:A,matches:D,beforeLeave:l,preloadRoute:m,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:C};function z(S,R,k){Lt(()=>{if(typeof R=="number"){R&&(a.go?a.go(R):console.warn("Router integration does not support relative routing"));return}const P=!R||R[0]==="?",{replace:F,resolve:M,scroll:g,state:L}={replace:!1,resolve:!P,scroll:!0,...k},V=M?S.resolvePath(R):Sa(P&&N.pathname||"",R);if(V===void 0)throw new Error(`Path '${R}' is not a routable path`);if(I.length>=kR)throw new Error("Too many redirects");const ie=x();(V!==ie||L!==v())&&(d0||l.confirm(V,k)&&(I.push({value:ie,replace:F,scroll:g,state:v()}),_("navigate",{value:V,state:L})))})}o(z,"navigateFromRoute");function A(S){return S=S||zt(ud)||B,(R,k)=>z(S,R,k)}o(A,"navigatorFactory");function d(S){const R=I[0];R&&(s({...S,replace:R.replace,scroll:R.scroll}),I.length=0)}o(d,"navigateEnd");function m(S,R){const k=Zl(t(),S.pathname),P=bi;bi="preload";for(let F in k){const{route:M,params:g}=k[F];M.component&&M.component.preload&&M.component.preload();const{preload:L}=M;ys=!0,R&&L&&af(n(),()=>L({params:g,location:{pathname:S.pathname,search:S.search,hash:S.hash,query:Sb(S),state:null,key:""},intent:"preload"})),ys=!1}bi=P}o(m,"preloadRoute")}o(CR,"createRouterContext");function BR(e,t,n,r){const{base:i,location:s,params:a}=e,{pattern:c,component:u,preload:l}=r().route,f=it(()=>r().path);u&&u.preload&&u.preload(),ys=!0;const h=l?l({params:a,location:s,intent:bi||"initial"}):void 0;return ys=!1,{parent:t,pattern:c,path:f,outlet:()=>u?pe(u,{params:a,location:s,data:h,get children(){return n()}}):n(),resolvePath(y){return Sa(i.path(),y,f())}}}o(BR,"createRouteContext");const FR=o(e=>t=>{const{base:n}=t,r=nc(()=>t.children),i=it(()=>Nb(r(),t.base||""));let s;const a=CR(e,i,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),pe(kb.Provider,{value:a,get children(){return pe(UR,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[it(()=>(s=Ys())&&null),pe(DR,{routerState:a,get branches(){return i()}})]}})}})},"createRouterComponent");function UR(e){const t=e.routerState.location,n=e.routerState.params,r=it(()=>e.preload&&Lt(()=>{Hp(!0),e.preload({params:n,location:t,intent:Ib()||"initial"}),Hp(!1)}));return pe(Dn,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>pe(i,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}o(UR,"Root");function DR(e){const t=[];let n;const r=it(Bi(e.routerState.matches,(i,s,a)=>{let c=s&&i.length===s.length;const u=[];for(let l=0,f=i.length;l<f;l++){const h=s&&s[l],p=i[l];a&&h&&p.route.key===h.route.key?u[l]=a[l]:(c=!1,t[l]&&t[l](),Xi(y=>{t[l]=y,u[l]=BR(e.routerState,u[l-1]||e.routerState.base,zp(()=>r()[l+1]),()=>e.routerState.matches()[l])}))}return t.splice(i.length).forEach(l=>l()),a&&c?a:(n=u[0],u)}));return zp(()=>r()&&n)()}o(DR,"Routes");const zp=o(e=>()=>pe(Dn,{get when(){return e()},keyed:!0,children:t=>pe(ud.Provider,{value:t,get children(){return t.outlet()}})}),"createOutlet"),Le=o(e=>{const t=nc(()=>e.children);return Ra(e,{get children(){return t()}})},"Route");function $R([e,t],n,r){return[n?()=>n(e()):e,r?i=>t(r(i)):t]}o($R,"intercept");function HR(e){let t=!1;const n=o(i=>typeof i=="string"?{value:i}:i,"wrap"),r=$R(lt(n(e.get()),{equals:(i,s)=>i.value===s.value&&i.state===s.state}),void 0,i=>(!t&&e.set(i),Re.registry&&!Re.done&&(Re.done=!0),i));return e.init&&on(e.init((i=e.get())=>{t=!0,r[1](n(i)),t=!1})),FR({signal:r,create:e.create,utils:e.utils})}o(HR,"createRouter");function zR(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}o(zR,"bindEvent");function ZR(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}o(ZR,"scrollToHash");const WR="Location",jR=5e3,GR=18e4;let of=new Map;setInterval(()=>{const e=Date.now();for(let[t,n]of of.entries())!n[3].count&&e-n[0]>GR&&of.delete(t)},3e5);function fd(){return of}o(fd,"getCache");function dd(e,t){e.GET&&(e=e.GET);const n=o((...r)=>{const i=fd(),s=Ib(),a=OR(),u=Ys()?Oc():void 0,l=Date.now(),f=t+Zp(r);let h=i.get(f),p;if(rs()&&!d0&&(p=!0,on(()=>h[3].count--)),h&&h[0]&&(s==="native"||h[3].count||Date.now()-h[0]<jR)){p&&(h[3].count++,h[3][0]()),h[2]==="preload"&&s!=="preload"&&(h[0]=l);let x=h[1];return s!=="preload"&&(x="then"in h[1]?h[1].then(_(!1),_(!0)):_(!1)(h[1]),s==="navigate"&&Gs(()=>h[3][1](h[0]))),a&&"then"in x&&x.catch(()=>{}),x}let y=Re.context&&Re.has(f)?Re.load(f):e(...r);return h?(h[0]=l,h[1]=y,h[2]=s,s==="navigate"&&Gs(()=>h[3][1](h[0]))):(i.set(f,h=[l,y,s,lt(l)]),h[3].count=0),p&&(h[3].count++,h[3][0]()),s!=="preload"&&(y="then"in y?y.then(_(!1),_(!0)):_(!1)(y)),a&&"then"in y&&y.catch(()=>{}),y;function _(x){return async w=>{if(w instanceof Response){const v=w.headers.get(WR);if(v!==null){u&&v.startsWith("/")?Gs(()=>{u(v,{replace:!0})}):window.location.href=v;return}w.customBody&&(w=await w.customBody())}if(x)throw w;return w}}o(_,"handleResponse")},"cachedFn");return n.keyFor=(...r)=>t+Zp(r),n.key=t,n}o(dd,"cache");dd.set=(e,t)=>{const n=fd(),r=Date.now();let i=n.get(e);i?(i[0]=r,i[1]=t,i[2]="preload"):(n.set(e,i=[r,t,,lt(r)]),i[3].count=0)};dd.clear=()=>fd().clear();function Zp(e){return JSON.stringify(e,(t,n)=>qR(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}o(Zp,"hashKey");function qR(e){let t;return e!=null&&typeof e=="object"&&(!(t=Object.getPrototypeOf(e))||t===Object.prototype)}o(qR,"isPlainObject");const VR=new Map;function KR(e=!0,t=!1,n="/_server",r){return i=>{const s=i.base.path(),a=i.navigatorFactory(i.base);let c,u;function l(x){return x.namespaceURI==="http://www.w3.org/2000/svg"}o(l,"isSvg");function f(x){if(x.defaultPrevented||x.button!==0||x.metaKey||x.altKey||x.ctrlKey||x.shiftKey)return;const w=x.composedPath().find(D=>D instanceof Node&&D.nodeName.toUpperCase()==="A");if(!w||t&&!w.hasAttribute("link"))return;const v=l(w),T=v?w.href.baseVal:w.href;if((v?w.target.baseVal:w.target)||!T&&!w.hasAttribute("state"))return;const I=(w.getAttribute("rel")||"").split(/\s+/);if(w.hasAttribute("download")||I&&I.includes("external"))return;const C=v?new URL(T,document.baseURI):new URL(T);if(!(C.origin!==window.location.origin||s&&C.pathname&&!C.pathname.toLowerCase().startsWith(s.toLowerCase())))return[w,C]}o(f,"handleAnchor");function h(x){const w=f(x);if(!w)return;const[v,T]=w,N=i.parsePath(T.pathname+T.search+T.hash),I=v.getAttribute("state");x.preventDefault(),a(N,{resolve:!1,replace:v.hasAttribute("replace"),scroll:!v.hasAttribute("noscroll"),state:I?JSON.parse(I):void 0})}o(h,"handleAnchorClick");function p(x){const w=f(x);if(!w)return;const[v,T]=w;r&&(T.pathname=r(T.pathname)),i.preloadRoute(T,v.getAttribute("preload")!=="false")}o(p,"handleAnchorPreload");function y(x){clearTimeout(c);const w=f(x);if(!w)return u=null;const[v,T]=w;u!==v&&(r&&(T.pathname=r(T.pathname)),c=setTimeout(()=>{i.preloadRoute(T,v.getAttribute("preload")!=="false"),u=v},20))}o(y,"handleAnchorMove");function _(x){if(x.defaultPrevented)return;let w=x.submitter&&x.submitter.hasAttribute("formaction")?x.submitter.getAttribute("formaction"):x.target.getAttribute("action");if(!w)return;if(!w.startsWith("https://action/")){const T=new URL(w,xb);if(w=i.parsePath(T.pathname+T.search),!w.startsWith(n))return}if(x.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const v=VR.get(w);if(v){x.preventDefault();const T=new FormData(x.target,x.submitter);v.call({r:i,f:x.target},x.target.enctype==="multipart/form-data"?T:new URLSearchParams(T))}}o(_,"handleFormSubmit"),l0(["click","submit"]),document.addEventListener("click",h),e&&(document.addEventListener("mousemove",y,{passive:!0}),document.addEventListener("focusin",p,{passive:!0}),document.addEventListener("touchstart",p,{passive:!0})),document.addEventListener("submit",_),on(()=>{document.removeEventListener("click",h),e&&(document.removeEventListener("mousemove",y),document.removeEventListener("focusin",p),document.removeEventListener("touchstart",p)),document.removeEventListener("submit",_)})}}o(KR,"setupNativeEvents");function JR(e){const t=o(()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,i=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:i}},"getSource"),n=Eb();return HR({get:t,set({value:r,replace:i,scroll:s,state:a}){i?window.history.replaceState(bR(a),"",r):window.history.pushState(a,"",r),ZR(decodeURIComponent(window.location.hash.slice(1)),s),ld()},init:r=>zR(window,"popstate",wR(r,i=>{if(i&&i<0)return!n.confirm(i);{const s=t();return!n.confirm(s.value,{state:s.state})}})),create:KR(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(e)}o(JR,"Router");const YR=qt("<a>");function QR(e){e=Ra({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=a0(e,["href","state","class","activeClass","inactiveClass","end"]),n=NR(()=>e.href),r=IR(n),i=Cc(),s=it(()=>{const a=n();if(a===void 0)return[!1,!1];const c=ki(a.split(/[?#]/,1)[0]).toLowerCase(),u=decodeURI(ki(i.pathname).toLowerCase());return[e.end?c===u:u.startsWith(c+"/")||u===c,c===u]});return(()=>{const a=YR();return f0(a,Ra(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!s()[0],[e.activeClass]:s()[0],...t.classList}},link:"",get"aria-current"(){return s()[1]?"page":void 0}}),!1,!1),a})()}o(QR,"A");function Wp(e){const t=Oc(),n=Cc(),{href:r,state:i}=e,s=typeof r=="function"?r({navigate:t,location:n}):r;return t(s,{replace:!0,state:i}),null}o(Wp,"Navigate");const Aa="/assets/default_avatar-6d041539.svg",WB=Object.freeze(Object.defineProperty({__proto__:null,default:Aa},Symbol.toStringTag,{value:"Module"})),XR="_noteImage_1k5hj_1",eL="_shortHeight_1k5hj_7",tL="_placeholderImage_1k5hj_11",Wl={noteImage:XR,shortHeight:eL,placeholderImage:tL},nL=qt('<a target="_blank"><img><div class="pswp-caption-content">'),rL=qt("<div>"),iL=o(e=>{const t=tr();let n,r;const[i,s]=lt(!1),[a,c]=lt(),u=o(()=>!e.isDev||e.media,"isCached"),l=o(T=>{const N=T.target;return N.src===e.altSrc||!e.altSrc||N.src.endsWith(e.altSrc)?(e.onError&&e.onError(T),!0):(c(()=>e.altSrc||""),N.onerror="",N.src=a(),!0)},"onError"),f=o(()=>{const T=e.media;return T?T.w/T.h:n?n.width/n.height:2},"ratio"),h=o(()=>e.width||538,"width"),p=o(()=>{if(e.forceHeight)return`${e.forceHeight}px`;if(!e.media||e.ignoreRatio)return"100%";const T=e.media;return!T||f()<=.9?"680px":!T||f()<=1.2?"auto":`${h()/f()}px`},"height"),y=o(()=>f()>1?window.innerWidth:window.innerHeight*f(),"zoomW"),_=o(()=>f()>1?window.innerWidth/f():window.innerHeight,"zoomH"),x=o(()=>h()/f()>680,"willBeTooBig"),w=o(()=>e.mediaThumb?typeof e.mediaThumb=="string"?e.mediaThumb:e.mediaThumb.media_url:a(),"thumbSrc"),v=o(()=>`${Wl.noteImage} ${e.shortHeight?Wl.shortHeight:""} ${u()?"":"redBorder"}`,"klass");return ai(()=>{e.media&&s(!0),c(()=>e.media?.media_url||e.src)}),at(()=>{n=new Image,n.src=a()||"",n.onload=()=>{s(!0)},n.onerror=l}),at(()=>{i()&&e.onImageLoaded&&e.onImageLoaded(a())}),pe(Dn,{get when(){return i()},get fallback(){return(()=>{const T=rL();return ct(()=>pt(T,Wl.placeholderImage)),T})()},get children(){const T=nL(),N=T.firstChild,I=N.nextSibling;ht(T,"data-cropped",!0),N.addEventListener("error",l);const C=r;return typeof C=="function"?ic(C,N):r=N,ht(N,"id",`${t}`),Ot(I,()=>e.caption),ct(D=>{const U=`${e.class||""} ${e.plainBorder?"":"roundedImage"}`,H=a(),B=y(),z=_(),A=e.imageGroup,d=w(),m=f(),S=w(),R=v(),k=`${x()&&!e.ignoreRatio?"width: 528px; height: 680px":`width: ${h()}px; height: ${p()}`}`;return U!==D._v$&&pt(T,D._v$=U),H!==D._v$2&&ht(T,"href",D._v$2=H),B!==D._v$3&&ht(T,"data-pswp-width",D._v$3=B),z!==D._v$4&&ht(T,"data-pswp-height",D._v$4=z),A!==D._v$5&&ht(T,"data-image-group",D._v$5=A),d!==D._v$6&&ht(T,"data-thumb-src",D._v$6=d),m!==D._v$7&&ht(T,"data-ratio",D._v$7=m),S!==D._v$8&&ht(N,"src",D._v$8=S),R!==D._v$9&&pt(N,D._v$9=R),D._v$10=u0(N,k,D._v$10),D},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),T}})},"NoteImage"),sL="_verifiedIcon_1ga43_1",oL="_verificationIcon_1ga43_10",aL="_verificationIconL_1ga43_20",cL="_verifiedIconPrimal_1ga43_30",lL="_checkIcon_1ga43_40",uL="_legend_GOLD_1ga43_47",fL="_legend_AQUA_1ga43_50",dL="_legend_SILVER_1ga43_53",hL="_legend_PURPLE_1ga43_56",pL="_legend_PURPLEHAZE_1ga43_59",gL="_legend_TEAL_1ga43_62",mL="_legend_BROWN_1ga43_65",yL="_legend_BLUE_1ga43_68",bL="_legend_SUNFIRE_1ga43_71",wL="_whiteCheck_1ga43_75",_L="_whiteCheckL_1ga43_86",vL="_verificationFailed_1ga43_97",wr={verifiedIcon:sL,verificationIcon:oL,verificationIconL:aL,verifiedIconPrimal:cL,checkIcon:lL,legend_GOLD:uL,legend_AQUA:fL,legend_SILVER:dL,legend_PURPLE:hL,legend_PURPLEHAZE:pL,legend_TEAL:gL,legend_BROWN:mL,legend_BLUE:yL,legend_SUNFIRE:bL,whiteCheck:wL,whiteCheckL:_L,verificationFailed:vL},EL=qt("<div><div>"),xL=qt("<div>"),SL=qt("<div><div><div>"),AL=qt("<span>"),ML=o(e=>{const t=Ts(),[n,r]=lt(!1),i=o(()=>{const l=e.user?.nip05;return n()&&l&&l.endsWith&&l.endsWith("primal.net")},"isVerifiedByPrimal"),s=o(()=>{const l=e.user?.nip05;if(!l){r(!1);return}jM(l).then(f=>{if(f){r(()=>f.pubkey===e.user?.pubkey);return}r(()=>!1)})},"checkVerification"),a=o(()=>{const l=e.user?.pubkey;if(l)return e.legendConfig||t?.legendCustomization[l]},"legendConfig"),c=o(()=>{let l=wr.verifiedIconPrimal;const f=a();if(f?.custom_badge){const h=f.style;h!==""&&(l+=` ${wr[`legend_${h}`]}`)}return l},"primalCheckKlass"),u=o(()=>a()!==void 0,"isLegend");return ai(()=>{s()}),pe(sw,{get fallback(){return e.fallback},get children(){return[pe(Td,{get when(){return n()||u()},get children(){const l=xL();return Ot(l,pe(Dn,{get when(){return i()||u()},get fallback(){return(()=>{const f=AL();return ct(()=>pt(f,wr.verifiedIcon)),f})()},get children(){const f=EL(),h=f.firstChild;return ct(p=>{const y=c(),_=wr.checkIcon;return y!==p._v$&&pt(f,p._v$=y),_!==p._v$2&&pt(h,p._v$2=_),p},{_v$:void 0,_v$2:void 0}),f}})),ct(f=>{const h=e.id,p=e.user?.pubkey,y=`${e.large?wr.verificationIconL:wr.verificationIcon}`;return h!==f._v$3&&ht(l,"id",f._v$3=h),p!==f._v$4&&ht(l,"data-user",f._v$4=p),y!==f._v$5&&pt(l,f._v$5=y),f},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),l}}),pe(Td,{get when(){return e.mock},get children(){const l=SL(),f=l.firstChild,h=f.firstChild;return ct(p=>{const y=e.id,_=e.user?.pubkey,x=`${e.large?wr.verificationIconL:wr.verificationIcon}`,w=c(),v=wr.checkIcon;return y!==p._v$6&&ht(l,"id",p._v$6=y),_!==p._v$7&&ht(l,"data-user",p._v$7=_),x!==p._v$8&&pt(l,p._v$8=x),w!==p._v$9&&pt(f,p._v$9=w),v!==p._v$10&&pt(h,p._v$10=v),p},{_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),l}})]}})},"VerificationCheck"),kL=Sc(ML),TL="_legend_GOLD_1p6iz_1",NL="_legend_AQUA_1p6iz_7",IL="_legend_SILVER_1p6iz_13",RL="_legend_PURPLE_1p6iz_19",LL="_legend_PURPLEHAZE_1p6iz_25",PL="_legend_TEAL_1p6iz_31",OL="_legend_BROWN_1p6iz_37",CL="_legend_BLUE_1p6iz_43",BL="_legend_SUNFIRE_1p6iz_49",FL="_legend_glow_GOLD_1p6iz_55",UL="_legend_glow_AQUA_1p6iz_59",DL="_legend_glow_SILVER_1p6iz_63",$L="_legend_glow_PURPLE_1p6iz_67",HL="_legend_glow_PURPLEHAZE_1p6iz_71",zL="_legend_glow_TEAL_1p6iz_75",ZL="_legend_glow_BROWN_1p6iz_79",WL="_legend_glow_BLUE_1p6iz_83",jL="_legend_glow_SUNFIRE_1p6iz_87",GL="_verifiedIcon_1p6iz_91",qL="_nanoAvatar_1p6iz_104",VL="_missingBack_1p6iz_118",KL="_iconBackground_1p6iz_122",JL="_microAvatar_1p6iz_133",YL="_xxsAvatar_1p6iz_163",QL="_xssAvatar_1p6iz_193",XL="_xsAvatar_1p6iz_224",eP="_legend_1p6iz_1",tP="_vvsAvatar_1p6iz_257",nP="_vs2Avatar_1p6iz_290",rP="_vsAvatar_1p6iz_321",iP="_smallAvatar_1p6iz_352",sP="_midAvatar_1p6iz_383",oP="_mlAvatar_1p6iz_414",aP="_mllAvatar_1p6iz_445",cP="_largeAvatar_1p6iz_476",lP="_extraLargeAvatar_1p6iz_509",uP="_borderRing_1p6iz_541",fP="_xxlAvatar_1p6iz_545",dP="_nanoMissing_1p6iz_586",hP="_microMissing_1p6iz_603",pP="_xxsMissing_1p6iz_620",gP="_xssMissing_1p6iz_637",mP="_xsMissing_1p6iz_654",yP="_vvsMissing_1p6iz_671",bP="_vs2Missing_1p6iz_688",wP="_vsMissing_1p6iz_705",_P="_smallMissing_1p6iz_722",vP="_midMissing_1p6iz_739",EP="_mlMissing_1p6iz_756",xP="_mllMissing_1p6iz_773",SP="_largeMissing_1p6iz_790",AP="_extraLargeMissing_1p6iz_807",MP="_xxlMissing_1p6iz_824",kP="_highlightBorder_1p6iz_841",TP="_cacheFlag_1p6iz_845",Fe={legend_GOLD:TL,legend_AQUA:NL,legend_SILVER:IL,legend_PURPLE:RL,legend_PURPLEHAZE:LL,legend_TEAL:PL,legend_BROWN:OL,legend_BLUE:CL,legend_SUNFIRE:BL,legend_glow_GOLD:FL,legend_glow_AQUA:UL,legend_glow_SILVER:DL,legend_glow_PURPLE:$L,legend_glow_PURPLEHAZE:HL,legend_glow_TEAL:zL,legend_glow_BROWN:ZL,legend_glow_BLUE:WL,legend_glow_SUNFIRE:jL,verifiedIcon:GL,nanoAvatar:qL,missingBack:VL,iconBackground:KL,microAvatar:JL,xxsAvatar:YL,xssAvatar:QL,xsAvatar:XL,legend:eP,vvsAvatar:tP,vs2Avatar:nP,vsAvatar:rP,smallAvatar:iP,midAvatar:sP,mlAvatar:oP,mllAvatar:aP,largeAvatar:cP,extraLargeAvatar:lP,borderRing:uP,xxlAvatar:fP,nanoMissing:dP,microMissing:hP,xxsMissing:pP,xssMissing:gP,xsMissing:mP,vvsMissing:yP,vs2Missing:bP,vsMissing:wP,smallMissing:_P,midMissing:vP,mlMissing:EP,mllMissing:xP,largeMissing:SP,extraLargeMissing:AP,xxlMissing:MP,highlightBorder:kP,cacheFlag:TP},jl=qt("<div>"),NP=qt("<div><div>"),IP=qt('<img alt="avatar">'),RP=o(e=>{const t=zf(),n=Ts(),[r,i]=lt(!1),s=e.size||"sm",a={nano:Fe.nanoAvatar,micro:Fe.microAvatar,xxs:Fe.xxsAvatar,xss:Fe.xssAvatar,xs:Fe.xsAvatar,vvs:Fe.vvsAvatar,vs2:Fe.vs2Avatar,vs:Fe.vsAvatar,sm:Fe.smallAvatar,md:Fe.midAvatar,ml:Fe.mlAvatar,mll:Fe.mllAvatar,lg:Fe.largeAvatar,xl:Fe.extraLargeAvatar,xxl:Fe.xxlAvatar},c={nano:Fe.nanoMissing,micro:Fe.microMissing,xxs:Fe.xxsMissing,xss:Fe.xssMissing,xs:Fe.xsMissing,vvs:Fe.vvsMissing,vs2:Fe.vs2Missing,vs:Fe.vsMissing,sm:Fe.smallMissing,md:Fe.midMissing,ml:Fe.mlMissing,mll:Fe.mllMissing,lg:Fe.largeMissing,xl:Fe.extraLargeMissing,xxl:Fe.xxlMissing},u=o(x=>{const w=x.target;let v=e.user?.picture||e.src||"";return(w.src===v||w.src.endsWith(v))&&(v=Aa),w.onerror="",w.src=v,!0},"imgError"),l=o(()=>{if(e.user){const x=e.legendConfig||n?.legendCustomization[e.user?.pubkey];if(x)return x.avatar_glow?Fe.legend:""}return""},"legendClass"),f=o(()=>{if(e.user){const x=e.legendConfig||n?.legendCustomization[e.user?.pubkey];if(x){const w=x.style,v=w!==""&&x.avatar_glow,T=w!==""&&x.avatar_glow;let N="";return v&&(N+=`${Fe.legend} ${Fe[`legend_${w}`]}`),T&&(N+=` ${Fe.legendGlow} ${Fe[`legend_glow_${w}`]}`),N}}return e.highlightBorder?Fe.highlightBorder:""},"highlightClass"),h=it(()=>{let x="m";switch(s){case"nano":case"micro":case"xxs":case"xss":case"xs":case"vvs":case"vs2":case"vs":case"sm":case"md":case"ml":case"mll":case"lg":x="s";break;default:x="m";break}const w=e.user?.picture||e.src;if(!w)return"";const v=t?.actions.getMediaUrl(w,x,!0);return i(!!v),v??w}),p=o(()=>{const x=localStorage.getItem("devMode")==="true";return r()||!x?"":Fe.cacheFlag},"notCachedFlag"),y=o(()=>{const x=e.user?.picture||e.src||Aa;return t?.actions.getMedia(x,"o")},"imageMedia"),_=o(()=>{const x=e.user?.picture||e.src||Aa;return t?.actions.getMedia(x,"m")||t?.actions.getMedia(x,"o")||x},"imageThumb");return(()=>{const x=jl();return Ot(x,pe(Dn,{get when(){return h()},get fallback(){return(()=>{const w=NP(),v=w.firstChild;return ct(T=>{const N=Fe.missingBack,I=c[s];return N!==T._v$4&&pt(w,T._v$4=N),I!==T._v$5&&pt(v,T._v$5=I),T},{_v$4:void 0,_v$5:void 0}),w})()},get children(){const w=jl();return Ot(w,pe(Dn,{get when(){return e.zoomable},get fallback(){return(()=>{const v=IP();return v.addEventListener("error",u),ct(()=>ht(v,"src",h())),v})()},get children(){return pe(iL,{get class(){return e.zoomable?"profile_image":""},get media(){return y()},get src(){return h()},get altSrc(){return e.user?.picture||e.src},onError:u,get mediaThumb(){return _()},ignoreRatio:!0})}})),ct(()=>pt(w,`${Fe.missingBack} ${p()}`)),w}}),null),Ot(x,pe(Dn,{get when(){return e.user&&e.showCheck},get children(){const w=jl();return Ot(w,pe(kL,{get user(){return e.user}})),ct(()=>pt(w,Fe.iconBackground)),w}}),null),ct(w=>{const v=e.id,T=`${a[s]} ${l()} ${f()} ${e.showBorderRing?Fe.borderRing:""}`,N=e.user?.pubkey;return v!==w._v$&&ht(x,"id",w._v$=v),T!==w._v$2&&pt(x,w._v$2=T),N!==w._v$3&&ht(x,"data-user",w._v$3=N),w},{_v$:void 0,_v$2:void 0,_v$3:void 0}),x})()},"Avatar"),jB=Sc(RP),LP="_userMention_19p7n_1",PP="_userPreview_19p7n_4",OP="_userName_19p7n_29",CP="_verification_19p7n_35",jp={userMention:LP,userPreview:PP,userName:OP,verification:CP},BP=qt('<div class="linkish">'),FP=qt('<a target="_blank">'),UP=o(e=>{const t=Ts();return pe(o(r=>e.user?e.openInNewTab?(()=>{const i=FP();return Ot(i,()=>r.children),ct(s=>{const a=e.id,c=jp.userMention,u=t?.actions.profileLink(e.user?.npub)||"";return a!==s._v$&&ht(i,"id",s._v$=a),c!==s._v$2&&pt(i,s._v$2=c),u!==s._v$3&&ht(i,"href",s._v$3=u),s},{_v$:void 0,_v$2:void 0,_v$3:void 0}),i})():pe(QR,{get id(){return e.id},get class(){return jp.userMention},get href(){return t?.actions.profileLink(e.user?.npub||e.npub)||""},get children(){return r.children}}):(()=>{const i=BP();return Ot(i,()=>r.children),ct(()=>ht(i,"id",e.id)),i})(),"LinkComponent"),{get children(){return["@",it(()=>ny(e.user)||"UNKNOWN")]}})},"MentionedUserLink"),GB=Sc(UP),DP="_fullHeader_warm4_9",$P="_editProfileButton_warm4_15",HP="_emptyHeader_warm4_19",zP="_banner_warm4_26",ZP="_profileActions_warm4_26",WP="_bigAbout_warm4_26",jP="_smallAbout_warm4_26",GP="_fadeIn_warm4_1",qP="_avatar_warm4_33",VP="_userImage_warm4_53",KP="_keyIcon_warm4_59",JP="_copyIcon_warm4_69",YP="_checkIcon_warm4_79",QP="_linkIcon_warm4_89",XP="_profileAboutHolder_warm4_120",eO="_smallSecondaryButton_warm4_126",tO="_smallPrimaryButton_warm4_145",nO="_zapIcon_warm4_193",rO="_qrIcon_warm4_203",iO="_contextIcon_warm4_213",sO="_messageIcon_warm4_223",oO="_addFeedIcon_warm4_233",aO="_removeFeedIcon_warm4_243",cO="_primaryButton_warm4_253",lO="_profileCard_warm4_267",uO="_columnLeft_warm4_286",fO="_nipLine_warm4_294",dO="_columnRight_warm4_297",hO="_basicInfo_warm4_306",pO="_basicInfoName_warm4_312",gO="_text_warm4_318",mO="_followsBadge_warm4_329",yO="_joined_warm4_332",bO="_followings_warm4_340",wO="_stats_warm4_346",_O="_number_warm4_359",vO="_label_warm4_365",EO="_publicKey_warm4_375",xO="_npub_warm4_384",SO="_verificationInfo_warm4_410",AO="_verified_warm4_419",MO="_nip05_warm4_423",kO="_profileLinks_warm4_431",TO="_website_warm4_437",NO="_commonFollows_warm4_451",IO="_avatars_warm4_464",RO="_profileAbout_warm4_120",LO="_userStats_warm4_484",PO="_userStat_warm4_484",OO="_statNumber_warm4_496",CO="_statName_warm4_502",BO="_userFeed_warm4_511",FO="_bannerPlaceholder_warm4_515",UO="_phoneAvatar_warm4_537",DO="_desktopAvatar_warm4_541",$O="_addToFeedButton_warm4_546",HO="_mutedProfile_warm4_550",zO="_contextArea_warm4_574",ZO="_profileVerification_warm4_639",WO="_cacheFlag_warm4_657",qB={fullHeader:DP,editProfileButton:$P,emptyHeader:HP,banner:zP,profileActions:ZP,bigAbout:WP,smallAbout:jP,fadeIn:GP,avatar:qP,userImage:VP,keyIcon:KP,copyIcon:JP,checkIcon:YP,linkIcon:QP,profileAboutHolder:XP,smallSecondaryButton:eO,smallPrimaryButton:tO,zapIcon:nO,qrIcon:rO,contextIcon:iO,messageIcon:sO,addFeedIcon:oO,removeFeedIcon:aO,primaryButton:cO,profileCard:lO,columnLeft:uO,nipLine:fO,columnRight:dO,basicInfo:hO,basicInfoName:pO,text:gO,followsBadge:mO,joined:yO,followings:bO,stats:wO,number:_O,label:vO,publicKey:EO,npub:xO,verificationInfo:SO,verified:AO,nip05:MO,profileLinks:kO,website:TO,commonFollows:NO,avatars:IO,profileAbout:RO,userStats:LO,userStat:PO,statNumber:OO,statName:CO,userFeed:BO,bannerPlaceholder:FO,phoneAvatar:UO,desktopAvatar:DO,addToFeedButton:$O,mutedProfile:HO,contextArea:zO,profileVerification:ZO,cacheFlag:WO},Ma={pubkey:"",follows_count:0,followers_count:0,note_count:0,reply_count:0,time_joined:0,total_zap_count:0,total_satszapped:0,relay_count:0,media_count:0},Rb=Ht(),jO=o(e=>{const t=Zn();let n=[];const r={profileKey:void 0,userProfile:void 0,userStats:{...Ma},fetchedUserStats:!1,knownProfiles:{names:{}},articles:[],notes:[],replies:[],gallery:[],contactListDate:0,isFetching:!1,isProfileFetched:!1,isFetchingReplies:!1,isProfileFollowing:!1,isFetchingZaps:!1,isFetchingGallery:!1,page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}},repliesPage:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}},reposts:{},zaps:[],zappedNotes:[],zappedArticles:[],zappers:{},zapListOffset:0,lastNote:void 0,lastArticle:void 0,lastReply:void 0,lastZap:void 0,lastGallery:void 0,following:[],filterReason:null,contacts:[],profileStats:{},isFetchingContacts:!1,isFetchingSidebarNotes:!1,followers:[],isFetchingFollowers:!1,relays:{},isFetchingRelays:!1,fetchingProfileForKey:"",isAboutParsed:!1,commonFollowers:[],sidebarNotes:{messages:[],users:{},postStats:{},notes:[],topZaps:{},noteActions:{}},sidebarArticles:{messages:[],users:{},postStats:{},notes:[],topZaps:{},noteActions:{}},isFetchingSidebarArticles:!1,future:{notes:[],articles:[],replies:[],reposts:{},page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}},repliesPage:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}}},profileHistory:{profiles:[],stats:{}},parsedAbout:void 0,paging:{notes:{...Dt()},reads:{...Dt()},gallery:{...Dt()},replies:{...Dt()}},scrollTop:{reads:0,notes:0,replies:0,zaps:0,media:0}},i=o(async(X,re,xe=0,fe=20,le=0)=>{if(X){if(re==="notes"){const q={id:"feed",kind:"notes",notes:"authored",pubkey:X};te("isFetching",()=>!0);const{notes:Y,paging:ae}=await Un(t?.publicKey,JSON.stringify(q),`profile_notes_${ue}`,{limit:fe,until:xe,offset:le||me.notes.map(ve=>ve.repost?ve.repost.note.created_at:ve.post.created_at||0)}),we=ns(Y,ae);te("paging","notes",()=>({...ae})),te("notes",ve=>[...ve,...we]),te("isFetching",()=>!1);return}if(re==="replies"){const q={id:"feed",kind:"notes",notes:"replies",pubkey:X};te("isFetchingReplies",()=>!0);const{notes:Y,paging:ae}=await Un(t?.publicKey,JSON.stringify(q),`profile_replies_${ue}`,{limit:fe,until:xe,offset:le||me.replies.map(ve=>ve.repost?ve.repost.note.created_at:ve.post.created_at||0)}),we=ns(Y,ae);te("paging","replies",()=>({...ae})),te("replies",ve=>[...ve,...we]),te("isFetchingReplies",()=>!1);return}if(re==="reads"){const q={id:"feed",kind:"reads",notes:"authored",pubkey:X};te("isFetching",()=>!0);const Y=le||Xa(me.articles,me.paging.reads),{reads:ae,paging:we}=await Un(t?.publicKey,JSON.stringify(q),`profile_reads_${ue}`,{limit:fe,until:xe,offset:Y}),ve=ec(ae,we);te("paging","reads",()=>({...we})),te("articles",Be=>[...Be,...ve]),te("isFetching",()=>!1);return}if(re==="media"){const q={id:"feed",kind:"notes",notes:"user_media_thumbnails",pubkey:X};te("isFetchingGallery",()=>!0);const{notes:Y,paging:ae}=await Un(t?.publicKey,JSON.stringify(q),`profile_media_${ue}`,{limit:fe,until:xe,offset:le||me.gallery.map(ve=>ve.repost?ve.repost.note.created_at:ve.post.created_at||0)}),we=ns(Y,ae);te("paging","media",()=>({...ae})),te("gallery",ve=>[...ve,...we]),te("isFetchingGallery",()=>!1);return}}},"getProfileMegaFeed"),s=o(async(X,re)=>{if(!X)return;const xe=me.paging[re]||{until:0,since:0,sortBy:"created_at"};xe.since&&i(X,re,xe.since,20)},"getProfileMegaFeedNextPage"),a=o(async(X,re=0,xe=0,fe=!0)=>{if(!X)return;const le=`profile_zaps_${ue}`;te("isFetchingZaps",()=>!0);const{zaps:q,notes:Y,articles:ae,paging:we}=await yR(X,le,re,xe,20),ve=Lb(q,we);te("zaps",Be=>[...Be,...ve]),te("zappedNotes",Be=>[...Be,...Y]),te("zappedArticles",Be=>[...Be,...ae]),te("isFetchingZaps",()=>!1)},"fetchZapList"),c=o(()=>{const X=me.zaps[me.zaps.length-1];if(!X)return;te("lastZap",()=>({...X}));const re=X.created_at||0;re>0&&me.profileKey&&a(me.profileKey,re,0,!1)},"fetchNextZapsPage"),u=o((X,re)=>{const xe=re.find(fe=>fe.pubkey===X);xe&&te("contacts",me.contacts.length,Qn(xe))},"addContact"),l=o(X=>{const re=me.contacts.filter(xe=>xe.pubkey!==X);te("contacts",Qn(re))},"removeContact"),f=o((X,re=!0)=>{if(!X)return;te("isFetchingContacts",()=>!0);const xe=`profile_contacts_${ue}`,fe=Me(xe,{onEvent:(le,q)=>{if(q?.kind===W.Contacts){const Y=q.tags;let ae=[];for(let we=0;we<Y.length;we++){const ve=Y[we];ve[0]==="p"&&ae.push(ve[1])}te("following",()=>ae),te("contactListDate",()=>q.created_at||0)}if(q?.kind===W.Metadata){let Y=JSON.parse(q.content);(!Y.displayName||typeof Y.displayName=="string"&&Y.displayName.trim().length===0)&&(Y.displayName=Y.display_name),Y.pubkey=q.pubkey,Y.npub=wn(q.pubkey),Y.created_at=q.created_at,te("contacts",me.contacts.length,()=>({...Y}));return}if(q?.kind===W.UserFollowerCounts){const Y=JSON.parse(q.content);te("profileStats",()=>({...Y}));return}},onEose:()=>{te("isFetchingContacts",()=>!1),fe()}});_a(X,xe,re)},"fetchContactList"),h=o(X=>{if(!X)return;const re=`profile_relays_${ue}`,xe=Me(re,{onEvent:(fe,le)=>{if(le?.kind===W.UserRelays){const q=iy(le.tags);te("relays",Qn(q));return}},onEose:()=>{te("isFetchingRelays",()=>!1),xe()}});te("isFetchingRelays",()=>!0),va(X,re)},"fetchRelayList"),p=o(X=>{if(!X)return;const re=`profile_followers_${ue}`,xe=Me(re,{onEvent:(fe,le)=>{if(le?.kind===W.Metadata){let q=JSON.parse(le.content);(!q.displayName||typeof q.displayName=="string"&&q.displayName.trim().length===0)&&(q.displayName=q.display_name),q.pubkey=le.pubkey,q.npub=wn(le.pubkey),q.created_at=le.created_at,te("followers",me.followers.length,()=>({...q}))}if(le?.kind===W.UserFollowerCounts){const q=JSON.parse(le.content);te("profileStats",()=>({...q}))}},onEose:()=>{te("isFetchingFollowers",()=>!1),xe()}});te("isFetchingFollowers",()=>!0),DM(X,re)},"fetchFollowerList"),y=o(()=>{te("gallery",()=>[]),te("lastGallery",()=>{})},"clearGallery"),_=o(()=>{te("page",()=>({messages:[],users:{},postStats:{},noteActions:{}})),te("notes",()=>[]),te("reposts",()=>{}),te("lastNote",()=>{})},"clearNotes"),x=o(()=>{te("articles",()=>[]),te("lastArticle",()=>{})},"clearArticles"),w=o(()=>{te("repliesPage",()=>({messages:[],users:{},postStats:{},noteActions:{}})),te("replies",()=>[]),te("lastReply",()=>{})},"clearReplies"),v=o(()=>{te("zaps",()=>[]),te("zappers",Qn({})),te("lastZap",()=>{})},"clearZaps"),T=o(()=>{te("contacts",()=>[]),te("followers",()=>[]),te("profileStats",()=>{}),te("profileStats",()=>({}))},"clearContacts"),N=o(()=>{te("filterReason",()=>null)},"clearFilterReason"),I=o(()=>{te("future",()=>({notes:[],replies:[],reposts:{},page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}},repliesPage:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}}}))},"clearFuture"),C=o(X=>{if(me.future.notes.length>100)return;let re=0;me.notes[0]&&(re=me.notes[0].repost?me.notes[0].repost.note.created_at:me.notes[0].post.created_at),I(),tR(t?.publicKey,X,`profile_future_${ue}`,re)},"checkForNewNotes"),D=o((X,re="sidebarNotes")=>{if(X.kind===W.Metadata){const xe=X;te(re,"users",()=>({[xe.pubkey]:xe}));return}if([W.Text,W.Repost,W.LongForm].includes(X.kind)){const xe=X;me.lastNote?.post?.noteId!==Pe.noteEncode(xe.id)&&te(re,"messages",fe=>[...fe,xe]);return}if(X.kind===W.NoteStats){const fe=JSON.parse(X.content);te(re,"postStats",()=>({[fe.event_id]:fe}));return}if(X.kind===W.Mentions){const fe=JSON.parse(X.content);te("page","mentions",()=>({[fe.id]:fe}));return}if(X.kind===W.NoteActions){const fe=JSON.parse(X.content);te("page","noteActions",()=>({[fe.event_id]:fe}));return}},"updateSidebar"),U=o((X,re="sidebarNotes")=>{if(re==="sidebarNotes"){const xe=pb(fi(X));te(re,"notes",()=>[...xe])}if(re==="sidebarArticles"){const xe=Zo(X);te(re,"notes",()=>[...xe])}},"saveSidebar"),H=o((X,re="sidebarNotes")=>{if(X.kind===W.Metadata){const xe=X;if(xe.pubkey===me.profileKey)return;n.push(Je(xe,X.pubkey));return}},"updateCommonFollowers"),B=o(()=>{te("commonFollowers",()=>[...n]),n=[]},"saveCommonFollowers");at(Bi(()=>me.profileKey,(X,re)=>{X&&X!==re&&te("isProfileFetched",()=>!1)}));const z=o(async X=>{if(X!==me.profileKey&&(te("profileKey",()=>X),X)){Jr(()=>{te("sidebarNotes",()=>({...Go})),te("sidebarArticles",()=>({...Go})),te("parsedAbout",()=>{}),te("filterReason",()=>null),te("userProfile",()=>{}),te("userStats",()=>({...Ma})),te("fetchedUserStats",()=>!1),te("isProfileFetched",()=>!1),te("isFetchingSidebarNotes",()=>!0),te("isFetchingSidebarArticles",()=>!0),te("isAboutParsed",()=>!1),te("commonFollowers",()=>[])});const re=`profile_info_${ue}`,xe=`profile_scored_${ue}`,fe=`profile_common_followers_${ue}`;Ct(re,()=>ry(X,t?.publicKey,re),P,F),Ct(xe,()=>HM(X,t?.publicKey,xe,8),g,L),Ct(fe,()=>zM(X,t?.publicKey,fe,6),V,ie);const le={id:"feed",kind:"reads",notes:"authored",pubkey:X},{reads:q,paging:Y}=await Un(t?.publicKey,JSON.stringify(le),`profile_reads_latest_${ue}`,{until:0,limit:2}),ae=ec(q,Y);te("sidebarArticles",()=>({notes:[...ae]})),te("isFetchingSidebarArticles",()=>!1);const we=`is_profile_following_${ue}`;Ct(we,()=>UM(X,t?.publicKey,we),M)}},"setProfileKey"),A=o(()=>{te("sidebarNotes",()=>({...Go})),te("sidebarArticles",()=>({...Go})),te("isProfileFetched",()=>!1),te("userProfile",()=>{}),te("isFetching",()=>!1),te("commonFollowers",()=>[]),te("userStats",Qn(Ma))},"resetProfile"),d=o(X=>{if(X?.content&&X.kind===W.Metadata){const re=JSON.parse(X.content);te("userProfile",()=>({...re,pubkey:X.pubkey}))}},"handleUserProfileEvent"),m=o(X=>{if(X!==me.profileKey)return;const re=`user_profile_${ue}`;Ct(re,()=>si([X],re),d)},"updateProfile"),S=o(()=>{},"refreshNotes"),R=o(X=>{let re=[...me.profileHistory.profiles];const xe=re.findIndex(fe=>fe.pubkey===X.pubkey);if(xe!==0){if(xe>0){re.splice(xe,1),te("profileHistory","profiles",()=>[X,...re]);return}if(re.unshift(X),re.length>10){const fe=re[re.length-1].pubkey;let le={...me.profileHistory.stats};delete le[fe],te("profileHistory","stats",Qn(le)),re.pop()}te("profileHistory","profiles",()=>[...re])}},"addProfileToHistory"),k=o(X=>{te("profileHistory","stats",()=>({[X.pubkey]:X}))},"addStatsToHistory"),P=o(X=>{if(X?.kind===W.FilteringReason){const re=JSON.parse(X.content)||null;re?.action==="block"?te("filterReason",()=>({...re})):te("filterReason",()=>null)}if(X?.kind===W.Metadata){let re=JSON.parse(X.content);(!re.displayName||typeof re.displayName=="string"&&re.displayName.trim().length===0)&&(re.displayName=re.display_name),re.pubkey=X.pubkey,re.npub=wn(X.pubkey),re.created_at=X.created_at,te("userProfile",()=>({...re})),R(re);return}if(X?.kind===W.UserStats){const re=JSON.parse(X.content);te("userStats",()=>({...re})),k(re),te("fetchedUserStats",()=>!0);return}},"handleProfileInfoEvent"),F=o(()=>{te("isProfileFetched",()=>!0)},"handleProfileInfoEose"),M=o(X=>{te("isProfileFollowing",JSON.parse(X?.content||"false"))},"handleProfileFollowingEvent"),g=o(X=>{D(X)},"handleProfileScoredEvent"),L=o(()=>{U(me.sidebarNotes),te("isFetchingSidebarNotes",()=>!1)},"handleProfileScoredEose"),V=o(X=>{H(X)},"handleProfileCommonFollowersEvent"),ie=o(()=>{B()},"handleProfileCommonFollowersEose");at(()=>{if(t&&t.hasPublicKey()){const X=VA(t.publicKey);X&&te("profileHistory",Qn(X))}}),at(()=>{const X=[...me.profileHistory.profiles],re={...me.profileHistory.stats};qA(t?.publicKey,{profiles:X,stats:re})});const he=o(()=>{_(),x(),y(),w(),v(),A()},"clearProfile"),ge=o(()=>{te("scrollTop",()=>({reads:0,notes:0,replies:0,zaps:0,media:0})),window.scrollTo({top:0})},"resetScroll"),_e=o((X,re)=>{te("scrollTop",re,()=>X)},"updateScrollTop"),[me,te]=Xt({...r,actions:{clearNotes:_,clearArticles:x,clearGallery:y,clearReplies:w,setProfileKey:z,refreshNotes:S,checkForNewNotes:C,fetchContactList:f,fetchFollowerList:p,fetchRelayList:h,clearContacts:T,addContact:u,removeContact:l,fetchZapList:a,fetchNextZapsPage:c,clearZaps:v,resetProfile:A,clearFilterReason:N,addProfileToHistory:R,clearProfile:he,updateScrollTop:_e,resetScroll:ge,updateProfile:m,getProfileMegaFeed:i,getProfileMegaFeedNextPage:s}});return pe(Rb.Provider,{value:me,get children(){return e.children}})},"ProfileProvider"),GO=o(()=>zt(Rb),"useProfileContext"),qO=o((e,t)=>{Ee(JSON.stringify(["REQ",t,{cache:["directmsg_count",{pubkey:e}]}]))},"subscribeToMessagesStats"),VO=o(e=>{Ee(JSON.stringify(["CLOSE",e,{cache:["directmsg_count"]}]))},"unsubscribeToMessagesStats"),KO=o(async(e,t)=>{const n={content:`{ "description": "reset messages from '${e}'"}`,kind:W.Settings,tags:[["d","Primal-Web App"]],created_at:Math.ceil(new Date().getTime()/1e3)};try{const r=await Vt(n);return Ee(JSON.stringify(["REQ",t,{cache:["reset_directmsg_count",{event_from_user:r,sender:e}]}])),!0}catch(r){return console.error("Failed to reset message count: ",r),!1}},"resetMessageCount"),JO=o((e,t,n,r=0,i=0,s=0)=>{let a={user_pubkey:e,relation:t};r>0&&(a.limit=r),i>0&&(a.until=i),s>0&&(a.offset=s),Ee(JSON.stringify(["REQ",n,{cache:["get_directmsg_contacts",{...a}]}]))},"getMessageCounts"),YO=o((e,t,n,r=0,i=20,s=0)=>{const c={limit:i,[r===0?"since":"until"]:r,receiver:e,sender:t,offset:s};Ee(JSON.stringify(["REQ",n,{cache:["get_directmsgs",c]}]))},"getOldMessages"),QO=o((e,t,n,r=0,i=20,s=0)=>{let a={receiver:e,sender:t,since:r,limit:i};s>0&&(a.offset=s),Ee(JSON.stringify(["REQ",n,{cache:["get_directmsgs",{...a}]}]))},"getNewMessages"),XO=o(async e=>{const t={content:'{ "description": "mark all messages as read"}',kind:W.Settings,tags:[["d","Primal-Web App"]],created_at:Math.ceil(new Date().getTime()/1e3)};try{const n=await Vt(t);return Ee(JSON.stringify(["REQ",e,{cache:["reset_directmsg_counts",{event_from_user:n}]}])),!0}catch(n){return console.error("Failed to mark as read: ",n),!1}},"markAllAsRead"),Wn=o(()=>({users:{},notes:[],reads:[],zaps:[],topicStats:{},noteStats:{},mentions:{},noteActions:{},relayHints:{},topZaps:{},wordCount:{},userStats:{},userFollowerCounts:{},userFollowerIncrease:{},since:0,until:0,sortBy:"created_at",elements:[],dmContacts:{},encryptedMessages:[]}),"emptyMegaFeedPage"),Dt=o(()=>({since:0,until:0,sortBy:"created_at",elements:[]}),"emptyPaging"),Nr=o(()=>({users:[],notes:[],reads:[],zaps:[],topicStats:[],dmContacts:[],paging:{...Dt()},page:{...Wn()},encryptedMessages:[]}),"emptyMegaFeedResults"),eC=o(e=>{let t={};return e.notes.forEach(n=>{if(n.kind===W.Repost&&n.content.length===0){const r=n.tags.find(i=>i[0]==="e");r&&(t[r[1]]=n.id)}}),t},"parseEmptyReposts"),Un=o((e,t,n,r)=>new Promise(i=>{let s={...Wn()};const a=Me(n,{onEose:()=>{a(),i(hr(s))},onEvent:(h,p)=>{pr(s,p)}}),c=r?.until||0,u=r?.since||0,l=r?.limit||0;let f=0;typeof r?.offset=="number"?f=r.offset:Array.isArray(r?.offset)&&(c>0&&(f=(r?.offset||[]).filter(h=>h===c).length),u>0&&(f=(r?.offset||[]).filter(h=>h===u).length)),XI(e,t,n,c,l,u,f)}),"fetchMegaFeed"),tC=o((e,t,n)=>new Promise(r=>{let i={...Wn()};const s=Me(n,{onEose:()=>{s(),r(hr(i))},onEvent:(a,c)=>{pr(i,c)}});hR(e,t,10,n)}),"fetchScoredContent"),nC=o(e=>new Promise(t=>{let n=[];const r=Me(e,{onEose:()=>{r(),gR(n,`get_reads_pe_${ue}`).then(i=>{t(i)})},onEvent:(i,s)=>{n=JSON.parse(s?.content||"{}").reads.reduce((c,u)=>u[0]?[...c,u[0]]:c,[])}});pR(e)}),"fetchRecomendedReads"),VB=o((e,t,n)=>new Promise(r=>{let i={...Wn()};const s=Uo(t),{pubkey:a,identifier:c,kind:u}=s.data,l=Me(n,{onEvent:(f,h)=>{h&&pr(i,h)},onEose:()=>{l(),r(hr(i))},onNotice:(f,h)=>{l(),r({...Nr()})}});nR(e,a,c,u,n)}),"fetchReadThread"),KB=o((e,t,n)=>new Promise(r=>{let i={...Wn()};const s=Me(t,{onEvent:(f,h)=>{h&&pr(i,h)},onEose:()=>{s(),r(hr(i))},onNotice:(f,h)=>{s(),r({...Nr()})}}),a=n?.until||0,c=n?.since||0,u=n?.limit||0;let l=0;typeof n?.offset=="number"?l=n.offset:Array.isArray(n?.offset)&&(a>0&&(l=(n?.offset||[]).filter(f=>f===a).length),c>0&&(l=(n?.offset||[]).filter(f=>f===c).length)),qM(t,e,a,u,c,l)}),"fetchExplorePeople"),JB=o((e,t,n)=>new Promise(r=>{let i={...Wn()};const s=Me(t,{onEvent:(f,h)=>{h&&pr(i,h)},onEose:()=>{s(),r(hr(i))},onNotice:(f,h)=>{s(),r({...Nr()})}}),a=n?.until||0,c=n?.since||0,u=n?.limit||0;let l=0;typeof n?.offset=="number"?l=n.offset:Array.isArray(n?.offset)&&(a>0&&(l=(n?.offset||[]).filter(f=>f===a).length),c>0&&(l=(n?.offset||[]).filter(f=>f===c).length)),VM(t,e,a,u,c,l)}),"fetchExploreZaps"),YB=o((e,t,n)=>new Promise(r=>{let i={...Wn()};const s=Me(t,{onEvent:(f,h)=>{h&&pr(i,h)},onEose:()=>{s(),r(hr(i))},onNotice:(f,h)=>{s(),r({...Nr()})}}),a=n?.until||0,c=n?.since||0,u=n?.limit||0;let l=0;typeof n?.offset=="number"?l=n.offset:Array.isArray(n?.offset)&&(a>0&&(l=(n?.offset||[]).filter(f=>f===a).length),c>0&&(l=(n?.offset||[]).filter(f=>f===c).length)),KM(t,e,a,u,c,l)}),"fetchExploreMedia"),QB=o((e,t)=>new Promise(n=>{let r={...Wn()};const i=Me(t,{onEvent:(s,a)=>{a&&pr(r,a)},onEose:()=>{i(),n(hr(r))},onNotice:(s,a)=>{i(),n({...Nr()})}});JM(t)}),"fetchExploreTopics"),Gl=o((e,t,n,r)=>new Promise(i=>{let s={...Wn()};const a=Me(n,{onEvent:(h,p)=>{p&&pr(s,p)},onEose:()=>{a(),i(hr(s))},onNotice:(h,p)=>{a(),i({...Nr()})}}),c=r?.until||0,u=r?.since||0,l=r?.limit||0;let f=0;typeof r?.offset=="number"?f=r.offset:Array.isArray(r?.offset)&&(c>0&&(f=(r?.offset||[]).filter(h=>h===c).length),u>0&&(f=(r?.offset||[]).filter(h=>h===u).length)),JO(e,t,n,l,u,f)}),"fetchDMContacts"),rC=o((e,t,n,r)=>new Promise(i=>{let s={...Wn()};const a=Me(n,{onEvent:(h,p)=>{p&&pr(s,p)},onEose:()=>{a(),i(hr(s))},onNotice:(h,p)=>{a(),i({...Nr()})}}),c=r?.until||0,u=r?.since||0,l=r?.limit||0;let f=0;typeof r?.offset=="number"?f=r.offset:Array.isArray(r?.offset)&&(c>0&&(f=(r?.offset||[]).filter(h=>h===c).length),u>0&&(f=(r?.offset||[]).filter(h=>h===u).length)),YO(e,t,n,u,l,f)}),"fetchDMConversation"),iC=o((e,t,n,r)=>new Promise(i=>{if(!e||!t){i({...Nr()});return}let s={...Wn()};const a=Me(n,{onEvent:(h,p)=>{p&&pr(s,p)},onEose:()=>{a(),i(hr(s))},onNotice:(h,p)=>{a(),i({...Nr()})}}),c=r?.until||0,u=r?.since||0,l=r?.limit||0;let f=0;typeof r?.offset=="number"?f=r.offset:Array.isArray(r?.offset)&&(c>0&&(f=(r?.offset||[]).filter(h=>h===c).length),u>0&&(f=(r?.offset||[]).filter(h=>h===u).length)),QO(e,t,n,u,l,f)}),"fetchDMConversationNew"),hr=o(e=>{const t=eC(e),n=Object.keys(t);n.length>0&&n.forEach(f=>{const h=e.mentions[f];if(h){const p=e.notes.findIndex(y=>y.id===t[f]);e.notes[p].content=JSON.stringify(h)}});const r=lR(e),i=uR(e),s=fR(e),a=oC(e),c=aC(e),u=cC(e),l=[...e.encryptedMessages];return{users:r,notes:i,reads:s,zaps:a,topicStats:c,dmContacts:u,encryptedMessages:l,paging:{since:e.since,until:e.until,sortBy:e.sortBy,elements:e.elements},page:e}},"pageResolve"),pr=o((e,t)=>{if(t.kind===W.FeedRange){const n=JSON.parse(t.content||"{}");e.since=n.since,e.until=n.until,e.sortBy=n.order_by,e.elements=[...n.elements];return}if(t.kind===W.Metadata){const n=t;e.users[n.pubkey]={...n};return}if([W.Text,W.Repost].includes(t.kind)){const n=t;if(Dp(e.notes,n))return;e.notes.push({...n});return}if([W.LongForm,W.LongFormShell].includes(t.kind)){const n=t;if(Dp(e.notes,n))return;e.reads.push({...n});return}if(t.kind===W.NoteStats){const r=JSON.parse(t.content);e.noteStats[r.event_id]={...r};return}if(t.kind===W.Mentions){const r=JSON.parse(t.content);e.mentions[r.id]={...r};return}if(t.kind===W.NoteActions){const r=JSON.parse(t.content);e.noteActions[r.event_id]={...r};return}if(t.kind===W.LinkMetadata){const r=JSON.parse(t.content).resources[0];if(!r)return;const i={url:r.url,title:r.md_title,description:r.md_description,mediaType:r.mimetype,contentType:r.mimetype,images:[r.md_image],favicons:[r.icon_url]};li(()=>({[r.url]:i}));return}if(t.kind===W.Zap){e.zaps.push(t);const n=t.tags.find(f=>f[0]==="description");if(!n)return;const r=JSON.parse(n[1]||"{}");let i="0",s=t?.tags?.find(f=>f[0]==="bolt11");if(s)try{i=`${dr(s[1])||0}`}catch{const h=r.tags.find(p=>p[0]==="amount");i=h?h[1]:"0"}const a=(r.tags.find(f=>f[0]==="e")||[])[1],c={id:r.id,amount:parseInt(i||"0"),pubkey:r.pubkey,message:r.content,eventId:a},u=e.topZaps[a];if(u===void 0){e.topZaps[a]=[{...c}];return}if(u.find(f=>f.id===c.id))return;const l=[...u,{...c}].sort((f,h)=>h.amount-f.amount);e.topZaps[a]=[...l];return}if(t.kind===W.NoteTopicStat){const n=JSON.parse(t.content);e.topicStats=n;return}if(t.kind===W.UserStats){let n=JSON.parse(t.content);e.userStats[n.pubkey]={...n}}if(t.kind===W.UserFollowerCounts){let n=JSON.parse(t.content);e.userFollowerCounts={...n}}if(t.kind===W.UserFollowerIncrease){let n=JSON.parse(t.content);e.userFollowerIncrease={...n}}if(t?.kind===W.MesagePerSenderStats){const n=JSON.parse(t.content);e.dmContacts={...n}}if(t?.kind===W.EncryptedDirectMessage&&e.encryptedMessages.push({...t}),t.kind===W.WordCount){const n=JSON.parse(t.content);e.wordCount||(e.wordCount={}),e.wordCount[n.event_id]=n.words;return}},"updateFeedPage"),ns=o((e,t)=>t.elements.reduce((n,r)=>{let i=e.find(s=>[s.id,s.repost?.note.id].includes(r));return i?[...n,{...i}]:n},[]),"filterAndSortNotes"),ec=o((e,t)=>t.elements.reduce((n,r)=>{const i=e.find(s=>s.id===r);return i?[...n,{...i}]:n},[]),"filterAndSortReads"),Lb=o((e,t)=>t.elements.reduce((n,r)=>{const i=e.find(s=>s.id===r);return i?[...n,{...i}]:n},[]),"filterAndSortZaps"),sC=o((e,t,n)=>t.elements.reduce((r,i)=>{let s=e.find(a=>a.pubkey===i);if(!s){s=Vf(i);const a={...Ma};s.userStats={...a,followers_increase:n.userFollowerIncrease[i],followers_count:n.userFollowerCounts[i]}}return s?[...r,{...s}]:r},[]),"filterAndSortUsers"),oC=o(e=>{const t=e.zaps;let n=[];for(let r=0;r<t.length;r++){const i=t[r],s=(i.tags.find(w=>w[0]==="bolt11")||[])[1],a=JSON.parse((i.tags.find(w=>w[0]==="description")||[])[1]||"{}"),c=a.pubkey,u=a.tags.find(w=>w[0]==="p")[1];let l="",f=0;const h=a.tags.find(w=>w[0]==="a"),p=a.tags.find(w=>w[0]==="e");if(h){const[w,v,T]=h[1].split(":");l=Pe.naddrEncode({kind:w,pubkey:v,identifier:T}),f=e.reads.find(I=>I.id===l)?.kind||0}else if(p){l=p[1];const w=e.reads.find(T=>T.id===l),v=e.notes.find(T=>T.id===l);f=w?.kind||v?.kind||0}if(![W.Text,W.LongForm].includes(f))continue;const y=e.users[c]?Je(e.users[c],c):c,_=e.users[u]?Je(e.users[u],u):u,x={id:i.id,message:a.content||"",amount:dr(s)||0,sender:y,reciver:_,created_at:i.created_at,zappedId:l,zappedKind:f};n.find(w=>w.id===x.id)||n.push(x)}return n},"convertToZapsMega"),aC=o(e=>Object.entries(e.topicStats),"convertToTopicStatsMega"),cC=o(e=>Object.keys(e.dmContacts).map(n=>({pubkey:n,user:Je(e.users[n],n),dmInfo:e.dmContacts[n]})),"convertToContactsMega"),lC={notes:[],futureNotes:[],sidebarNotes:[],isFetching:!1,isFetchingSidebar:!1,scrollTop:0,selectedFeed:void 0,sidebarQuery:void 0,page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}},reposts:{},lastNote:void 0,mentionedNotes:{},future:{notes:[],reposts:{},page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}},scope:"",timeframe:"",latest_at:0},sidebar:{notes:[],page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}},isFetching:!1,query:void 0},paging:{notes:{...Dt()},future:{...Dt()},sidebar:{...Dt()}}},Pb=Ht(),uC=o(e=>{const t=Zn(),n=o(T=>{v("sidebarQuery",()=>({...T}))},"updateSidebarQuery"),r=o(async T=>{v("isFetchingSidebar",()=>!0);const{notes:N,paging:I}=await tC(t?.publicKey,T,`home_sidebar_${ue}`);v("sidebarNotes",()=>[...N]),v("paging","sidebar",()=>({...I})),v("isFetchingSidebar",()=>!1)},"doSidebarSearch"),i=o(()=>{v("futureNotes",()=>[]),v("paging","future",()=>({since:0,until:0,sortBy:"created_at"}))},"clearFuture"),s=o(async T=>{if(w.paging.notes.sortBy!=="created_at"||w.futureNotes.length>100)return;let N=w.paging.future.until||w.paging.notes.until||0;const I=w.futureNotes.length>0?w.futureNotes:w.notes.slice(0,20),C=nf(I,w.futureNotes.length>0?w.paging.future:w.paging.notes),{notes:D,paging:U}=await Un(t?.publicKey,T,`home_future_${ue}`,{since:N,limit:100,offset:C}),H=I.map(z=>z.id),B=D.filter(z=>!H.includes(z.id));v("paging","future",()=>({...U})),v("futureNotes",z=>[...z,...B])},"checkForNewNotes"),a=o(()=>{w.futureNotes.length!==0&&(v("notes",T=>[...w.futureNotes,...T]),i())},"loadFutureContent"),c=o(async(T,N=0,I=!0)=>{v("isFetching",()=>I);const C=t?.publicKey||sc.names.primal,D=nf(w.notes,w.paging.notes),{notes:U,paging:H}=await Un(C,T,`home_feed_${ue}`,{until:N,limit:20,offset:D}),B=ns(U,H);v("paging","notes",()=>({...H})),v("notes",z=>[...z,...B]),v("isFetching",()=>!1)},"fetchNotes"),u=o(()=>{v("scrollTop",()=>0),window.scrollTo({top:0}),v("notes",()=>[]),v("paging","notes",()=>({since:0,until:0,sortBy:"created_at"})),i()},"clearNotes"),l=o(T=>{if(w.isFetching)return;const N=T||w.selectedFeed?.spec||"",I=w.paging.notes.since||0;I>0&&c(N,I)},"fetchNextPage"),f=o(T=>{v("scrollTop",()=>T)},"updateScrollTop");let h;const p=o((T,N)=>{T?.spec!==void 0&&T.spec!==h?.spec&&(h={...T},v("selectedFeed",Qn({...T})),Km(t?.publicKey,"home",T),u(),c(T.spec,0))},"selectFeed"),y=o(()=>{w.selectedFeed&&(u(),c(w.selectedFeed.spec,0))},"refetchSelectedFeed"),_=o(()=>{h=void 0,v("selectedFeed",()=>{})},"resetSelectedFeed"),x=o(()=>{const T=w.selectedFeed;T?.spec&&(u(),c(T.spec,0,!1))},"getFirstPage"),[w,v]=Xt({...lC,actions:{clearNotes:u,fetchNotes:c,fetchNextPage:l,selectFeed:p,updateScrollTop:f,checkForNewNotes:s,loadFutureContent:a,doSidebarSearch:r,updateSidebarQuery:n,getFirstPage:x,resetSelectedFeed:_,refetchSelectedFeed:y}});return pe(Pb.Provider,{value:w,get children(){return e.children}})},"HomeProvider"),fC=o(()=>zt(Pb),"useHomeContext"),dC=o(e=>{Ee(JSON.stringify(["REQ",`netstats_${e}`,{cache:["net_stats"]}]))},"startListeningForNostrStats"),hC=o(e=>{Ee(JSON.stringify(["CLOSE",`netstats_${e}`]))},"stopListeningForNostrStats"),pC=o((e,t)=>{e&&Ee(JSON.stringify(["REQ",`legendstats_${t}`,{cache:["explore_legend_counts",{pubkey:e}]}]))},"getLegendStats"),XB=o((e,t=!1)=>e<(t?1e3:1e4)?e.toLocaleString():e<1e5?`${parseFloat((e/1e3).toFixed(1))} k`:e<1e6?`${Math.floor(e/1e3)} k`:e<1e8?`${parseFloat((e/1e6).toFixed(1))} m`:`${Math.floor(e/1e6)} m`,"humanizeNumber"),gC={previewDVM:void 0,previewDVMStats:void 0,previewDVMMetadata:void 0,previewDVMAuthor:void 0,previewDVMActions:void 0,previewDVMUsers:{},previewDVMFollows:[],explorePeople:[],peoplePaging:{since:0,until:0,sortBy:"created_at",elements:[]},exploreZaps:[],zapPaging:{since:0,until:0,sortBy:"created_at",elements:[]},zapSubjects:{notes:[],reads:[],users:[]},exploreMedia:[],mediaPaging:{since:0,until:0,sortBy:"created_at",elements:[]},exploreTopics:[],notes:[],isFetching:!1,scope:"global",timeframe:"latest",selectedTab:"feeds",page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}},reposts:{},lastNote:void 0,isNetStatsStreamOpen:!1,stats:{users:0,pubkeys:0,pubnotes:0,reactions:0,reposts:0,any:0,zaps:0,satszapped:0},legend:{your_follows:0,your_inner_network:0,your_outer_network:0}},Ob=Ht(),mC=o(e=>{const t=Zn();ai(()=>{const z=iM(),A=oM();B("stats",()=>({...z})),B("exploreTopics",()=>[...A])});const n=o((z,A,d)=>{const m=sC(z,A,d);B("explorePeople",S=>[...S,...m]),B("peoplePaging",()=>({...A}))},"setExplorePeople"),r=o((z,A,d)=>{const m=Lb(z,A);B("exploreZaps",S=>[...S,...m]),B("zapPaging",()=>({...A})),B("zapSubjects",S=>({notes:[...S.notes,...d.notes],reads:[...S.reads,...d.reads],users:[...S.users,...d.users]}))},"setExploreZaps"),i=o((z,A)=>{const d=ns(z,A);B("exploreMedia",m=>[...m,...d]),B("mediaPaging",()=>({...A}))},"setExploreMedia"),s=o(z=>{B("exploreTopics",()=>[...z]),sM(z)},"setExploreTopics"),a=o((z,A,d,m,S,R,k)=>{Jr(()=>{B("previewDVM",()=>z?{...z}:void 0),B("previewDVMStats",()=>A?{...A}:void 0),B("previewDVMMetadata",()=>d?{...d}:void 0),B("previewDVMAuthor",()=>m?{...m}:void 0),B("previewDVMActions",()=>S?{...S}:void 0),B("previewDVMUsers",()=>R?{...R}:{}),B("previewDVMFollows",()=>k?[...k]:[])})},"setPreviewDVM"),c=o(z=>{B("selectedTab",()=>z)},"selectTab"),u=o(z=>{B("notes",A=>[...A,...z]),B("isFetching",()=>!1)},"saveNotes"),l=o((z,A=0,d=20)=>{const[m,S]=z.split(";");if(m&&S){B("isFetching",!0),B("page",()=>({messages:[],users:{},postStats:{}})),B("scope",()=>m),B("timeframe",()=>S);const R=`explore_${ue}`;Ct(R,()=>rR(t?.publicKey||"",R,m,S,A,d),v,T);return}},"fetchNotes"),f=o(()=>{B("page",()=>({messages:[],users:{},postStats:{},noteActions:{}})),B("notes",()=>[]),B("reposts",()=>{}),B("lastNote",()=>{})},"clearNotes"),h=o(()=>{const z=H.notes[H.notes.length-1];if(!z)return;B("lastNote",()=>({...z}));const A=aR(H.timeframe),m=(z.repost?z.repost.note:z.post)[A];m>0&&l(`${H.scope};${H.timeframe}`,m)},"fetchNextPage"),p=o(z=>{if(z.kind===W.Metadata){const A=z;B("page","users",d=>({...d,[A.pubkey]:{...A}}));return}if([W.Text,W.Repost].includes(z.kind)){const A=z;H.lastNote?.post?.noteId!==Pe.noteEncode(A.id)&&B("page","messages",d=>[...d,{...A}]);return}if(z.kind===W.NoteStats){const d=JSON.parse(z.content);B("page","postStats",m=>({...m,[d.event_id]:{...d}}));return}if(z.kind===W.Mentions){const d=JSON.parse(z.content);B("page","mentions",m=>({...m,[d.id]:{...d}}));return}if(z.kind===W.NoteActions){const d=JSON.parse(z.content);B("page","noteActions",m=>({...m,[d.event_id]:{...d}}));return}if(z?.kind===W.Zap){const A=z.tags.find(M=>M[0]==="description");if(!A)return;const d=JSON.parse(A[1]||"{}");let m="0",S=z?.tags?.find(M=>M[0]==="bolt11");if(S)try{m=`${dr(S[1])||0}`}catch{const g=d.tags.find(L=>L[0]==="amount");m=g?g[1]:"0"}const R=(d.tags.find(M=>M[0]==="e")||[])[1],k={id:d.id,amount:parseInt(m||"0"),pubkey:d.pubkey,message:d.content,eventId:R},P=H.page.topZaps[R];if(P===void 0){B("page","topZaps",()=>({[R]:[{...k}]}));return}if(P.find(M=>M.id===k.id))return;const F=[...P,{...k}].sort((M,g)=>g.amount-M.amount);B("page","topZaps",R,()=>[...F]);return}},"updatePage"),y=o(z=>{const d=oR(H.timeframe)(fi(z,z.topZaps));u(d)},"savePage"),_=o(()=>{dC(ue)},"openNetStatsStream"),x=o(()=>{hC(ue)},"closeNetStatsStream"),w=o(z=>{z&&pC(z,ue)},"fetchLegendStats"),v=o(z=>{p(z)},"handleExploreEvent"),T=o(()=>{const z=fb(H.page),A=Object.keys(z);if(A.length===0){y(H.page);return}B("reposts",()=>z);const d=`explore_reposts_${ue}`;Ct(d,()=>Rc(t?.publicKey,A,d),N,I)},"handleExploreEose"),N=o(z=>{const A=z.id,d=H.reposts||{},m=H.page.messages.find(S=>S.id===d[A]);m&&B("page","messages",S=>S.id===m.id,"content",()=>JSON.stringify(z))},"handleExploreRepostEvent"),I=o(()=>{y(H.page)},"handleExploreRepostEose"),C=o(z=>{const A=JSON.parse(z.content||"{}");z.kind===W.NetStats&&(B("stats",()=>({...A})),rM(A)),z.kind===W.LegendStats&&B("legend",()=>({...A}))},"handleExploreStatsEvent"),D=o(async z=>{const A=await Es(z),d=JSON.parse(A),[m,S,R]=d;if([`netstats_${ue}`,`legendstats_${ue}`].includes(S)){if(m==="EVENTS")for(let k=0;k<R.length;k++){const P=R[k];C(P)}m==="EVENT"&&C(R)}},"onMessage"),U=o(z=>{const A=z.target;ri(A,{message:D,close:U})},"onSocketClose");at(()=>{ni()&&uc(yt(),{message:D,close:U})}),on(()=>{ri(yt(),{message:D,close:U})});const[H,B]=Xt({...gC,actions:{saveNotes:u,fetchNotes:l,clearNotes:f,fetchNextPage:h,updatePage:p,savePage:y,openNetStatsStream:_,closeNetStatsStream:x,fetchLegendStats:w,selectTab:c,setPreviewDVM:a,setExplorePeople:n,setExploreZaps:r,setExploreMedia:i,setExploreTopics:s}});return pe(Ob.Provider,{value:H,get children(){return e.children}})},"ExploreProvider"),yC=o(()=>zt(Ob),"useExploreContext"),bC={primaryNote:void 0,noteId:"",parentNotes:[],notes:[],users:[],replyNotes:[],isFetching:!1,isFetchingTopZaps:!1,page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}},reposts:{},lastNote:void 0,topZaps:{},quoteCount:0,highlights:[]},Cb=Ht(),wC=o(e=>{const t=Zn(),n=o(H=>{const B=D.notes.map(A=>A.post.id),z=H.filter(A=>!B.includes(A.post.id));U("notes",A=>[...z,...A]),U("isFetching",()=>!1)},"saveNotes"),r=o((H,B=0,z=100)=>{a(),U("noteId",H);const A=`thread_${ue}`;Ct(A,()=>Bp(t?.publicKey,H,A),_,x),h(H),y(H),U("isFetching",()=>!0)},"fetchNotes"),i=o(H=>{U("notes",B=>[{...H},...B])},"insertNote"),s=o((H,B=0,z=100)=>{U("page",()=>({messages:[],users:{},postStats:{},noteActions:{},mentions:{}}));const A=`thread_diff_${ue}`;Ct(A,()=>Bp(t?.publicKey,H,A,B,z),_,x)},"updateNotes"),a=o(()=>{U("page",()=>({messages:[],users:{},postStats:{},noteActions:{},mentions:{}})),U("notes",()=>[]),U("reposts",()=>{}),U("lastNote",()=>{})},"clearNotes"),c=o(()=>{const H=D.notes[D.notes.length-1];H&&U("lastNote",()=>({...H}))},"fetchNextPage"),u=o(H=>{if(H.kind===W.WordCount){const B=JSON.parse(H.content);U("page","wordCount",()=>({[B.event_id]:B.words}));return}if(H.kind===W.Metadata){const B=H;U("page","users",z=>({...z,[B.pubkey]:{...B}}));return}if([W.Text,W.Repost].includes(H.kind)){const B=H;D.lastNote?.post?.noteId!==Pe.noteEncode(B.id)&&U("page","messages",z=>[...z,{...B}]);return}if(H.kind===W.NoteStats){const z=JSON.parse(H.content);U("page","postStats",A=>({...A,[z.event_id]:{...z}}));return}if(H.kind===W.Mentions){const z=JSON.parse(H.content);if(z.kind===W.LongFormShell){const A=`${z.kind}:${z.pubkey}:${(z.tags.find(d=>d[0]==="d")||[])[1]}`;U("page","mentions",d=>({...d,[A]:{...z}}));return}U("page","mentions",A=>({...A,[z.id]:{...z}}));return}if(H.kind===W.NoteActions){const z=JSON.parse(H.content);U("page","noteActions",A=>({...A,[z.event_id]:{...z}}));return}if(H.kind===W.LinkMetadata){const z=JSON.parse(H.content).resources[0];if(!z)return;const A={url:z.url,title:z.md_title,description:z.md_description,mediaType:z.mimetype,contentType:z.mimetype,images:[z.md_image],favicons:[z.icon_url]};li(()=>({[z.url]:A}));return}if(H.kind===W.RelayHint){const B=JSON.parse(H.content);U("page","relayHints",z=>({...z,...B}))}if(H?.kind===W.Zap){const B=H.tags.find(P=>P[0]==="description");if(!B)return;const z=JSON.parse(B[1]||"{}");let A="0",d=H?.tags?.find(P=>P[0]==="bolt11");if(d)try{A=`${dr(d[1])||0}`}catch{const F=z.tags.find(M=>M[0]==="amount");A=F?F[1]:"0"}const m=(z.tags.find(P=>P[0]==="e")||[])[1],S={id:z.id,amount:parseInt(A||"0"),pubkey:z.pubkey,message:z.content,eventId:m},R=D.topZaps[m];if(R===void 0){U("topZaps",()=>({[m]:[{...S}]}));return}if(R.find(P=>P.id===S.id))return;const k=[...R,{...S}].sort((P,F)=>F.amount-P.amount);U("topZaps",m,()=>[...k]);return}if(H.kind===W.NoteQuoteStats){const B=JSON.parse(H.content);U("quoteCount",()=>B.count||0)}},"updatePage"),l=o(H=>{const B=hb(fi(H,D.topZaps)),z=Object.values(H.users).map(A=>Je(A,A.pubkey));U("users",()=>[...z]),n(B)},"savePage"),f=o(H=>{U("primaryNote",()=>({...H}))},"setPrimaryNote"),h=o(H=>{U("isFetchingTopZaps",()=>!0);const B=`thread_zapps_${ue}`;Ct(B,()=>CM(H,t?.publicKey,B,10,0),T,N)},"fetchTopZaps"),p=o(H=>{const B=`thread_pk_${ue}`;Ct(B,()=>si(H,B),I,C)},"fetchUsers"),y=o(H=>{const B=`thread_quote_stats_${ue}`;Ct(B,()=>BM(H,B),I,C)},"fetchNoteQuoteStats"),_=o(H=>{u(H)},"handleThreadEvent"),x=o(()=>{const H=fb(D.page),B=Object.keys(H);if(B.length===0){l(D.page);return}U("reposts",()=>H);const z=`thread_reposts_${ue}`;Ct(z,()=>Rc(t?.publicKey,B,z),w,v)},"handleThreadEose"),w=o(H=>{const B=H.id,z=D.reposts||{},A=D.page.messages.find(d=>d.id===z[B]);A&&U("page","messages",d=>d.id===A.id,"content",()=>JSON.stringify(H))},"handleThreadRepostEvent"),v=o(()=>{l(D.page)},"handleThreadRepostEose"),T=o(H=>{u(H)},"handleThreadZapsEvent"),N=o(()=>{l(D.page),U("isFetchingTopZaps",()=>!1)},"handleThreadZapsEose"),I=o(H=>{u(H)},"handleThreadPKEvent"),C=o(()=>{l(D.page)},"handleThreadPKEose"),[D,U]=Xt({...bC,actions:{saveNotes:n,fetchNotes:r,updateNotes:s,clearNotes:a,fetchNextPage:c,updatePage:u,savePage:l,setPrimaryNote:f,fetchTopZaps:h,fetchUsers:p,insertNote:i}});return pe(Cb.Provider,{value:D,get children(){return e.children}})},"ThreadProvider"),_C=o(()=>zt(Cb),"useThreadContext"),vC="modulepreload",EC=o(function(e){return"/"+e},"assetsURL"),Gp={},We=o(function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=EC(s),s in Gp)return;Gp[s]=!0;const a=s.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const h=i[f];if(h.href===s&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${c}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":vC,a||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),a)return new Promise((f,h)=>{l.addEventListener("load",f),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},"preload"),xC=o((e,t)=>{const n=Oe(e);return!n.homeFeeds||n.homeFeeds.length===0?(wa(e,t),t):n.homeFeeds},"initHomeFeeds"),SC=o(e=>Oe(e).homeFeeds||[],"loadHomeFeeds"),AC=o((e,t)=>{const n=Oe(e);return!n.readsFeeds||n.readsFeeds.length===0?(Vm(e,t),t):n.readsFeeds},"initReadsFeeds"),MC=o(e=>Oe(e).readsFeeds||[],"loadReadsFeeds"),kC=o((e,t,n)=>{if(n.find(i=>t.name===i.name))return[...n];const r=[{...t},...n];return Ac(e,r),r},"updateAvailableFeedsTop"),TC=o((e,t,n)=>{if(n.find(i=>t.name===i.name))return[...n];const r=[...n,{...t}];return Ac(e,r),r},"updateAvailableFeeds"),NC=o((e,t,n)=>{const r=n.filter(i=>i.hex!==t.hex||i.includeReplies!==t.includeReplies);return Ac(e,r),r},"removeFromAvailableFeeds"),qp=o((e,t)=>{const n=[...t];return Ac(e,n),n},"replaceAvailableFeeds"),IC=o(async(e,t)=>{const n={description:"Sync app settings",...e},r={content:JSON.stringify(n),kind:W.Settings,tags:[["d","Primal-Web App"]],created_at:Math.floor(new Date().getTime()/1e3)};try{const i=await Vt(r);return Ee(JSON.stringify(["REQ",t,{cache:["set_app_settings",{settings_event:i}]}])),!0}catch(i){return console.error("Failed to send settings: ",i),!1}},"sendSettings"),RC=o(async(e,t)=>{const n={content:'{ "description": "Sync app settings" }',kind:W.Settings,tags:[["d","Primal-Web App"]],created_at:Math.floor(new Date().getTime()/1e3)};try{const r=await Vt(n);return Ee(JSON.stringify(["REQ",t,{cache:["get_app_settings",{event_from_user:r}]}])),!0}catch(r){return console.error("Failed to get settings: ",r),!1}},"getSettings"),LC=o(async e=>{const t={content:JSON.stringify({subkey:"user-home-feeds"}),kind:W.Settings,tags:[["d","Primal-Web App"]],created_at:Math.floor(new Date().getTime()/1e3)};try{const n=await Vt(t);return Ee(JSON.stringify(["REQ",e,{cache:["get_app_subsettings",{event_from_user:n}]}])),!0}catch(n){return console.error("Failed to get settings: ",n),!1}},"getHomeSettings"),PC=o(async(e,t)=>{const n={content:JSON.stringify({subkey:"user-home-feeds",settings:t}),kind:W.Settings,tags:[["d","Primal-Web App"]],created_at:Math.floor(new Date().getTime()/1e3)};try{const r=await Vt(n);return Ee(JSON.stringify(["REQ",e,{cache:["set_app_subsettings",{event_from_user:r}]}])),!0}catch(r){return console.error("Failed to set settings: ",r),!1}},"setHomeSettings"),OC=o(async e=>{const t={content:JSON.stringify({subkey:"user-reads-feeds"}),kind:W.Settings,tags:[["d","Primal-Web App"]],created_at:Math.floor(new Date().getTime()/1e3)};try{const n=await Vt(t);return Ee(JSON.stringify(["REQ",e,{cache:["get_app_subsettings",{event_from_user:n}]}])),!0}catch(n){return console.error("Failed to get settings: ",n),!1}},"getReadsSettings"),CC=o(async(e,t)=>{const n={content:JSON.stringify({subkey:"user-reads-feeds",settings:t}),kind:W.Settings,tags:[["d","Primal-Web App"]],created_at:Math.floor(new Date().getTime()/1e3)};try{const r=await Vt(n);return Ee(JSON.stringify(["REQ",e,{cache:["set_app_subsettings",{event_from_user:r}]}])),!0}catch(r){return console.error("Failed to set settings: ",r),!1}},"setReadsSettings"),Vp=o(async e=>{Ee(JSON.stringify(["REQ",e,{cache:["get_default_app_settings",{client:"Primal-Web App"}]}]))},"getDefaultSettings"),BC=o(e=>{Ee(JSON.stringify(["REQ",e,{cache:["get_app_releases"]}]))},"getMobileReleases"),FC={locale:"en-us",theme:"sunrise",themes:Fw,isAnimated:!0,availableFeeds:[],readsFeeds:[],homeFeeds:[],defaultFeed:Uw[0],defaultZap:M0,availableZapOptions:k0,defaultZapAmountOld:21,zapOptionsOld:[21,420,1e3,5e3,1e4,1e5],notificationSettings:{...v0},applyContentModeration:!0,contentModeration:[...N0],mobileReleases:{ios:{date:`${E0}`,version:x0},android:{date:`${S0}`,version:A0}}},Bb=Ht(),UC=o(e=>{const t=fy(),n=Zn(),r=Cy(),i=o((q,Y)=>{n?.actions.setProxyThroughPrimal(q),!Y&&_e()},"setProxyThroughPrimal"),s=o((q,Y)=>{le("defaultZap",()=>q),!Y&&_e()},"setDefaultZapAmount"),a=o((q,Y,ae)=>{le("availableZapOptions",Y,()=>({...q})),!ae&&_e()},"setZapOptions"),c=o(q=>{const Y=`restore_default_${ue}`,ae=Me(Y,{onEvent:(we,ve)=>{if(ve)try{const Be=JSON.parse(ve?.content||"{}");let Zt=Be.zapConfig,Ue=Be.zapDefault;le("availableZapOptions",()=>Zt),le("defaultZap",()=>Ue),!q&&_e()}catch(Be){nt("Error parsing settings response: ",Be)}},onNotice:()=>{t?.sendWarning(r.formatMessage({id:"settings.loadFail",defaultMessage:"Failed to load settings. Will be using local settings.",description:"Toast message after settings have failed to be loaded from the server"}))},onEose:()=>{ae()}});Vp(Y)},"resetZapOptionsToDefault"),u=o((q,Y)=>{q&&(jA(n?.publicKey,q.name),le("theme",()=>q.name),!Y&&_e())},"setTheme"),l=o((q,Y)=>{if(!q)return;const ae=fe.themes.find(we=>we.name===q);ae&&u(ae,Y)},"setThemeByName"),f=o((q,Y)=>{GA(n?.publicKey,q),le("isAnimated",()=>q),!Y&&_e()},"setAnimation"),h=o((q=!0)=>{le("applyContentModeration",()=>q),_e()},"setApplyContentModeration"),p=o((q,Y=!1,ae)=>{if(q&&n?.hasPublicKey()){const we=Y?kC:TC;le("availableFeeds",ve=>we(n?.publicKey,q,ve)),!ae&&_e()}},"addAvailableFeed"),y=o((q,Y)=>{q&&n?.hasPublicKey()&&(le("availableFeeds",ae=>NC(n?.publicKey,q,ae)),!Y&&_e())},"removeAvailableFeed"),_=o((q,Y)=>{n?.hasPublicKey()&&(le("availableFeeds",()=>qp(n?.publicKey,q)),!Y&&_e())},"setAvailableFeeds"),x=o((q,Y)=>{let ae=[...fe.availableFeeds];ae.splice(Y,0,ae.splice(q,1)[0]),_(ae)},"moveAvailableFeed"),w=o((q,Y)=>{const ae=fe.availableFeeds.map(we=>we.hex===q.hex&&we.includeReplies===q.includeReplies?{...we,name:Y}:{...we});_(ae)},"renameAvailableFeed"),v=o(q=>JSON.stringify({id:"feed",kind:"notes",pubkey:q}),"specifyUserFeed"),T=o((q,Y)=>{if(!Y)return;const ae={name:r.formatMessage(YT,{name:q}),spec:v(Y),description:r.formatMessage(QT,{name:q}),enabled:!0,feedkind:"user"},we=[...fe.homeFeeds,{...ae}];d(we)},"addProfileHomeFeed"),N=o(q=>{if(!q)return;const Y=v(q),ae=fe.homeFeeds.filter(we=>we.spec!==Y);d(ae)},"removeProfileHomeFeed"),I=o((q,Y)=>{if(Y==="home"){const ae=fe.homeFeeds.filter(we=>we.spec!==q.spec);d(ae)}if(Y==="reads"){const ae=fe.readsFeeds.filter(we=>we.spec!==q.spec);m(ae)}},"removeFeed"),C=o((q,Y,ae)=>{ae==="home"&&S(q,Y),ae==="reads"&&R(q,Y)},"moveFeed"),D=o((q,Y,ae)=>{ae==="home"&&k(q,Y),ae==="reads"&&P(q,Y)},"renameFeed"),U=o((q,Y,ae)=>{ae==="home"&&F(q,Y),ae==="reads"&&M(q,Y)},"enableFeed"),H=o((q,Y)=>{Y==="home"&&L(q),Y==="reads"&&V(q)},"addFeed"),B=o(q=>{if(!q)return!1;const Y=v(q);return fe.homeFeeds.find(ae=>ae.spec===Y)!==void 0},"hasProfileFeedAtHome"),z=o(()=>{const q=`restore_feeds_${ue}`;let Y=[];const ae=Me(q,{onEvent:(we,ve)=>{Y=JSON.parse(ve.content||"[]"),le("homeFeeds",()=>[...Y])},onEose:()=>{ae(),d(Y)}});Up(q)},"restoreHomeFeeds"),A=o(()=>{const q=`restore_feeds_${ue}`;let Y=[];const ae=Me(q,{onEvent:(we,ve)=>{Y=JSON.parse(ve.content||"[]"),le("readsFeeds",()=>[...Y])},onEose:()=>{ae(),m(Y)}});Fp(q)},"restoreReadsFeeds"),d=o(q=>{le("homeFeeds",()=>[...q]),wa(n?.publicKey,q);const Y=`set_home_feeds_${ue}`,ae=Me(Y,{onEose:()=>{ae()}});PC(Y,fe.homeFeeds)},"updateHomeFeeds"),m=o(q=>{le("readsFeeds",()=>[...q]),wa(n?.publicKey,q);const Y=`set_home_feeds_${ue}`,ae=Me(Y,{onEose:()=>{ae()}});CC(Y,fe.readsFeeds)},"updateReadsFeeds"),S=o((q,Y)=>{let ae=[...fe.homeFeeds];ae.splice(Y,0,ae.splice(q,1)[0]),d(ae)},"moveHomeFeed"),R=o((q,Y)=>{let ae=[...fe.readsFeeds];ae.splice(Y,0,ae.splice(q,1)[0]),m(ae)},"moveReadsFeed"),k=o((q,Y)=>{const ae=fe.homeFeeds.map(we=>we.spec===q.spec?{...we,name:Y}:{...we});d(ae)},"renameHomeFeed"),P=o((q,Y)=>{const ae=fe.readsFeeds.map(we=>we.spec===q.spec?{...we,name:Y}:{...we});m(ae)},"renameReadsFeed"),F=o((q,Y)=>{const ae=fe.homeFeeds.map(we=>we.spec===q.spec?{...we,enabled:Y}:{...we});d(ae)},"enableHomeFeed"),M=o((q,Y)=>{const ae=fe.readsFeeds.map(we=>we.spec===q.spec?{...we,enabled:Y}:{...we});m(ae)},"enableReadsFeed"),g=o((q,Y)=>Y==="reads"?fe.readsFeeds.find(ae=>ae.spec===q.spec)!==void 0:fe.homeFeeds.find(ae=>ae.spec===q.spec)!==void 0,"isFeedAdded"),L=o(q=>{const Y=[...fe.homeFeeds,{...q}];d(Y)},"addHomeFeed"),V=o(q=>{const Y=[...fe.readsFeeds,{...q}];m(Y)},"addReadsFeed"),ie=o((q,Y,ae)=>{le("notificationSettings",()=>({[q]:Y})),!ae&&_e()},"updateNotificationSettings"),he=o(()=>{},"restoreDefaultFeeds"),ge=o((q,Y=!0,ae=!0)=>{let we=[];Y&&we.push(T0),ae&&we.push(uf),le("contentModeration",ve=>ve.name===q,()=>({scopes:we})),_e()},"modifyContentModeration"),_e=o(q=>{const Y={theme:fe.theme,feeds:fe.availableFeeds,zapDefault:fe.defaultZap,zapConfig:fe.availableZapOptions,defaultZapAmount:fe.defaultZapAmountOld,zapOptions:fe.zapOptionsOld,notifications:fe.notificationSettings,applyContentModeration:fe.applyContentModeration,contentModeration:fe.contentModeration,proxyThroughPrimal:n?.proxyThroughPrimal||!1,animated:fe.isAnimated},ae=`save_settings_${ue}`,we=Me(ae,{onNotice:()=>{t?.sendWarning(r.formatMessage({id:"settings.saveFail",defaultMessage:"Failed to save settings",description:"Toast message after settings have failed to be saved on the server"}))},onEose:()=>{we()}});IC(Y,ae)},"saveSettings"),me=o(()=>{const q=`load_defaults_${ue}`,Y=Me(q,{onEvent:(ae,we)=>{if(we)try{const ve=JSON.parse(we.content||"{}"),Be=ve.feeds,Zt=ve.notifications;le("availableFeeds",()=>qp(n?.publicKey,Be)),le("defaultFeed",()=>fe.availableFeeds.find(ut=>ut.hex===Bw)||fe.availableFeeds[0]),le("notificationSettings",()=>({...Zt})),le("applyContentModeration",()=>!0);let Ue=ve.zapConfig,Ce=ve.zapDefault;le("defaultZap",()=>Ce),le("availableZapOptions",()=>Ue)}catch(ve){nt("Error parsing settings response: ",ve)}},onNotice:()=>{t?.sendWarning(r.formatMessage({id:"settings.loadFail",defaultMessage:"Failed to load settings. Will be using local settings.",description:"Toast message after settings have failed to be loaded from the server"}))},onEose:()=>{Y()}});Vp(q),xe(),re()},"loadDefaults"),te=o((q,Y)=>{if(!q)return;le("homeFeeds",()=>[...SC(q)]),le("readsFeeds",()=>[...MC(q)]);const ae=`load_settings_${ue}`,we=`load_home_settings_${ue}`,ve=`load_reads_settings_${ue}`,Be=Me(ae,{onEvent:(Ce,ut)=>{if(ut)try{const{animated:je,theme:ze,zapDefault:_n,zapConfig:O,defaultZapAmount:b,zapOptions:E,notifications:$,applyContentModeration:G,contentModeration:Q,proxyThroughPrimal:oe}=JSON.parse(ut.content||"{}");if(ze&&l(ze,!0),f(je,!0),s(_n||{...M0,amount:b},!0),O)le("availableZapOptions",()=>[...O]);else{const Ae=k0.map((j,ee)=>({...j,amount:E[ee]}));le("availableZapOptions",()=>[...Ae])}if(le("defaultZapAmountOld",()=>b),le("zapOptionsOld",()=>E),$?le("notificationSettings",()=>({...$})):le("notificationSettings",()=>({...v0})),le("applyContentModeration",()=>G!==!1),Array.isArray(Q)&&Q.length===0)le("contentModeration",()=>[...N0]);else if(Array.isArray(Q))for(let Ae=0;Ae<Q.length;Ae++){const j=Q[Ae],ee=fe.contentModeration.findIndex(Z=>Z.name===j.name);le("contentModeration",ee<0?fe.contentModeration.length:ee,()=>({...j}))}n?.actions.setProxyThroughPrimal(oe)}catch(je){nt("Error parsing settings response: ",je)}},onNotice:()=>{t?.sendWarning(r.formatMessage({id:"settings.loadFail",defaultMessage:"Failed to load settings. Will be using local settings.",description:"Toast message after settings have failed to be loaded from the server"}))},onEose:()=>{Y&&Y(),Be()}});q&&RC(q,ae);const Zt=Me(we,{onEvent:(Ce,ut)=>{const je=JSON.parse(ut?.content||"[]");le("homeFeeds",()=>[...je])},onEose:()=>{fe.homeFeeds.length===0&&xe(),wa(q,fe.homeFeeds),Zt()}});q&&LC(we);const Ue=Me(ve,{onEvent:(Ce,ut)=>{const je=JSON.parse(ut?.content||"[]");le("readsFeeds",[...je])},onEose:()=>{fe.readsFeeds.length===0&&re(),Vm(q,fe.readsFeeds),Ue()}});q&&OC(ve)},"loadSettings"),X=o(()=>{const q=`mobile_releases_${ue}`,Y=Me(q,{onEvent:(ae,we)=>{const ve=JSON.parse(we?.content||"{}");le("mobileReleases",()=>({...ve}))},onEose:()=>{Y()}});BC(q)},"refreshMobileReleases"),re=o(()=>{const q=`article_feeds_${ue}`,Y=Me(q,{onEvent:(ae,we)=>{const ve=JSON.parse(we.content||"[]");le("readsFeeds",()=>[...ve])},onEose:()=>{Y(),AC(n?.publicKey,fe.readsFeeds)}});Fp(q)},"getDefaultReadsFeeds"),xe=o(()=>{const q=`home_feeds_${ue}`,Y=Me(q,{onEvent:(ae,we)=>{const ve=JSON.parse(we.content||"[]");le("homeFeeds",()=>[...ve])},onEose:()=>{Y(),xC(n?.publicKey,fe.homeFeeds)}});Up(q)},"getDefaultHomeFeeds");ai(()=>{const q=localStorage.getItem("theme");l(q,!0);const ae=(localStorage.getItem("animated")||"true")==="true";f(ae,!0),X()}),at(()=>{if(!n?.hasPublicKey()&&n?.isKeyLookupDone){me();return}const q=n?.publicKey;te(q,()=>{})}),at(()=>{const q=document.querySelector("html");localStorage.setItem("theme",fe.theme),q?.setAttribute("data-theme",fe.theme)}),at(()=>{const q=document.querySelector("html");localStorage.setItem("animated",`${fe.isAnimated}`),q?.setAttribute("data-animated",`${fe.isAnimated}`)});const[fe,le]=Xt({...FC,actions:{setTheme:u,addAvailableFeed:p,removeAvailableFeed:y,setAvailableFeeds:_,moveAvailableFeed:x,renameAvailableFeed:w,addProfileHomeFeed:T,removeProfileHomeFeed:N,hasProfileFeedAtHome:B,moveHomeFeed:S,renameHomeFeed:k,saveSettings:_e,loadSettings:te,restoreDefaultFeeds:he,setDefaultZapAmount:s,setZapOptions:a,resetZapOptionsToDefault:c,updateNotificationSettings:ie,setApplyContentModeration:h,modifyContentModeration:ge,refreshMobileReleases:X,setProxyThroughPrimal:i,getDefaultReadsFeeds:re,getDefaultHomeFeeds:xe,restoreReadsFeeds:A,restoreHomeFeeds:z,moveFeed:C,renameFeed:D,enableFeed:U,addFeed:H,removeFeed:I,isFeedAdded:g,setAnimation:f}});return pe(Bb.Provider,{value:fe,get children(){return e.children}})},"SettingsProvider"),Fb=o(()=>zt(Bb),"useSettingsContext"),eF=o((e,t,n,r="all",i=0,s=100)=>{if(!t)return;let a={pubkey:t,limit:s,since:i,type_group:r};e&&(a.user_pubkey=e),Ee(JSON.stringify(["REQ",n,{cache:["get_notifications",a]}]))},"getNotifications"),tF=o((e,t,n,r="all",i=0,s=20)=>{if(!t)return;let a={pubkey:t,limit:s,until:i,type_group:r};e&&(a.user_pubkey=e),Ee(JSON.stringify(["REQ",n,{cache:["get_notifications",a]}]))},"getOldNotifications"),DC=o((e,t)=>{e&&Ee(JSON.stringify(["REQ",t,{cache:["get_notifications_seen",{pubkey:e}]}]))},"getLastSeen"),nF=o(async(e,t)=>{const n={content:'{ "description": "update notifications last seen timestamp"}',kind:W.Settings,tags:[],created_at:t};try{const r=await Vt(n);return Ee(JSON.stringify(["REQ",e,{cache:["set_notifications_seen",{event_from_user:r}]}])),!0}catch(r){return console.error("Failed to set last seen: ",r),!1}},"setLastSeen"),$C=o((e,t)=>{Ee(JSON.stringify(["REQ",t,{cache:["notification_counts",{pubkey:e,subid:t}]}]))},"subscribeToNotificationStats"),Kp=o(e=>{Ee(JSON.stringify(["CLOSE",e,{cache:["notification_counts",{subid:e}]}]))},"unsubscribeToNotificationStats"),rF=o((e,t)=>{const i=Math.pow(1e3,t||1);return e<i?e.toLocaleString():e<Math.pow(1e3,2)?`${Math.floor(e/1e3).toLocaleString()}K`:e<Math.pow(1e3,3)?`${Math.floor(e/Math.pow(1e3,2)).toLocaleString()}M`:e<Math.pow(1e3,4)?`${Math.floor(e/Math.pow(1e3,3)).toLocaleString()}B`:"1T+"},"truncateNumber"),iF=o((e,t)=>{const i=Math.pow(1e3,t||1);return e<i?e.toLocaleString():e<Math.pow(1e3,2)?`${(e/1e3).toFixed(1)}K`:e<Math.pow(1e3,3)?`${(e/Math.pow(1e3,2)).toFixed(1)}M`:e<Math.pow(1e3,4)?`${(e/Math.pow(1e3,3)).toFixed(1)}B`:"1T+"},"truncateNumber2"),HC={notificationCount:0,downloadsCount:0};let Ub=VI();const Jp=o(e=>{Ub=e},"setNotifSince"),Db=Ht(),zC=o(e=>{const t=Zn(),n=Fb(),r=Ts(),i=o(()=>new Date().getTime(),"today");let s="|";const a=o(()=>`notif_stats_${s}_${ue}`,"notfiStatsSubId"),c=o(()=>{s!==t?.publicKey&&(Kp(a()),s=""),t?.publicKey&&(s=t.publicKey,$C(t.publicKey,a()))},"subToNotificationStats"),u=o(()=>{const x=localStorage.getItem("iosDownload"),w=localStorage.getItem("andDownload"),v=n?.mobileReleases.ios||{date:E0,version:x0},T=n?.mobileReleases.android||{date:S0,version:A0};let N=0;x!==v.version&&i()>new Date(v.date).getTime()&&N++,w!==T.version&&i()>new Date(T.date).getTime()&&N++,_("downloadsCount",()=>N)},"calculateDownloadCount"),l=o(()=>_("notificationCount",()=>0),"resetNotificationCounter"),f=o(x=>{if(x?.kind===W.NotificationStats){const w=Object.keys(x).reduce((v,T)=>T==="pubkey"||T=="kind"?v:v+x[T],0);w!==y.notificationCount&&_("notificationCount",()=>w),u()}},"handleNotifStatsEvent"),h=o(async x=>{const w=await Es(x),v=JSON.parse(w),[T,N,I]=v;if(N===a()){if(T==="EVENTS")for(let C=0;C<I.length;C++){const D=I[C];f(D)}T==="EVENT"&&f(I)}},"onMessage"),p=o(x=>{const w=x.target;ri(w,{message:h,close:p})},"onSocketClose");at(()=>{ni()&&t?.isKeyLookupDone&&t?.hasPublicKey()&&!r?.isInactive?c():Kp(a())}),at(()=>{ni()&&uc(yt(),{message:h,close:p})}),at(()=>{const x=t?.publicKey;if(x){const w=`notif_ls_${ue}`,v=Me(w,{onEvent:(T,N)=>{if(N?.kind===W.Timestamp){const I=parseInt(N.content);isNaN(I)||Jp(I),v();return}},onEose:()=>{Ub||Jp(0)}});DC(x,w)}}),on(()=>{ri(yt(),{message:h,close:p})});const[y,_]=Xt({...HC,actions:{resetNotificationCounter:l}});return pe(Db.Provider,{value:y,get children(){return e.children}})},"NotificationsProvider"),ZC=o(()=>zt(Db),"useNotificationsContext"),Yp=["82341f882b6eabcd2ba7f1ef90aad961cf074af15b9ef44a09f9d2a8fbfbe6a2","bf2376e17ba4ec269d10fcc996a4746b451152be9031fa48e74553dde5526bce","c48e29f04b482cc01ca1f9ef8c86ef8318c059e0e9353235162f080f26e14c11","85080d3bad70ccdcd7f74c29a44f55bb85cbcd3dd0cbb957da1d215bdb931204","eab0e756d32b80bcd464f3d844b8040303075a13eabc3599a762c9ac7ab91f4f","04c915daefee38317fa734444acee390a8269fe5810b2241e5e6dd343dfbecc9","472f440f29ef996e92a186b8d320ff180c855903882e59d50de1b8bd5669301e","e88a691e98d9987c964521dff60025f60700378a4879180dcbbb4a5027850411","91c9a5e1a9744114c6fe2d61ae4de82629eaaa0fb52f48288093c7e7e036f832","fa984bd7dbb282f07e16e7ae87b26a2a7b9b90b7246a44771f0cf5ae58018f52"],WC={contentQuery:"",users:[],scores:{},contentUsers:[],contentScores:{},notes:[],isFetchingUsers:!1,isFetchingContent:!1,page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}},reposts:{},mentionedNotes:{},filteringReasons:[],advancedSearchCommand:""},$b=Ht();function jC(e){const t=Zn(),n=o(x=>{const w=`find_npub_${ue}`;let v;try{v=Pe.decode(x)}catch{i(x);return}if(!v){i(x);return}const T=typeof v.data=="string"?v.data:v.data.pubkey;let N=[];const I=Me(w,{onEvent:(C,D)=>{if(D){if(D.kind===W.Metadata){const U=D;N.push(Je(U,D.pubkey))}if(D.kind===W.UserScore){const U=JSON.parse(D.content);_("scores",()=>({...U}))}}},onEose:()=>{N.length>0&&_("users",()=>[N[0]]),_("isFetchingUsers",()=>!1),I()}});si([T],w)},"findUserByNupub"),r=o(x=>{const w=`recomended_users_${ue}`;let v=[];const T=Me(w,{onEvent:(N,I)=>{if(I){if(I.kind===W.Metadata){const C=I;v.push(Je(C,I.pubkey))}if(I.kind===W.UserScore){const C=JSON.parse(I.content);_("scores",()=>({...C}))}}},onEose:()=>{let N=[];v.forEach(I=>{const C=Yp.indexOf(I.pubkey);N[C]={...I}}),x&&(N=[...x,...N].slice(0,9)),_("users",()=>N),_("isFetchingUsers",()=>!1),T()}});_("isFetchingUsers",()=>!0),si(Yp,w)},"getRecomendedUsers"),i=o((x,w)=>{const v=`search_users_${ue}`;let T=[];const N=Me(v,{onEvent:(C,D)=>{if(D){if(D.kind===W.Metadata){const U=D;T.push(Je(U,D.pubkey));return}if(D.kind===W.UserScore){const U=JSON.parse(D.content);_("scores",()=>({...U}));return}}},onEose:()=>{const C=T.sort((D,U)=>{const H=y.scores[D.pubkey];return y.scores[U.pubkey]-H});_("users",()=>C.slice(0,10)),_("isFetchingUsers",()=>!1),N()}}),I=x.length>0?void 0:w;_("isFetchingUsers",()=>!0),rf(I,v,x)},"findUsers"),s=o((x,w)=>{const v=`search_users_c_${ue}`;let T=[];const N=Me(v,{onEvent:(C,D)=>{if(D){if(D.kind===W.Metadata){const U=D;T.push(Je(U,D.pubkey));return}if(D.kind===W.UserScore){const U=JSON.parse(D.content);_("contentScores",()=>({...U}));return}}},onEose:()=>{const C=T.sort((D,U)=>{const H=y.scores[D.pubkey];return y.scores[U.pubkey]-H});_("contentUsers",()=>C.slice(0,10)),N()}}),I=x.length>0?void 0:w;_("isFetchingUsers",()=>!0),rf(I,v,x)},"findContentUsers"),a=o(x=>{_("notes",()=>[...x]),_("isFetchingContent",()=>!1)},"saveNotes"),c=o(x=>{if(x.kind===W.Metadata){const w=x;_("page","users",v=>({...v,[w.pubkey]:{...w}}));return}if([W.LongForm,W.LongFormShell,W.Text,W.Repost].includes(x.kind)){const w=x;_("page","messages",v=>[...v,{...w}]);return}if(x.kind===W.NoteStats){const v=JSON.parse(x.content);_("page","postStats",T=>({...T,[v.event_id]:{...v}}));return}if(x.kind===W.Mentions){const v=JSON.parse(x.content);_("page","mentions",T=>({...T,[v.id]:{...v}}));return}if(x.kind===W.NoteActions){const v=JSON.parse(x.content);_("page","noteActions",T=>({...T,[v.event_id]:{...v}}));return}},"updatePage"),u=o(x=>{const w=fi(x);a(w)},"savePage"),l=o(x=>{const w=`search_content_${ue}`,v=Me(w,{onEvent:(T,N)=>{c(N)},onEose:()=>{u(y.page),v()}});_("isFetchingContent",()=>!0),_("notes",()=>[]),_("page",{messages:[],users:{},postStats:{},mentions:{},noteActions:{}}),dR(t?.publicKey,w,x)},"findContent"),f=o(x=>{_("contentQuery",()=>x)},"setContentQuery"),h=o(x=>{const w=ks(x);let v=[];if(w.length>0){const T=`search_filtered_users_${ue}`,N=Me(T,{onEvent:(I,C)=>{if(C?.kind===W.FilteringReason){const D=JSON.parse(C.content);if(D.action==="allow")return;if(D.pubkey){v.push(D.pubkey);return}if(D.group){v.push(D.group);return}}},onEose:()=>{_("filteringReasons",()=>[...v]),N()}});_b(w,t?.publicKey,T)}},"findFilteredUserByNpub"),p=o(x=>{_("advancedSearchCommand",()=>x)},"setAdvancedSearchCommand"),[y,_]=Xt({...WC,actions:{findUsers:i,findUserByNupub:n,findContent:l,findContentUsers:s,setContentQuery:f,getRecomendedUsers:r,findFilteredUserByNpub:h,setAdvancedSearchCommand:p}});return pe($b.Provider,{value:y,get children(){return e.children}})}o(jC,"SearchProvider");function GC(){return zt($b)}o(GC,"useSearchContext");const qC=o(()=>({any:[],follows:[],other:[]}),"emptyDMContacts"),VC=o(()=>({dmCountPerContact:{},dmCountUnread:0,dmContacts:{...qC()},contactsPaging:{...Dt()},dmCount:0,lastMessageCheck:0,lastConversationContact:void 0,lastConversationRelation:"follows",encryptedMessages:[],messages:[],conversationPaging:{...Dt()},isFetchingMessages:!1,referecedUsers:{},referecedNotes:{},referecedReads:{},referencePage:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{}}}),"emptyDMStore"),Hb=Ht(),KC=o(e=>{const t=Zn(),n=Ts();let r,i="";const s=o(()=>`dm_count_${Math.random()*35e3}_${ue}`,"subidMsgCount"),a=o((M,g,L)=>{const V=L?.replace||!1,ie=P.dmContacts[g],he=ie.map(me=>me.pubkey);let ge=[];V?(ge=[...M].sort((te,X)=>X.dmInfo.latest_at-te.dmInfo.latest_at),ge=[...ie.filter(te=>!M.map(X=>X.pubkey).includes(te.pubkey)),...ge]):(ge=[...M.filter(te=>!he.includes(te.pubkey))].sort((te,X)=>X.dmInfo.latest_at-te.dmInfo.latest_at),ge=[...ie,...ge]),F("dmContacts",g,()=>[...ge]);const _e=M.find(me=>me.pubkey===P.lastConversationContact?.pubkey);_e&&(F("lastConversationContact","dmInfo","cnt",()=>_e.dmInfo.cnt),F("lastConversationContact","dmInfo","latest_at",()=>_e.dmInfo.latest_at),F("lastConversationContact","dmInfo","latest_event_id",()=>_e.dmInfo.latest_event_id))},"setDmContacts"),c=o(()=>{F("lastConversationRelation",()=>"any")},"resetRelation"),u=o(async M=>{if(t?.publicKey)return F("contactsPaging",()=>({...Dt()})),F("lastConversationRelation",()=>M),Hh(t.publicKey,M),await h(M)},"setDmRelation"),l=o(M=>{t?.publicKey&&(F("contactsPaging",()=>({...Dt()})),F("lastConversationRelation",()=>M),Hh(t.publicKey,M))},"setDmRelation2"),f=o(async M=>{const g=P.dmContacts[M]||[],{dmContacts:L,paging:V}=await Gl(t?.publicKey,M,`dm_contacts_${M}_${ue}`,{limit:g.length});F("contactsPaging",()=>({...V})),a(L,M,{replace:!0})},"refreshContacts"),h=o(async M=>{const g=P.dmContacts[M]||[],L=P.contactsPaging.since||0,V=JI(g,P.conversationPaging),{dmContacts:ie,paging:he}=await Gl(t?.publicKey,M,`dm_contacts_${M}_${ue}`,{limit:20,since:L,offset:V});return F("contactsPaging",()=>({...he})),a(ie,M,{replace:!0})},"getContacts"),p=o(async M=>{const g=P.contactsPaging.since||0,L=1;if(g===0)return;const{dmContacts:V,paging:ie}=await Gl(t?.publicKey,M,`dm_contacts_${M}_${ue}`,{limit:20,since:g,offset:L});F("contactsPaging",()=>({...ie})),a(V,M)},"getContactsNextPage");let y="";const _=o(async M=>{if(P.isFetchingMessages||!t?.publicKey||y===M)return;y=M;const g=P.lastConversationRelation;let L=P.dmContacts[g].find(V=>V.pubkey===M);if(!L)try{let V=await mR(t?.publicKey,M,`dm_contact_info_${ue}`);x(V),L={pubkey:V.pubkey,user:V,dmInfo:{cnt:0,latest_at:0,latest_event_id:""}}}catch{L={pubkey:M,user:{...Vf(M)},dmInfo:{cnt:0,latest_at:0,latest_event_id:""}}}await A(L.pubkey,g),F("lastConversationContact",()=>({...L})),eM(t.publicKey,M),F("messages",()=>[]),F("conversationPaging",()=>({...Dt()})),F("isFetchingMessages",()=>!0),await N(M),y=""},"selectContact"),x=o(async M=>{const g=t?.following.includes(M.pubkey),L={pubkey:M.pubkey,user:{...M},dmInfo:{cnt:0,latest_at:0,latest_event_id:""}};if(g){if(await u("follows"),P.dmContacts.follows.find(V=>V.pubkey===M.pubkey)){_(M.pubkey);return}F("dmContacts","follows",V=>[{...L},...V])}else{if(await u("other"),P.dmContacts.other.find(V=>V.pubkey===M.pubkey)){_(M.pubkey);return}F("dmContacts","other",V=>[{...L},...V])}_(M.pubkey)},"addContact"),w=o((M,g)=>new Promise(L=>{mM(M,g).then(V=>{L(V)}).catch(V=>{en("Failed to decrypt, will retry: ",g,V),L("")})}),"actualDecrypt"),v=o(async(M,g,L)=>{let V=[];for(let ie=0;ie<g.length;ie++){const he=g[ie];try{const ge=await w(M,he.content);if(ge==="")throw he.content;const _e={sender:he.pubkey,content:pn(ge),created_at:he.created_at,id:he.id};V.push(_e)}catch(ge){console.warn("Falied to decrypt message: ",ge);continue}}await T(V),L(V)},"decryptMessages"),T=o(async M=>{const g=/\bnostr:((note|nevent)1\w+)\b|#\[(\d+)\]/g,L=/\bnostr:((npub|nprofile)1\w+)\b|#\[(\d+)\]/g;let V=[],ie=[],he;for(let X=0;X<M.length;X++){const re=M[X];for(;(he=g.exec(re.content))!==null;)V.push(he[1]);for(;(he=L.exec(re.content))!==null;)ie.push(he[1])}const ge=ie.map(X=>{try{const re=Pe.decode(X);return re.type==="npub"?re.data:re.type==="nprofile"?re.data.pubkey:""}catch(re){return en("Unable to decode npub: ",re),""}}).filter(X=>X.length>0),_e=V.map(X=>{const re=Pe.decode(X);return re.type==="note"?re.data:re.type==="nevent"?re.data.id:""});F("referencePage",()=>({messages:[],users:{},postStats:{},mentions:{},noteActions:{}}));const me=`msg_note_ ${ue}`,te=`msg_user_ ${ue}`;await Cp(te,()=>si(ge,te),d,m),await Cp(me,()=>Rc(t?.publicKey,_e,me,!0),S,R)},"parseForMentions"),N=o(async M=>{if(!t?.isKeyLookupDone||!t.hasPublicKey()||!M)return;F("encryptedMessages",()=>[]);const g=`dm_conversation_ ${ue}`,L=P.conversationPaging.since||0,V=KI(P.messages,P.conversationPaging),{encryptedMessages:ie,paging:he}=await rC(t.publicKey,M,g,{limit:20,since:L,offset:V});F("encryptedMessages",()=>[...ie]),F("conversationPaging",()=>({...he})),v(M,P.encryptedMessages,ge=>{F("messages",_e=>[..._e,...ge]),F("isFetchingMessages",()=>!1)})},"getConversation"),I=o(()=>{P.messages.length===0||!P.conversationPaging.since||N(P.lastConversationContact?.pubkey)},"getConversationNextPage"),C=o(async M=>{if(!M)return;F("encryptedMessages",()=>[]);const g=`dm_conversation_new_ ${ue}`,L=P.conversationPaging.until||0,{encryptedMessages:V,paging:ie}=await iC(t?.publicKey,M,g,{limit:20,since:L,offset:0});F("encryptedMessages",()=>[...V]),F("conversationPaging",()=>({...ie})),v(M,P.encryptedMessages,he=>{const ge=P.messages.map(me=>me.id),_e=he.filter(me=>!ge.includes(me.id));F("messages",me=>[..._e,...me]),F("isFetchingMessages",()=>!1),A(M,P.lastConversationRelation)})},"getConversationNewMessages"),D=o(()=>{const M=P.referencePage.users,g=Object.keys(M).reduce((L,V)=>{const ie=Je(M[V],V);return{...L,[ie.pubkey]:{...ie}}},{});F("referecedUsers",L=>({...L,...g}))},"updateRefUsers"),U=o(()=>{const g=(fi(P.referencePage)||[]).reduce((L,V)=>({...L,[V.post.noteId]:V}),{});F("referecedNotes",L=>({...L,...g}))},"updateRefNotes"),H=o((M,g)=>{for(let L=0;L<M.length;L++){const V=M[L];if(g&&V.sender===t?.publicKey)return;F("messages",ie=>[{...V},...ie])}},"addToConversation"),B=o(async(M,g)=>{if(!t)return!1;try{const V={content:await gM(M,g.content),kind:W.EncryptedDirectMessage,tags:[["p",M]],created_at:Math.floor(new Date().getTime()/1e3)},{success:ie,note:he}=await Rn(V,t.activeRelays,t?.relaySettings,t?.proxyThroughPrimal||!1);if(ie&&he){const ge=`import_dm_${ue}`,_e=Me(ge,{onEose:()=>{_e();const me={...g,content:pn(g.content)};H([me]),f(P.lastConversationRelation)}});ey([he],ge)}return ie}catch(L){return nt("Failed to send message: ",L),!1}},"sendMessage"),z=o(async()=>await XO(`dm_all_read_${ue}`),"resetAllMessages"),A=o(async(M,g)=>{const L=await KO(M,`dm_reset_msg_${M}_${ue}`);return L&&(F("dmContacts",g,V=>V.pubkey===M,"dmInfo","cnt",()=>0),P.lastConversationContact&&F("lastConversationContact","dmInfo","cnt",()=>0)),L},"resetContactMessages"),d=o(M=>{if(M?.kind===W.Metadata){const g=M;F("referencePage","users",L=>({...L,[g.pubkey]:{...g}}))}},"handleUserRefEvent"),m=o(()=>{D()},"handleUserRefEose"),S=o(M=>{if(M?.kind===W.Metadata){const g=M;F("referencePage","users",L=>({...L,[g.pubkey]:{...g}}))}if([W.Text,W.Repost].includes(M.kind)){const g=M;F("referencePage","messages",L=>[...L,{...g}]);return}if(M.kind===W.NoteStats){const L=JSON.parse(M.content);F("referencePage","postStats",V=>({...V,[L.event_id]:{...L}}));return}if(M.kind===W.Mentions){const L=JSON.parse(M.content);F("referencePage","mentions",V=>({...V,[L.id]:{...L}}));return}if(M.kind===W.NoteActions){const L=JSON.parse(M.content);F("referencePage","noteActions",V=>({...V,[L.event_id]:{...L}}));return}},"handleNoteRefEvent"),R=o(()=>{U(),D()},"handleNoteRefEose"),k=o(()=>{!t?.publicKey||r!==void 0||(i=s(),r=Me(i,{onEvent:(M,g)=>{if(g?.kind===W.MessageStats){const L=parseInt(g.cnt);L!==P.dmCount&&F("dmCount",()=>L)}}}),qO(t.publicKey,i))},"subToMessagesStats");at(()=>{ni()&&t?.isKeyLookupDone&&t?.hasPublicKey()&&!n?.isInactive?k():n?.isInactive&&(VO(i),r=void 0)}),at(Bi(()=>P.lastConversationContact?.dmInfo.cnt,(M,g)=>{!M||M===g||g&&M<g||C(P.lastConversationContact?.pubkey)}));const[P,F]=Xt({...VC(),actions:{setDmContacts:a,setDmRelation:u,setDmRelation2:l,getContacts:h,getContactsNextPage:p,refreshContacts:f,selectContact:_,addContact:x,getConversation:N,getConversationNextPage:I,sendMessage:B,resetAllMessages:z,resetRelation:c}});return pe(Hb.Provider,{value:P,get children(){return e.children}})},"DMProvider"),JC=o(()=>zt(Hb),"useDMContext"),YC=Ze(()=>We(()=>import("./Home-a019598d.js"),["assets/Home-a019598d.js","assets/Note-f0f70728.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/ParsedNote-da8c0eeb.css","assets/Note-e8f7d8de.css","assets/SelectionBox2-201141a0.js","assets/G5FCC32B-f4759418.js","assets/RLGGFAYQ-2a48be09.js","assets/LR7LBJN3-a1aba763.js","assets/index-c76cfba2.js","assets/QJIB6BDF-1d7b1e44.js","assets/JNCCF6MP-19ab5fd3.js","assets/index-a25c8160.js","assets/SelectionItem-0e1bfb8a.js","assets/SelectionItem-70a9f06f.css","assets/SelectionBox2-cb51965e.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/HomeSidebar.module-aa2a7eab.js","assets/HomeSidebar-c1464179.css","assets/FeedNoteSkeleton-5b6ee646.js","assets/Skeleton.module-8b20490e.js","assets/Skeleton-c63ae2a7.css","assets/FeedNoteSkeleton-755f9f21.css","assets/Layout-bd2a0ea3.js","assets/EditBox-1353f619.js","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/index-555a6fe0.js","assets/textArea-802fec28.js","assets/ButtonSecondary-cc5e2282.js","assets/EmojiPickHeader-dfcd5384.js","assets/EmojiPickHeader-ae4f6b40.css","assets/ConfirmModal.module-73b4314e.js","assets/ConfirmModal-bfae4933.css","assets/AdvancedSearchDialog-eff41eef.js","assets/AdvancedSearchDialog-24edc25f.css","assets/Uploader-f6bcb09a.js","assets/EMOXVTIZ-81fa338a.js","assets/Uploader-582d914b.css","assets/EditBox-b82b2319.css","assets/BannerIOS-4372487a.js","assets/primal_white-9ad5c7e6.js","assets/open_white-d7ddfa1e.js","assets/BannerIOS-499d1422.css","assets/7FJWXM73-511ca333.js","assets/SOM3K36D-40feb6ac.js","assets/TextInput-e0ece469.js","assets/JFO5B7NF-4a51a11a.js","assets/TextInput-349215b1.css","assets/ConfirmModal-62a7ec79.js","assets/QrCode-24ae49c9.js","assets/qr_nostrich-54e27ae3.js","assets/qr_lightning-fba50a71.js","assets/QrCode-e7489e54.css","assets/ButtonLink-2f835890.js","assets/CreatePinModal-3a4f5174.js","assets/CreatePinModal-7c5f060c.css","assets/Layout-350695cc.css","assets/Wormhole-fa0163d3.js","assets/scroll-88dc0c55.js","assets/StickySidebar-65b823c5.js","assets/StickySidebar-2cf5d086.css","assets/Search-c8ce1e29.js","assets/Search-2febb342.css","assets/PageTitle-3d0a9832.js","assets/Home-ce197d04.css"])),QC=Ze(()=>We(()=>import("./Reads-451d1355.js"),["assets/Reads-451d1355.js","assets/SelectionBox2-201141a0.js","assets/G5FCC32B-f4759418.js","assets/RLGGFAYQ-2a48be09.js","assets/index-b4296c5e.js","assets/5WXHJDCZ-8b9b8e69.js","assets/LR7LBJN3-a1aba763.js","assets/index-c76cfba2.js","assets/QJIB6BDF-1d7b1e44.js","assets/JNCCF6MP-19ab5fd3.js","assets/index-a25c8160.js","assets/Buttons.module-e818c1ea.js","assets/Buttons-3c1b65cb.css","assets/SelectionItem-0e1bfb8a.js","assets/SelectionItem-70a9f06f.css","assets/SelectionBox2-cb51965e.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/Wormhole-fa0163d3.js","assets/scroll-88dc0c55.js","assets/StickySidebar-65b823c5.js","assets/StickySidebar-2cf5d086.css","assets/Search-c8ce1e29.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/Layout-bd2a0ea3.js","assets/ButtonPrimary-1f64caa8.js","assets/EditBox-1353f619.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/ParsedNote-da8c0eeb.css","assets/index-555a6fe0.js","assets/textArea-802fec28.js","assets/ButtonSecondary-cc5e2282.js","assets/EmojiPickHeader-dfcd5384.js","assets/EmojiPickHeader-ae4f6b40.css","assets/ConfirmModal.module-73b4314e.js","assets/ConfirmModal-bfae4933.css","assets/AdvancedSearchDialog-eff41eef.js","assets/AdvancedSearchDialog-24edc25f.css","assets/Uploader-f6bcb09a.js","assets/EMOXVTIZ-81fa338a.js","assets/Uploader-582d914b.css","assets/Note-f0f70728.js","assets/Note-e8f7d8de.css","assets/EditBox-b82b2319.css","assets/BannerIOS-4372487a.js","assets/primal_white-9ad5c7e6.js","assets/open_white-d7ddfa1e.js","assets/BannerIOS-499d1422.css","assets/7FJWXM73-511ca333.js","assets/SOM3K36D-40feb6ac.js","assets/TextInput-e0ece469.js","assets/JFO5B7NF-4a51a11a.js","assets/TextInput-349215b1.css","assets/ConfirmModal-62a7ec79.js","assets/QrCode-24ae49c9.js","assets/qr_nostrich-54e27ae3.js","assets/qr_lightning-fba50a71.js","assets/QrCode-e7489e54.css","assets/ButtonLink-2f835890.js","assets/CreatePinModal-3a4f5174.js","assets/CreatePinModal-7c5f060c.css","assets/Layout-350695cc.css","assets/PageTitle-3d0a9832.js","assets/ArticlePreview-3d0aa4c8.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/HomeSidebar.module-aa2a7eab.js","assets/HomeSidebar-c1464179.css","assets/ArticlePreviewSidebarSkeleton-add7f0b3.js","assets/Skeleton.module-8b20490e.js","assets/Skeleton-c63ae2a7.css","assets/ArticlePreviewSkeleton-3f1ff222.js","assets/Reads-6992ded2.css"])),XC=Ze(()=>We(()=>import("./Layout-bd2a0ea3.js").then(e=>e.L),["assets/Layout-bd2a0ea3.js","assets/ButtonPrimary-1f64caa8.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/EditBox-1353f619.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/ParsedNote-da8c0eeb.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/index-555a6fe0.js","assets/textArea-802fec28.js","assets/ButtonSecondary-cc5e2282.js","assets/EmojiPickHeader-dfcd5384.js","assets/EmojiPickHeader-ae4f6b40.css","assets/ConfirmModal.module-73b4314e.js","assets/ConfirmModal-bfae4933.css","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/index-c76cfba2.js","assets/JNCCF6MP-19ab5fd3.js","assets/AdvancedSearchDialog-24edc25f.css","assets/Uploader-f6bcb09a.js","assets/EMOXVTIZ-81fa338a.js","assets/LR7LBJN3-a1aba763.js","assets/Uploader-582d914b.css","assets/Note-f0f70728.js","assets/Note-e8f7d8de.css","assets/EditBox-b82b2319.css","assets/BannerIOS-4372487a.js","assets/primal_white-9ad5c7e6.js","assets/open_white-d7ddfa1e.js","assets/BannerIOS-499d1422.css","assets/7FJWXM73-511ca333.js","assets/SOM3K36D-40feb6ac.js","assets/RLGGFAYQ-2a48be09.js","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/TextInput-e0ece469.js","assets/JFO5B7NF-4a51a11a.js","assets/QJIB6BDF-1d7b1e44.js","assets/TextInput-349215b1.css","assets/ConfirmModal-62a7ec79.js","assets/QrCode-24ae49c9.js","assets/qr_nostrich-54e27ae3.js","assets/qr_lightning-fba50a71.js","assets/QrCode-e7489e54.css","assets/G5FCC32B-f4759418.js","assets/ButtonLink-2f835890.js","assets/CreatePinModal-3a4f5174.js","assets/CreatePinModal-7c5f060c.css","assets/Layout-350695cc.css"])),e6=Ze(()=>We(()=>import("./Explore-2554a5f8.js"),["assets/Explore-2554a5f8.js","assets/ExploreHotTopics-83547ce2.js","assets/ExploreHotTopics-fbb2345c.css","assets/StickySidebar-65b823c5.js","assets/Wormhole-fa0163d3.js","assets/StickySidebar-2cf5d086.css","assets/Search-c8ce1e29.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/7FJWXM73-511ca333.js","assets/SOM3K36D-40feb6ac.js","assets/index-c76cfba2.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/RLGGFAYQ-2a48be09.js","assets/LR7LBJN3-a1aba763.js","assets/FeedMarketPlace-34349272.js","assets/FeedMarketPlaceItem-1368feb7.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/ParsedNote-da8c0eeb.css","assets/FeedMarketPlaceItem-3db491e3.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/FollowButton-d935d050.js","assets/ButtonFlip-65663082.js","assets/FollowButton-9ba7fd56.css","assets/NoteGallery-bea6c77c.js"])),t6=Ze(()=>We(()=>import("./ExploreFeeds-6beeb15d.js"),["assets/ExploreFeeds-6beeb15d.js","assets/ExploreHotTopics-83547ce2.js","assets/ExploreHotTopics-fbb2345c.css","assets/StickySidebar-65b823c5.js","assets/Wormhole-fa0163d3.js","assets/StickySidebar-2cf5d086.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/FeedMarketPlacePreview-16ae6dd4.js","assets/ArticlePreview-3d0aa4c8.js","assets/dates-9bcb2bf7.js","assets/Note-f0f70728.js","assets/ParsedNote-9900e3c8.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/ParsedNote-da8c0eeb.css","assets/Note-e8f7d8de.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/FeedMarketPlaceItem-1368feb7.js","assets/FeedMarketPlaceItem-3db491e3.css","assets/ButtonFlip-65663082.js"])),ql=Ze(()=>We(()=>import("./Thread-50047969.js"),["assets/Thread-50047969.js","assets/NotFound-c377363a.js","assets/MissingPage-ff1a5436.js","assets/PageTitle-3d0a9832.js","assets/Search-c8ce1e29.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/Wormhole-fa0163d3.js","assets/MissingPage-c1947c0e.css","assets/NotFound-ed20e1a0.css","assets/Note-f0f70728.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/ParsedNote-da8c0eeb.css","assets/Note-e8f7d8de.css","assets/PeopleList-618c041a.js","assets/Skeleton.module-8b20490e.js","assets/Skeleton-c63ae2a7.css","assets/FollowButton-d935d050.js","assets/ButtonFlip-65663082.js","assets/FollowButton-9ba7fd56.css","assets/PeopleList-ad4783d3.css","assets/EditBox-1353f619.js","assets/index-555a6fe0.js","assets/textArea-802fec28.js","assets/ButtonSecondary-cc5e2282.js","assets/EmojiPickHeader-dfcd5384.js","assets/EmojiPickHeader-ae4f6b40.css","assets/ConfirmModal.module-73b4314e.js","assets/ConfirmModal-bfae4933.css","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/index-c76cfba2.js","assets/JNCCF6MP-19ab5fd3.js","assets/AdvancedSearchDialog-24edc25f.css","assets/Uploader-f6bcb09a.js","assets/EMOXVTIZ-81fa338a.js","assets/LR7LBJN3-a1aba763.js","assets/Uploader-582d914b.css","assets/EditBox-b82b2319.css","assets/BannerIOS-4372487a.js","assets/primal_white-9ad5c7e6.js","assets/open_white-d7ddfa1e.js","assets/BannerIOS-499d1422.css","assets/ArticlePreview-3d0aa4c8.js","assets/HomeSidebar.module-aa2a7eab.js","assets/HomeSidebar-c1464179.css","assets/ArticlePreviewSidebarSkeleton-add7f0b3.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/Thread-99fe500b.css"])),n6=Ze(()=>We(()=>import("./DirectMessages-5dc1cc22.js"),["assets/DirectMessages-5dc1cc22.js","assets/dates-9bcb2bf7.js","assets/7FJWXM73-511ca333.js","assets/SOM3K36D-40feb6ac.js","assets/index-c76cfba2.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/RLGGFAYQ-2a48be09.js","assets/LR7LBJN3-a1aba763.js","assets/PageTitle-3d0a9832.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/Wormhole-fa0163d3.js","assets/Search-c8ce1e29.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/ParsedNote-9900e3c8.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/ParsedNote-da8c0eeb.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/textArea-802fec28.js","assets/index-555a6fe0.js","assets/DirectMessages-6e19817a.css"])),r6=Ze(()=>We(()=>import("./Bookmarks-07082af2.js"),["assets/Bookmarks-07082af2.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/ParsedNote-da8c0eeb.css","assets/ArticlePreview-3d0aa4c8.js","assets/Note-f0f70728.js","assets/Note-e8f7d8de.css","assets/SelectionItem-0e1bfb8a.js","assets/G5FCC32B-f4759418.js","assets/RLGGFAYQ-2a48be09.js","assets/LR7LBJN3-a1aba763.js","assets/index-c76cfba2.js","assets/QJIB6BDF-1d7b1e44.js","assets/JNCCF6MP-19ab5fd3.js","assets/index-a25c8160.js","assets/SelectionItem-70a9f06f.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/Bookmarks-c93844a0.css"])),i6=Ze(()=>We(()=>import("./Notifications-0ecd435b.js"),["assets/Notifications-0ecd435b.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/mentioned_post_replied-9fcee781.js","assets/Note-f0f70728.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/ParsedNote-da8c0eeb.css","assets/Note-e8f7d8de.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/Search-c8ce1e29.js","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/StickySidebar-65b823c5.js","assets/Wormhole-fa0163d3.js","assets/StickySidebar-2cf5d086.css","assets/7FJWXM73-511ca333.js","assets/SOM3K36D-40feb6ac.js","assets/index-c76cfba2.js","assets/RLGGFAYQ-2a48be09.js","assets/LR7LBJN3-a1aba763.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/Notifications-dbf865fe.css"])),s6=Ze(()=>We(()=>import("./Downloads-e14990ef.js"),["assets/Downloads-e14990ef.js","assets/Wormhole-fa0163d3.js","assets/Search-c8ce1e29.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/github_light-88794deb.js","assets/github-c41fe0bf.js","assets/StickySidebar-65b823c5.js","assets/StickySidebar-2cf5d086.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/index-b4296c5e.js","assets/Downloads-f6793b20.css"])),o6=Ze(()=>We(()=>import("./Settings-830d3cd7.js"),["assets/Settings-830d3cd7.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/Wormhole-fa0163d3.js","assets/Search-c8ce1e29.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/StickySidebar-65b823c5.js","assets/StickySidebar-2cf5d086.css","assets/PageTitle-3d0a9832.js","assets/Settings-f7312c32.css"])),a6=Ze(()=>We(()=>import("./Help-9641200a.js"),["assets/Help-9641200a.js","assets/MissingPage-ff1a5436.js","assets/PageTitle-3d0a9832.js","assets/Search-c8ce1e29.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/Wormhole-fa0163d3.js","assets/MissingPage-c1947c0e.css"])),c6=Ze(()=>We(()=>import("./Search-e14f7bba.js"),["assets/Search-e14f7bba.js","assets/Note-f0f70728.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/ParsedNote-da8c0eeb.css","assets/Note-e8f7d8de.css","assets/Wormhole-fa0163d3.js","assets/StickySidebar-65b823c5.js","assets/StickySidebar-2cf5d086.css","assets/PeopleList-618c041a.js","assets/Skeleton.module-8b20490e.js","assets/Skeleton-c63ae2a7.css","assets/FollowButton-d935d050.js","assets/ButtonFlip-65663082.js","assets/FollowButton-9ba7fd56.css","assets/PeopleList-ad4783d3.css","assets/Search-c8ce1e29.js","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/SaveFeedDialog-7a5e022d.js","assets/JFO5B7NF-4a51a11a.js","assets/QJIB6BDF-1d7b1e44.js","assets/JNCCF6MP-19ab5fd3.js","assets/index-c76cfba2.js","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/AdvancedSearchDialog-24edc25f.css","assets/ButtonSecondary-cc5e2282.js","assets/ButtonPremium-cdbfc08e.js","assets/SaveFeedDialog-07ec1b26.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/Search-60c1132b.css"])),l6=Ze(()=>We(()=>import("./NotFound-c377363a.js"),["assets/NotFound-c377363a.js","assets/MissingPage-ff1a5436.js","assets/PageTitle-3d0a9832.js","assets/Search-c8ce1e29.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/Wormhole-fa0163d3.js","assets/MissingPage-c1947c0e.css","assets/NotFound-ed20e1a0.css"])),u6=Ze(()=>We(()=>import("./EditProfile-e293fc2a.js"),["assets/EditProfile-e293fc2a.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/PageTitle-3d0a9832.js","assets/ButtonPrimary-1f64caa8.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonSecondary-cc5e2282.js","assets/Uploader-f6bcb09a.js","assets/EMOXVTIZ-81fa338a.js","assets/LR7LBJN3-a1aba763.js","assets/JNCCF6MP-19ab5fd3.js","assets/ButtonGhost-a0fa1826.js","assets/Uploader-582d914b.css","assets/EditProfile-37e441af.css"])),Vl=Ze(()=>We(()=>import("./Profile-b97b51dc.js"),["assets/Profile-b97b51dc.js","assets/Wormhole-fa0163d3.js","assets/dates-9bcb2bf7.js","assets/StickySidebar-65b823c5.js","assets/StickySidebar-2cf5d086.css","assets/FeedNoteSkeleton-5b6ee646.js","assets/ParsedNote-9900e3c8.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/ParsedNote-da8c0eeb.css","assets/Skeleton.module-8b20490e.js","assets/Skeleton-c63ae2a7.css","assets/FeedNoteSkeleton-755f9f21.css","assets/ArticlePreviewSidebarSkeleton-add7f0b3.js","assets/PageTitle-3d0a9832.js","assets/FollowButton-d935d050.js","assets/ButtonFlip-65663082.js","assets/FollowButton-9ba7fd56.css","assets/Search-c8ce1e29.js","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/ConfirmModal-62a7ec79.js","assets/ConfirmModal.module-73b4314e.js","assets/ConfirmModal-bfae4933.css","assets/ButtonSecondary-cc5e2282.js","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/index-c76cfba2.js","assets/JNCCF6MP-19ab5fd3.js","assets/AdvancedSearchDialog-24edc25f.css","assets/7FJWXM73-511ca333.js","assets/SOM3K36D-40feb6ac.js","assets/RLGGFAYQ-2a48be09.js","assets/LR7LBJN3-a1aba763.js","assets/ArticlePreview-3d0aa4c8.js","assets/Note-f0f70728.js","assets/Note-e8f7d8de.css","assets/PremiumCohortInfo-0779d27f.js","assets/PremiumCohortInfo-4702ed70.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/NoteGallery-bea6c77c.js","assets/ArticlePreviewSkeleton-3f1ff222.js","assets/scroll-88dc0c55.js","assets/QrCode-24ae49c9.js","assets/qr_nostrich-54e27ae3.js","assets/qr_lightning-fba50a71.js","assets/QrCode-e7489e54.css","assets/Profile-e8da6f52.css"])),f6=Ze(()=>We(()=>import("./Mutelist-ef247c90.js"),["assets/Mutelist-ef247c90.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/PageTitle-3d0a9832.js"])),d6=Ze(()=>We(()=>import("./CreateAccount-af96b826.js"),["assets/CreateAccount-af96b826.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/CreatePinModal-3a4f5174.js","assets/ButtonPrimary-1f64caa8.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/TextInput-e0ece469.js","assets/JFO5B7NF-4a51a11a.js","assets/QJIB6BDF-1d7b1e44.js","assets/JNCCF6MP-19ab5fd3.js","assets/index-c76cfba2.js","assets/TextInput-349215b1.css","assets/ButtonSecondary-cc5e2282.js","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/AdvancedSearchDialog-24edc25f.css","assets/CreatePinModal-7c5f060c.css","assets/ButtonFlip-65663082.js","assets/Uploader-f6bcb09a.js","assets/EMOXVTIZ-81fa338a.js","assets/LR7LBJN3-a1aba763.js","assets/ButtonGhost-a0fa1826.js","assets/Uploader-582d914b.css","assets/CreateAccount-27f66aaa.css"])),h6=Ze(()=>We(()=>import("./Premium-96cea0db.js"),["assets/Premium-96cea0db.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/Wormhole-fa0163d3.js","assets/PremiumCohortInfo-0779d27f.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/PremiumCohortInfo-4702ed70.css","assets/Search-c8ce1e29.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/TextInput-e0ece469.js","assets/JFO5B7NF-4a51a11a.js","assets/QJIB6BDF-1d7b1e44.js","assets/JNCCF6MP-19ab5fd3.js","assets/index-c76cfba2.js","assets/TextInput-349215b1.css","assets/ButtonPremium-cdbfc08e.js","assets/dates-9bcb2bf7.js","assets/ButtonLink-2f835890.js","assets/ButtonFlip-65663082.js","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/AdvancedSearchDialog-24edc25f.css","assets/QrCode-24ae49c9.js","assets/qr_nostrich-54e27ae3.js","assets/qr_lightning-fba50a71.js","assets/QrCode-e7489e54.css","assets/check_circle-8b1b7b08.js","assets/StickySidebar-65b823c5.js","assets/StickySidebar-2cf5d086.css","assets/ButtonSecondary-cc5e2282.js","assets/7FJWXM73-511ca333.js","assets/SOM3K36D-40feb6ac.js","assets/RLGGFAYQ-2a48be09.js","assets/LR7LBJN3-a1aba763.js","assets/HelpTip-4eefb44b.js","assets/HelpTip-18991287.css","assets/ButtonPrimary-1f64caa8.js","assets/purple_check-feeeb883.js","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/ConfirmModal-62a7ec79.js","assets/ConfirmModal.module-73b4314e.js","assets/ConfirmModal-bfae4933.css","assets/missing_video-c40627a8.js","assets/missing_image-3f937278.js","assets/EMOXVTIZ-81fa338a.js","assets/ButtonGhost-a0fa1826.js","assets/CheckBox2-65e1c04f.js","assets/VI7QYH27-fb7b5f5a.js","assets/Checkbox.module-81b9bd85.js","assets/Checkbox-5b8ea6c1.css","assets/Premium-d514f441.css"])),p6=Ze(()=>We(()=>import("./Notifications-edac91fd.js"),["assets/Notifications-edac91fd.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/mentioned_post_replied-9fcee781.js","assets/Checkbox-6410fe71.js","assets/Checkbox.module-81b9bd85.js","assets/Checkbox-5b8ea6c1.css","assets/PageTitle-3d0a9832.js","assets/Notifications-a20dd887.css"])),g6=Ze(()=>We(()=>import("./Account-3fdd63e2.js"),["assets/Account-3fdd63e2.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js"])),m6=Ze(()=>We(()=>import("./Appearance-aa49e193.js"),["assets/Appearance-aa49e193.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/check-a71e0e8b.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/CheckBox2-65e1c04f.js","assets/QJIB6BDF-1d7b1e44.js","assets/JNCCF6MP-19ab5fd3.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/VI7QYH27-fb7b5f5a.js","assets/index-c76cfba2.js","assets/Checkbox.module-81b9bd85.js","assets/Checkbox-5b8ea6c1.css","assets/Appearance-f6172766.css"])),y6=Ze(()=>We(()=>import("./HomeFeeds-5937a269.js"),["assets/HomeFeeds-5937a269.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/ConfirmModal-62a7ec79.js","assets/ConfirmModal.module-73b4314e.js","assets/ConfirmModal-bfae4933.css","assets/ButtonPrimary-1f64caa8.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonSecondary-cc5e2282.js","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/index-c76cfba2.js","assets/JNCCF6MP-19ab5fd3.js","assets/AdvancedSearchDialog-24edc25f.css","assets/FeedMarketPlaceDialog-5f858bad.js","assets/CheckBox2-65e1c04f.js","assets/QJIB6BDF-1d7b1e44.js","assets/VI7QYH27-fb7b5f5a.js","assets/Checkbox.module-81b9bd85.js","assets/Checkbox-5b8ea6c1.css","assets/FeedMarketPlaceItem-1368feb7.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/ParsedNote-da8c0eeb.css","assets/FeedMarketPlaceItem-3db491e3.css","assets/FeedMarketPlacePreview-16ae6dd4.js","assets/ArticlePreview-3d0aa4c8.js","assets/Note-f0f70728.js","assets/Note-e8f7d8de.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/FeedMarketPlace-34349272.js","assets/FeedMarketPlaceDialog-da3f9f34.css","assets/PageTitle-3d0a9832.js","assets/ButtonLink-2f835890.js"])),b6=Ze(()=>We(()=>import("./ReadsFeeds-bfe431ba.js"),["assets/ReadsFeeds-bfe431ba.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/ConfirmModal-62a7ec79.js","assets/ConfirmModal.module-73b4314e.js","assets/ConfirmModal-bfae4933.css","assets/ButtonPrimary-1f64caa8.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonSecondary-cc5e2282.js","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/index-c76cfba2.js","assets/JNCCF6MP-19ab5fd3.js","assets/AdvancedSearchDialog-24edc25f.css","assets/FeedMarketPlaceDialog-5f858bad.js","assets/CheckBox2-65e1c04f.js","assets/QJIB6BDF-1d7b1e44.js","assets/VI7QYH27-fb7b5f5a.js","assets/Checkbox.module-81b9bd85.js","assets/Checkbox-5b8ea6c1.css","assets/FeedMarketPlaceItem-1368feb7.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/ParsedNote-da8c0eeb.css","assets/FeedMarketPlaceItem-3db491e3.css","assets/FeedMarketPlacePreview-16ae6dd4.js","assets/ArticlePreview-3d0aa4c8.js","assets/Note-f0f70728.js","assets/Note-e8f7d8de.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/FeedMarketPlace-34349272.js","assets/FeedMarketPlaceDialog-da3f9f34.css","assets/PageTitle-3d0a9832.js","assets/ButtonLink-2f835890.js"])),w6=Ze(()=>We(()=>import("./Zaps-dfcf9b21.js"),["assets/Zaps-dfcf9b21.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/ConfirmModal-62a7ec79.js","assets/ConfirmModal.module-73b4314e.js","assets/ConfirmModal-bfae4933.css","assets/ButtonPrimary-1f64caa8.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonSecondary-cc5e2282.js","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/index-c76cfba2.js","assets/JNCCF6MP-19ab5fd3.js","assets/AdvancedSearchDialog-24edc25f.css","assets/ButtonLink-2f835890.js","assets/EmojiPickHeader-dfcd5384.js","assets/index-555a6fe0.js","assets/ButtonGhost-a0fa1826.js","assets/EmojiPickHeader-ae4f6b40.css","assets/PageTitle-3d0a9832.js","assets/Zaps-7b25cd5a.css"])),_6=Ze(()=>We(()=>import("./Muted-c39cd57d.js"),["assets/Muted-c39cd57d.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/ButtonSecondary-cc5e2282.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css"])),v6=Ze(()=>We(()=>import("./Network-75e74362.js"),["assets/Network-75e74362.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/ConfirmModal-62a7ec79.js","assets/ConfirmModal.module-73b4314e.js","assets/ConfirmModal-bfae4933.css","assets/ButtonPrimary-1f64caa8.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonSecondary-cc5e2282.js","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/index-c76cfba2.js","assets/JNCCF6MP-19ab5fd3.js","assets/AdvancedSearchDialog-24edc25f.css","assets/HelpTip-4eefb44b.js","assets/HelpTip-18991287.css","assets/PageTitle-3d0a9832.js","assets/ButtonLink-2f835890.js","assets/CheckBox2-65e1c04f.js","assets/QJIB6BDF-1d7b1e44.js","assets/VI7QYH27-fb7b5f5a.js","assets/Checkbox.module-81b9bd85.js","assets/Checkbox-5b8ea6c1.css"])),E6=Ze(()=>We(()=>import("./Moderation-1034bda0.js"),["assets/Moderation-1034bda0.js","assets/Checkbox-6410fe71.js","assets/Checkbox.module-81b9bd85.js","assets/Checkbox-5b8ea6c1.css","assets/HelpTip-4eefb44b.js","assets/HelpTip-18991287.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css"])),x6=Ze(()=>We(()=>import("./Menu-9e65d07f.js"),["assets/Menu-9e65d07f.js","assets/Settings.module-7ae8ff86.js","assets/Settings-75b084db.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/ButtonPrimary-1f64caa8.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css"])),S6=Ze(()=>We(()=>import("./appDownloadQr-e8a9c6f6.js"),["assets/appDownloadQr-e8a9c6f6.js","assets/index-b4296c5e.js","assets/BannerIOS-4372487a.js","assets/primal_white-9ad5c7e6.js","assets/open_white-d7ddfa1e.js","assets/BannerIOS-499d1422.css"])),A6=Ze(()=>We(()=>import("./Terms-8d3a36f7.js"),["assets/Terms-8d3a36f7.js","assets/Terms.module-d842fa87.js","assets/Terms-49925a9c.css"])),M6=Ze(()=>We(()=>import("./Privacy-583ff0ad.js"),["assets/Privacy-583ff0ad.js","assets/Terms.module-d842fa87.js","assets/Terms-49925a9c.css"])),k6=Ze(()=>We(()=>import("./Support-506be788.js"),["assets/Support-506be788.js","assets/Terms.module-d842fa87.js","assets/Terms-49925a9c.css"])),T6=Ze(()=>We(()=>import("./FeedsTest-fcba2f70.js"),["assets/FeedsTest-fcba2f70.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/Search-c8ce1e29.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/Search-2febb342.css","assets/Wormhole-fa0163d3.js","assets/FeedsTest.module-c5555bee.js","assets/FeedsTest-bc1eae65.css"])),N6=Ze(()=>We(()=>import("./FeedQueryTest-7cb3e4ac.js"),["assets/FeedQueryTest-7cb3e4ac.js","assets/ArticlePreview-3d0aa4c8.js","assets/dates-9bcb2bf7.js","assets/Note-f0f70728.js","assets/ParsedNote-9900e3c8.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/ParsedNote-da8c0eeb.css","assets/Note-e8f7d8de.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/FeedsTest.module-c5555bee.js","assets/FeedsTest-bc1eae65.css"])),I6=Ze(()=>We(()=>import("./AdvancedSearch-214929ee.js").then(e=>e.a),["assets/AdvancedSearch-214929ee.js","assets/ButtonPrimary-1f64caa8.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/PageTitle-3d0a9832.js","assets/StickySidebar-65b823c5.js","assets/Wormhole-fa0163d3.js","assets/StickySidebar-2cf5d086.css","assets/TextInput-e0ece469.js","assets/JFO5B7NF-4a51a11a.js","assets/QJIB6BDF-1d7b1e44.js","assets/JNCCF6MP-19ab5fd3.js","assets/index-c76cfba2.js","assets/TextInput-349215b1.css","assets/G5FCC32B-f4759418.js","assets/RLGGFAYQ-2a48be09.js","assets/LR7LBJN3-a1aba763.js","assets/index-a25c8160.js","assets/AdvancedSearchDialog-eff41eef.js","assets/AdvancedSearchDialog-24edc25f.css","assets/FeedsTest.module-c5555bee.js","assets/FeedsTest-bc1eae65.css","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/SOM3K36D-40feb6ac.js","assets/VI7QYH27-fb7b5f5a.js","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css","assets/ButtonSecondary-cc5e2282.js","assets/ButtonLink-2f835890.js"])),R6=Ze(()=>We(()=>import("./AdvancedSearchResults-5ca65718.js"),["assets/AdvancedSearchResults-5ca65718.js","assets/Loader-1ac7e304.js","assets/Loader-56f55794.css","assets/Note-f0f70728.js","assets/ParsedNote-9900e3c8.js","assets/dates-9bcb2bf7.js","assets/ButtonGhost-a0fa1826.js","assets/Buttons.module-e818c1ea.js","assets/5WXHJDCZ-8b9b8e69.js","assets/index-b4296c5e.js","assets/Buttons-3c1b65cb.css","assets/ButtonPrimary-1f64caa8.js","assets/ParsedNote-da8c0eeb.css","assets/Note-e8f7d8de.css","assets/PageTitle-3d0a9832.js","assets/StickySidebar-65b823c5.js","assets/Wormhole-fa0163d3.js","assets/StickySidebar-2cf5d086.css","assets/FeedsTest.module-c5555bee.js","assets/FeedsTest-bc1eae65.css","assets/ArticlePreview-3d0aa4c8.js","assets/Paginator-4878ac5b.js","assets/Paginator-7334699c.css","assets/ButtonLink-2f835890.js","assets/SaveFeedDialog-7a5e022d.js","assets/JFO5B7NF-4a51a11a.js","assets/QJIB6BDF-1d7b1e44.js","assets/JNCCF6MP-19ab5fd3.js","assets/index-c76cfba2.js","assets/AdvancedSearchDialog-eff41eef.js","assets/index-a25c8160.js","assets/AdvancedSearchDialog-24edc25f.css","assets/ButtonSecondary-cc5e2282.js","assets/ButtonPremium-cdbfc08e.js","assets/SaveFeedDialog-07ec1b26.css","assets/AdvancedSearch-214929ee.js","assets/PageCaption-27eb7f4c.js","assets/PageCaption-20934aec.css","assets/TextInput-e0ece469.js","assets/TextInput-349215b1.css","assets/G5FCC32B-f4759418.js","assets/RLGGFAYQ-2a48be09.js","assets/LR7LBJN3-a1aba763.js","assets/SOM3K36D-40feb6ac.js","assets/VI7QYH27-fb7b5f5a.js","assets/SearchOption-a7f2ab4a.js","assets/SearchOption-719a3555.css"])),pi=window,L6=localStorage.getItem("devMode")==="true",Qp=dd(({params:e})=>WM(e.vanityName),"vanityName"),P6=o(()=>{const e=Zn(),t=GO(),n=Fb(),r=fC(),i=yC(),s=_C(),a=JC(),c=zf(),u=ZC(),l=GC(),f=o(()=>jm(),"genNsec");return L6&&(pi.primal={account:e,explore:i,home:r,media:c,messages:a,notifications:u,profile:t,search:l,settings:n,thread:s,genNsec:f,nip19:Pe},pi.onPrimalComponentMount=()=>{},pi.onPrimalComponentCleanup=()=>{},pi.onPrimalCacheServerConnected=()=>{},pi.onPrimalUploadServerConnected=()=>{},pi.onPrimalCacheServerMessageReceived=()=>{},pi.onPrimalCacheServerMessageSent=()=>{}),pe(JR,{get children(){return[pe(Le,{path:"/app-download-qr",component:S6}),pe(Le,{path:"/terms",component:A6}),pe(Le,{path:"/privacy",component:M6}),pe(Le,{path:"/support",component:k6}),pe(Le,{path:"/",component:XC,get children(){return[pe(Le,{path:"/",component:()=>pe(Wp,{href:"/home"})}),pe(Le,{path:"/home",component:YC}),pe(Le,{path:"/reads/:topic?",component:QC}),pe(Le,{path:"/thread/:id",component:ql}),pe(Le,{path:"/e/:id",component:ql}),pe(Le,{path:"/explore",get children(){return[pe(Le,{path:"/",component:e6}),pe(Le,{path:"/feed/:id",component:t6})]}}),pe(Le,{path:"/dms/:contact?",component:n6}),pe(Le,{path:"/notifications",component:i6}),pe(Le,{path:"/downloads",component:s6}),pe(Le,{path:"/download",component:()=>pe(Wp,{href:"/downloads"})}),";",pe(Le,{path:"/settings",component:o6,get children(){return[pe(Le,{path:"/",component:x6}),pe(Le,{path:"/account",component:g6}),pe(Le,{path:"/appearance",component:m6}),pe(Le,{path:"/home_feeds",component:y6}),pe(Le,{path:"/reads_feeds",component:b6}),pe(Le,{path:"/notifications",component:p6}),pe(Le,{path:"/zaps",component:w6}),pe(Le,{path:"/muted",component:_6}),pe(Le,{path:"/network",component:v6}),pe(Le,{path:"/filters",component:E6})]}}),pe(Le,{path:"/bookmarks",component:r6}),pe(Le,{path:"/settings/profile",component:u6}),pe(Le,{path:"/profile/:npub?",component:Vl}),pe(Le,{path:"/p/:npub?",component:Vl}),pe(Le,{path:"/help",component:a6}),pe(Le,{path:"/search/:query",component:c6}),pe(Le,{path:"/mutelist/:npub",component:f6}),pe(Le,{path:"/new",component:d6}),pe(Le,{path:"/feeds",get children(){return[pe(Le,{path:"/",component:T6}),pe(Le,{path:"/:query",component:N6})]}}),pe(Le,{path:"/asearch",get children(){return[pe(Le,{path:"/",component:I6}),pe(Le,{path:"/:query",component:R6})]}}),pe(Le,{path:"/premium/:step?",component:h6}),pe(Le,{path:"/:vanityName",get children(){return[pe(Le,{path:"/",component:Vl,preload:Qp}),pe(Le,{path:"/:identifier",component:ql,preload:Qp})]}}),pe(Le,{path:"/404",component:l6})]}})]}})},"AppRouter"),O6={locale:"en",messages:{}},C6=Ht();function B6(e){const t=o(i=>{r("locale",()=>i)},"setLocale"),[n,r]=Xt({...O6,actions:{setLocale:t}});return pe(C6.Provider,{value:n,get children(){return pe(KT,{get locale(){return n.locale},get messages(){return n.messages},get children(){return e.children}})}})}o(B6,"TranslatorProvider");const F6={notes:[],futureNotes:[],sidebarNotes:[],isFetching:!1,isFetchingSidebar:!1,scrollTop:0,selectedFeed:void 0,page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{},wordCount:{}},reposts:{},lastNote:void 0,mentionedNotes:{},future:{notes:[],reposts:{},page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{},wordCount:{}},scope:"",timeframe:"",latest_at:0},sidebar:{notes:[],page:{messages:[],users:{},postStats:{},mentions:{},noteActions:{},topZaps:{},wordCount:{}},isFetching:!1,query:void 0},paging:{notes:{...Dt()},future:{...Dt()},sidebar:{...Dt()}},recomendedReads:[],articleHeights:{},topPicks:[],topics:[],featuredAuthor:void 0},zb=Ht(),U6=o(e=>{const t=Zn(),n=o(C=>{I("topics",()=>[...C])},"setTopics"),r=o(C=>{I("featuredAuthor",()=>({...C}))},"setFeaturedAuthor"),i=o(C=>{I("sidebar","query",()=>({...C}))},"updateSidebarQuery"),s=o(async C=>{I("isFetchingSidebar",()=>!0);const D=await nC(`reads_recomended_${ue}`);I("topPicks",()=>[...D]),I("isFetchingSidebar",()=>!1)},"doSidebarSearch"),a=o(()=>{I("futureNotes",()=>[]),I("paging","future",()=>({since:0,until:0,sortBy:"published_at"}))},"clearFuture"),c=o(async C=>{if(N.paging.notes.sortBy!=="created_at"||N.futureNotes.length>100)return;let D=N.paging.future.until||N.paging.notes.until||0;const U=N.futureNotes.length>0?N.futureNotes:N.notes.slice(0,20),H=Xa(U,N.futureNotes.length>0?N.paging.future:N.paging.notes),{reads:B,paging:z}=await Un(t?.publicKey,C,`home_future_${ue}`,{since:D,limit:100,offset:H}),A=U.map(m=>m.id),d=B.filter(m=>!A.includes(m.id));I("paging","future",()=>({...z})),I("futureNotes",m=>[...m,...d])},"checkForNewNotes"),u=o(()=>{N.futureNotes.length!==0&&(I("notes",C=>[...N.futureNotes,...C]),a())},"loadFutureContent"),l=o(async(C,D=0,U=!0)=>{I("isFetching",()=>U);const H=t?.publicKey||sc.names.primal,B=Xa(N.notes,N.paging.notes),{reads:z,paging:A}=await Un(H,C,`reads_feed_${ue}`,{until:D,limit:20,offset:B}),d=ec(z,A);I("paging","notes",()=>({...A})),I("notes",m=>[...m,...d]),I("isFetching",()=>!1)},"fetchNotes"),f=o(()=>{I("scrollTop",()=>0),window.scrollTo({top:0}),I("notes",()=>[]),I("paging","notes",()=>({since:0,until:0,sortBy:"published_at"})),a()},"clearNotes"),h=o(C=>{if(N.isFetching)return;const D=C||N.selectedFeed?.spec||"",U=N.paging.notes.since||0;U>0&&l(D,U)},"fetchNextPage"),p=o(C=>{I("scrollTop",()=>C)},"updateScrollTop");let y;const _=o(C=>{C?.spec!==void 0&&C.spec!==y?.spec&&(y={...C},Km(t?.publicKey,"reads",y),I("selectedFeed",Qn({...C})),f(),l(C.spec,0))},"selectFeed"),x=o(()=>{N.selectedFeed&&(f(),l(N.selectedFeed.spec,0))},"refetchSelectedFeed"),w=o(()=>{y=void 0,I("selectedFeed",()=>{})},"resetSelectedFeed"),v=o(()=>{const C=N.selectedFeed;C?.spec&&(f(),l(C.spec,0))},"getFirstPage"),T=o((C,D)=>{I("articleHeights",C,()=>D)},"setArticleHeight"),[N,I]=Xt({...F6,actions:{clearNotes:f,fetchNotes:l,fetchNextPage:h,selectFeed:_,resetSelectedFeed:w,updateScrollTop:p,checkForNewNotes:c,loadFutureContent:u,doSidebarSearch:s,updateSidebarQuery:i,getFirstPage:v,setArticleHeight:T,setTopics:n,setFeaturedAuthor:r,refetchSelectedFeed:x}});return pe(zb.Provider,{value:N,get children(){return e.children}})},"ReadsProvider"),sF=o(()=>zt(zb),"useReadsContext"),Xp=["82341f882b6eabcd2ba7f1ef90aad961cf074af15b9ef44a09f9d2a8fbfbe6a2","bf2376e17ba4ec269d10fcc996a4746b451152be9031fa48e74553dde5526bce","c48e29f04b482cc01ca1f9ef8c86ef8318c059e0e9353235162f080f26e14c11","85080d3bad70ccdcd7f74c29a44f55bb85cbcd3dd0cbb957da1d215bdb931204","eab0e756d32b80bcd464f3d844b8040303075a13eabc3599a762c9ac7ab91f4f","04c915daefee38317fa734444acee390a8269fe5810b2241e5e6dd343dfbecc9","472f440f29ef996e92a186b8d320ff180c855903882e59d50de1b8bd5669301e","e88a691e98d9987c964521dff60025f60700378a4879180dcbbb4a5027850411","91c9a5e1a9744114c6fe2d61ae4de82629eaaa0fb52f48288093c7e7e036f832","fa984bd7dbb282f07e16e7ae87b26a2a7b9b90b7246a44771f0cf5ae58018f52"],D6={contentQuery:"",users:[],scores:{},contentUsers:[],contentScores:{},notes:[],reads:[],isFetchingUsers:!1,isFetchingContent:!1,reposts:{},mentionedNotes:{},filteringReasons:[],errors:[],searchCommand:"",paging:{...Dt()}},Zb=Ht();function $6(e){const t=Zn(),n=o(_=>{const x=`find_npub_${ue}`;let w;try{w=Pe.decode(_)}catch{i(_);return}if(!w){i(_);return}const v=typeof w.data=="string"?w.data:w.data.pubkey;let T=[];const N=Me(x,{onEvent:(I,C)=>{if(C){if(C.kind===W.Metadata){const D=C;T.push(Je(D,C.pubkey));return}if(C.kind===W.UserScore){const D=JSON.parse(C.content);y("scores",()=>({...D}));return}}},onEose:()=>{T.length>0&&y("users",()=>[T[0]]),y("isFetchingUsers",()=>!1),N()}});si([v],x)},"findUserByNupub"),r=o(_=>{const x=`recomended_users_${ue}`;let w=[];const v=Me(x,{onEvent:(T,N)=>{if(N){if(N.kind===W.Metadata){const I=N;w.push(Je(I,N.pubkey));return}if(N.kind===W.UserScore){const I=JSON.parse(N.content);y("scores",()=>({...I}));return}}},onEose:()=>{let T=[];w.forEach(N=>{const I=Xp.indexOf(N.pubkey);T[I]={...N}}),_&&(T=[..._,...T].slice(0,9)),y("users",()=>T),y("isFetchingUsers",()=>!1),v()}});y("isFetchingUsers",()=>!0),si(Xp,x)},"getRecomendedUsers"),i=o((_,x)=>{const w=`search_users_${ue}`;let v=[];const T=Me(w,{onEvent:(I,C)=>{if(C){if(C.kind===W.Metadata){const D=C;v.push(Je(D,C.pubkey));return}if(C.kind===W.UserScore){const D=JSON.parse(C.content);y("scores",()=>({...D}));return}}},onEose:()=>{const I=v.sort((C,D)=>{const U=p.scores[C.pubkey];return p.scores[D.pubkey]-U});y("users",()=>I.slice(0,10)),y("isFetchingUsers",()=>!1),T()}}),N=_.length>0?void 0:x;y("isFetchingUsers",()=>!0),rf(N,w,_)},"findUsers"),s=o(async(_,x)=>{const w=`search_users_c_${ue}`;try{const v=JSON.stringify({id:"advsearch",query:`kind:0 ${_}`}),{users:T}=await Un(t?.publicKey,v,w,{limit:10});y("contentUsers",()=>T)}catch(v){nt("ERROR fetching search results: ",v)}},"findContentUsers"),a=o(_=>{if(p.isFetchingContent)return;const x=p.paging.since||0;x>0&&u(_,x)},"fetchContentNextPage"),c=o(()=>{y("paging",()=>({...Dt()})),y("reads",()=>[]),y("notes",()=>[])},"clearSearch"),u=o(async(_,x=0)=>{try{const w=JSON.stringify({id:"advsearch",query:_});y("isFetchingContent",()=>!0);const v=_.includes("kind:30023")?"reads":"notes";let T=0;v==="reads"?T=Xa(p.reads,p.paging):v==="notes"&&(T=nf(p.notes,p.paging));const{notes:N,reads:I,paging:C}=await Un(t?.publicKey,w,`adv_search_${ue}`,{limit:20,until:x,offset:T}),D=ns(N,C),U=ec(I,C);y("paging",()=>({...C})),y("reads",H=>[...H,...U]),y("notes",H=>[...H,...D])}catch(w){nt("ERROR fetching search results: ",w)}y("isFetchingContent",()=>!1)},"findContent"),l=o(_=>{y("contentQuery",()=>_)},"setContentQuery"),f=o(_=>{const x=ks(_);let w=[];if(x.length>0){const v=`search_filtered_users_${ue}`,T=Me(v,{onEvent:(N,I)=>{if(I?.kind===W.FilteringReason){const C=JSON.parse(I.content);if(C.action==="allow")return;if(C.pubkey){w.push(C.pubkey);return}if(C.group){w.push(C.group);return}}},onEose:()=>{y("filteringReasons",()=>[...w]),T()}});_b(x,t?.publicKey,v)}},"findFilteredUserByNpub"),h=o(_=>y("searchCommand",()=>_),"setSearchCommand"),[p,y]=Xt({...D6,actions:{findUsers:i,findUserByNupub:n,findContent:u,fetchContentNextPage:a,findContentUsers:s,setContentQuery:l,getRecomendedUsers:r,findFilteredUserByNpub:f,clearSearch:c,setSearchCommand:h}});return pe(Zb.Provider,{value:p,get children(){return e.children}})}o($6,"AdvancedSearchProvider");function oF(){return zt(Zb)}o(oF,"useAdvancedSearchContext");const H6="2.0.11",ue=`web_${H6}_${Math.floor(Math.random()*1e10)}`,z6=o(()=>(ai(()=>{lc()}),on(()=>{bf()}),pe(qI,{get children(){return pe(B6,{get children(){return pe(kk,{get children(){return pe(TA,{get children(){return pe(QI,{get children(){return pe(jC,{get children(){return pe($6,{get children(){return pe(UC,{get children(){return pe(jO,{get children(){return pe(KC,{get children(){return pe(zC,{get children(){return pe(U6,{get children(){return pe(uC,{get children(){return pe(mC,{get children(){return pe(wC,{get children(){return pe(P6,{})}})}})}})}})}})}})}})}})}})}})}})}})}})}})}})),"App");mw(()=>pe(z6,{}),document.getElementById("root"));export{zf as $,QR as A,Ts as B,lt as C,Xt as D,at as E,q6 as F,P8 as G,sw as H,Oc as I,v8 as J,XB as K,sF as L,Td as M,Me as N,IB as O,RB as P,sc as Q,mR as R,Dn as S,ue as T,HB as U,kL as V,Bi as W,cB as X,Cc as Y,ZC as Z,JC as _,fC as a,X8 as a$,H8 as a0,S8 as a1,W as a2,wn as a3,m8 as a4,dr as a5,CM as a6,li as a7,fi as a8,y8 as a9,N8 as aA,I8 as aB,C4 as aC,GO as aD,zB as aE,aB as aF,ti as aG,oB as aH,yC as aI,KB as aJ,JB as aK,MB as aL,YB as aM,l4 as aN,QB as aO,ni as aP,F8 as aQ,Je as aR,OB as aS,z4 as aT,Vf as aU,H4 as aV,x8 as aW,B8 as aX,Wa as aY,gB as aZ,_C as a_,BM as aa,dB as ab,iF as ac,fy as ad,k0 as ae,tB as af,nB as ag,Y8 as ah,_8 as ai,M8 as aj,eB as ak,Pe as al,g8 as am,A4 as an,Qn as ao,uB as ap,Ap as aq,fB as ar,LB as as,xt as at,cE as au,pB as av,R8 as aw,W4 as ax,nt as ay,dM as az,Fb as b,MM as b$,hb as b0,FB as b1,Rn as b2,u0 as b3,tr as b4,ks as b5,Ak as b6,Xw as b7,We as b8,vB as b9,D8 as bA,z8 as bB,sB as bC,K8 as bD,n4 as bE,o4 as bF,CB as bG,p8 as bH,ey as bI,u8 as bJ,f8 as bK,wB as bL,yB as bM,GB as bN,s4 as bO,b8 as bP,e_ as bQ,r4 as bR,B6 as bS,o8 as bT,e8 as bU,t4 as bV,vM as bW,EM as bX,xM as bY,SM as bZ,AM as b_,i4 as ba,iL as bb,u4 as bc,f4 as bd,UB as be,EB as bf,VB as bg,Uo as bh,Jr as bi,w8 as bj,bB as bk,si as bl,Zo as bm,en as bn,WM as bo,Rc as bp,C8 as bq,m4 as br,GC as bs,b4 as bt,mB as bu,T4 as bv,I4 as bw,k4 as bx,N4 as by,pn as bz,pe as c,c4 as c$,kM as c0,TM as c1,NM as c2,IM as c3,RM as c4,X4 as c5,r8 as c6,i8 as c7,s8 as c8,n8 as c9,Q6 as cA,W8 as cB,j8 as cC,nF as cD,VI as cE,G8 as cF,Jp as cG,Ub as cH,eF as cI,tF as cJ,O8 as cK,w4 as cL,_4 as cM,J8 as cN,yt as cO,lo as cP,Xg as cQ,oF as cR,e4 as cS,A8 as cT,mr as cU,qB as cV,V8 as cW,x4 as cX,ZB as cY,jM as cZ,Q8 as c_,t8 as ca,a8 as cb,l8 as cc,Kw as cd,c8 as ce,yM as cf,zA as cg,d4 as ch,h4 as ci,NB as cj,kB as ck,TB as cl,$8 as cm,F4 as cn,Xa as co,nf as cp,Un as cq,ns as cr,ec as cs,lB as ct,Dt as cu,U4 as cv,Pt as cw,Z8 as cx,rF as cy,X6 as cz,it as d,f0 as d$,AB as d0,E4 as d1,E8 as d2,_l as d3,ry as d4,v4 as d5,G4 as d6,M4 as d7,j4 as d8,Gh as d9,Ha as dA,XM as dB,rB as dC,nc as dD,T0 as dE,uf as dF,a4 as dG,jw as dH,V6 as dI,bA as dJ,V4 as dK,K4 as dL,Z4 as dM,Ys as dN,GM as dO,tM as dP,T8 as dQ,d8 as dR,Lt as dS,Kl as dT,Js as dU,j6 as dV,p4 as dW,g4 as dX,y4 as dY,K6 as dZ,Xi as d_,xl as da,k8 as db,q4 as dc,S4 as dd,L4 as de,Y4 as df,J4 as dg,_B as dh,R4 as di,Q4 as dj,Vt as dk,SB as dl,hB as dm,tE as dn,a0 as dp,Ra as dq,G6 as dr,Ht as ds,zt as dt,PB as du,$4 as dv,D4 as dw,iB as dx,t3 as dy,e3 as dz,l0 as e,r_ as e0,h8 as e1,BB as e2,DB as e3,$B as e4,J6 as e5,Y6 as e6,WB as e7,B4 as f,Cy as g,Sc as h,xB as i,Ot as j,jB as k,ct as l,pt as m,on as n,ai as o,q8 as p,L8 as q,ww as r,ht as s,qt as t,Zn as u,U8 as v,ny as w,ic as x,O4 as y,P4 as z};
//# sourceMappingURL=index-64dc6460.js.map
