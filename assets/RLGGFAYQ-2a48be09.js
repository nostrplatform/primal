var j=Object.defineProperty;var o=(n,e)=>j(n,"name",{value:e,configurable:!0});import{k as L,p as $,s as R,f as z,j as G,g as Z,q as J,l as Q,m as X}from"./index-b4296c5e.js";import{E as C,l as Y,d as I,C as V,dq as ee,o as te,W as q,dT as se}from"./index-64dc6460.js";import{d as U,a as i,t as ne}from"./5WXHJDCZ-8b9b8e69.js";import{u as le}from"./LR7LBJN3-a1aba763.js";import{c as ie}from"./index-c76cfba2.js";function oe(n,e,t,s){return n.addEventListener(e,t,s),ne(n.removeEventListener.bind(n,e,t,s))}o(oe,"makeEventListener");function ce(n,e,t,s){const l=o(()=>{U(i(n)).forEach(u=>{u&&U(i(e)).forEach(S=>oe(u,S,t,s))})},"attachListeners");typeof n=="function"?C(l):Y(l)}o(ce,"createEventListener");function _(n){let e=n.startIndex??0;const t=n.startLevel??0,s=[],l=o(a=>{if(a==null)return"";const y=n.getKey??"key",K=L(y)?a[y]:y(a);return K!=null?String(K):""},"getKey"),u=o(a=>{if(a==null)return"";const y=n.getTextValue??"textValue",K=L(y)?a[y]:y(a);return K!=null?String(K):""},"getTextValue"),S=o(a=>{if(a==null)return!1;const y=n.getDisabled??"disabled";return(L(y)?a[y]:y(a))??!1},"getDisabled"),v=o(a=>{if(a!=null)return L(n.getSectionChildren)?a[n.getSectionChildren]:n.getSectionChildren?.(a)},"getSectionChildren");for(const a of n.dataSource){if(L(a)||$(a)){s.push({type:"item",rawValue:a,key:String(a),textValue:String(a),disabled:S(a),level:t,index:e}),e++;continue}if(v(a)!=null){s.push({type:"section",rawValue:a,key:"",textValue:"",disabled:!1,level:t,index:e}),e++;const y=v(a)??[];if(y.length>0){const K=_({dataSource:y,getKey:n.getKey,getTextValue:n.getTextValue,getDisabled:n.getDisabled,getSectionChildren:n.getSectionChildren,startIndex:e,startLevel:t+1});s.push(...K),e+=K.length}}else s.push({type:"item",rawValue:a,key:l(a),textValue:u(a),disabled:S(a),level:t,index:e}),e++}return s}o(_,"buildNodes");function re(n,e=[]){return I(()=>{const t=_({dataSource:i(n.dataSource),getKey:i(n.getKey),getTextValue:i(n.getTextValue),getDisabled:i(n.getDisabled),getSectionChildren:i(n.getSectionChildren)});for(let s=0;s<e.length;s++)e[s]();return n.factory(t)})}o(re,"createCollection");var A,M=(A=class extends Set{anchorKey;currentKey;constructor(e,t,s){super(e),e instanceof A?(this.anchorKey=t||e.anchorKey,this.currentKey=s||e.currentKey):(this.anchorKey=t,this.currentKey=s)}},o(A,"_Selection"),A);function ae(n){const[e,t]=ie(n);return[o(()=>e()??new M,"value"),t]}o(ae,"createControllableSelectionSignal");function H(n){return J()?n.altKey:n.ctrlKey}o(H,"isNonContiguousSelectionModifier");function k(n){return Q()?n.metaKey:n.ctrlKey}o(k,"isCtrlKeyPressed");function N(n){return new M(n)}o(N,"convertSelection");function ue(n,e){if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}o(ue,"isSameSelection");function fe(n){const e=X({selectionMode:"none",selectionBehavior:"toggle"},n),[t,s]=V(!1),[l,u]=V(),S=I(()=>{const b=i(e.selectedKeys);return b!=null?N(b):b}),v=I(()=>{const b=i(e.defaultSelectedKeys);return b!=null?N(b):new M}),[a,y]=ae({value:S,defaultValue:v,onChange:b=>e.onSelectionChange?.(b)}),[K,F]=V(i(e.selectionBehavior)),x=o(()=>i(e.selectionMode),"selectionMode"),E=o(()=>i(e.disallowEmptySelection)??!1,"disallowEmptySelection"),T=o(b=>{(i(e.allowDuplicateSelectionEvents)||!ue(b,a()))&&y(b)},"setSelectedKeys");return C(()=>{const b=a();i(e.selectionBehavior)==="replace"&&K()==="toggle"&&typeof b=="object"&&b.size===0&&F("replace")}),C(()=>{F(i(e.selectionBehavior)??"toggle")}),{selectionMode:x,disallowEmptySelection:E,selectionBehavior:K,setSelectionBehavior:F,isFocused:t,setFocused:s,focusedKey:l,setFocusedKey:u,selectedKeys:a,setSelectedKeys:T}}o(fe,"createMultipleSelectionState");function de(n){const[e,t]=V(""),[s,l]=V(-1);return{typeSelectHandlers:{onKeyDown:o(S=>{if(i(n.isDisabled))return;const v=i(n.keyboardDelegate),a=i(n.selectionManager);if(!v.getKeyForSearch)return;const y=ye(S.key);if(!y||S.ctrlKey||S.metaKey)return;y===" "&&e().trim().length>0&&(S.preventDefault(),S.stopPropagation());let K=t(x=>x+y),F=v.getKeyForSearch(K,a.focusedKey())??v.getKeyForSearch(K);F==null&&ge(K)&&(K=K[0],F=v.getKeyForSearch(K,a.focusedKey())??v.getKeyForSearch(K)),F!=null&&(a.setFocusedKey(F),n.onTypeSelect?.(F)),clearTimeout(s()),l(window.setTimeout(()=>t(""),500))},"onKeyDown")}}}o(de,"createTypeSelect");function ye(n){return n.length===1||!/^[A-Z]/i.test(n)?n:""}o(ye,"getStringForKey");function ge(n){return n.split("").every(e=>e===n[0])}o(ge,"isAllSameLetter");function Fe(n,e,t){const l=ee({selectOnFocus:()=>i(n.selectionManager).selectionBehavior()==="replace"},n),u=o(()=>t?.()??e(),"finalScrollRef"),{direction:S}=le();let v={top:0,left:0};ce(()=>i(l.isVirtualized)?void 0:u(),"scroll",()=>{const c=u();c&&(v={top:c.scrollTop,left:c.scrollLeft})});const{typeSelectHandlers:a}=de({isDisabled:()=>i(l.disallowTypeAhead),keyboardDelegate:()=>i(l.keyboardDelegate),selectionManager:()=>i(l.selectionManager)}),y=o(()=>i(l.orientation)??"vertical","orientation"),K=o(c=>{G(c,a.onKeyDown),c.altKey&&c.key==="Tab"&&c.preventDefault();const g=e();if(!g?.contains(c.target))return;const r=i(l.selectionManager),m=i(l.selectOnFocus),h=o(d=>{d!=null&&(r.setFocusedKey(d),c.shiftKey&&r.selectionMode()==="multiple"?r.extendSelection(d):m&&!H(c)&&r.replaceSelection(d))},"navigateToKey"),f=i(l.keyboardDelegate),D=i(l.shouldFocusWrap),w=r.focusedKey();switch(c.key){case(y()==="vertical"?"ArrowDown":"ArrowRight"):{if(f.getKeyBelow){c.preventDefault();let d;w!=null?d=f.getKeyBelow(w):d=f.getFirstKey?.(),d==null&&D&&(d=f.getFirstKey?.(w)),h(d)}break}case(y()==="vertical"?"ArrowUp":"ArrowLeft"):{if(f.getKeyAbove){c.preventDefault();let d;w!=null?d=f.getKeyAbove(w):d=f.getLastKey?.(),d==null&&D&&(d=f.getLastKey?.(w)),h(d)}break}case(y()==="vertical"?"ArrowLeft":"ArrowUp"):{if(f.getKeyLeftOf){c.preventDefault();const d=S()==="rtl";let p;w!=null?p=f.getKeyLeftOf(w):p=d?f.getFirstKey?.():f.getLastKey?.(),h(p)}break}case(y()==="vertical"?"ArrowRight":"ArrowDown"):{if(f.getKeyRightOf){c.preventDefault();const d=S()==="rtl";let p;w!=null?p=f.getKeyRightOf(w):p=d?f.getLastKey?.():f.getFirstKey?.(),h(p)}break}case"Home":if(f.getFirstKey){c.preventDefault();const d=f.getFirstKey(w,k(c));d!=null&&(r.setFocusedKey(d),k(c)&&c.shiftKey&&r.selectionMode()==="multiple"?r.extendSelection(d):m&&r.replaceSelection(d))}break;case"End":if(f.getLastKey){c.preventDefault();const d=f.getLastKey(w,k(c));d!=null&&(r.setFocusedKey(d),k(c)&&c.shiftKey&&r.selectionMode()==="multiple"?r.extendSelection(d):m&&r.replaceSelection(d))}break;case"PageDown":if(f.getKeyPageBelow&&w!=null){c.preventDefault();const d=f.getKeyPageBelow(w);h(d)}break;case"PageUp":if(f.getKeyPageAbove&&w!=null){c.preventDefault();const d=f.getKeyPageAbove(w);h(d)}break;case"a":k(c)&&r.selectionMode()==="multiple"&&i(l.disallowSelectAll)!==!0&&(c.preventDefault(),r.selectAll());break;case"Escape":c.defaultPrevented||(c.preventDefault(),i(l.disallowEmptySelection)||r.clearSelection());break;case"Tab":if(!i(l.allowsTabNavigation)){if(c.shiftKey)g.focus();else{const d=Z(g,{tabbable:!0});let p,B;do B=d.lastChild(),B&&(p=B);while(B);p&&!p.contains(document.activeElement)&&z(p)}break}}},"onKeyDown"),F=o(c=>{const g=i(l.selectionManager),r=i(l.keyboardDelegate),m=i(l.selectOnFocus);if(g.isFocused()){c.currentTarget.contains(c.target)||g.setFocused(!1);return}if(c.currentTarget.contains(c.target)){if(g.setFocused(!0),g.focusedKey()==null){const h=o(D=>{D!=null&&(g.setFocusedKey(D),m&&g.replaceSelection(D))},"navigateToFirstKey"),f=c.relatedTarget;f&&c.currentTarget.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_FOLLOWING?h(g.lastSelectedKey()??r.getLastKey?.()):h(g.firstSelectedKey()??r.getFirstKey?.())}else if(!i(l.isVirtualized)){const h=u();if(h){h.scrollTop=v.top,h.scrollLeft=v.left;const f=h.querySelector(`[data-key="${g.focusedKey()}"]`);f&&(z(f),R(h,f))}}}},"onFocusIn"),x=o(c=>{const g=i(l.selectionManager);c.currentTarget.contains(c.relatedTarget)||g.setFocused(!1)},"onFocusOut"),E=o(c=>{u()===c.target&&c.preventDefault()},"onMouseDown"),T=o(()=>{const c=i(l.autoFocus);if(!c)return;const g=i(l.selectionManager),r=i(l.keyboardDelegate);let m;c==="first"&&(m=r.getFirstKey?.()),c==="last"&&(m=r.getLastKey?.());const h=g.selectedKeys();h.size&&(m=h.values().next().value),g.setFocused(!0),g.setFocusedKey(m);const f=e();f&&m==null&&!i(l.shouldUseVirtualFocus)&&z(f)},"tryAutoFocus");return te(()=>{l.deferAutoFocus?setTimeout(T,0):T()}),C(q([u,()=>i(l.isVirtualized),()=>i(l.selectionManager).focusedKey()],c=>{const[g,r,m]=c;if(r)m&&l.scrollToKey?.(m);else if(m&&g){const h=g.querySelector(`[data-key="${m}"]`);h&&R(g,h)}})),{tabIndex:I(()=>{if(!i(l.shouldUseVirtualFocus))return i(l.selectionManager).focusedKey()==null?0:-1}),onKeyDown:K,onMouseDown:E,onFocusIn:F,onFocusOut:x}}o(Fe,"createSelectableCollection");function pe(n,e){const t=o(()=>i(n.selectionManager),"manager"),s=o(()=>i(n.key),"key"),l=o(()=>i(n.shouldUseVirtualFocus),"shouldUseVirtualFocus"),u=o(r=>{t().selectionMode()!=="none"&&(t().selectionMode()==="single"?t().isSelected(s())&&!t().disallowEmptySelection()?t().toggleSelection(s()):t().replaceSelection(s()):r?.shiftKey?t().extendSelection(s()):t().selectionBehavior()==="toggle"||k(r)||"pointerType"in r&&r.pointerType==="touch"?t().toggleSelection(s()):t().replaceSelection(s()))},"onSelect"),S=o(()=>t().isSelected(s()),"isSelected"),v=o(()=>i(n.disabled)||t().isDisabled(s()),"isDisabled"),a=o(()=>!v()&&t().canSelectItem(s()),"allowsSelection");let y=null;const K=o(r=>{a()&&(y=r.pointerType,r.pointerType==="mouse"&&r.button===0&&!i(n.shouldSelectOnPressUp)&&u(r))},"onPointerDown"),F=o(r=>{a()&&r.pointerType==="mouse"&&r.button===0&&i(n.shouldSelectOnPressUp)&&i(n.allowsDifferentPressOrigin)&&u(r)},"onPointerUp"),x=o(r=>{a()&&(i(n.shouldSelectOnPressUp)&&!i(n.allowsDifferentPressOrigin)||y!=="mouse")&&u(r)},"onClick"),E=o(r=>{!a()||!["Enter"," "].includes(r.key)||(H(r)?t().toggleSelection(s()):u(r))},"onKeyDown"),T=o(r=>{v()&&r.preventDefault()},"onMouseDown"),b=o(r=>{const m=e();l()||v()||!m||r.target===m&&t().setFocusedKey(s())},"onFocus"),c=I(()=>{if(!(l()||v()))return s()===t().focusedKey()?0:-1}),g=I(()=>i(n.virtualized)?void 0:s());return C(q([e,s,l,()=>t().focusedKey(),()=>t().isFocused()],([r,m,h,f,D])=>{r&&m===f&&D&&!h&&document.activeElement!==r&&(n.focus?n.focus():z(r))})),{isSelected:S,isDisabled:v,allowsSelection:a,tabIndex:c,dataKey:g,onPointerDown:K,onPointerUp:F,onClick:x,onKeyDown:E,onMouseDown:T,onFocus:b}}o(pe,"createSelectableItem");var P,Ke=(P=class{collection;state;constructor(e,t){this.collection=e,this.state=t}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e)}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e)}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()==="none")return!1;const t=this.getKey(e);return t==null?!1:this.state.selectedKeys().has(t)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const e=this.state.selectedKeys();return this.getAllSelectableKeys().every(t=>e.has(t))}firstSelectedKey(){let e;for(const t of this.state.selectedKeys()){const s=this.collection().getItem(t),l=s?.index!=null&&e?.index!=null&&s.index<e.index;(!e||l)&&(e=s)}return e?.key}lastSelectedKey(){let e;for(const t of this.state.selectedKeys()){const s=this.collection().getItem(t),l=s?.index!=null&&e?.index!=null&&s.index>e.index;(!e||l)&&(e=s)}return e?.key}extendSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const s=this.state.selectedKeys(),l=s.anchorKey||t,u=new M(s,l,t);for(const S of this.getKeyRange(l,s.currentKey||t))u.delete(S);for(const S of this.getKeyRange(t,l))this.canSelectItem(S)&&u.add(S);this.state.setSelectedKeys(u)}getKeyRange(e,t){const s=this.collection().getItem(e),l=this.collection().getItem(t);return s&&l?s.index!=null&&l.index!=null&&s.index<=l.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){const s=[];let l=e;for(;l!=null;){const u=this.collection().getItem(l);if(u&&u.type==="item"&&s.push(l),l===t)return s;l=this.collection().getKeyAfter(l)}return[]}getKey(e){const t=this.collection().getItem(e);return t?!t||t.type!=="item"?null:t.key:e}toggleSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const s=new M(this.state.selectedKeys());s.has(t)?s.delete(t):this.canSelectItem(t)&&(s.add(t),s.anchorKey=t,s.currentKey=t),!(this.disallowEmptySelection()&&s.size===0)&&this.state.setSelectedKeys(s)}replaceSelection(e){if(this.selectionMode()==="none")return;const t=this.getKey(e);if(t==null)return;const s=this.canSelectItem(t)?new M([t],t,t):new M;this.state.setSelectedKeys(s)}setSelectedKeys(e){if(this.selectionMode()==="none")return;const t=new M;for(const s of e){const l=this.getKey(s);if(l!=null&&(t.add(l),this.selectionMode()==="single"))break}this.state.setSelectedKeys(t)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new M)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()==="toggle"||t&&t.pointerType==="touch"?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys())return!0;const t=this.selectedKeys();if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;for(const s of t)if(!e.has(s))return!1;return!0}canSelectItem(e){if(this.state.selectionMode()==="none")return!1;const t=this.collection().getItem(e);return t!=null&&!t.disabled}isDisabled(e){const t=this.collection().getItem(e);return!t||t.disabled}getAllSelectableKeys(){const e=[];return o(s=>{for(;s!=null;){if(this.canSelectItem(s)){const l=this.collection().getItem(s);if(!l)continue;l.type==="item"&&e.push(s)}s=this.collection().getKeyAfter(s)}},"addKeys")(this.collection().getFirstKey()),e}},o(P,"SelectionManager"),P),O,W=(O=class{keyMap=new Map;iterable;firstKey;lastKey;constructor(e){this.iterable=e;for(const l of e)this.keyMap.set(l.key,l);if(this.keyMap.size===0)return;let t,s=0;for(const[l,u]of this.keyMap)t?(t.nextKey=l,u.prevKey=t.key):(this.firstKey=l,u.prevKey=void 0),u.type==="item"&&(u.index=s++),t=u,t.nextKey=void 0;this.lastKey=t.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){return this.keyMap.get(e)?.prevKey}getKeyAfter(e){return this.keyMap.get(e)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}},o(O,"ListCollection"),O);function Me(n){const e=fe(n),s=re({dataSource:()=>i(n.dataSource),getKey:()=>i(n.getKey),getTextValue:()=>i(n.getTextValue),getDisabled:()=>i(n.getDisabled),getSectionChildren:()=>i(n.getSectionChildren),factory:o(u=>n.filter?new W(n.filter(u)):new W(u),"factory")},[()=>n.filter]),l=new Ke(s,e);return se(()=>{const u=e.focusedKey();u!=null&&!s().getItem(u)&&e.setFocusedKey(void 0)}),{collection:s,selectionManager:()=>l}}o(Me,"createListState");export{M as S,pe as a,Me as b,Fe as c,de as d,ue as i};
//# sourceMappingURL=RLGGFAYQ-2a48be09.js.map
