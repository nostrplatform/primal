var T=Object.defineProperty;var a=(n,i)=>T(n,"name",{value:i,configurable:!0});import{h as k,g as I,C,E as K,c,j as o,aw as _,l as M,m as f,q as A,s as U,t as S,ax as D,dc as O}from"./index-64dc6460.js";import{B as V}from"./ButtonPrimary-1f64caa8.js";import{T as E}from"./TextInput-e0ece469.js";import{B as W}from"./ButtonSecondary-cc5e2282.js";import{A as j}from"./AdvancedSearchDialog-eff41eef.js";const q="_modal_wig6d_1",F="_title_wig6d_9",N="_description_wig6d_16",z="_inputs_wig6d_23",G="_actions_wig6d_26",H="_alternative_wig6d_36",J="_hidden_wig6d_44",l={modal:q,title:F,description:N,inputs:z,actions:G,alternative:H,hidden:J},L=S("<div><div></div><div>"),Q=S("<div>"),X=a(n=>{const i=I();let m;const[r,b]=C(""),[P,x]=C(""),B=a(async()=>{const t=n.valueToEncrypt||"";return await O(r(),t)},"encWithPin"),h=a(async()=>{if(!u||!g())return;const t=await B();D(r()),n.onPinApplied&&n.onPinApplied(t)},"onSetPin"),R=a(()=>{n.onPinApplied&&n.onPinApplied(n.valueToEncrypt||"")},"onOptout");K(()=>{n.open&&m?.focus()});const u=a(()=>r().length>3,"isValidPin"),g=a(()=>P()===r(),"isValidRePin"),p=a(t=>{t.code==="Enter"&&u()&&g()&&h()},"onKeyUp");return c(j,{get open(){return n.open},setOpen:t=>!t&&n.onAbort&&n.onAbort(),get title(){return(()=>{const t=Q();return o(t,()=>i.formatMessage(_.title)),M(()=>f(t,l.title)),t})()},get triggerClass(){return l.hidden},get children(){const t=L(),s=t.firstChild,v=s.nextSibling;return o(t,c(E,{type:"password",ref(e){const d=m;typeof d=="function"?d(e):m=e},get value(){return r()},onKeyUp:p,onChange:e=>b(e),get validationState(){return r().length===0||u()?"valid":"invalid"},get errorMessage(){return i.formatMessage(_.invalidPin)}}),s),o(s,()=>i.formatMessage(_.reEnter)),o(t,c(E,{type:"password",get value(){return P()},onKeyUp:p,onChange:e=>x(e),get validationState(){return P().length===0||g()?"valid":"invalid"},get errorMessage(){return i.formatMessage(_.invalidRePin)}}),v),o(v,c(V,{onClick:h,get disabled(){return!u()||!g()},get children(){return i.formatMessage(A.createPin)}}),null),o(v,c(W,{onClick:R,light:!0,get children(){return i.formatMessage(A.optoutPin)}}),null),M(e=>{const d=n.id,$=l.modal,y=l.description,w=l.actions;return d!==e._v$&&U(t,"id",e._v$=d),$!==e._v$2&&f(t,e._v$2=$),y!==e._v$3&&f(s,e._v$3=y),w!==e._v$4&&f(v,e._v$4=w),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t}})},"CreatePinModal"),at=k(X);export{at as C};
//# sourceMappingURL=CreatePinModal-3a4f5174.js.map
